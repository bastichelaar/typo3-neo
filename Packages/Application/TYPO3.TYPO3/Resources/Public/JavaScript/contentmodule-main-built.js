/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */

/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================
// ..........................................................
// GUIDS
//

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2010 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Metal
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

/**
 * @license
 * ==========================================================================
 * Ember
 * Copyright ©2006-2011, Strobe Inc. and contributors.
 * Portions copyright ©2008-2011 Apple Inc. All rights reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 *
 * For more information about Ember, visit http://www.emberjs.com
 *
 * ==========================================================================
 */

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================
// ..........................................................
// HELPERS
//

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2010 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2010 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================
// ..........................................................
// CONSTANTS
//

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Runtime
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:  Ember Statecharts
// Copyright: ©2011 Living Social Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   metamorph
// Copyright: ©2011 My Company Inc. All rights reserved.
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember Handlebar Views
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

// ==========================================================================
// Project:   Ember
// Copyright: ©2011 Strobe Inc. and contributors.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

/*! jQuery UI - v1.9.0-beta.1 - 2012-06-28
* https://github.com/jquery/jquery-ui
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright (c) 2012 AUTHORS.txt; Licensed MIT, GPL */

/*!
 * jQuery Color Animations
 * http://jquery.org/
 *
 * Copyright 2012 John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */

// Underscore.js 1.3.1
// (c) 2009-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Underscore is freely distributable under the MIT license.
// Portions of Underscore are inspired or borrowed from Prototype,
// Oliver Steele's Functional, and John Resig's Micro-Templating.
// For all details and documentation:
// http://documentcloud.github.com/underscore

// (c) 2010-2012 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://backbonejs.org

/*

Copyright (c) 2011 Henri Bergius, IKS Consortium
Copyright (c) 2011 Sebastian Germesin, IKS Consortium

Permission is hereby granted, free of charge, to any person
obtaining a copy of this software and associated documentation
files (the "Software"), to deal in the Software without
restriction, including without limitation the rights to use,
copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the
Software is furnished to do so, subject to the following
conditions:

The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER DEALINGS IN THE SOFTWARE.
*/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/
//

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/
//

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

//     VIE - Vienna IKS Editables
//     (c) 2011 Henri Bergius, IKS Consortium
//     (c) 2011 Sebastian Germesin, IKS Consortium
//     (c) 2011 Szaby Grünwald, IKS Consortium
//     VIE may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://viejs.org/

/*
Hallo 1.0.1dev - a rich text editing jQuery UI widget
(c) 2011 Henri Bergius, IKS Consortium
Hallo may be freely distributed under the MIT license
http://hallojs.org
*/

/**
 * @license RequireJS text 2.0.0 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*
 Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Copyright 2012, Tim Down
 Licensed under the MIT license.
 Version: 1.2.3
 Build date: 26 February 2012
*/

//     Create.js 1.0.0alpha4 - On-site web editing interface
//     (c) 2011-2012 Henri Bergius, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2011-2012 Henri Bergius, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2011-2012 Henri Bergius, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2011-2012 Henri Bergius, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2012 Tobias Herrmann, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2012 Tobias Herrmann, IKS Consortium
//     (c) 2011 Rene Kapusta, Evo42
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2012 Tobias Herrmann, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2012 Jerry Jalava, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2011-2012 Henri Bergius, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

//     Create.js - On-site web editing interface
//     (c) 2012 Jerry Jalava, IKS Consortium
//     Create may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://createjs.org/

/**
 * jquery.Jcrop.min.js v0.9.10 (build:20120429)
 * jQuery Image Cropping Plugin - released under MIT License
 * Copyright (c) 2008-2012 Tapmodo Interactive LLC
 * https://github.com/tapmodo/Jcrop
 */

/**
 * plupload.html5.js
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 */

/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

/*************************************************************************
	jquery.dynatree.js
	Dynamic tree view control, with support for lazy loading of branches.

	Copyright (c) 2006-2012, Martin Wendt (http://wwWendt.de)
	Dual licensed under the MIT or GPL Version 2 licenses.
	http://code.google.com/p/dynatree/wiki/LicenseInfo

	A current version and some documentation is available at
		http://dynatree.googlecode.com/

	$Version: 1.2.1$
	$Revision: 606, 2012-06-12 08:10:04$

	@depends: jquery.js
	@depends: jquery.ui.core.js
	@depends: jquery.cookie.js
*************************************************************************/

/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
*/

function CanvasIndicator(el,opt){this.ctx=el.getContext("2d"),this.currentOffset=0;var defaults={bars:11,innerRadius:4,size:[2,5],rgb:[255,255,255],fps:10};typeof opt=="object"&&(defaults.bars=opt.bars?opt.bars:defaults.bars,defaults.innerRadius=opt.innerRadius?opt.innerRadius:defaults.innerRadius,defaults.size=opt.size?opt.size:defaults.size,defaults.rgb=opt.rgb?opt.rgb:defaults.rgb,defaults.fps=opt.fps?opt.fps:defaults.fps),this.opt=defaults,this.w=this.opt.size[1]+this.opt.innerRadius,el.setAttribute("width",this.w*2),el.setAttribute("height",this.w*2),function e(obj){obj.currentOffset=(obj.currentOffset+1)%obj.opt.bars,obj.draw(obj.currentOffset),setTimeout(function(){nextAnimation(obj)},1e3/obj.opt.fps)}(this)}function _log(mode,msg){if(!_canLog)return;var args=Array.prototype.slice.apply(arguments,[1]),dt=new Date,tag=dt.getHours()+":"+dt.getMinutes()+":"+dt.getSeconds()+"."+dt.getMilliseconds();args[0]=tag+" - "+args[0];try{switch(mode){case"info":window.console.info.apply(window.console,args);break;case"warn":window.console.warn.apply(window.console,args);break;default:window.console.log.apply(window.console,args)}}catch(e){window.console||(_canLog=!1)}}function logMsg(msg){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}(function(window,undefined){function createFlags(flags){var object=flagsCache[flags]={},i,length;flags=flags.split(/\s+/);for(i=0,length=flags.length;i<length;i++)object[flags[i]]=!0;return object}function dataAttr(elem,key,data){if(data===undefined&&elem.nodeType===1){var name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data=="string"){try{data=data==="true"?!0:data==="false"?!1:data==="null"?null:jQuery.isNumeric(data)?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}jQuery.data(elem,key,data)}else data=undefined}return data}function isEmptyDataObject(obj){for(var name in obj){if(name==="data"&&jQuery.isEmptyObject(obj[name]))continue;if(name!=="toJSON")return!1}return!0}function handleQueueMarkDefer(elem,type,src){var deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",defer=jQuery._data(elem,deferDataKey);defer&&(src==="queue"||!jQuery._data(elem,queueDataKey))&&(src==="mark"||!jQuery._data(elem,markDataKey))&&setTimeout(function(){!jQuery._data(elem,queueDataKey)&&!jQuery._data(elem,markDataKey)&&(jQuery.removeData(elem,deferDataKey,!0),defer.fire())},0)}function returnFalse(){return!1}function returnTrue(){return!0}function isDisconnected(node){return!node||!node.parentNode||node.parentNode.nodeType===11}function winnow(elements,qualifier,keep){qualifier=qualifier||0;if(jQuery.isFunction(qualifier))return jQuery.grep(elements,function(elem,i){var retVal=!!qualifier.call(elem,i,elem);return retVal===keep});if(qualifier.nodeType)return jQuery.grep(elements,function(elem,i){return elem===qualifier===keep});if(typeof qualifier=="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier))return jQuery.filter(qualifier,filtered,!keep);qualifier=jQuery.filter(qualifier,filtered)}return jQuery.grep(elements,function(elem,i){return jQuery.inArray(elem,qualifier)>=0===keep})}function createSafeFragment(document){var list=nodeNames.split("|"),safeFrag=document.createDocumentFragment();if(safeFrag.createElement)while(list.length)safeFrag.createElement(list.pop());return safeFrag}function root(elem,cur){return jQuery.nodeName(elem,"table")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function cloneCopyEvent(src,dest){if(dest.nodeType!==1||!jQuery.hasData(src))return;var type,i,l,oldData=jQuery._data(src),curData=jQuery._data(dest,oldData),events=oldData.events;if(events){delete curData.handle,curData.events={};for(type in events)for(i=0,l=events[type].length;i<l;i++)jQuery.event.add(dest,type,events[type][i])}curData.data&&(curData.data=jQuery.extend({},curData.data))}function cloneFixAttributes(src,dest){var nodeName;if(dest.nodeType!==1)return;dest.clearAttributes&&dest.clearAttributes(),dest.mergeAttributes&&dest.mergeAttributes(src),nodeName=dest.nodeName.toLowerCase(),nodeName==="object"?dest.outerHTML=src.outerHTML:nodeName!=="input"||src.type!=="checkbox"&&src.type!=="radio"?nodeName==="option"?dest.selected=src.defaultSelected:nodeName==="input"||nodeName==="textarea"?dest.defaultValue=src.defaultValue:nodeName==="script"&&dest.text!==src.text&&(dest.text=src.text):(src.checked&&(dest.defaultChecked=dest.checked=src.checked),dest.value!==src.value&&(dest.value=src.value)),dest.removeAttribute(jQuery.expando),dest.removeAttribute("_submit_attached"),dest.removeAttribute("_change_attached")}function getAll(elem){return typeof elem.getElementsByTagName!="undefined"?elem.getElementsByTagName("*"):typeof elem.querySelectorAll!="undefined"?elem.querySelectorAll("*"):[]}function fixDefaultChecked(elem){if(elem.type==="checkbox"||elem.type==="radio")elem.defaultChecked=elem.checked}function findInputs(elem){var nodeName=(elem.nodeName||"").toLowerCase();nodeName==="input"?fixDefaultChecked(elem):nodeName!=="script"&&typeof elem.getElementsByTagName!="undefined"&&jQuery.grep(elem.getElementsByTagName("input"),fixDefaultChecked)}function shimCloneNode(elem){var div=document.createElement("div");return safeFragment.appendChild(div),div.innerHTML=elem.outerHTML,div.firstChild}function getWidthOrHeight(elem,name,extra){var val=name==="width"?elem.offsetWidth:elem.offsetHeight,i=name==="width"?1:0,len=4;if(val>0){if(extra!=="border")for(;i<len;i+=2)extra||(val-=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0),extra==="margin"?val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0:val-=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0;return val+"px"}val=curCSS(elem,name);if(val<0||val==null)val=elem.style[name];if(rnumnonpx.test(val))return val;val=parseFloat(val)||0;if(extra)for(;i<len;i+=2)val+=parseFloat(jQuery.css(elem,"padding"+cssExpand[i]))||0,extra!=="padding"&&(val+=parseFloat(jQuery.css(elem,"border"+cssExpand[i]+"Width"))||0),extra==="margin"&&(val+=parseFloat(jQuery.css(elem,extra+cssExpand[i]))||0);return val+"px"}function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){typeof dataTypeExpression!="string"&&(func=dataTypeExpression,dataTypeExpression="*");if(jQuery.isFunction(func)){var dataTypes=dataTypeExpression.toLowerCase().split(rspacesAjax),i=0,length=dataTypes.length,dataType,list,placeBefore;for(;i<length;i++)dataType=dataTypes[i],placeBefore=/^\+/.test(dataType),placeBefore&&(dataType=dataType.substr(1)||"*"),list=structure[dataType]=structure[dataType]||[],list[placeBefore?"unshift":"push"](func)}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,dataType,inspected){dataType=dataType||options.dataTypes[0],inspected=inspected||{},inspected[dataType]=!0;var list=structure[dataType],i=0,length=list?list.length:0,executeOnly=structure===prefilters,selection;for(;i<length&&(executeOnly||!selection);i++)selection=list[i](options,originalOptions,jqXHR),typeof selection=="string"&&(!executeOnly||inspected[selection]?selection=undefined:(options.dataTypes.unshift(selection),selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,selection,inspected)));return(executeOnly||!selection)&&!inspected["*"]&&(selection=inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR,"*",inspected)),selection}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src)src[key]!==undefined&&((flatOptions[key]?target:deep||(deep={}))[key]=src[key]);deep&&jQuery.extend(!0,target,deep)}function buildParams(prefix,obj,traditional,add){if(jQuery.isArray(obj))jQuery.each(obj,function(i,v){traditional||rbracket.test(prefix)?add(prefix,v):buildParams(prefix+"["+(typeof v=="object"?i:"")+"]",v,traditional,add)});else if(!traditional&&jQuery.type(obj)==="object")for(var name in obj)buildParams(prefix+"["+name+"]",obj[name],traditional,add);else add(prefix,obj)}function ajaxHandleResponses(s,jqXHR,responses){var contents=s.contents,dataTypes=s.dataTypes,responseFields=s.responseFields,ct,type,finalDataType,firstDataType;for(type in responseFields)type in responses&&(jqXHR[responseFields[type]]=responses[type]);while(dataTypes[0]==="*")dataTypes.shift(),ct===undefined&&(ct=s.mimeType||jqXHR.getResponseHeader("content-type"));if(ct)for(type in contents)if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}if(dataTypes[0]in responses)finalDataType=dataTypes[0];else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}firstDataType||(firstDataType=type)}finalDataType=finalDataType||firstDataType}if(finalDataType)return finalDataType!==dataTypes[0]&&dataTypes.unshift(finalDataType),responses[finalDataType]}function ajaxConvert(s,response){s.dataFilter&&(response=s.dataFilter(response,s.dataType));var dataTypes=s.dataTypes,converters={},i,key,length=dataTypes.length,tmp,current=dataTypes[0],prev,conversion,conv,conv1,conv2;for(i=1;i<length;i++){if(i===1)for(key in s.converters)typeof key=="string"&&(converters[key.toLowerCase()]=s.converters[key]);prev=current,current=dataTypes[i];if(current==="*")current=prev;else if(prev!=="*"&&prev!==current){conversion=prev+" "+current,conv=converters[conversion]||converters["* "+current];if(!conv){conv2=undefined;for(conv1 in converters){tmp=conv1.split(" ");if(tmp[0]===prev||tmp[0]==="*"){conv2=converters[tmp[1]+" "+current];if(conv2){conv1=converters[conv1],conv1===!0?conv=conv2:conv2===!0&&(conv=conv1);break}}}}!conv&&!conv2&&jQuery.error("No conversion from "+conversion.replace(" "," to ")),conv!==!0&&(response=conv?conv(response):conv2(conv1(response)))}}return response}function createStandardXHR(){try{return new window.XMLHttpRequest}catch(e){}}function createActiveXHR(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function createFxNow(){return setTimeout(clearFxNow,0),fxNow=jQuery.now()}function clearFxNow(){fxNow=undefined}function genFx(type,num){var obj={};return jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type}),obj}function defaultDisplay(nodeName){if(!elemdisplay[nodeName]){var body=document.body,elem=jQuery("<"+nodeName+">").appendTo(body),display=elem.css("display");elem.remove();if(display==="none"||display===""){iframe||(iframe=document.createElement("iframe"),iframe.frameBorder=iframe.width=iframe.height=0),body.appendChild(iframe);if(!iframeDoc||!iframe.createElement)iframeDoc=(iframe.contentWindow||iframe.contentDocument).document,iframeDoc.write((jQuery.support.boxModel?"<!doctype html>":"")+"<html><body>"),iframeDoc.close();elem=iframeDoc.createElement(nodeName),iframeDoc.body.appendChild(elem),display=jQuery.css(elem,"display"),body.removeChild(iframe)}elemdisplay[nodeName]=display}return elemdisplay[nodeName]}function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:!1}var document=window.document,navigator=window.navigator,location=window.location,jQuery=function(){function doScrollCheck(){if(jQuery.isReady)return;try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollCheck,1);return}jQuery.ready()}var jQuery=function(selector,context){return new jQuery.fn.init(selector,context,rootjQuery)},_jQuery=window.jQuery,_$=window.$,rootjQuery,quickExpr=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,rnotwhite=/\S/,trimLeft=/^\s+/,trimRight=/\s+$/,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,rvalidchars=/^[\],:{}\s]*$/,rvalidescape=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rvalidtokens=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rvalidbraces=/(?:^|:|,)(?:\s*\[)+/g,rwebkit=/(webkit)[ \/]([\w.]+)/,ropera=/(opera)(?:.*version)?[ \/]([\w.]+)/,rmsie=/(msie) ([\w.]+)/,rmozilla=/(mozilla)(?:.*? rv:([\w.]+))?/,rdashAlpha=/-([a-z]|[0-9])/ig,rmsPrefix=/^-ms-/,fcamelCase=function(all,letter){return(letter+"").toUpperCase()},userAgent=navigator.userAgent,browserMatch,readyList,DOMContentLoaded,toString=Object.prototype.toString,hasOwn=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,trim=String.prototype.trim,indexOf=Array.prototype.indexOf,class2type={};return jQuery.fn=jQuery.prototype={constructor:jQuery,init:function(selector,context,rootjQuery){var match,elem,ret,doc;if(!selector)return this;if(selector.nodeType)return this.context=this[0]=selector,this.length=1,this;if(selector==="body"&&!context&&document.body)return this.context=document,this[0]=document.body,this.selector=selector,this.length=1,this;if(typeof selector=="string"){selector.charAt(0)==="<"&&selector.charAt(selector.length-1)===">"&&selector.length>=3?match=[null,selector,null]:match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1])return context=context instanceof jQuery?context[0]:context,doc=context?context.ownerDocument||context:document,ret=rsingleTag.exec(selector),ret?jQuery.isPlainObject(context)?(selector=[document.createElement(ret[1])],jQuery.fn.attr.call(selector,context,!0)):selector=[doc.createElement(ret[1])]:(ret=jQuery.buildFragment([match[1]],[doc]),selector=(ret.cacheable?jQuery.clone(ret.fragment):ret.fragment).childNodes),jQuery.merge(this,selector);elem=document.getElementById(match[2]);if(elem&&elem.parentNode){if(elem.id!==match[2])return rootjQuery.find(selector);this.length=1,this[0]=elem}return this.context=document,this.selector=selector,this}return!context||context.jquery?(context||rootjQuery).find(selector):this.constructor(context).find(selector)}return jQuery.isFunction(selector)?rootjQuery.ready(selector):(selector.selector!==undefined&&(this.selector=selector.selector,this.context=selector.context),jQuery.makeArray(selector,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return num==null?this.toArray():num<0?this[this.length+num]:this[num]},pushStack:function(elems,name,selector){var ret=this.constructor();return jQuery.isArray(elems)?push.apply(ret,elems):jQuery.merge(ret,elems),ret.prevObject=this,ret.context=this.context,name==="find"?ret.selector=this.selector+(this.selector?" ":"")+selector:name&&(ret.selector=this.selector+"."+name+"("+selector+")"),ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn){return jQuery.bindReady(),readyList.add(fn),this},eq:function(i){return i=+i,i===-1?this.slice(i):this.slice(i,i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:[].sort,splice:[].splice},jQuery.fn.init.prototype=jQuery.fn,jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=!1;typeof target=="boolean"&&(deep=target,target=arguments[1]||{},i=2),typeof target!="object"&&!jQuery.isFunction(target)&&(target={}),length===i&&(target=this,--i);for(;i<length;i++)if((options=arguments[i])!=null)for(name in options){src=target[name],copy=options[name];if(target===copy)continue;deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))?(copyIsArray?(copyIsArray=!1,clone=src&&jQuery.isArray(src)?src:[]):clone=src&&jQuery.isPlainObject(src)?src:{},target[name]=jQuery.extend(deep,clone,copy)):copy!==undefined&&(target[name]=copy)}return target},jQuery.extend({noConflict:function(deep){return window.$===jQuery&&(window.$=_$),deep&&window.jQuery===jQuery&&(window.jQuery=_jQuery),jQuery},isReady:!1,readyWait:1,holdReady:function(hold){hold?jQuery.readyWait++:jQuery.ready(!0)},ready:function(wait){if(wait===!0&&!--jQuery.readyWait||wait!==!0&&!jQuery.isReady){if(!document.body)return setTimeout(jQuery.ready,1);jQuery.isReady=!0;if(wait!==!0&&--jQuery.readyWait>0)return;readyList.fireWith(document,[jQuery]),jQuery.fn.trigger&&jQuery(document).trigger("ready").off("ready")}},bindReady:function(){if(readyList)return;readyList=jQuery.Callbacks("once memory");if(document.readyState==="complete")return setTimeout(jQuery.ready,1);if(document.addEventListener)document.addEventListener("DOMContentLoaded",DOMContentLoaded,!1),window.addEventListener("load",jQuery.ready,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded),window.attachEvent("onload",jQuery.ready);var toplevel=!1;try{toplevel=window.frameElement==null}catch(e){}document.documentElement.doScroll&&toplevel&&doScrollCheck()}},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray||function(obj){return jQuery.type(obj)==="array"},isWindow:function(obj){return obj!=null&&obj==obj.window},isNumeric:function(obj){return!isNaN(parseFloat(obj))&&isFinite(obj)},type:function(obj){return obj==null?String(obj):class2type[toString.call(obj)]||"object"},isPlainObject:function(obj){if(!obj||jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj))return!1;try{if(obj.constructor&&!hasOwn.call(obj,"constructor")&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var key;for(key in obj);return key===undefined||hasOwn.call(obj,key)},isEmptyObject:function(obj){for(var name in obj)return!1;return!0},error:function(msg){throw new Error(msg)},parseJSON:function(data){if(typeof data!="string"||!data)return null;data=jQuery.trim(data);if(window.JSON&&window.JSON.parse)return window.JSON.parse(data);if(rvalidchars.test(data.replace(rvalidescape,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return(new Function("return "+data))();jQuery.error("Invalid JSON: "+data)},parseXML:function(data){if(typeof data!="string"||!data)return null;var xml,tmp;try{window.DOMParser?(tmp=new DOMParser,xml=tmp.parseFromString(data,"text/xml")):(xml=new ActiveXObject("Microsoft.XMLDOM"),xml.async="false",xml.loadXML(data))}catch(e){xml=undefined}return(!xml||!xml.documentElement||xml.getElementsByTagName("parsererror").length)&&jQuery.error("Invalid XML: "+data),xml},noop:function(){},globalEval:function(data){data&&rnotwhite.test(data)&&(window.execScript||function(data){window.eval.call(window,data)})(data)},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object)if(callback.apply(object[name],args)===!1)break}else for(;i<length;)if(callback.apply(object[i++],args)===!1)break}else if(isObj){for(name in object)if(callback.call(object[name],name,object[name])===!1)break}else for(;i<length;)if(callback.call(object[i],i,object[i++])===!1)break;return object},trim:trim?function(text){return text==null?"":trim.call(text)}:function(text){return text==null?"":text.toString().replace(trimLeft,"").replace(trimRight,"")},makeArray:function(array,results){var ret=results||[];if(array!=null){var type=jQuery.type(array);array.length==null||type==="string"||type==="function"||type==="regexp"||jQuery.isWindow(array)?push.call(ret,array):jQuery.merge(ret,array)}return ret},inArray:function(elem,array,i){var len;if(array){if(indexOf)return indexOf.call(array,elem,i);len=array.length,i=i?i<0?Math.max(0,len+i):i:0;for(;i<len;i++)if(i in array&&array[i]===elem)return i}return-1},merge:function(first,second){var i=first.length,j=0;if(typeof second.length=="number")for(var l=second.length;j<l;j++)first[i++]=second[j];else while(second[j]!==undefined)first[i++]=second[j++];return first.length=i,first},grep:function(elems,callback,inv){var ret=[],retVal;inv=!!inv;for(var i=0,length=elems.length;i<length;i++)retVal=!!callback(elems[i],i),inv!==retVal&&ret.push(elems[i]);return ret},map:function(elems,callback,arg){var value,key,ret=[],i=0,length=elems.length,isArray=elems instanceof jQuery||length!==undefined&&typeof length=="number"&&(length>0&&elems[0]&&elems[length-1]||length===0||jQuery.isArray(elems));if(isArray)for(;i<length;i++)value=callback(elems[i],i,arg),value!=null&&(ret[ret.length]=value);else for(key in elems)value=callback(elems[key],key,arg),value!=null&&(ret[ret.length]=value);return ret.concat.apply([],ret)},guid:1,proxy:function(fn,context){if(typeof context=="string"){var tmp=fn[context];context=fn,fn=tmp}if(!jQuery.isFunction(fn))return undefined;var args=slice.call(arguments,2),proxy=function(){return fn.apply(context,args.concat(slice.call(arguments)))};return proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++,proxy},access:function(elems,fn,key,value,chainable,emptyGet,pass){var exec,bulk=key==null,i=0,length=elems.length;if(key&&typeof key=="object"){for(i in key)jQuery.access(elems,fn,i,key[i],1,emptyGet,value);chainable=1}else if(value!==undefined){exec=pass===undefined&&jQuery.isFunction(value),bulk&&(exec?(exec=fn,fn=function(elem,key,value){return exec.call(jQuery(elem),value)}):(fn.call(elems,value),fn=null));if(fn)for(;i<length;i++)fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass);chainable=1}return chainable?elems:bulk?fn.call(elems):length?fn(elems[0],key):emptyGet},now:function(){return(new Date).getTime()},uaMatch:function(ua){ua=ua.toLowerCase();var match=rwebkit.exec(ua)||ropera.exec(ua)||rmsie.exec(ua)||ua.indexOf("compatible")<0&&rmozilla.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},sub:function(){function jQuerySub(selector,context){return new jQuerySub.fn.init(selector,context)}jQuery.extend(!0,jQuerySub,this),jQuerySub.superclass=this,jQuerySub.fn=jQuerySub.prototype=this(),jQuerySub.fn.constructor=jQuerySub,jQuerySub.sub=this.sub,jQuerySub.fn.init=function(selector,context){return context&&context instanceof jQuery&&!(context instanceof jQuerySub)&&(context=jQuerySub(context)),jQuery.fn.init.call(this,selector,context,rootjQuerySub)},jQuerySub.fn.init.prototype=jQuerySub.fn;var rootjQuerySub=jQuerySub(document);return jQuerySub},browser:{}}),jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()}),browserMatch=jQuery.uaMatch(userAgent),browserMatch.browser&&(jQuery.browser[browserMatch.browser]=!0,jQuery.browser.version=browserMatch.version),jQuery.browser.webkit&&(jQuery.browser.safari=!0),rnotwhite.test(" ")&&(trimLeft=/^[\s\xA0]+/,trimRight=/[\s\xA0]+$/),rootjQuery=jQuery(document),document.addEventListener?DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,!1),jQuery.ready()}:document.attachEvent&&(DOMContentLoaded=function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",DOMContentLoaded),jQuery.ready())}),jQuery}(),flagsCache={};jQuery.Callbacks=function(flags){flags=flags?flagsCache[flags]||createFlags(flags):{};var list=[],stack=[],memory,fired,firing,firingStart,firingLength,firingIndex,add=function(args){var i,length,elem,type,actual;for(i=0,length=args.length;i<length;i++)elem=args[i],type=jQuery.type(elem),type==="array"?add(elem):type==="function"&&(!flags.unique||!self.has(elem))&&list.push(elem)},fire=function(context,args){args=args||[],memory=!flags.memory||[context,args],fired=!0,firing=!0,firingIndex=firingStart||0,firingStart=0,firingLength=list.length;for(;list&&firingIndex<firingLength;firingIndex++)if(list[firingIndex].apply(context,args)===!1&&flags.stopOnFalse){memory=!0;break}firing=!1,list&&(flags.once?memory===!0?self.disable():list=[]:stack&&stack.length&&(memory=stack.shift(),self.fireWith(memory[0],memory[1])))},self={add:function(){if(list){var length=list.length;add(arguments),firing?firingLength=list.length:memory&&memory!==!0&&(firingStart=length,fire(memory[0],memory[1]))}return this},remove:function(){if(list){var args=arguments,argIndex=0,argLength=args.length;for(;argIndex<argLength;argIndex++)for(var i=0;i<list.length;i++)if(args[argIndex]===list[i]){firing&&i<=firingLength&&(firingLength--,i<=firingIndex&&firingIndex--),list.splice(i--,1);if(flags.unique)break}}return this},has:function(fn){if(list){var i=0,length=list.length;for(;i<length;i++)if(fn===list[i])return!0}return!1},empty:function(){return list=[],this},disable:function(){return list=stack=memory=undefined,this},disabled:function(){return!list},lock:function(){return stack=undefined,(!memory||memory===!0)&&self.disable(),this},locked:function(){return!stack},fireWith:function(context,args){return stack&&(firing?flags.once||stack.push([context,args]):(!flags.once||!memory)&&fire(context,args)),this},fire:function(){return self.fireWith(this,arguments),this},fired:function(){return!!fired}};return self};var sliceDeferred=[].slice;jQuery.extend({Deferred:function(func){var doneList=jQuery.Callbacks("once memory"),failList=jQuery.Callbacks("once memory"),progressList=jQuery.Callbacks("memory"),state="pending",lists={resolve:doneList,reject:failList,notify:progressList},promise={done:doneList.add,fail:failList.add,progress:progressList.add,state:function(){return state},isResolved:doneList.fired,isRejected:failList.fired,then:function(doneCallbacks,failCallbacks,progressCallbacks){return deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks),this},always:function(){return deferred.done.apply(deferred,arguments).fail.apply(deferred,arguments),this},pipe:function(fnDone,fnFail,fnProgress){return jQuery.Deferred(function(newDefer){jQuery.each({done:[fnDone,"resolve"],fail:[fnFail,"reject"],progress:[fnProgress,"notify"]},function(handler,data){var fn=data[0],action=data[1],returned;jQuery.isFunction(fn)?deferred[handler](function(){returned=fn.apply(this,arguments),returned&&jQuery.isFunction(returned.promise)?returned.promise().then(newDefer.resolve,newDefer.reject,newDefer.notify):newDefer[action+"With"](this===deferred?newDefer:this,[returned])}):deferred[handler](newDefer[action])})}).promise()},promise:function(obj){if(obj==null)obj=promise;else for(var key in promise)obj[key]=promise[key];return obj}},deferred=promise.promise({}),key;for(key in lists)deferred[key]=lists[key].fire,deferred[key+"With"]=lists[key].fireWith;return deferred.done(function(){state="resolved"},failList.disable,progressList.lock).fail(function(){state="rejected"},doneList.disable,progressList.lock),func&&func.call(deferred,deferred),deferred},when:function(firstParam){function resolveFunc(i){return function(value){args[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,--count||deferred.resolveWith(deferred,args)}}function progressFunc(i){return function(value){pValues[i]=arguments.length>1?sliceDeferred.call(arguments,0):value,deferred.notifyWith(promise,pValues)}}var args=sliceDeferred.call(arguments,0),i=0,length=args.length,pValues=new Array(length),count=length,pCount=length,deferred=length<=1&&firstParam&&jQuery.isFunction(firstParam.promise)?firstParam:jQuery.Deferred(),promise=deferred.promise();if(length>1){for(;i<length;i++)args[i]&&args[i].promise&&jQuery.isFunction(args[i].promise)?args[i].promise().then(resolveFunc(i),deferred.reject,progressFunc(i)):--count;count||deferred.resolveWith(deferred,args)}else deferred!==firstParam&&deferred.resolveWith(deferred,length?[firstParam]:[]);return promise}}),jQuery.support=function(){var support,all,a,select,opt,input,fragment,tds,events,eventName,i,isSupported,div=document.createElement("div"),documentElement=document.documentElement;div.setAttribute("className","t"),div.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0];if(!all||!all.length||!a)return{};select=document.createElement("select"),opt=select.appendChild(document.createElement("option")),input=div.getElementsByTagName("input")[0],support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/top/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.55/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:input.value==="on",optSelected:opt.selected,getSetAttribute:div.className!=="t",enctype:!!document.createElement("form").enctype,html5Clone:document.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},jQuery.boxModel=support.boxModel=document.compatMode==="CSS1Compat",input.checked=!0,support.noCloneChecked=input.cloneNode(!0).checked,select.disabled=!0,support.optDisabled=!opt.disabled;try{delete div.test}catch(e){support.deleteExpando=!1}!div.addEventListener&&div.attachEvent&&div.fireEvent&&(div.attachEvent("onclick",function(){support.noCloneEvent=!1}),div.cloneNode(!0).fireEvent("onclick")),input=document.createElement("input"),input.value="t",input.setAttribute("type","radio"),support.radioValue=input.value==="t",input.setAttribute("checked","checked"),input.setAttribute("name","t"),div.appendChild(input),fragment=document.createDocumentFragment(),fragment.appendChild(div.lastChild),support.checkClone=fragment.cloneNode(!0).cloneNode(!0).lastChild.checked,support.appendChecked=input.checked,fragment.removeChild(input),fragment.appendChild(div);if(div.attachEvent)for(i in{submit:1,change:1,focusin:1})eventName="on"+i,isSupported=eventName in div,isSupported||(div.setAttribute(eventName,"return;"),isSupported=typeof div[eventName]=="function"),support[i+"Bubbles"]=isSupported;return fragment.removeChild(div),fragment=select=opt=div=input=null,jQuery(function(){var container,outer,inner,table,td,offsetSupport,marginDiv,conMarginTop,style,html,positionTopLeftWidthHeight,paddingMarginBorderVisibility,paddingMarginBorder,body=document.getElementsByTagName("body")[0];if(!body)return;conMarginTop=1,paddingMarginBorder="padding:0;margin:0;border:",positionTopLeftWidthHeight="position:absolute;top:0;left:0;width:1px;height:1px;",paddingMarginBorderVisibility=paddingMarginBorder+"0;visibility:hidden;",style="style='"+positionTopLeftWidthHeight+paddingMarginBorder+"5px solid #000;",html="<div "+style+"display:block;'><div style='"+paddingMarginBorder+"0;display:block;overflow:hidden;'></div></div>"+"<table "+style+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",container=document.createElement("div"),container.style.cssText=paddingMarginBorderVisibility+"width:0;height:0;position:static;top:0;margin-top:"+conMarginTop+"px",body.insertBefore(container,body.firstChild),div=document.createElement("div"),container.appendChild(div),div.innerHTML="<table><tr><td style='"+paddingMarginBorder+"0;display:none'></td><td>t</td></tr></table>",tds=div.getElementsByTagName("td"),isSupported=tds[0].offsetHeight===0,tds[0].style.display="",tds[1].style.display="none",support.reliableHiddenOffsets=isSupported&&tds[0].offsetHeight===0,window.getComputedStyle&&(div.innerHTML="",marginDiv=document.createElement("div"),marginDiv.style.width="0",marginDiv.style.marginRight="0",div.style.width="2px",div.appendChild(marginDiv),support.reliableMarginRight=(parseInt((window.getComputedStyle(marginDiv,null)||{marginRight:0}).marginRight,10)||0)===0),typeof div.style.zoom!="undefined"&&(div.innerHTML="",div.style.width=div.style.padding="1px",div.style.border=0,div.style.overflow="hidden",div.style.display="inline",div.style.zoom=1,support.inlineBlockNeedsLayout=div.offsetWidth===3,div.style.display="block",div.style.overflow="visible",div.innerHTML="<div style='width:5px;'></div>",support.shrinkWrapBlocks=div.offsetWidth!==3),div.style.cssText=positionTopLeftWidthHeight+paddingMarginBorderVisibility,div.innerHTML=html,outer=div.firstChild,inner=outer.firstChild,td=outer.nextSibling.firstChild.firstChild,offsetSupport={doesNotAddBorder:inner.offsetTop!==5,doesAddBorderForTableAndCells:td.offsetTop===5},inner.style.position="fixed",inner.style.top="20px",offsetSupport.fixedPosition=inner.offsetTop===20||inner.offsetTop===15,inner.style.position=inner.style.top="",outer.style.overflow="hidden",outer.style.position="relative",offsetSupport.subtractsBorderForOverflowNotVisible=inner.offsetTop===-5,offsetSupport.doesNotIncludeMarginInBodyOffset=body.offsetTop!==conMarginTop,window.getComputedStyle&&(div.style.marginTop="1%",support.pixelMargin=(window.getComputedStyle(div,null)||{marginTop:0}).marginTop!=="1%"),typeof container.style.zoom!="undefined"&&(container.style.zoom=1),body.removeChild(container),marginDiv=div=container=null,jQuery.extend(support,offsetSupport)}),support}();var rbrace=/^(?:\{.*\}|\[.*\])$/,rmultiDash=/([A-Z])/g;jQuery.extend({cache:{},uuid:0,expando:"jQuery"+(jQuery.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(elem){return elem=elem.nodeType?jQuery.cache[elem[jQuery.expando]]:elem[jQuery.expando],!!elem&&!isEmptyDataObject(elem)},data:function(elem,name,data,pvt){if(!jQuery.acceptData(elem))return;var privateCache,thisCache,ret,internalKey=jQuery.expando,getByName=typeof name=="string",isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:elem[internalKey]&&internalKey,isEvents=name==="events";if((!id||!cache[id]||!isEvents&&!pvt&&!cache[id].data)&&getByName&&data===undefined)return;id||(isNode?elem[internalKey]=id=++jQuery.uuid:id=internalKey),cache[id]||(cache[id]={},isNode||(cache[id].toJSON=jQuery.noop));if(typeof name=="object"||typeof name=="function")pvt?cache[id]=jQuery.extend(cache[id],name):cache[id].data=jQuery.extend(cache[id].data,name);return privateCache=thisCache=cache[id],pvt||(thisCache.data||(thisCache.data={}),thisCache=thisCache.data),data!==undefined&&(thisCache[jQuery.camelCase(name)]=data),isEvents&&!thisCache[name]?privateCache.events:(getByName?(ret=thisCache[name],ret==null&&(ret=thisCache[jQuery.camelCase(name)])):ret=thisCache,ret)},removeData:function(elem,name,pvt){if(!jQuery.acceptData(elem))return;var thisCache,i,l,internalKey=jQuery.expando,isNode=elem.nodeType,cache=isNode?jQuery.cache:elem,id=isNode?elem[internalKey]:internalKey;if(!cache[id])return;if(name){thisCache=pvt?cache[id]:cache[id].data;if(thisCache){jQuery.isArray(name)||(name in thisCache?name=[name]:(name=jQuery.camelCase(name),name in thisCache?name=[name]:name=name.split(" ")));for(i=0,l=name.length;i<l;i++)delete thisCache[name[i]];if(!(pvt?isEmptyDataObject:jQuery.isEmptyObject)(thisCache))return}}if(!pvt){delete cache[id].data;if(!isEmptyDataObject(cache[id]))return}jQuery.support.deleteExpando||!cache.setInterval?delete cache[id]:cache[id]=null,isNode&&(jQuery.support.deleteExpando?delete elem[internalKey]:elem.removeAttribute?elem.removeAttribute(internalKey):elem[internalKey]=null)},_data:function(elem,name,data){return jQuery.data(elem,name,data,!0)},acceptData:function(elem){if(elem.nodeName){var match=jQuery.noData[elem.nodeName.toLowerCase()];if(match)return match!==!0&&elem.getAttribute("classid")===match}return!0}}),jQuery.fn.extend({data:function(key,value){var parts,part,attr,name,l,elem=this[0],i=0,data=null;if(key===undefined){if(this.length){data=jQuery.data(elem);if(elem.nodeType===1&&!jQuery._data(elem,"parsedAttrs")){attr=elem.attributes;for(l=attr.length;i<l;i++)name=attr[i].name,name.indexOf("data-")===0&&(name=jQuery.camelCase(name.substring(5)),dataAttr(elem,name,data[name]));jQuery._data(elem,"parsedAttrs",!0)}}return data}return typeof key=="object"?this.each(function(){jQuery.data(this,key)}):(parts=key.split(".",2),parts[1]=parts[1]?"."+parts[1]:"",part=parts[1]+"!",jQuery.access(this,function(value){if(value===undefined)return data=this.triggerHandler("getData"+part,[parts[0]]),data===undefined&&elem&&(data=jQuery.data(elem,key),data=dataAttr(elem,key,data)),data===undefined&&parts[1]?this.data(parts[0]):data;parts[1]=value,this.each(function(){var self=jQuery(this);self.triggerHandler("setData"+part,parts),jQuery.data(this,key,value),self.triggerHandler("changeData"+part,parts)})},null,value,arguments.length>1,null,!1))},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}}),jQuery.extend({_mark:function(elem,type){elem&&(type=(type||"fx")+"mark",jQuery._data(elem,type,(jQuery._data(elem,type)||0)+1))},_unmark:function(force,elem,type){force!==!0&&(type=elem,elem=force,force=!1);if(elem){type=type||"fx";var key=type+"mark",count=force?0:(jQuery._data(elem,key)||1)-1;count?jQuery._data(elem,key,count):(jQuery.removeData(elem,key,!0),handleQueueMarkDefer(elem,type,"mark"))}},queue:function(elem,type,data){var q;if(elem)return type=(type||"fx")+"queue",q=jQuery._data(elem,type),data&&(!q||jQuery.isArray(data)?q=jQuery._data(elem,type,jQuery.makeArray(data)):q.push(data)),q||[]},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift(),hooks={};fn==="inprogress"&&(fn=queue.shift()),fn&&(type==="fx"&&queue.unshift("inprogress"),jQuery._data(elem,type+".run",hooks),fn.call(elem,function(){jQuery.dequeue(elem,type)},hooks)),queue.length||(jQuery.removeData(elem,type+"queue "+type+".run",!0),handleQueueMarkDefer(elem,type,"queue"))}}),jQuery.fn.extend({queue:function(type,data){var setter=2;return typeof type!="string"&&(data=type,type="fx",setter--),arguments.length<setter?jQuery.queue(this[0],type):data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);type==="fx"&&queue[0]!=="inprogress"&&jQuery.dequeue(this,type)})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){return time=jQuery.fx?jQuery.fx.speeds[time]||time:time,type=type||"fx",this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,object){function resolve(){--count||defer.resolveWith(elements,[elements])}typeof type!="string"&&(object=type,type=undefined),type=type||"fx";var defer=jQuery.Deferred(),elements=this,i=elements.length,count=1,deferDataKey=type+"defer",queueDataKey=type+"queue",markDataKey=type+"mark",tmp;while(i--)if(tmp=jQuery.data(elements[i],deferDataKey,undefined,!0)||(jQuery.data(elements[i],queueDataKey,undefined,!0)||jQuery.data(elements[i],markDataKey,undefined,!0))&&jQuery.data(elements[i],deferDataKey,jQuery.Callbacks("once memory"),!0))count++,tmp.add(resolve);return resolve(),defer.promise(object)}});var rclass=/[\n\t\r]/g,rspace=/\s+/,rreturn=/\r/g,rtype=/^(?:button|input)$/i,rfocusable=/^(?:button|input|object|select|textarea)$/i,rclickable=/^a(?:rea)?$/i,rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,getSetAttribute=jQuery.support.getSetAttribute,nodeHook,boolHook,fixSpecified;jQuery.fn.extend({attr:function(name,value){return jQuery.access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})},prop:function(name,value){return jQuery.access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return name=jQuery.propFix[name]||name,this.each(function(){try{this[name]=undefined,delete this[name]}catch(e){}})},addClass:function(value){var classNames,i,l,elem,setClass,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))});if(value&&typeof value=="string"){classNames=value.split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1)if(!elem.className&&classNames.length===1)elem.className=value;else{setClass=" "+elem.className+" ";for(c=0,cl=classNames.length;c<cl;c++)~setClass.indexOf(" "+classNames[c]+" ")||(setClass+=classNames[c]+" ");elem.className=jQuery.trim(setClass)}}}return this},removeClass:function(value){var classNames,i,l,elem,className,c,cl;if(jQuery.isFunction(value))return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))});if(value&&typeof value=="string"||value===undefined){classNames=(value||"").split(rspace);for(i=0,l=this.length;i<l;i++){elem=this[i];if(elem.nodeType===1&&elem.className)if(value){className=(" "+elem.className+" ").replace(rclass," ");for(c=0,cl=classNames.length;c<cl;c++)className=className.replace(" "+classNames[c]+" "," ");elem.className=jQuery.trim(className)}else elem.className=""}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal=="boolean";return jQuery.isFunction(value)?this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)}):this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while(className=classNames[i++])state=isBool?state:!self.hasClass(className),self[state?"addClass":"removeClass"](className)}else if(type==="undefined"||type==="boolean")this.className&&jQuery._data(this,"__className__",this.className),this.className=this.className||value===!1?"":jQuery._data(this,"__className__")||""})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++)if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1)return!0;return!1},val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem)return hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()],hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined?ret:(ret=elem.value,typeof ret=="string"?ret.replace(rreturn,""):ret==null?"":ret);return}return isFunction=jQuery.isFunction(value),this.each(function(i){var self=jQuery(this),val;if(this.nodeType!==1)return;isFunction?val=value.call(this,i,self.val()):val=value,val==null?val="":typeof val=="number"?val+="":jQuery.isArray(val)&&(val=jQuery.map(val,function(value){return value==null?"":value+""})),hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined)this.value=val})}}),jQuery.extend({valHooks:{option:{get:function(elem){var val=elem.attributes.value;return!val||val.specified?elem.value:elem.text}},select:{get:function(elem){var value,i,max,option,index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0)return null;i=one?index:0,max=one?index+1:options.length;for(;i<max;i++){option=options[i];if(option.selected&&(jQuery.support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one)return value;values.push(value)}}return one&&!values.length&&options.length?jQuery(options[index]).val():values},set:function(elem,value){var values=jQuery.makeArray(value);return jQuery(elem).find("option").each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0}),values.length||(elem.selectedIndex=-1),values}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(elem,name,value,pass){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2)return;if(pass&&name in jQuery.attrFn)return jQuery(elem)[name](value);if(typeof elem.getAttribute=="undefined")return jQuery.prop(elem,name,value);notxml=nType!==1||!jQuery.isXMLDoc(elem),notxml&&(name=name.toLowerCase(),hooks=jQuery.attrHooks[name]||(rboolean.test(name)?boolHook:nodeHook));if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name);return}return hooks&&"set"in hooks&&notxml&&(ret=hooks.set(elem,value,name))!==undefined?ret:(elem.setAttribute(name,""+value),value)}return hooks&&"get"in hooks&&notxml&&(ret=hooks.get(elem,name))!==null?ret:(ret=elem.getAttribute(name),ret===null?undefined:ret)},removeAttr:function(elem,value){var propName,attrNames,name,l,isBool,i=0;if(value&&elem.nodeType===1){attrNames=value.toLowerCase().split(rspace),l=attrNames.length;for(;i<l;i++)name=attrNames[i],name&&(propName=jQuery.propFix[name]||name,isBool=rboolean.test(name),isBool||jQuery.attr(elem,name,""),elem.removeAttribute(getSetAttribute?name:propName),isBool&&propName in elem&&(elem[propName]=!1))}},attrHooks:{type:{set:function(elem,value){if(rtype.test(elem.nodeName)&&elem.parentNode)jQuery.error("type property can't be changed");else if(!jQuery.support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;return elem.setAttribute("type",value),val&&(elem.value=val),value}}},value:{get:function(elem,name){return nodeHook&&jQuery.nodeName(elem,"button")?nodeHook.get(elem,name):name in elem?elem.value:null},set:function(elem,value,name){if(nodeHook&&jQuery.nodeName(elem,"button"))return nodeHook.set(elem,value,name);elem.value=value}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2)return;return notxml=nType!==1||!jQuery.isXMLDoc(elem),notxml&&(name=jQuery.propFix[name]||name,hooks=jQuery.propHooks[name]),value!==undefined?hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value:hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]},propHooks:{tabIndex:{get:function(elem){var attributeNode=elem.getAttributeNode("tabindex");return attributeNode&&attributeNode.specified?parseInt(attributeNode.value,10):rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}}}}),jQuery.attrHooks.tabindex=jQuery.propHooks.tabIndex,boolHook={get:function(elem,name){var attrNode,property=jQuery.prop(elem,name);return property===!0||typeof property!="boolean"&&(attrNode=elem.getAttributeNode(name))&&attrNode.nodeValue!==!1?name.toLowerCase():undefined},set:function(elem,value,name){var propName;return value===!1?jQuery.removeAttr(elem,name):(propName=jQuery.propFix[name]||name,propName in elem&&(elem[propName]=!0),elem.setAttribute(name,name.toLowerCase())),name}},getSetAttribute||(fixSpecified={name:!0,id:!0,coords:!0},nodeHook=jQuery.valHooks.button={get:function(elem,name){var ret;return ret=elem.getAttributeNode(name),ret&&(fixSpecified[name]?ret.nodeValue!=="":ret.specified)?ret.nodeValue:undefined},set:function(elem,value,name){var ret=elem.getAttributeNode(name);return ret||(ret=document.createAttribute(name),elem.setAttributeNode(ret)),ret.nodeValue=value+""}},jQuery.attrHooks.tabindex.set=nodeHook.set,jQuery.each(["width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{set:function(elem,value){if(value==="")return elem.setAttribute(name,"auto"),value}})}),jQuery.attrHooks.contenteditable={get:nodeHook.get,set:function(elem,value,name){value===""&&(value="false"),nodeHook.set(elem,value,name)}}),jQuery.support.hrefNormalized||jQuery.each(["href","src","width","height"],function(i,name){jQuery.attrHooks[name]=jQuery.extend(jQuery.attrHooks[name],{get:function(elem){var ret=elem.getAttribute(name,2);return ret===null?undefined:ret}})}),jQuery.support.style||(jQuery.attrHooks.style={get:function(elem){return elem.style.cssText.toLowerCase()||undefined},set:function(elem,value){return elem.style.cssText=""+value}}),jQuery.support.optSelected||(jQuery.propHooks.selected=jQuery.extend(jQuery.propHooks.selected,{get:function(elem){var parent=elem.parentNode;return parent&&(parent.selectedIndex,parent.parentNode&&parent.parentNode.selectedIndex),null}})),jQuery.support.enctype||(jQuery.propFix.enctype="encoding"),jQuery.support.checkOn||jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={get:function(elem){return elem.getAttribute("value")===null?"on":elem.value}}}),jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]=jQuery.extend(jQuery.valHooks[this],{set:function(elem,value){if(jQuery.isArray(value))return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}})});var rformElems=/^(?:textarea|input|select)$/i,rtypenamespace=/^([^\.]*)?(?:\.(.+))?$/,rhoverHack=/(?:^|\s)hover(\.\S+)?\b/,rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rquickIs=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,quickParse=function(selector){var quick=rquickIs.exec(selector);return quick&&(quick[1]=(quick[1]||"").toLowerCase(),quick[3]=quick[3]&&new RegExp("(?:^|\\s)"+quick[3]+"(?:\\s|$)")),quick},quickIs=function(elem,m){var attrs=elem.attributes||{};return(!m[1]||elem.nodeName.toLowerCase()===m[1])&&(!m[2]||(attrs.id||{}).value===m[2])&&(!m[3]||m[3].test((attrs["class"]||{}).value))},hoverHack=function(events){return jQuery.event.special.hover?events:events.replace(rhoverHack,"mouseenter$1 mouseleave$1")};jQuery.event={add:function(elem,types,handler,data,selector){var elemData,eventHandle,events,t,tns,type,namespaces,handleObj,handleObjIn,quick,handlers,special;if(elem.nodeType===3||elem.nodeType===8||!types||!handler||!(elemData=jQuery._data(elem)))return;handler.handler&&(handleObjIn=handler,handler=handleObjIn.handler,selector=handleObjIn.selector),handler.guid||(handler.guid=jQuery.guid++),events=elemData.events,events||(elemData.events=events={}),eventHandle=elemData.handle,eventHandle||(elemData.handle=eventHandle=function(e){return typeof jQuery=="undefined"||!!e&&jQuery.event.triggered===e.type?undefined:jQuery.event.dispatch.apply(eventHandle.elem,arguments)},eventHandle.elem=elem),types=jQuery.trim(hoverHack(types)).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[],type=tns[1],namespaces=(tns[2]||"").split(".").sort(),special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,special=jQuery.event.special[type]||{},handleObj=jQuery.extend({type:type,origType:tns[1],data:data,handler:handler,guid:handler.guid,selector:selector,quick:selector&&quickParse(selector),namespace:namespaces.join(".")},handleObjIn),handlers=events[type];if(!handlers){handlers=events[type]=[],handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===!1)elem.addEventListener?elem.addEventListener(type,eventHandle,!1):elem.attachEvent&&elem.attachEvent("on"+type,eventHandle)}special.add&&(special.add.call(elem,handleObj),handleObj.handler.guid||(handleObj.handler.guid=handler.guid)),selector?handlers.splice(handlers.delegateCount++,0,handleObj):handlers.push(handleObj),jQuery.event.global[type]=!0}elem=null},global:{},remove:function(elem,types,handler,selector,mappedTypes){var elemData=jQuery.hasData(elem)&&jQuery._data(elem),t,tns,type,origType,namespaces,origCount,j,events,special,handle,eventType,handleObj;if(!elemData||!(events=elemData.events))return;types=jQuery.trim(hoverHack(types||"")).split(" ");for(t=0;t<types.length;t++){tns=rtypenamespace.exec(types[t])||[],type=origType=tns[1],namespaces=tns[2];if(!type){for(type in events)jQuery.event.remove(elem,type+types[t],handler,selector,!0);continue}special=jQuery.event.special[type]||{},type=(selector?special.delegateType:special.bindType)||type,eventType=events[type]||[],origCount=eventType.length,namespaces=namespaces?new RegExp("(^|\\.)"+namespaces.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(j=0;j<eventType.length;j++)handleObj=eventType[j],(mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!namespaces||namespaces.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)&&(eventType.splice(j--,1),handleObj.selector&&eventType.delegateCount--,special.remove&&special.remove.call(elem,handleObj));eventType.length===0&&origCount!==eventType.length&&((!special.teardown||special.teardown.call(elem,namespaces)===!1)&&jQuery.removeEvent(elem,type,elemData.handle),delete events[type])}jQuery.isEmptyObject(events)&&(handle=elemData.handle,handle&&(handle.elem=null),jQuery.removeData(elem,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(event,data,elem,onlyHandlers){if(!elem||elem.nodeType!==3&&elem.nodeType!==8){var type=event.type||event,namespaces=[],cache,exclusive,i,cur,old,ontype,special,handle,eventPath,bubbleType;if(rfocusMorph.test(type+jQuery.event.triggered))return;type.indexOf("!")>=0&&(type=type.slice(0,-1),exclusive=!0),type.indexOf(".")>=0&&(namespaces=type.split("."),type=namespaces.shift(),namespaces.sort());if((!elem||jQuery.event.customEvent[type])&&!jQuery.event.global[type])return;event=typeof event=="object"?event[jQuery.expando]?event:new jQuery.Event(type,event):new jQuery.Event(type),event.type=type,event.isTrigger=!0,event.exclusive=exclusive,event.namespace=namespaces.join("."),event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,ontype=type.indexOf(":")<0?"on"+type:"";if(!elem){cache=jQuery.cache;for(i in cache)cache[i].events&&cache[i].events[type]&&jQuery.event.trigger(event,data,cache[i].handle.elem,!0);return}event.result=undefined,event.target||(event.target=elem),data=data!=null?jQuery.makeArray(data):[],data.unshift(event),special=jQuery.event.special[type]||{};if(special.trigger&&special.trigger.apply(elem,data)===!1)return;eventPath=[[elem,special.bindType||type]];if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type,cur=rfocusMorph.test(bubbleType+type)?elem:elem.parentNode,old=null;for(;cur;cur=cur.parentNode)eventPath.push([cur,bubbleType]),old=cur;old&&old===elem.ownerDocument&&eventPath.push([old.defaultView||old.parentWindow||window,bubbleType])}for(i=0;i<eventPath.length&&!event.isPropagationStopped();i++)cur=eventPath[i][0],event.type=eventPath[i][1],handle=(jQuery._data(cur,"events")||{})[event.type]&&jQuery._data(cur,"handle"),handle&&handle.apply(cur,data),handle=ontype&&cur[ontype],handle&&jQuery.acceptData(cur)&&handle.apply(cur,data)===!1&&event.preventDefault();return event.type=type,!onlyHandlers&&!event.isDefaultPrevented()&&(!special._default||special._default.apply(elem.ownerDocument,data)===!1)&&(type!=="click"||!jQuery.nodeName(elem,"a"))&&jQuery.acceptData(elem)&&ontype&&elem[type]&&(type!=="focus"&&type!=="blur"||event.target.offsetWidth!==0)&&!jQuery.isWindow(elem)&&(old=elem[ontype],old&&(elem[ontype]=null),jQuery.event.triggered=type,elem[type](),jQuery.event.triggered=undefined,old&&(elem[ontype]=old)),event.result}return},dispatch:function(event){event=jQuery.event.fix(event||window.event);var handlers=(jQuery._data(this,"events")||{})[event.type]||[],delegateCount=handlers.delegateCount,args=[].slice.call(arguments,0),run_all=!event.exclusive&&!event.namespace,special=jQuery.event.special[event.type]||{},handlerQueue=[],i,j,cur,jqcur,ret,selMatch,matched,matches,handleObj,sel,related;args[0]=event,event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===!1)return;if(delegateCount&&(!event.button||event.type!=="click")){jqcur=jQuery(this),jqcur.context=this.ownerDocument||this;for(cur=event.target;cur!=this;cur=cur.parentNode||this)if(cur.disabled!==!0){selMatch={},matches=[],jqcur[0]=cur;for(i=0;i<delegateCount;i++)handleObj=handlers[i],sel=handleObj.selector,selMatch[sel]===undefined&&(selMatch[sel]=handleObj.quick?quickIs(cur,handleObj.quick):jqcur.is(sel)),selMatch[sel]&&matches.push(handleObj);matches.length&&handlerQueue.push({elem:cur,matches:matches})}}handlers.length>delegateCount&&handlerQueue.push({elem:this,matches:handlers.slice(delegateCount)});for(i=0;i<handlerQueue.length&&!event.isPropagationStopped();i++){matched=handlerQueue[i],event.currentTarget=matched.elem;for(j=0;j<matched.matches.length&&!event.isImmediatePropagationStopped();j++){handleObj=matched.matches[j];if(run_all||!event.namespace&&!handleObj.namespace||event.namespace_re&&event.namespace_re.test(handleObj.namespace))event.data=handleObj.data,event.handleObj=handleObj,ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args),ret!==undefined&&(event.result=ret,ret===!1&&(event.preventDefault(),event.stopPropagation()))}}return special.postDispatch&&special.postDispatch.call(this,event),event.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){return event.which==null&&(event.which=original.charCode!=null?original.charCode:original.keyCode),event}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button,fromElement=original.fromElement;return event.pageX==null&&original.clientX!=null&&(eventDoc=event.target.ownerDocument||document,doc=eventDoc.documentElement,body=eventDoc.body,event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0),event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)),!event.relatedTarget&&fromElement&&(event.relatedTarget=fromElement===event.target?original.toElement:fromElement),!event.which&&button!==undefined&&(event.which=button&1?1:button&2?3:button&4?2:0),event}},fix:function(event){if(event[jQuery.expando])return event;var i,prop,originalEvent=event,fixHook=jQuery.event.fixHooks[event.type]||{},copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=jQuery.Event(originalEvent);for(i=copy.length;i;)prop=copy[--i],event[prop]=originalEvent[prop];return event.target||(event.target=originalEvent.srcElement||document),event.target.nodeType===3&&(event.target=event.target.parentNode),event.metaKey===undefined&&(event.metaKey=event.ctrlKey),fixHook.filter?fixHook.filter(event,originalEvent):event},special:{ready:{setup:jQuery.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(data,namespaces,eventHandle){jQuery.isWindow(this)&&(this.onbeforeunload=eventHandle)},teardown:function(namespaces,eventHandle){this.onbeforeunload===eventHandle&&(this.onbeforeunload=null)}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:!0,originalEvent:{}});bubble?jQuery.event.trigger(e,null,elem):jQuery.event.dispatch.call(elem,e),e.isDefaultPrevented()&&event.preventDefault()}},jQuery.event.handle=jQuery.event.dispatch,jQuery.removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener&&elem.removeEventListener(type,handle,!1)}:function(elem,type,handle){elem.detachEvent&&elem.detachEvent("on"+type,handle)},jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event))return new jQuery.Event(src,props);src&&src.type?(this.originalEvent=src,this.type=src.type,this.isDefaultPrevented=src.defaultPrevented||src.returnValue===!1||src.getPreventDefault&&src.getPreventDefault()?returnTrue:returnFalse):this.type=src,props&&jQuery.extend(this,props),this.timeStamp=src&&src.timeStamp||jQuery.now(),this[jQuery.expando]=!0},jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue,this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse},jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var target=this,related=event.relatedTarget,handleObj=event.handleObj,selector=handleObj.selector,ret;if(!related||related!==target&&!jQuery.contains(target,related))event.type=handleObj.origType,ret=handleObj.handler.apply(this,arguments),event.type=fix;return ret}}}),jQuery.support.submitBubbles||(jQuery.event.special.submit={setup:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.add(this,"click._submit keypress._submit",function(e){var elem=e.target,form=jQuery.nodeName(elem,"input")||jQuery.nodeName(elem,"button")?elem.form:undefined;form&&!form._submit_attached&&(jQuery.event.add(form,"submit._submit",function(event){event._submit_bubble=!0}),form._submit_attached=!0)})},postDispatch:function(event){event._submit_bubble&&(delete event._submit_bubble,this.parentNode&&!event.isTrigger&&jQuery.event.simulate("submit",this.parentNode,event,!0))},teardown:function(){if(jQuery.nodeName(this,"form"))return!1;jQuery.event.remove(this,"._submit")}}),jQuery.support.changeBubbles||(jQuery.event.special.change={setup:function(){if(rformElems.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")jQuery.event.add(this,"propertychange._change",function(event){event.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),jQuery.event.add(this,"click._change",function(event){this._just_changed&&!event.isTrigger&&(this._just_changed=!1,jQuery.event.simulate("change",this,event,!0))});return!1}jQuery.event.add(this,"beforeactivate._change",function(e){var elem=e.target;rformElems.test(elem.nodeName)&&!elem._change_attached&&(jQuery.event.add(elem,"change._change",function(event){this.parentNode&&!event.isSimulated&&!event.isTrigger&&jQuery.event.simulate("change",this.parentNode,event,!0)}),elem._change_attached=!0)})},handle:function(event){var elem=event.target;if(this!==elem||event.isSimulated||event.isTrigger||elem.type!=="radio"&&elem.type!=="checkbox")return event.handleObj.handler.apply(this,arguments)},teardown:function(){return jQuery.event.remove(this,"._change"),rformElems.test(this.nodeName)}}),jQuery.support.focusinBubbles||jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var attaches=0,handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),!0)};jQuery.event.special[fix]={setup:function(){attaches++===0&&document.addEventListener(orig,handler,!0)},teardown:function(){--attaches===0&&document.removeEventListener(orig,handler,!0)}}}),jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types=="object"){typeof selector!="string"&&(data=data||selector,selector=undefined);for(type in types)this.on(type,selector,data,types[type],one);return this}data==null&&fn==null?(fn=selector,data=selector=undefined):fn==null&&(typeof selector=="string"?(fn=data,data=undefined):(fn=data,data=selector,selector=undefined));if(fn===!1)fn=returnFalse;else if(!fn)return this;return one===1&&(origFn=fn,fn=function(event){return jQuery().off(event),origFn.apply(this,arguments)},fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)),this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){if(types&&types.preventDefault&&types.handleObj){var handleObj=types.handleObj;return jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler),this}if(typeof types=="object"){for(var type in types)this.off(type,selector,types[type]);return this}if(selector===!1||typeof selector=="function")fn=selector,selector=undefined;return fn===!1&&(fn=returnFalse),this.each(function(){jQuery.event.remove(this,types,fn,selector)})},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},live:function(types,data,fn){return jQuery(this.context).on(types,this.selector,data,fn),this},die:function(types,fn){return jQuery(this.context).off(types,this.selector||"**",fn),this},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length==1?this.off(selector,"**"):this.off(types,selector,fn)},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0])return jQuery.event.trigger(type,data,this[0],!0)},toggle:function(fn){var args=arguments,guid=fn.guid||jQuery.guid++,i=0,toggler=function(event){var lastToggle=(jQuery._data(this,"lastToggle"+fn.guid)||0)%i;return jQuery._data(this,"lastToggle"+fn.guid,lastToggle+1),event.preventDefault(),args[lastToggle].apply(this,arguments)||!1};toggler.guid=guid;while(i<args.length)args[i++].guid=guid;return this.click(toggler)},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}}),jQuery.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return fn==null&&(fn=data,data=null),arguments.length>0?this.on(name,null,data,fn):this.trigger(name)},jQuery.attrFn&&(jQuery.attrFn[name]=!0),rkeyEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.keyHooks),rmouseEvent.test(name)&&(jQuery.event.fixHooks[name]=jQuery.event.mouseHooks)}),function(){function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=!1;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}elem.nodeType===1&&!isXML&&(elem[expando]=doneName,elem.sizset=i);if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=!1;elem=elem[dir];while(elem){if(elem[expando]===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){isXML||(elem[expando]=doneName,elem.sizset=i);if(typeof cur!="string"){if(elem===cur){match=!0;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}elem=elem[dir]}checkSet[i]=match}}}var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,expando="sizcache"+(Math.random()+"").replace(".",""),done=0,toString=Object.prototype.toString,hasDuplicate=!1,baseHasDuplicate=!0,rBackslash=/\\/g,rReturn=/\r\n/g,rNonWord=/\W/;[0,0].sort(function(){return baseHasDuplicate=!1,0});var Sizzle=function(selector,context,results,seed){results=results||[],context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9)return[];if(!selector||typeof selector!="string")return results;var m,set,checkSet,extra,ret,cur,pop,i,prune=!0,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec(""),m=chunker.exec(soFar);if(m){soFar=m[3],parts.push(m[1]);if(m[2]){extra=m[3];break}}}while(m);if(parts.length>1&&origPOS.exec(selector))if(parts.length===2&&Expr.relative[parts[0]])set=posProcess(parts[0]+parts[1],context,seed);else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length)selector=parts.shift(),Expr.relative[selector]&&(selector+=parts.shift()),set=posProcess(selector,set,seed)}else{!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])&&(ret=Sizzle.find(parts.shift(),context,contextXML),context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]);if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length!==1||parts[0]!=="~"&&parts[0]!=="+"||!context.parentNode?context:context.parentNode,contextXML),set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set,parts.length>0?checkSet=makeArray(set):prune=!1;while(parts.length)cur=parts.pop(),pop=cur,Expr.relative[cur]?pop=parts.pop():cur="",pop==null&&(pop=context),Expr.relative[cur](checkSet,pop,contextXML)}else checkSet=parts=[]}checkSet||(checkSet=set),checkSet||Sizzle.error(cur||selector);if(toString.call(checkSet)==="[object Array]")if(!prune)results.push.apply(results,checkSet);else if(context&&context.nodeType===1)for(i=0;checkSet[i]!=null;i++)checkSet[i]&&(checkSet[i]===!0||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))&&results.push(set[i]);else for(i=0;checkSet[i]!=null;i++)checkSet[i]&&checkSet[i].nodeType===1&&results.push(set[i]);else makeArray(checkSet,results);return extra&&(Sizzle(extra,origContext,results,seed),Sizzle.uniqueSort(results)),results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate,results.sort(sortOrder);if(hasDuplicate)for(var i=1;i<results.length;i++)results[i]===results[i-1]&&results.splice(i--,1)}return results},Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)},Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0},Sizzle.find=function(expr,context,isXML){var set,i,len,match,type,left;if(!expr)return[];for(i=0,len=Expr.order.length;i<len;i++){type=Expr.order[i];if(match=Expr.leftMatch[type].exec(expr)){left=match[1],match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(rBackslash,""),set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}return set||(set=typeof context.getElementsByTagName!="undefined"?context.getElementsByTagName("*"):[]),{set:set,expr:expr}},Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,type,found,item,filter,left,i,pass,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(type in Expr.filter)if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){filter=Expr.filter[type],left=match[1],anyFound=!1,match.splice(1,1);if(left.substr(left.length-1)==="\\")continue;curLoop===result&&(result=[]);if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match)anyFound=found=!0;else if(match===!0)continue}if(match)for(i=0;(item=curLoop[i])!=null;i++)item&&(found=filter(item,match,i,curLoop),pass=not^found,inplace&&found!=null?pass?anyFound=!0:curLoop[i]=!1:pass&&(result.push(item),anyFound=!0));if(found!==undefined){inplace||(curLoop=result),expr=expr.replace(Expr.match[type],"");if(!anyFound)return[];break}}if(expr===old){if(anyFound!=null)break;Sizzle.error(expr)}old=expr}return curLoop},Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};var getText=Sizzle.getText=function(elem){var i,node,nodeType=elem.nodeType,ret="";if(nodeType){if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent=="string")return elem.textContent;if(typeof elem.innerText=="string")return elem.innerText.replace(rReturn,"");for(elem=elem.firstChild;elem;elem=elem.nextSibling)ret+=getText(elem)}else if(nodeType===3||nodeType===4)return elem.nodeValue}else for(i=0;node=elem[i];i++)node.nodeType!==8&&(ret+=getText(node));return ret},Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")},type:function(elem){return elem.getAttribute("type")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part=="string",isTag=isPartStr&&!rNonWord.test(part),isPartStrNotTag=isPartStr&&!isTag;isTag&&(part=part.toLowerCase());for(var i=0,l=checkSet.length,elem;i<l;i++)if(elem=checkSet[i]){while((elem=elem.previousSibling)&&elem.nodeType!==1);checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||!1:elem===part}isPartStrNotTag&&Sizzle.filter(part,checkSet,!0)},">":function(checkSet,part){var elem,isPartStr=typeof part=="string",i=0,l=checkSet.length;if(isPartStr&&!rNonWord.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:!1}}}else{for(;i<l;i++)elem=checkSet[i],elem&&(checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part);isPartStr&&Sizzle.filter(part,checkSet,!0)}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;typeof part=="string"&&!rNonWord.test(part)&&(part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck),checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;typeof part=="string"&&!rNonWord.test(part)&&(part=part.toLowerCase(),nodeCheck=part,checkFn=dirNodeCheck),checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++)results[i].getAttribute("name")===match[1]&&ret.push(results[i]);return ret.length===0?null:ret}},TAG:function(match,context){if(typeof context.getElementsByTagName!="undefined")return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(rBackslash,"")+" ";if(isXML)return match;for(var i=0,elem;(elem=curLoop[i])!=null;i++)elem&&(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)?inplace||result.push(elem):inplace&&(curLoop[i]=!1));return!1},ID:function(match){return match[1].replace(rBackslash,"")},TAG:function(match,curLoop){return match[1].replace(rBackslash,"").toLowerCase()},CHILD:function(match){if(match[1]==="nth"){match[2]||Sizzle.error(match[0]),match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=test[1]+(test[2]||1)-0,match[3]=test[3]-0}else match[2]&&Sizzle.error(match[0]);return match[0]=done++,match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1]=match[1].replace(rBackslash,"");return!isXML&&Expr.attrMap[name]&&(match[1]=Expr.attrMap[name]),match[4]=(match[4]||match[5]||"").replace(rBackslash,""),match[2]==="~="&&(match[4]=" "+match[4]+" "),match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if(!((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3]))){var ret=Sizzle.filter(match[3],curLoop,inplace,!0^not);return inplace||result.push.apply(result,ret),!1}match[3]=Sizzle(match[3],null,null,curLoop)}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0]))return!0;return match},POS:function(match){return match.unshift(!0),match}},filters:{enabled:function(elem){return elem.disabled===!1&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===!0},checked:function(elem){return elem.checked===!0},selected:function(elem){return elem.parentNode&&elem.parentNode.selectedIndex,elem.selected===!0},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){var attr=elem.getAttribute("type"),type=elem.type;return elem.nodeName.toLowerCase()==="input"&&"text"===type&&(attr===type||attr===null)},radio:function(elem){return elem.nodeName.toLowerCase()==="input"&&"radio"===elem.type},checkbox:function(elem){return elem.nodeName.toLowerCase()==="input"&&"checkbox"===elem.type},file:function(elem){return elem.nodeName.toLowerCase()==="input"&&"file"===elem.type},password:function(elem){return elem.nodeName.toLowerCase()==="input"&&"password"===elem.type},submit:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"submit"===elem.type},image:function(elem){return elem.nodeName.toLowerCase()==="input"&&"image"===elem.type},reset:function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&"reset"===elem.type},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&"button"===elem.type||name==="button"},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)},focus:function(elem){return elem===elem.ownerDocument.activeElement}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter)return filter(elem,i,match,array);if(name==="contains")return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0;if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++)if(not[j]===elem)return!1;return!0}Sizzle.error(name)},CHILD:function(elem,match){var first,last,doneName,parent,cache,count,diff,type=match[1],node=elem;switch(type){case"only":case"first":while(node=node.previousSibling)if(node.nodeType===1)return!1;if(type==="first")return!0;node=elem;case"last":while(node=node.nextSibling)if(node.nodeType===1)return!1;return!0;case"nth":first=match[2],last=match[3];if(first===1&&last===0)return!0;doneName=match[0],parent=elem.parentNode;if(parent&&(parent[expando]!==doneName||!elem.nodeIndex)){count=0;for(node=parent.firstChild;node;node=node.nextSibling)node.nodeType===1&&(node.nodeIndex=++count);parent[expando]=doneName}return diff=elem.nodeIndex-last,first===0?diff===0:diff%first===0&&diff/first>=0}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return match==="*"&&elem.nodeType===1||!!elem.nodeName&&elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Sizzle.attr?Sizzle.attr(elem,name):Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":!type&&Sizzle.attr?result!=null:type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:check?type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":!1:value&&result!==!1},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter)return filter(elem,i,match,array)}}},origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match)Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source),Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape));Expr.match.globalPOS=origPOS;var makeArray=function(array,results){return array=Array.prototype.slice.call(array,0),results?(results.push.apply(results,array),results):array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]")Array.prototype.push.apply(ret,array);else if(typeof array.length=="number")for(var l=array.length;i<l;i++)ret.push(array[i]);else for(;array[i];i++)ret.push(array[i]);return ret}}var sortOrder,siblingCheck;document.documentElement.compareDocumentPosition?sortOrder=function(a,b){return a===b?(hasDuplicate=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(sortOrder=function(a,b){if(a===b)return hasDuplicate=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(aup===bup)return siblingCheck(a,b);if(!aup)return-1;if(!bup)return 1;while(cur)ap.unshift(cur),cur=cur.parentNode;cur=bup;while(cur)bp.unshift(cur),cur=cur.parentNode;al=ap.length,bl=bp.length;for(var i=0;i<al&&i<bl;i++)if(ap[i]!==bp[i])return siblingCheck(ap[i],bp[i]);return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)},siblingCheck=function(a,b,ret){if(a===b)return ret;var cur=a.nextSibling;while(cur){if(cur===b)return-1;cur=cur.nextSibling}return 1}),function(){var form=document.createElement("div"),id="script"+(new Date).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>",root.insertBefore(form,root.firstChild),document.getElementById(id)&&(Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}},Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}),root.removeChild(form),root=form=null}(),function(){var div=document.createElement("div");div.appendChild(document.createComment("")),div.getElementsByTagName("*").length>0&&(Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++)results[i].nodeType===1&&tmp.push(results[i]);results=tmp}return results}),div.innerHTML="<a href='#'></a>",div.firstChild&&typeof div.firstChild.getAttribute!="undefined"&&div.firstChild.getAttribute("href")!=="#"&&(Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}),div=null}(),document.querySelectorAll&&function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0)return;Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&!Sizzle.isXML(context)){var match=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);if(match&&(context.nodeType===1||context.nodeType===9)){if(match[1])return makeArray(context.getElementsByTagName(query),extra);if(match[2]&&Expr.find.CLASS&&context.getElementsByClassName)return makeArray(context.getElementsByClassName(match[2]),extra)}if(context.nodeType===9){if(query==="body"&&context.body)return makeArray([context.body],extra);if(match&&match[3]){var elem=context.getElementById(match[3]);if(!elem||!elem.parentNode)return makeArray([],extra);if(elem.id===match[3])return makeArray([elem],extra)}try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var oldContext=context,old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);old?nid=nid.replace(/'/g,"\\$&"):context.setAttribute("id",nid),relativeHierarchySelector&&hasParent&&(context=context.parentNode);try{if(!relativeHierarchySelector||hasParent)return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}catch(pseudoError){}finally{old||oldContext.removeAttribute("id")}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle)Sizzle[prop]=oldSizzle[prop];div=null}(),function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector;if(matches){var disconnectedMatch=!matches.call(document.createElement("div"),"div"),pseudoWorks=!1;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=!0}Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node))try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){var ret=matches.call(node,expr);if(ret||!disconnectedMatch||node.document&&node.document.nodeType!==11)return ret}}catch(e){}return Sizzle(expr,null,null,[node]).length>0}}}(),function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0)return;div.lastChild.className="e";if(div.getElementsByClassName("e").length===1)return;Expr.order.splice(1,0,"CLASS"),Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!="undefined"&&!isXML)return context.getElementsByClassName(match[1])},div=null}(),document.documentElement.contains?Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:document.documentElement.compareDocumentPosition?Sizzle.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:Sizzle.contains=function(){return!1},Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":!1};var posProcess=function(selector,context,seed){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while(match=Expr.match.PSEUDO.exec(selector))later+=match[0],selector=selector.replace(Expr.match.PSEUDO,"");selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++)Sizzle(selector,root[i],tmpSet,seed);return Sizzle.filter(later,tmpSet)};Sizzle.attr=jQuery.attr,Sizzle.selectors.attrMap={},jQuery.find=Sizzle,jQuery.expr=Sizzle.selectors,jQuery.expr[":"]=jQuery.expr.filters,jQuery.unique=Sizzle.uniqueSort,jQuery.text=Sizzle.getText,jQuery.isXMLDoc=Sizzle.isXML,jQuery.contains=Sizzle.contains}();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,isSimple=/^.[^:#\[\.,]*$/,slice=Array.prototype.slice,POS=jQuery.expr.match.globalPOS,guaranteedUnique={children:!0,contents:!0,next:!0,prev:!0};jQuery.fn.extend({find:function(selector){var self=this,i,l;if(typeof selector!="string")return jQuery(selector).filter(function(){for(i=0,l=self.length;i<l;i++)if(jQuery.contains(self[i],this))return!0});var ret=this.pushStack("","find",selector),length,n,r;for(i=0,l=this.length;i<l;i++){length=ret.length,jQuery.find(selector,this[i],ret);if(i>0)for(n=length;n<ret.length;n++)for(r=0;r<length;r++)if(ret[r]===ret[n]){ret.splice(n--,1);break}}return ret},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++)if(jQuery.contains(this,targets[i]))return!0})},not:function(selector){return this.pushStack(winnow(this,selector,!1),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,!0),"filter",selector)},is:function(selector){return!!selector&&(typeof selector=="string"?POS.test(selector)?jQuery(selector,this.context).index(this[0])>=0:jQuery.filter(selector,this).length>0:this.filter(selector).length>0)},closest:function(selectors,context){var ret=[],i,l,cur=this[0];if(jQuery.isArray(selectors)){var level=1;while(cur&&cur.ownerDocument&&cur!==context){for(i=0;i<selectors.length;i++)jQuery(cur).is(selectors[i])&&ret.push({selector:selectors[i],elem:cur,level:level});cur=cur.parentNode,level++}return ret}var pos=POS.test(selectors)||typeof selectors!="string"?jQuery(selectors,context||this.context):0;for(i=0,l=this.length;i<l;i++){cur=this[i];while(cur){if(pos?pos.index(cur)>-1:jQuery.find.matchesSelector(cur,selectors)){ret.push(cur);break}cur=cur.parentNode;if(!cur||!cur.ownerDocument||cur===context||cur.nodeType===11)break}}return ret=ret.length>1?jQuery.unique(ret):ret,this.pushStack(ret,"closest",selectors)},index:function(elem){return elem?typeof elem=="string"?jQuery.inArray(this[0],jQuery(elem)):jQuery.inArray(elem.jquery?elem[0]:elem,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(selector,context){var set=typeof selector=="string"?jQuery(selector,context):jQuery.makeArray(selector&&selector.nodeType?[selector]:selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}}),jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);return runtil.test(name)||(selector=until),selector&&typeof selector=="string"&&(ret=jQuery.filter(selector,ret)),ret=this.length>1&&!guaranteedUnique[name]?jQuery.unique(ret):ret,(this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)&&(ret=ret.reverse()),this.pushStack(ret,name,slice.call(arguments).join(","))}}),jQuery.extend({filter:function(expr,elems,not){return not&&(expr=":not("+expr+")"),elems.length===1?jQuery.find.matchesSelector(elems[0],expr)?[elems[0]]:[]:jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until)))cur.nodeType===1&&matched.push(cur),cur=cur[dir];return matched},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir])if(cur.nodeType===1&&++num===result)break;return cur},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling)n.nodeType===1&&n!==elem&&r.push(n);return r}});var nodeNames="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style)/i,rnocache=/<(?:script|object|embed|option|style)/i,rnoshimcache=new RegExp("<(?:"+nodeNames+")[\\s/>]","i"),rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/\/(java|ecma)script/i,rcleanScript=/^\s*<!(?:\[CDATA\[|\-\-)/,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},safeFragment=createSafeFragment(document);wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td,jQuery.support.htmlSerialize||(wrapMap._default=[1,"div<div>","</div>"]),jQuery.fn.extend({text:function(value){return jQuery.access(this,function(value){return value===undefined?jQuery.text(this):this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(value))},null,value,arguments.length)},wrapAll:function(html){if(jQuery.isFunction(html))return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))});if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&wrap.insertBefore(this[0]),wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1)elem=elem.firstChild;return elem}).append(this)}return this},wrapInner:function(html){return jQuery.isFunction(html)?this.each(function(i){jQuery(this).wrapInner(html.call(this,i))}):this.each(function(){var self=jQuery(this),contents=self.contents();contents.length?contents.wrapAll(html):self.append(html)})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){jQuery.nodeName(this,"body")||jQuery(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(elem){this.nodeType===1&&this.appendChild(elem)})},prepend:function(){return this.domManip(arguments,!0,function(elem){this.nodeType===1&&this.insertBefore(elem,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this)});if(arguments.length){var set=jQuery.clean(arguments);return set.push.apply(set,this.toArray()),this.pushStack(set,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)});if(arguments.length){var set=this.pushStack(this,"after",arguments);return set.push.apply(set,jQuery.clean(arguments)),set}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++)if(!selector||jQuery.filter(selector,[elem]).length)!keepData&&elem.nodeType===1&&(jQuery.cleanData(elem.getElementsByTagName("*")),jQuery.cleanData([elem])),elem.parentNode&&elem.parentNode.removeChild(elem);return this},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){elem.nodeType===1&&jQuery.cleanData(elem.getElementsByTagName("*"));while(elem.firstChild)elem.removeChild(elem.firstChild)}return this},clone:function(dataAndEvents,deepDataAndEvents){return dataAndEvents=dataAndEvents==null?!1:dataAndEvents,deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents,this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return jQuery.access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined)return elem.nodeType===1?elem.innerHTML.replace(rinlinejQuery,""):null;if(typeof value=="string"&&!rnoInnerhtml.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++)elem=this[i]||{},elem.nodeType===1&&(jQuery.cleanData(elem.getElementsByTagName("*")),elem.innerHTML=value);elem=0}catch(e){}}elem&&this.empty().append(value)},null,value,arguments.length)},replaceWith:function(value){return this[0]&&this[0].parentNode?jQuery.isFunction(value)?this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))}):(typeof value!="string"&&(value=jQuery(value).detach()),this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove(),next?jQuery(next).before(value):jQuery(parent).append(value)})):this.length?this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value):this},detach:function(selector){return this.remove(selector,!0)},domManip:function(args,table,callback){var results,first,fragment,parent,value=args[0],scripts=[];if(!jQuery.support.checkClone&&arguments.length===3&&typeof value=="string"&&rchecked.test(value))return this.each(function(){jQuery(this).domManip(args,table,callback,!0)});if(jQuery.isFunction(value))return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined),self.domManip(args,table,callback)});if(this[0]){parent=value&&value.parentNode,jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length?results={fragment:parent}:results=jQuery.buildFragment(args,this,scripts),fragment=results.fragment,fragment.childNodes.length===1?first=fragment=fragment.firstChild:first=fragment.firstChild;if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length,lastIndex=l-1;i<l;i++)callback.call(table?root(this[i],first):this[i],results.cacheable||l>1&&i<lastIndex?jQuery.clone(fragment,!0,!0):fragment)}scripts.length&&jQuery.each(scripts,function(i,elem){elem.src?jQuery.ajax({type:"GET",global:!1,url:elem.src,async:!1,dataType:"script"}):jQuery.globalEval((elem.text||elem.textContent||elem.innerHTML||"").replace(rcleanScript,"/*$0*/")),elem.parentNode&&elem.parentNode.removeChild(elem)})}return this}}),jQuery.buildFragment=function(args,nodes,scripts){var fragment,cacheable,cacheresults,doc,first=args[0];return nodes&&nodes[0]&&(doc=nodes[0].ownerDocument||nodes[0]),doc.createDocumentFragment||(doc=document),args.length===1&&typeof first=="string"&&first.length<512&&doc===document&&first.charAt(0)==="<"&&!rnocache.test(first)&&(jQuery.support.checkClone||!rchecked.test(first))&&(jQuery.support.html5Clone||!rnoshimcache.test(first))&&(cacheable=!0,cacheresults=jQuery.fragments[first],cacheresults&&cacheresults!==1&&(fragment=cacheresults)),fragment||(fragment=doc.createDocumentFragment(),jQuery.clean(args,doc,fragment,scripts)),cacheable&&(jQuery.fragments[first]=cacheresults?fragment:1),{fragment:fragment,cacheable:cacheable}},jQuery.fragments={},jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1)return insert[original](this[0]),this;for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(!0):this).get();jQuery(insert[i])[original](elems),ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}),jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var srcElements,destElements,i,clone=jQuery.support.html5Clone||jQuery.isXMLDoc(elem)||!rnoshimcache.test("<"+elem.nodeName+">")?elem.cloneNode(!0):shimCloneNode(elem);if((!jQuery.support.noCloneEvent||!jQuery.support.noCloneChecked)&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){cloneFixAttributes(elem,clone),srcElements=getAll(elem),destElements=getAll(clone);for(i=0;srcElements[i];++i)destElements[i]&&cloneFixAttributes(srcElements[i],destElements[i])}if(dataAndEvents){cloneCopyEvent(elem,clone);if(deepDataAndEvents){srcElements=getAll(elem),destElements=getAll(clone);for(i=0;srcElements[i];++i)cloneCopyEvent(srcElements[i],destElements[i])}}return srcElements=destElements=null,clone},clean:function(elems,context,fragment,scripts){var checkScriptType,script,j,ret=[];context=context||document,typeof context.createElement=="undefined"&&(context=context.ownerDocument||context[0]&&context[0].ownerDocument||document);for(var i=0,elem;(elem=elems[i])!=null;i++){typeof elem=="number"&&(elem+="");if(!elem)continue;if(typeof elem=="string")if(!rhtml.test(elem))elem=context.createTextNode(elem);else{elem=elem.replace(rxhtmlTag,"<$1></$2>");var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div"),safeChildNodes=safeFragment.childNodes,remove;context===document?safeFragment.appendChild(div):createSafeFragment(context).appendChild(div),div.innerHTML=wrap[1]+elem+wrap[2];while(depth--)div=div.lastChild;if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(j=tbody.length-1;j>=0;--j)jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length&&tbody[j].parentNode.removeChild(tbody[j])}!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)&&div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild),elem=div.childNodes,div&&(div.parentNode.removeChild(div),safeChildNodes.length>0&&(remove=safeChildNodes[safeChildNodes.length-1],remove&&remove.parentNode&&remove.parentNode.removeChild(remove)))}var len;if(!jQuery.support.appendChecked)if(elem[0]&&typeof (len=elem.length)=="number")for(j=0;j<len;j++)findInputs(elem[j]);else findInputs(elem);elem.nodeType?ret.push(elem):ret=jQuery.merge(ret,elem)}if(fragment){checkScriptType=function(elem){return!elem.type||rscriptType.test(elem.type)};for(i=0;ret[i];i++){script=ret[i];if(scripts&&jQuery.nodeName(script,"script")&&(!script.type||rscriptType.test(script.type)))scripts.push(script.parentNode?script.parentNode.removeChild(script):script);else{if(script.nodeType===1){var jsTags=jQuery.grep(script.getElementsByTagName("script"),checkScriptType);ret.splice.apply(ret,[i+1,0].concat(jsTags))}fragment.appendChild(script)}}}return ret},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()])continue;id=elem[jQuery.expando];if(id){data=cache[id];if(data&&data.events){for(var type in data.events)special[type]?jQuery.event.remove(elem,type):jQuery.removeEvent(elem,type,data.handle);data.handle&&(data.handle.elem=null)}deleteExpando?delete elem[jQuery.expando]:elem.removeAttribute&&elem.removeAttribute(jQuery.expando),delete cache[id]}}}});var ralpha=/alpha\([^)]*\)/i,ropacity=/opacity=([^)]*)/,rupper=/([A-Z]|^ms)/g,rnum=/^[\-+]?(?:\d*\.)?\d+$/i,rnumnonpx=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rrelNum=/^([\-+])=([\-+.\de]+)/,rmargin=/^margin/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssExpand=["Top","Right","Bottom","Left"],curCSS,getComputedStyle,currentStyle;jQuery.fn.css=function(name,value){return jQuery.access(this,function(elem,name,value){return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}return elem.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":jQuery.support.cssFloat?"cssFloat":"styleFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style)return;var ret,type,origName=jQuery.camelCase(name),style=elem.style,hooks=jQuery.cssHooks[origName];name=jQuery.cssProps[origName]||origName;if(value===undefined)return hooks&&"get"in hooks&&(ret=hooks.get(elem,!1,extra))!==undefined?ret:style[name];type=typeof value,type==="string"&&(ret=rrelNum.exec(value))&&(value=+(ret[1]+1)*+ret[2]+parseFloat(jQuery.css(elem,name)),type="number");if(value==null||type==="number"&&isNaN(value))return;type==="number"&&!jQuery.cssNumber[origName]&&(value+="px");if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value))!==undefined)try{style[name]=value}catch(e){}},css:function(elem,name,extra){var ret,hooks;name=jQuery.camelCase(name),hooks=jQuery.cssHooks[name],name=jQuery.cssProps[name]||name,name==="cssFloat"&&(name="float");if(hooks&&"get"in hooks&&(ret=hooks.get(elem,!0,extra))!==undefined)return ret;if(curCSS)return curCSS(elem,name)},swap:function(elem,options,callback){var old={},ret,name;for(name in options)old[name]=elem.style[name],elem.style[name]=options[name];ret=callback.call(elem);for(name in options)elem.style[name]=old[name];return ret}}),jQuery.curCSS=jQuery.css,document.defaultView&&document.defaultView.getComputedStyle&&(getComputedStyle=function(elem,name){var ret,defaultView,computedStyle,width,style=elem.style;return name=name.replace(rupper,"-$1").toLowerCase(),(defaultView=elem.ownerDocument.defaultView)&&(computedStyle=defaultView.getComputedStyle(elem,null))&&(ret=computedStyle.getPropertyValue(name),ret===""&&!jQuery.contains(elem.ownerDocument.documentElement,elem)&&(ret=jQuery.style(elem,name))),!jQuery.support.pixelMargin&&computedStyle&&rmargin.test(name)&&rnumnonpx.test(ret)&&(width=style.width,style.width=ret,ret=computedStyle.width,style.width=width),ret}),document.documentElement.currentStyle&&(currentStyle=function(elem,name){var left,rsLeft,uncomputed,ret=elem.currentStyle&&elem.currentStyle[name],style=elem.style;return ret==null&&style&&(uncomputed=style[name])&&(ret=uncomputed),rnumnonpx.test(ret)&&(left=style.left,rsLeft=elem.runtimeStyle&&elem.runtimeStyle.left,rsLeft&&(elem.runtimeStyle.left=elem.currentStyle.left),style.left=name==="fontSize"?"1em":ret,ret=style.pixelLeft+"px",style.left=left,rsLeft&&(elem.runtimeStyle.left=rsLeft)),ret===""?"auto":ret}),curCSS=getComputedStyle||currentStyle,jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed)return elem.offsetWidth!==0?getWidthOrHeight(elem,name,extra):jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)})},set:function(elem,value){return rnum.test(value)?value+"px":value}}}),jQuery.support.opacity||(jQuery.cssHooks.opacity={get:function(elem,computed){return ropacity.test((computed&&elem.currentStyle?elem.currentStyle.filter:elem.style.filter)||"")?parseFloat(RegExp.$1)/100+"":computed?"1":""},set:function(elem,value){var style=elem.style,currentStyle=elem.currentStyle,opacity=jQuery.isNumeric(value)?"alpha(opacity="+value*100+")":"",filter=currentStyle&&currentStyle.filter||style.filter||"";style.zoom=1;if(value>=1&&jQuery.trim(filter.replace(ralpha,""))===""){style.removeAttribute("filter");if(currentStyle&&!currentStyle.filter)return}style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):filter+" "+opacity}}),jQuery(function(){jQuery.support.reliableMarginRight||(jQuery.cssHooks.marginRight={get:function(elem,computed){return jQuery.swap(elem,{display:"inline-block"},function(){return computed?curCSS(elem,"margin-right"):elem.style.marginRight})}})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight;return width===0&&height===0||!jQuery.support.reliableHiddenOffsets&&(elem.style&&elem.style.display||jQuery.css(elem,"display"))==="none"},jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)}),jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i,parts=typeof value=="string"?value.split(" "):[value],expanded={};for(i=0;i<4;i++)expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0];return expanded}}});var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rhash=/#.*$/,rheaders=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,rinput=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rlocalProtocol=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rquery=/\?/,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,rselectTextarea=/^(?:select|textarea)/i,rspacesAjax=/\s+/,rts=/([?&])_=[^&]*/,rurl=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,_load=jQuery.fn.load,prefilters={},transports={},ajaxLocation,ajaxLocParts,allTypes=["*/"]+["*"];try{ajaxLocation=location.href}catch(e){ajaxLocation=document.createElement("a"),ajaxLocation.href="",ajaxLocation=ajaxLocation.href}ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[],jQuery.fn.extend({load:function(url,params,callback){if(typeof url!="string"&&_load)return _load.apply(this,arguments);if(!this.length)return this;var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var type="GET";params&&(jQuery.isFunction(params)?(callback=params,params=undefined):typeof params=="object"&&(params=jQuery.param(params,jQuery.ajaxSettings.traditional),type="POST"));var self=this;return jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(jqXHR,status,responseText){responseText=jqXHR.responseText,jqXHR.isResolved()&&(jqXHR.done(function(r){responseText=r}),self.html(selector?jQuery("<div>").append(responseText.replace(rscript,"")).find(selector):responseText)),callback&&self.each(callback,[responseText,status,jqXHR])}}),this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}}),jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.on(o,f)}}),jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){return jQuery.isFunction(data)&&(type=type||callback,callback=data,data=undefined),jQuery.ajax({type:method,url:url,data:data,success:callback,dataType:type})}}),jQuery.extend({getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},ajaxSetup:function(target,settings){return settings?ajaxExtend(target,jQuery.ajaxSettings):(settings=target,target=jQuery.ajaxSettings),ajaxExtend(target,settings),target},ajaxSettings:{url:ajaxLocation,isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":allTypes},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":window.String,"text html":!0,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){function done(status,nativeStatusText,responses,headers){if(state===2)return;state=2,timeoutTimer&&clearTimeout(timeoutTimer),transport=undefined,responseHeadersString=headers||"",jqXHR.readyState=status>0?4:0;var isSuccess,success,error,statusText=nativeStatusText,response=responses?ajaxHandleResponses(s,jqXHR,responses):undefined,lastModified,etag;if(status>=200&&status<300||status===304){if(s.ifModified){if(lastModified=jqXHR.getResponseHeader("Last-Modified"))jQuery.lastModified[ifModifiedKey]=lastModified;if(etag=jqXHR.getResponseHeader("Etag"))jQuery.etag[ifModifiedKey]=etag}if(status===304)statusText="notmodified",isSuccess=!0;else try{success=ajaxConvert(s,response),statusText="success",isSuccess=!0}catch(e){statusText="parsererror",error=e}}else{error=statusText;if(!statusText||status)statusText="error",status<0&&(status=0)}jqXHR.status=status,jqXHR.statusText=""+(nativeStatusText||statusText),isSuccess?deferred.resolveWith(callbackContext,[success,statusText,jqXHR]):deferred.rejectWith(callbackContext,[jqXHR,statusText,error]),jqXHR.statusCode(statusCode),statusCode=undefined,fireGlobals&&globalEventContext.trigger("ajax"+(isSuccess?"Success":"Error"),[jqXHR,s,isSuccess?success:error]),completeDeferred.fireWith(callbackContext,[jqXHR,statusText]),fireGlobals&&(globalEventContext.trigger("ajaxComplete",[jqXHR,s]),--jQuery.active||jQuery.event.trigger("ajaxStop"))}typeof url=="object"&&(options=url,url=undefined),options=options||{};var s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=callbackContext!==s&&(callbackContext.nodeType||callbackContext instanceof jQuery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},ifModifiedKey,requestHeaders={},requestHeadersNames={},responseHeadersString,responseHeaders,transport,timeoutTimer,parts,state=0,fireGlobals,i,jqXHR={readyState:0,setRequestHeader:function(name,value){if(!state){var lname=name.toLowerCase();name=requestHeadersNames[lname]=requestHeadersNames[lname]||name,requestHeaders[name]=value}return this},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString))responseHeaders[match[1].toLowerCase()]=match[2]}match=responseHeaders[key.toLowerCase()]}return match===undefined?null:match},overrideMimeType:function(type){return state||(s.mimeType=type),this},abort:function(statusText){return statusText=statusText||"abort",transport&&transport.abort(statusText),done(0,statusText),this}};deferred.promise(jqXHR),jqXHR.success=jqXHR.done,jqXHR.error=jqXHR.fail,jqXHR.complete=completeDeferred.add,jqXHR.statusCode=function(map){if(map){var tmp;if(state<2)for(tmp in map)statusCode[tmp]=[statusCode[tmp],map[tmp]];else tmp=map[jqXHR.status],jqXHR.then(tmp,tmp)}return this},s.url=((url||s.url)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//"),s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().split(rspacesAjax),s.crossDomain==null&&(parts=rurl.exec(s.url.toLowerCase()),s.crossDomain=!(!parts||parts[1]==ajaxLocParts[1]&&parts[2]==ajaxLocParts[2]&&(parts[3]||(parts[1]==="http:"?80:443))==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?80:443)))),s.data&&s.processData&&typeof s.data!="string"&&(s.data=jQuery.param(s.data,s.traditional)),inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2)return!1;fireGlobals=s.global,s.type=s.type.toUpperCase(),s.hasContent=!rnoContent.test(s.type),fireGlobals&&jQuery.active++===0&&jQuery.event.trigger("ajaxStart");if(!s.hasContent){s.data&&(s.url+=(rquery.test(s.url)?"&":"?")+s.data,delete s.data),ifModifiedKey=s.url;if(s.cache===!1){var ts=jQuery.now(),ret=s.url.replace(rts,"$1_="+ts);s.url=ret+(ret===s.url?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}}(s.data&&s.hasContent&&s.contentType!==!1||options.contentType)&&jqXHR.setRequestHeader("Content-Type",s.contentType),s.ifModified&&(ifModifiedKey=ifModifiedKey||s.url,jQuery.lastModified[ifModifiedKey]&&jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[ifModifiedKey]),jQuery.etag[ifModifiedKey]&&jqXHR.setRequestHeader("If-None-Match",jQuery.etag[ifModifiedKey])),jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers)jqXHR.setRequestHeader(i,s.headers[i]);if(!s.beforeSend||s.beforeSend.call(callbackContext,jqXHR,s)!==!1&&state!==2){for(i in{success:1,error:1,complete:1})jqXHR[i](s[i]);transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport)done(-1,"No Transport");else{jqXHR.readyState=1,fireGlobals&&globalEventContext.trigger("ajaxSend",[jqXHR,s]),s.async&&s.timeout>0&&(timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout));try{state=1,transport.send(requestHeaders,done)}catch(e){if(!(state<2))throw e;done(-1,e)}}return jqXHR}return jqXHR.abort(),!1},param:function(a,traditional){var s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value,s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)};traditional===undefined&&(traditional=jQuery.ajaxSettings.traditional);if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a))jQuery.each(a,function(){add(this.name,this.value)});else for(var prefix in a)buildParams(prefix,a[prefix],traditional,add);return s.join("&").replace(r20,"+")}}),jQuery.extend({active:0,lastModified:{},etag:{}});var jsc=jQuery.now(),jsre=/(\=)\?(&|$)|\?\?/i;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return jQuery.expando+"_"+jsc++}}),jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var inspectData=typeof s.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(s.contentType);if(s.dataTypes[0]==="jsonp"||s.jsonp!==!1&&(jsre.test(s.url)||inspectData&&jsre.test(s.data))){var responseContainer,jsonpCallback=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback,previous=window[jsonpCallback],url=s.url,data=s.data,replace="$1"+jsonpCallback+"$2";return s.jsonp!==!1&&(url=url.replace(jsre,replace),s.url===url&&(inspectData&&(data=data.replace(jsre,replace)),s.data===data&&(url+=(/\?/.test(url)?"&":"?")+s.jsonp+"="+jsonpCallback))),s.url=url,s.data=data,window[jsonpCallback]=function(response){responseContainer=[response]},jqXHR.always(function(){window[jsonpCallback]=previous,responseContainer&&jQuery.isFunction(previous)&&window[jsonpCallback](responseContainer[0])}),s.converters["script json"]=function(){return responseContainer||jQuery.error(jsonpCallback+" was not called"),responseContainer[0]},s.dataTypes[0]="json","script"}}),jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(text){return jQuery.globalEval(text),text}}}),jQuery.ajaxPrefilter("script",function(s){s.cache===undefined&&(s.cache=!1),s.crossDomain&&(s.type="GET",s.global=!1)}),jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;return{send:function(_,callback){script=document.createElement("script"),script.async="async",s.scriptCharset&&(script.charset=s.scriptCharset),script.src=s.url,script.onload=script.onreadystatechange=function(_,isAbort){if(isAbort||!script.readyState||/loaded|complete/.test(script.readyState))script.onload=script.onreadystatechange=null,head&&script.parentNode&&head.removeChild(script),script=undefined,isAbort||callback(200,"success")},head.insertBefore(script,head.firstChild)},abort:function(){script&&script.onload(0,1)}}}});var xhrOnUnloadAbort=window.ActiveXObject?function(){for(var key in xhrCallbacks)xhrCallbacks[key](0,1)}:!1,xhrId=0,xhrCallbacks;jQuery.ajaxSettings.xhr=window.ActiveXObject?function(){return!this.isLocal&&createStandardXHR()||createActiveXHR()}:createStandardXHR,function(xhr){jQuery.extend(jQuery.support,{ajax:!!xhr,cors:!!xhr&&"withCredentials"in xhr})}(jQuery.ajaxSettings.xhr()),jQuery.support.ajax&&jQuery.ajaxTransport(function(s){if(!s.crossDomain||jQuery.support.cors){var callback;return{send:function(headers,complete){var xhr=s.xhr(),handle,i;s.username?xhr.open(s.type,s.url,s.async,s.username,s.password):xhr.open(s.type,s.url,s.async);if(s.xhrFields)for(i in s.xhrFields)xhr[i]=s.xhrFields[i];s.mimeType&&xhr.overrideMimeType&&xhr.overrideMimeType(s.mimeType),!s.crossDomain&&!headers["X-Requested-With"]&&(headers["X-Requested-With"]="XMLHttpRequest");try{for(i in headers)xhr.setRequestHeader(i,headers[i])}catch(_){}xhr.send(s.hasContent&&s.data||null),callback=function(_,isAbort){var status,statusText,responseHeaders,responses,xml;try{if(callback&&(isAbort||xhr.readyState===4)){callback=undefined,handle&&(xhr.onreadystatechange=jQuery.noop,xhrOnUnloadAbort&&delete xhrCallbacks[handle]);if(isAbort)xhr.readyState!==4&&xhr.abort();else{status=xhr.status,responseHeaders=xhr.getAllResponseHeaders(),responses={},xml=xhr.responseXML,xml&&xml.documentElement&&(responses.xml=xml);try{responses.text=xhr.responseText}catch(_){}try{statusText=xhr.statusText}catch(e){statusText=""}!status&&s.isLocal&&!s.crossDomain?status=responses.text?200:404:status===1223&&(status=204)}}}catch(firefoxAccessException){isAbort||complete(-1,firefoxAccessException)}responses&&complete(status,statusText,responses,responseHeaders)},!s.async||xhr.readyState===4?callback():(handle=++xhrId,xhrOnUnloadAbort&&(xhrCallbacks||(xhrCallbacks={},jQuery(window).unload(xhrOnUnloadAbort)),xhrCallbacks[handle]=callback),xhr.onreadystatechange=callback)},abort:function(){callback&&callback(0,1)}}}});var elemdisplay={},iframe,iframeDoc,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],fxNow;jQuery.fn.extend({show:function(speed,easing,callback){var elem,display;if(speed||speed===0)return this.animate(genFx("show",3),speed,easing,callback);for(var i=0,j=this.length;i<j;i++)elem=this[i],elem.style&&(display=elem.style.display,!jQuery._data(elem,"olddisplay")&&display==="none"&&(display=elem.style.display=""),(display===""&&jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument.documentElement,elem))&&jQuery._data(elem,"olddisplay",defaultDisplay(elem.nodeName)));for(i=0;i<j;i++){elem=this[i];if(elem.style){display=elem.style.display;if(display===""||display==="none")elem.style.display=jQuery._data(elem,"olddisplay")||""}}return this},hide:function(speed,easing,callback){if(speed||speed===0)return this.animate(genFx("hide",3),speed,easing,callback);var elem,display,i=0,j=this.length;for(;i<j;i++)elem=this[i],elem.style&&(display=jQuery.css(elem,"display"),display!=="none"&&!jQuery._data(elem,"olddisplay")&&jQuery._data(elem,"olddisplay",display));for(i=0;i<j;i++)this[i].style&&(this[i].style.display="none");return this},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2,callback){var bool=typeof fn=="boolean";return jQuery.isFunction(fn)&&jQuery.isFunction(fn2)?this._toggle.apply(this,arguments):fn==null||bool?this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]()}):this.animate(genFx("toggle",3),fn,fn2,callback),this},fadeTo:function(speed,to,easing,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){function doAnimation(){optall.queue===!1&&jQuery._mark(this);var opt=jQuery.extend({},optall),isElement=this.nodeType===1,hidden=isElement&&jQuery(this).is(":hidden"),name,val,p,e,hooks,replace,parts,start,end,unit,method;opt.animatedProperties={};for(p in prop){name=jQuery.camelCase(p),p!==name&&(prop[name]=prop[p],delete prop[p]);if((hooks=jQuery.cssHooks[name])&&"expand"in hooks){replace=hooks.expand(prop[name]),delete prop[name];for(p in replace)p in prop||(prop[p]=replace[p])}}for(name in prop){val=prop[name],jQuery.isArray(val)?(opt.animatedProperties[name]=val[1],val=prop[name]=val[0]):opt.animatedProperties[name]=opt.specialEasing&&opt.specialEasing[name]||opt.easing||"swing";if(val==="hide"&&hidden||val==="show"&&!hidden)return opt.complete.call(this);isElement&&(name==="height"||name==="width")&&(opt.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],jQuery.css(this,"display")==="inline"&&jQuery.css(this,"float")==="none"&&(!jQuery.support.inlineBlockNeedsLayout||defaultDisplay(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}opt.overflow!=null&&(this.style.overflow="hidden");for(p in prop)e=new jQuery.fx(this,opt,p),val=prop[p],rfxtypes.test(val)?(method=jQuery._data(this,"toggle"+p)||(val==="toggle"?hidden?"show":"hide":0),method?(jQuery._data(this,"toggle"+p,method==="show"?"hide":"show"),e[method]()):e[val]()):(parts=rfxnum.exec(val),start=e.cur(),parts?(end=parseFloat(parts[2]),unit=parts[3]||(jQuery.cssNumber[p]?"":"px"),unit!=="px"&&(jQuery.style(this,p,(end||1)+unit),start=(end||1)/e.cur()*start,jQuery.style(this,p,start+unit)),parts[1]&&(end=(parts[1]==="-="?-1:1)*end+start),e.custom(start,end,unit)):e.custom(start,val,""));return!0}var optall=jQuery.speed(speed,easing,callback);return jQuery.isEmptyObject(prop)?this.each(optall.complete,[!1]):(prop=jQuery.extend({},prop),optall.queue===!1?this.each(doAnimation):this.queue(optall.queue,doAnimation))},stop:function(type,clearQueue,gotoEnd){return typeof type!="string"&&(gotoEnd=clearQueue,clearQueue=type,type=undefined),clearQueue&&type!==!1&&this.queue(type||"fx",[]),this.each(function(){function stopQueue(elem,data,index){var hooks=data[index];jQuery.removeData(elem,index,!0),hooks.stop(gotoEnd)}var index,hadTimers=!1,timers=jQuery.timers,data=jQuery._data(this);gotoEnd||jQuery._unmark(!0,this);if(type==null)for(index in data)data[index]&&data[index].stop&&index.indexOf(".run")===index.length-4&&stopQueue(this,data,index);else data[index=type+".run"]&&data[index].stop&&stopQueue(this,data,index);for(index=timers.length;index--;)timers[index].elem===this&&(type==null||timers[index].queue===type)&&(gotoEnd?timers[index](!0):timers[index].saveState(),hadTimers=!0,timers.splice(index,1));(!gotoEnd||!hadTimers)&&jQuery.dequeue(this,type)})}}),jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}}),jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed=="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration=="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===!0)opt.queue="fx";return opt.old=opt.complete,opt.complete=function(noUnmark){jQuery.isFunction(opt.old)&&opt.old.call(this),opt.queue?jQuery.dequeue(this,opt.queue):noUnmark!==!1&&jQuery._unmark(this)},opt},easing:{linear:function(p){return p},swing:function(p){return-Math.cos(p*Math.PI)/2+.5}},timers:[],fx:function(elem,options,prop){this.options=options,this.elem=elem,this.prop=prop,options.orig=options.orig||{}}}),jQuery.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var parsed,r=jQuery.css(this.elem,this.prop);return isNaN(parsed=parseFloat(r))?!r||r==="auto"?0:r:parsed}return this.elem[this.prop]},custom:function(from,to,unit){function t(gotoEnd){return self.step(gotoEnd)}var self=this,fx=jQuery.fx;this.startTime=fxNow||createFxNow(),this.end=to,this.now=this.start=from,this.pos=this.state=0,this.unit=unit||this.unit||(jQuery.cssNumber[this.prop]?"":"px"),t.queue=this.options.queue,t.elem=this.elem,t.saveState=function(){jQuery._data(self.elem,"fxshow"+self.prop)===undefined&&(self.options.hide?jQuery._data(self.elem,"fxshow"+self.prop,self.start):self.options.show&&jQuery._data(self.elem,"fxshow"+self.prop,self.end))},t()&&jQuery.timers.push(t)&&!timerId&&(timerId=setInterval(fx.tick,fx.interval))},show:function(){var dataShow=jQuery._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=dataShow||jQuery.style(this.elem,this.prop),this.options.show=!0,dataShow!==undefined?this.custom(this.cur(),dataShow):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery._data(this.elem,"fxshow"+this.prop)||jQuery.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(gotoEnd){var p,n,complete,t=fxNow||createFxNow(),done=!0,elem=this.elem,options=this.options;if(gotoEnd||t>=options.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),options.animatedProperties[this.prop]=!0;for(p in options.animatedProperties)options.animatedProperties[p]!==!0&&(done=!1);if(done){options.overflow!=null&&!jQuery.support.shrinkWrapBlocks&&jQuery.each(["","X","Y"],function(index,value){elem.style["overflow"+value]=options.overflow[index]}),options.hide&&jQuery(elem).hide();if(options.hide||options.show)for(p in options.animatedProperties)jQuery.style(elem,p,options.orig[p]),jQuery.removeData(elem,"fxshow"+p,!0),jQuery.removeData(elem,"toggle"+p,!0);complete=options.complete,complete&&(options.complete=!1,complete.call(elem))}return!1}return options.duration==Infinity?this.now=t:(n=t-this.startTime,this.state=n/options.duration,this.pos=jQuery.easing[options.animatedProperties[this.prop]](this.state,n,0,1,options.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},jQuery.extend(jQuery.fx,{tick:function(){var timer,timers=jQuery.timers,i=0;for(;i<timers.length;i++)timer=timers[i],!timer()&&timers[i]===timer&&timers.splice(i--,1);timers.length||jQuery.fx.stop()},interval:13,stop:function(){clearInterval(timerId),timerId=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now)},_default:function(fx){fx.elem.style&&fx.elem.style[fx.prop]!=null?fx.elem.style[fx.prop]=fx.now+fx.unit:fx.elem[fx.prop]=fx.now}}}),jQuery.each(fxAttrs.concat.apply([],fxAttrs),function(i,prop){prop.indexOf("margin")&&(jQuery.fx.step[prop]=function(fx){jQuery.style(fx.elem,prop,Math.max(0,fx.now)+fx.unit)})}),jQuery.expr&&jQuery.expr.filters&&(jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length});var getOffset,rtable=/^t(?:able|d|h)$/i,rroot=/^(?:body|html)$/i;"getBoundingClientRect"in document.documentElement?getOffset=function(elem,doc,docElem,box){try{box=elem.getBoundingClientRect()}catch(e){}if(!box||!jQuery.contains(docElem,elem))return box?{top:box.top,left:box.left}:{top:0,left:0};var body=doc.body,win=getWindow(doc),clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,scrollTop=win.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop,scrollLeft=win.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft,top=box.top+scrollTop-clientTop,left=box.left+scrollLeft-clientLeft;return{top:top,left:left}}:getOffset=function(elem,doc,docElem){var computedStyle,offsetParent=elem.offsetParent,prevOffsetParent=elem,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.support.fixedPosition&&prevComputedStyle.position==="fixed")break;computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top-=elem.scrollTop,left-=elem.scrollLeft,elem===offsetParent&&(top+=elem.offsetTop,left+=elem.offsetLeft,jQuery.support.doesNotAddBorder&&(!jQuery.support.doesAddBorderForTableAndCells||!rtable.test(elem.nodeName))&&(top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0),prevOffsetParent=offsetParent,offsetParent=elem.offsetParent),jQuery.support.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"&&(top+=parseFloat(computedStyle.borderTopWidth)||0,left+=parseFloat(computedStyle.borderLeftWidth)||0),prevComputedStyle=computedStyle}if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static")top+=body.offsetTop,left+=body.offsetLeft;return jQuery.support.fixedPosition&&prevComputedStyle.position==="fixed"&&(top+=Math.max(docElem.scrollTop,body.scrollTop),left+=Math.max(docElem.scrollLeft,body.scrollLeft)),{top:top,left:left}},jQuery.fn.offset=function(options){if(arguments.length)return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)});var elem=this[0],doc=elem&&elem.ownerDocument;return doc?elem===doc.body?jQuery.offset.bodyOffset(elem):getOffset(elem,doc,doc.documentElement):null},jQuery.offset={bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;return jQuery.support.doesNotIncludeMarginInBodyOffset&&(top+=parseFloat(jQuery.css(body,"marginTop"))||0,left+=parseFloat(jQuery.css(body,"marginLeft"))||0),{top:top,left:left}},setOffset:function(elem,options,i){var position=jQuery.css(elem,"position");position==="static"&&(elem.style.position="relative");var curElem=jQuery(elem),curOffset=curElem.offset(),curCSSTop=jQuery.css(elem,"top"),curCSSLeft=jQuery.css(elem,"left"),calculatePosition=(position==="absolute"||position==="fixed")&&jQuery.inArray("auto",[curCSSTop,curCSSLeft])>-1,props={},curPosition={},curTop,curLeft;calculatePosition?(curPosition=curElem.position(),curTop=curPosition.top,curLeft=curPosition.left):(curTop=parseFloat(curCSSTop)||0,curLeft=parseFloat(curCSSLeft)||0),jQuery.isFunction(options)&&(options=options.call(elem,i,curOffset)),options.top!=null&&(props.top=options.top-curOffset.top+curTop),options.left!=null&&(props.left=options.left-curOffset.left+curLeft),"using"in options?options.using.call(elem,props):curElem.css(props)}},jQuery.fn.extend({position:function(){if(!this[0])return null;var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();return offset.top-=parseFloat(jQuery.css(elem,"marginTop"))||0,offset.left-=parseFloat(jQuery.css(elem,"marginLeft"))||0,parentOffset.top+=parseFloat(jQuery.css(offsetParent[0],"borderTopWidth"))||0,parentOffset.left+=parseFloat(jQuery.css(offsetParent[0],"borderLeftWidth"))||0,{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&!rroot.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")offsetParent=offsetParent.offsetParent;return offsetParent})}}),jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top=/Y/.test(prop);jQuery.fn[method]=function(val){return jQuery.access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined)return win?prop in win?win[prop]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method];win?win.scrollTo(top?jQuery(win).scrollLeft():val,top?val:jQuery(win).scrollTop()):elem[method]=val},method,val,arguments.length,null)}}),jQuery.each({Height:"height",Width:"width"},function(name,type){var clientProp="client"+name,scrollProp="scroll"+name,offsetProp="offset"+name;jQuery.fn["inner"+name]=function(){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,"padding")):this[type]():null},jQuery.fn["outer"+name]=function(margin){var elem=this[0];return elem?elem.style?parseFloat(jQuery.css(elem,type,margin?"margin":"border")):this[type]():null},jQuery.fn[type]=function(value){return jQuery.access(this,function(elem,type,value){var doc,docElemProp,orig,ret;if(jQuery.isWindow(elem))return doc=elem.document,docElemProp=doc.documentElement[clientProp],jQuery.support.boxModel&&docElemProp||doc.body&&doc.body[clientProp]||docElemProp;if(elem.nodeType===9)return doc=elem.documentElement,doc[clientProp]>=doc[scrollProp]?doc[clientProp]:Math.max(elem.body[scrollProp],doc[scrollProp],elem.body[offsetProp],doc[offsetProp]);if(value===undefined)return orig=jQuery.css(elem,type),ret=parseFloat(orig),jQuery.isNumeric(ret)?ret:orig;jQuery(elem).css(type,value)},type,value,arguments.length,null)}}),window.jQuery=window.$=jQuery,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return jQuery}),jQuery.support.getSetAttribute||(jQuery.removeAttr=function(elem,name){elem.removeAttribute(name)})})(window),define("Library/jquery/jquery-1.7.2",function(){}),define("jquery",["Library/jquery/jquery-1.7.2"],function(){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("jquery"),window.jQuery.noConflict()}),function(){window.ember_assert=function(desc,test){"function"==typeof test&&(test=test()!==!1);if(!test)throw new Error("assertion failed: "+desc)},window.ember_warn=function(message,test){arguments.length===1&&(test=!1),"function"==typeof test&&(test=test()!==!1),test||console.warn("WARNING: "+message)},window.ember_deprecate=function(message,test){if(Ember.TESTING_DEPRECATION)return;arguments.length===1&&(test=!1),"function"==typeof test&&(test=test()!==!1);if(test)return;if(Ember.ENV.RAISE_ON_DEPRECATION)throw new Error(message);var error,stackStr="";try{__fail__.fail()}catch(e){error=e}if(error.stack){var stack;error.arguments?(stack=error.stack.replace(/^\s+at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}($1)").split("\n"),stack.shift()):stack=error.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n"),stackStr="\n    "+stack.slice(2).join("\n    ")}console.warn("DEPRECATION: "+message+stackStr)},window.ember_deprecateFunc=function(message,func){return function(){return window.ember_deprecate(message),func.apply(this,arguments)}}}(),function(){var Handlebars={};window.Handlebars=Handlebars,Handlebars.VERSION="1.0.beta.2",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(name,fn,inverse){inverse&&(fn.not=inverse),this.helpers[name]=fn},Handlebars.registerPartial=function(name,str){this.partials[name]=str},Handlebars.registerHelper("helperMissing",function(arg){if(arguments.length===2)return undefined;throw new Error("Could not find property '"+arg+"'")}),Handlebars.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn,ret="",type=Object.prototype.toString.call(context);type==="[object Function]"&&(context=context());if(context===!0)return fn(this);if(context===!1||context==null)return inverse(this);if(type==="[object Array]"){if(context.length>0)for(var i=0,j=context.length;i<j;i++)ret+=fn(context[i]);else ret=inverse(this);return ret}return fn(context)}),Handlebars.registerHelper("each",function(context,options){var fn=options.fn,inverse=options.inverse,ret="";if(context&&context.length>0)for(var i=0,j=context.length;i<j;i++)ret+=fn(context[i]);else ret=inverse(this);return ret}),Handlebars.registerHelper("if",function(context,options){return!context||Handlebars.Utils.isEmpty(context)?options.inverse(this):options.fn(this)}),Handlebars.registerHelper("unless",function(context,options){var fn=options.fn,inverse=options.inverse;return options.fn=inverse,options.inverse=fn,Handlebars.helpers["if"].call(this,context,options)}),Handlebars.registerHelper("with",function(context,options){return options.fn(context)}),Handlebars.registerHelper("log",function(context){Handlebars.log(context)});var handlebars=function(){var parser={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:this.$=new yy.ProgramNode($$[$0-2],$$[$0]);break;case 3:this.$=new yy.ProgramNode($$[$0]);break;case 4:this.$=new yy.ProgramNode([]);break;case 5:this.$=[$$[$0]];break;case 6:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 7:this.$=new yy.InverseNode($$[$0-2],$$[$0-1],$$[$0]);break;case 8:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0]);break;case 9:this.$=$$[$0];break;case 10:this.$=$$[$0];break;case 11:this.$=new yy.ContentNode($$[$0]);break;case 12:this.$=new yy.CommentNode($$[$0]);break;case 13:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 14:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 15:this.$=$$[$0-1];break;case 16:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1]);break;case 17:this.$=new yy.MustacheNode($$[$0-1][0],$$[$0-1][1],!0);break;case 18:this.$=new yy.PartialNode($$[$0-1]);break;case 19:this.$=new yy.PartialNode($$[$0-2],$$[$0-1]);break;case 20:break;case 21:this.$=[[$$[$0-2]].concat($$[$0-1]),$$[$0]];break;case 22:this.$=[[$$[$0-1]].concat($$[$0]),null];break;case 23:this.$=[[$$[$0-1]],$$[$0]];break;case 24:this.$=[[$$[$0]],null];break;case 25:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 26:this.$=[$$[$0]];break;case 27:this.$=$$[$0];break;case 28:this.$=new yy.StringNode($$[$0]);break;case 29:this.$=new yy.IntegerNode($$[$0]);break;case 30:this.$=new yy.BooleanNode($$[$0]);break;case 31:this.$=new yy.HashNode($$[$0]);break;case 32:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 33:this.$=[$$[$0]];break;case 34:this.$=[$$[$0-2],$$[$0]];break;case 35:this.$=[$$[$0-2],new yy.StringNode($$[$0])];break;case 36:this.$=[$$[$0-2],new yy.IntegerNode($$[$0])];break;case 37:this.$=[$$[$0-2],new yy.BooleanNode($$[$0])];break;case 38:this.$=new yy.IdNode($$[$0]);break;case 39:$$[$0-2].push($$[$0]),this.$=$$[$0-2];break;case 40:this.$=[$$[$0]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(str,hash){throw new Error(str)},parse:function(input){function popStack(n){stack.length=stack.length-2*n,vstack.length=vstack.length-n,lstack.length=lstack.length-n}function lex(){var token;return token=self.lexer.lex()||1,typeof token!="number"&&(token=self.symbols_[token]||token),token}var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0,TERROR=2,EOF=1;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var symbol,preErrorSymbol,state,action,a,r,yyval={},p,len,newState,expected;for(;;){state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:(symbol==null&&(symbol=lex()),action=table[state]&&table[state][symbol]);if(typeof action=="undefined"||!action.length||!action[0]){if(!recovering){expected=[];for(p in table[state])this.terminals_[p]&&p>2&&expected.push("'"+this.terminals_[p]+"'");var errStr="";this.lexer.showPosition?errStr="Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", "):errStr="Parse error on line "+(yylineno+1)+": Unexpected "+(symbol==1?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}if(recovering==3){if(symbol==EOF)throw new Error(errStr||"Parsing halted.");yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,symbol=lex()}for(;;){if(TERROR.toString()in table[state])break;if(state==0)throw new Error(errStr||"Parsing halted.");popStack(1),state=stack[stack.length-1]}preErrorSymbol=symbol,symbol=TERROR,state=stack[stack.length-1],action=table[state]&&table[state][TERROR],recovering=3}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,recovering>0&&recovering--);break;case 2:len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack);if(typeof r!="undefined")return r;len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer=function(){var lexer={EOF:1,parseError:function(str,hash){if(!this.yy.parseError)throw new Error(str);this.yy.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var ch=this._input[0];this.yytext+=ch,this.yyleng++,this.match+=ch,this.matched+=ch;var lines=ch.match(/\n/);return lines&&this.yylineno++,this._input=this._input.slice(1),ch},unput:function(ch){return this._input=ch+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=(new Array(pre.length+1)).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var token,match,col,lines;this._more||(this.yytext="",this.match="");var rules=this._currentRules();for(var i=0;i<rules.length;i++){match=this._input.match(this.rules[rules[i]]);if(match){lines=match[0].match(/\n.*/g),lines&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-1:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[i],this.conditionStack[this.conditionStack.length-1]);if(token)return token;return}}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var r=this.next();return typeof r!="undefined"?r:this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}};return lexer.performAction=function(yy,yy_,$avoiding_name_collisions,YY_START){var YYSTATE=YY_START;switch($avoiding_name_collisions){case 0:this.begin("mu");if(yy_.yytext)return 14;break;case 1:return 14;case 2:return 24;case 3:return 16;case 4:return 20;case 5:return 19;case 6:return 19;case 7:return 23;case 8:return 23;case 9:return yy_.yytext=yy_.yytext.substr(3,yy_.yyleng-5),this.begin("INITIAL"),15;case 10:return 22;case 11:return 34;case 12:return 33;case 13:return 33;case 14:return 36;case 15:break;case 16:return this.begin("INITIAL"),18;case 17:return this.begin("INITIAL"),18;case 18:return yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2).replace(/\\"/g,'"'),28;case 19:return 30;case 20:return 30;case 21:return 29;case 22:return 33;case 23:return yy_.yytext=yy_.yytext.substr(1,yy_.yyleng-2),33;case 24:return"INVALID";case 25:return 5}},lexer.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s/.])/,/^\[.*\]/,/^./,/^$/],lexer.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!1},INITIAL:{rules:[0,1,25],inclusive:!0}},lexer}();return parser.lexer=lexer,parser}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=handlebars,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function(args){if(!args[1])throw new Error("Usage: "+args[0]+" FILE");if(typeof process!="undefined")var source=require("fs").readFileSync(require("path").join(process.cwd(),args[1]),"utf8");else var cwd=require("file").path(require("file").cwd()),source=cwd.join(args[1]).read({charset:"utf-8"});return exports.parser.parse(source)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(string){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(string)},Handlebars.print=function(ast){return(new Handlebars.PrintVisitor).accept(ast)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,str){}},Handlebars.log=function(level,str){Handlebars.logger.log(level,str)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(statements,inverse){this.type="program",this.statements=statements,inverse&&(this.inverse=new Handlebars.AST.ProgramNode(inverse))},Handlebars.AST.MustacheNode=function(params,hash,unescaped){this.type="mustache",this.id=params[0],this.params=params.slice(1),this.hash=hash,this.escaped=!unescaped},Handlebars.AST.PartialNode=function(id,context){this.type="partial",this.id=id,this.context=context};var verifyMatch=function(open,close){if(open.original!==close.original)throw new Handlebars.Exception(open.original+" doesn't match "+close.original)};Handlebars.AST.BlockNode=function(mustache,program,close){verifyMatch(mustache.id,close),this.type="block",this.mustache=mustache,this.program=program},Handlebars.AST.InverseNode=function(mustache,program,close){verifyMatch(mustache.id,close),this.type="inverse",this.mustache=mustache,this.program=program},Handlebars.AST.ContentNode=function(string){this.type="content",this.string=string},Handlebars.AST.HashNode=function(pairs){this.type="hash",this.pairs=pairs},Handlebars.AST.IdNode=function(parts){this.type="ID",this.original=parts.join(".");var dig=[],depth=0;for(var i=0,l=parts.length;i<l;i++){var part=parts[i];part===".."?depth++:part==="."||part==="this"?this.isScoped=!0:dig.push(part)}this.parts=dig,this.string=dig.join("."),this.depth=depth,this.isSimple=dig.length===1&&depth===0},Handlebars.AST.StringNode=function(string){this.type="STRING",this.string=string},Handlebars.AST.IntegerNode=function(integer){this.type="INTEGER",this.integer=integer},Handlebars.AST.BooleanNode=function(bool){this.type="BOOLEAN",this.bool=bool},Handlebars.AST.CommentNode=function(comment){this.type="comment",this.comment=comment}}(),Handlebars.Exception=function(message){var tmp=Error.prototype.constructor.apply(this,arguments);for(var p in tmp)tmp.hasOwnProperty(p)&&(this[p]=tmp[p])},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(string){this.string=string},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var escape={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},badChars=/&(?!\w+;)|[<>"'`]/g,possible=/[&<>"'`]/,escapeChar=function(chr){return escape[chr]||"&amp;"};Handlebars.Utils={escapeExpression:function(string){return string instanceof Handlebars.SafeString?string.toString():string==null||string===!1?"":possible.test(string)?string.replace(badChars,escapeChar):string},isEmpty:function(value){return typeof value=="undefined"?!0:value===null?!0:value===!1?!0:Object.prototype.toString.call(value)==="[object Array]"&&value.length===0?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(Compiler,JavaScriptCompiler){Compiler.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16},Compiler.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1},Compiler.DISASSEMBLE_MAP={};for(var prop in Compiler.OPCODE_MAP){var value=Compiler.OPCODE_MAP[prop];Compiler.DISASSEMBLE_MAP[value]=prop}Compiler.multiParamSize=function(code){return Compiler.MULTI_PARAM_OPCODES[Compiler.DISASSEMBLE_MAP[code]]},Compiler.prototype={compiler:Compiler,disassemble:function(){var opcodes=this.opcodes,opcode,nextCode,out=[],str,name,value;for(var i=0,l=opcodes.length;i<l;i++){opcode=opcodes[i];if(opcode==="DECLARE")name=opcodes[++i],value=opcodes[++i],out.push("DECLARE "+name+" = "+value);else{str=Compiler.DISASSEMBLE_MAP[opcode];var extraParams=Compiler.multiParamSize(opcode),codes=[];for(var j=0;j<extraParams;j++)nextCode=opcodes[++i],typeof nextCode=="string"&&(nextCode='"'+nextCode.replace("\n","\\n")+'"'),codes.push(nextCode);str=str+" "+codes.join(" "),out.push(str)}}return out.join("\n")},guid:0,compile:function(program,options){this.children=[],this.depths={list:[]},this.options=options;var knownHelpers=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(knownHelpers)for(var name in knownHelpers)this.options.knownHelpers[name]=knownHelpers[name];return this.program(program)},accept:function(node){return this[node.type](node)},program:function(program){var statements=program.statements,statement;this.opcodes=[];for(var i=0,l=statements.length;i<l;i++)statement=statements[i],this[statement.type](statement);return this.isSimple=l===1,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(program){var result=(new this.compiler).compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial,this.children[guid]=result;for(var i=0,l=result.depths.list.length;i<l;i++){depth=result.depths.list[i];if(depth<2)continue;this.addDepth(depth-1)}return guid},block:function(block){var mustache=block.mustache,depth,child,inverse,inverseGuid,params=this.setupStackForMustache(mustache),programGuid=this.compileProgram(block.program);block.program.inverse&&(inverseGuid=this.compileProgram(block.program.inverse),this.declare("inverse",inverseGuid)),this.opcode("invokeProgram",programGuid,params.length,!!mustache.hash),this.declare("inverse",null),this.opcode("append")},inverse:function(block){var params=this.setupStackForMustache(block.mustache),programGuid=this.compileProgram(block.program);this.declare("inverse",programGuid),this.opcode("invokeProgram",null,params.length,!!block.mustache.hash),this.opcode("append")},hash:function(hash){var pairs=hash.pairs,pair,val;this.opcode("push","{}");for(var i=0,l=pairs.length;i<l;i++)pair=pairs[i],val=pair[1],this.accept(val),this.opcode("assignToHash",pair[0])},partial:function(partial){var id=partial.id;this.usePartial=!0,partial.context?this.ID(partial.context):this.opcode("push","depth0"),this.opcode("invokePartial",id.original),this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)},mustache:function(mustache){var params=this.setupStackForMustache(mustache);this.opcode("invokeMustache",params.length,mustache.id.original,!!mustache.hash),mustache.escaped?this.opcode("appendEscaped"):this.opcode("append")},ID:function(id){this.addDepth(id.depth),this.opcode("getContext",id.depth),this.opcode("lookupWithHelpers",id.parts[0]||null,id.isScoped||!1);for(var i=1,l=id.parts.length;i<l;i++)this.opcode("lookup",id.parts[i])},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("push",integer.integer)},BOOLEAN:function(bool){this.opcode("push",bool.bool)},comment:function(){},pushParams:function(params){var i=params.length,param;while(i--)param=params[i],this.options.stringParams?(param.depth&&this.addDepth(param.depth),this.opcode("getContext",param.depth||0),this.opcode("pushStringParam",param.string)):this[param.type](param)},opcode:function(name,val1,val2,val3){this.opcodes.push(Compiler.OPCODE_MAP[name]),val1!==undefined&&this.opcodes.push(val1),val2!==undefined&&this.opcodes.push(val2),val3!==undefined&&this.opcodes.push(val3)},declare:function(name,value){this.opcodes.push("DECLARE"),this.opcodes.push(name),this.opcodes.push(value)},addDepth:function(depth){if(depth===0)return;this.depths[depth]||(this.depths[depth]=!0,this.depths.list.push(depth))},setupStackForMustache:function(mustache){var params=mustache.params;return this.pushParams(params),mustache.hash&&this.hash(mustache.hash),this.ID(mustache.id),params}},JavaScriptCompiler.prototype={nameLookup:function(parent,name,type){return/^[0-9]+$/.test(name)?parent+"["+name+"]":JavaScriptCompiler.isValidJavaScriptVariableName(name)?parent+"."+name:parent+"['"+name+"']"},appendToBuffer:function(string){return this.environment.isSimple?"return "+string+";":"buffer += "+string+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment,this.options=options||{},this.name=this.environment.name,this.isChild=!!context,this.context=context||{programs:[],aliases:{self:"this"},registers:{list:[]}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.compileChildren(environment,options);var opcodes=environment.opcodes,opcode;this.i=0;for(l=opcodes.length;this.i<l;this.i++)opcode=this.nextOpcode(0),opcode[0]==="DECLARE"?(this.i=this.i+2,this[opcode[1]]=opcode[2]):(this.i=this.i+opcode[1].length,this[opcode[0]].apply(this,opcode[1]));return this.createFunctionContext(asObject)},nextOpcode:function(n){var opcodes=this.environment.opcodes,opcode=opcodes[this.i+n],name,val,extraParams,codes;if(opcode==="DECLARE")return name=opcodes[this.i+1],val=opcodes[this.i+2],["DECLARE",name,val];name=Compiler.DISASSEMBLE_MAP[opcode],extraParams=Compiler.multiParamSize(opcode),codes=[];for(var j=0;j<extraParams;j++)codes.push(opcodes[this.i+j+1+n]);return[name,codes]},eat:function(opcode){this.i=this.i+opcode.length},preamble:function(){var out=[];if(!this.isChild){var namespace=this.namespace,copies="helpers = helpers || "+namespace+".helpers;";this.environment.usePartial&&(copies=copies+" partials = partials || "+namespace+".partials;"),out.push(copies)}else out.push("");this.environment.isSimple?out.push(""):out.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars;this.isChild||(locals=locals.concat(this.context.registers.list)),locals.length>0&&(this.source[1]=this.source[1]+", "+locals.join(", "));if(!this.isChild){var aliases=[];for(var alias in this.context.aliases)this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var i=0,l=this.environment.depths.list.length;i<l;i++)params.push("depth"+this.environment.depths.list[i]);if(asObject)return params.push(this.source.join("\n  ")),Function.apply(this,params);var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,functionSource+"\n\n"),functionSource},appendContent:function(content){this.source.push(this.appendToBuffer(this.quotedString(content)))},append:function(){var local=this.popStack();this.source.push("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var opcode=this.nextOpcode(1),extra="";this.context.aliases.escapeExpression="this.escapeExpression",opcode[0]==="appendContent"&&(extra=" + "+this.quotedString(opcode[1][0]),this.eat(opcode)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+extra))},getContext:function(depth){this.lastContext!==depth&&(this.lastContext=depth)},lookupWithHelpers:function(name,isScoped){if(name){var topStack=this.nextStack();this.usingKnownHelper=!1;var toPush;!isScoped&&this.options.knownHelpers[name]?(toPush=topStack+" = "+this.nameLookup("helpers",name,"helper"),this.usingKnownHelper=!0):isScoped||this.options.knownHelpersOnly?toPush=topStack+" = "+this.nameLookup("depth"+this.lastContext,name,"context"):toPush=topStack+" = "+this.nameLookup("helpers",name,"helper")+" || "+this.nameLookup("depth"+this.lastContext,name,"context"),toPush+=";",this.source.push(toPush)}else this.pushStack("depth"+this.lastContext)},lookup:function(name){var topStack=this.topStack();this.source.push(topStack+" = ("+topStack+" === null || "+topStack+" === undefined || "+topStack+" === false ? "+topStack+" : "+this.nameLookup(topStack,name,"context")+");")},pushStringParam:function(string){this.pushStack("depth"+this.lastContext),this.pushString(string)},pushString:function(string){this.pushStack(this.quotedString(string))},push:function(name){this.pushStack(name)},invokeMustache:function(paramSize,original,hasHash){this.populateParams(paramSize,this.quotedString(original),"{}",null,hasHash,function(nextStack,helperMissingString,id){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+id+"=== undef) { "+nextStack+" = helperMissing.call("+helperMissingString+"); }"),nextStack!==id&&this.source.push("else { "+nextStack+" = "+id+"; }"))})},invokeProgram:function(guid,paramSize,hasHash){var inverse=this.programExpression(this.inverse),mainProgram=this.programExpression(guid);this.populateParams(paramSize,null,mainProgram,inverse,hasHash,function(nextStack,helperMissingString,id){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+nextStack+" = blockHelperMissing.call("+helperMissingString+"); }"))})},populateParams:function(paramSize,helperId,program,inverse,hasHash,fn){var needsRegister=hasHash||this.options.stringParams||inverse||this.options.data,id=this.popStack(),nextStack,params=[],param,stringParam,stringOptions;needsRegister?(this.register("tmp1",program),stringOptions="tmp1"):stringOptions="{ hash: {} }";if(needsRegister){var hash=hasHash?this.popStack():"{}";this.source.push("tmp1.hash = "+hash+";")}this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var i=0;i<paramSize;i++)param=this.popStack(),params.push(param),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");inverse&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+inverse+";")),this.options.data&&this.source.push("tmp1.data = data;"),params.push(stringOptions),this.populateCall(params,id,helperId||id,fn)},populateCall:function(params,id,helperId,fn){var paramString=["depth0"].concat(params).join(", "),helperMissingString=["depth0"].concat(helperId).concat(params).join(", "),nextStack=this.nextStack();this.usingKnownHelper?this.source.push(nextStack+" = "+id+".call("+paramString+");"):(this.context.aliases.functionType='"function"',this.source.push("if(typeof "+id+" === functionType) { "+nextStack+" = "+id+".call("+paramString+"); }")),fn.call(this,nextStack,helperMissingString,id),this.usingKnownHelper=!1},invokePartial:function(context){this.pushStack("self.invokePartial("+this.nameLookup("partials",context,"partial")+", '"+context+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(key){var value=this.popStack(),hash=this.topStack();this.source.push(hash+"['"+key+"'] = "+value+";")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){var children=environment.children,child,compiler;for(var i=0,l=children.length;i<l;i++){child=children[i],compiler=new this.compiler,this.context.programs.push("");var index=this.context.programs.length;child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context)}},programExpression:function(guid){if(guid==null)return"self.noop";var child=this.environment.children[guid],depths=child.depths.list,programParams=[child.index,child.name,"data"];for(var i=0,l=depths.length;i<l;i++)depth=depths[i],depth===1?programParams.push("depth0"):programParams.push("depth"+(depth-1));return depths.length===0?"self.program("+programParams.join(", ")+")":(programParams.shift(),"self.programWithDepth("+programParams.join(", ")+")")},register:function(name,val){this.useRegister(name),this.source.push(name+" = "+val+";")},useRegister:function(name){this.context.registers[name]||(this.context.registers[name]=!0,this.context.registers.list.push(name))},pushStack:function(item){return this.source.push(this.nextStack()+" = "+item+";"),"stack"+this.stackSlot},nextStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var reservedWords="break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={};for(var i=0,l=reservedWords.length;i<l;i++)compilerWords[reservedWords[i]]=!0;JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(name)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(string,options){options=options||{};var ast=Handlebars.parse(string),environment=(new Handlebars.Compiler).compile(ast,options);return(new Handlebars.JavaScriptCompiler).compile(environment,options)},Handlebars.compile=function(string,options){function compile(){var ast=Handlebars.parse(string),environment=(new Handlebars.Compiler).compile(ast,options),templateSpec=(new Handlebars.JavaScriptCompiler).compile(environment,options,undefined,!0);return Handlebars.template(templateSpec)}options=options||{};var compiled;return function(context,options){return compiled||(compiled=compile()),compiled.call(this,context,options)}},Handlebars.VM={template:function(templateSpec){var container={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];return data?Handlebars.VM.program(fn,data):programWrapper?programWrapper:(programWrapper=this.programs[i]=Handlebars.VM.program(fn),programWrapper)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(context,options){return options=options||{},templateSpec.call(container,Handlebars,context,options.helpers,options.partials,options.data)}},programWithDepth:function(fn,data,$depth){var args=Array.prototype.slice.call(arguments,2);return function(context,options){return options=options||{},fn.apply(this,[context,options.data||data].concat(args))}},program:function(fn,data){return function(context,options){return options=options||{},fn(context,options.data||data)}},noop:function(){return""},invokePartial:function(partial,name,context,helpers,partials){if(partial===undefined)throw new Handlebars.Exception("The partial "+name+" could not be found");if(partial instanceof Function)return partial(context,{helpers:helpers,partials:partials});if(!Handlebars.compile)throw new Handlebars.Exception("The partial "+name+" could not be compiled when running in vm mode");return partials[name]=Handlebars.compile(partial),partials[name](context,{helpers:helpers,partials:partials})}},Handlebars.template=Handlebars.VM.template}(),function(){"undefined"==typeof Ember&&(Ember={isNamespace:!0,toString:function(){return"Ember"}},"undefined"!=typeof window&&(window.Em=window.Ember=Em=Ember)),Ember.VERSION="0.9.7",Ember.ENV="undefined"==typeof ENV?{}:ENV,Ember.EXTEND_PROTOTYPES=Ember.ENV.EXTEND_PROTOTYPES!==!1,Ember.SHIM_ES5=Ember.ENV.SHIM_ES5===!1?!1:Ember.EXTEND_PROTOTYPES,Ember.K=function(){return this},"undefined"==typeof ember_assert&&(window.ember_assert=Ember.K),"undefined"==typeof ember_warn&&(window.ember_warn=Ember.K),"undefined"==typeof ember_deprecate&&(window.ember_deprecate=Ember.K),"undefined"==typeof ember_deprecateFunc&&(window.ember_deprecateFunc=function(_,func){return func}),Ember.Logger=window.console||{log:Ember.K,warn:Ember.K,error:Ember.K}}(),function(){var platform=Ember.platform={};platform.create=Object.create;if(!platform.create){var O_ctor=function(){},O_proto=O_ctor.prototype;platform.create=function(obj,descs){O_ctor.prototype=obj,obj=new O_ctor,O_ctor.prototype=O_proto;if(descs!==undefined)for(var key in descs){if(!descs.hasOwnProperty(key))continue;platform.defineProperty(obj,key,descs[key])}return obj},platform.create.isSimulated=!0}var defineProperty=Object.defineProperty,canRedefineProperties,canDefinePropertyOnDOM;if(defineProperty)try{defineProperty({},"a",{get:function(){}})}catch(e){defineProperty=null}defineProperty&&(canRedefineProperties=function(){var obj={};return defineProperty(obj,"a",{configurable:!0,enumerable:!0,get:function(){},set:function(){}}),defineProperty(obj,"a",{configurable:!0,enumerable:!0,writable:!0,value:!0}),obj.a===!0}(),canDefinePropertyOnDOM=function(){try{return defineProperty(document.createElement("div"),"definePropertyOnDOM",{}),!0}catch(e){}return!1}(),canRedefineProperties?canDefinePropertyOnDOM||(defineProperty=function(obj,keyName,desc){var isNode;return typeof Node=="object"?isNode=obj instanceof Node:isNode=typeof obj=="object"&&typeof obj.nodeType=="number"&&typeof obj.nodeName=="string",isNode?obj[keyName]=desc.value:Object.defineProperty(obj,keyName,desc)}):defineProperty=null),platform.defineProperty=defineProperty,platform.hasPropertyAccessors=!0,platform.defineProperty||(platform.hasPropertyAccessors=!1,platform.defineProperty=function(obj,keyName,desc){ember_assert("property descriptor cannot have `get` or `set` on this platform",!desc.get&&!desc.set),obj[keyName]=desc.value},platform.defineProperty.isSimulated=!0)}(),function(){var GUID_KEY="__ember"+ +(new Date),uuid,numberCache,stringCache;uuid=0,numberCache=[],stringCache={};var GUID_DESC=Ember.GUID_DESC={configurable:!0,writable:!0,enumerable:!1},o_defineProperty=Ember.platform.defineProperty,o_create=Ember.platform.create;Ember.GUID_KEY=GUID_KEY,Ember.generateGuid=function(obj,prefix){prefix||(prefix="ember");var ret=prefix+uuid++;return obj&&(GUID_DESC.value=ret,o_defineProperty(obj,GUID_KEY,GUID_DESC),GUID_DESC.value=null),ret},Ember.guidFor=function(obj){if(obj===undefined)return"(undefined)";if(obj===null)return"(null)";var cache,ret,type=typeof obj;switch(type){case"number":return ret=numberCache[obj],ret||(ret=numberCache[obj]="nu"+obj),ret;case"string":return ret=stringCache[obj],ret||(ret=stringCache[obj]="st"+uuid++),ret;case"boolean":return obj?"(true)":"(false)";default:if(obj[GUID_KEY])return obj[GUID_KEY];if(obj===Object)return"(Object)";if(obj===Array)return"(Array)";return Ember.generateGuid(obj,"ember")}};var META_DESC={writable:!0,configurable:!1,enumerable:!1,value:null},META_KEY=Ember.GUID_KEY+"_meta";Ember.META_KEY=META_KEY;var EMPTY_META={descs:{},watching:{}};Object.freeze&&Object.freeze(EMPTY_META);var createMeta=Ember.platform.defineProperty.isSimulated?o_create:function(meta){return meta};Ember.meta=function(obj,writable){var ret=obj[META_KEY];return writable===!1?ret||EMPTY_META:(ret?ret.source!==obj&&(ret=o_create(ret),ret.descs=o_create(ret.descs),ret.values=o_create(ret.values),ret.watching=o_create(ret.watching),ret.lastSetValues={},ret.cache={},ret.source=obj,o_defineProperty(obj,META_KEY,META_DESC),ret=obj[META_KEY]=createMeta(ret)):(o_defineProperty(obj,META_KEY,META_DESC),ret=obj[META_KEY]=createMeta({descs:{},watching:{},values:{},lastSetValues:{},cache:{},source:obj}),ret.descs.constructor=null),ret)},Ember.getMeta=function(obj,property){var meta=Ember.meta(obj,!1);return meta[property]},Ember.setMeta=function(obj,property,value){var meta=Ember.meta(obj,!0);return meta[property]=value,value},Ember.metaPath=function(obj,path,writable){var meta=Ember.meta(obj,writable),keyName,value;for(var i=0,l=path.length;i<l;i++){keyName=path[i],value=meta[keyName];if(!value){if(!writable)return undefined;value=meta[keyName]={__ember_source__:obj}}else if(value.__ember_source__!==obj){if(!writable)return undefined;value=meta[keyName]=o_create(value),value.__ember_source__=obj}meta=value}return value},Ember.wrap=function(func,superFunc){function K(){}var newFunc=function(){var ret,sup=this._super;return this._super=superFunc||K,ret=func.apply(this,arguments),this._super=sup,ret};return newFunc.base=func,newFunc},Ember.isArray=function(obj){return!obj||obj.setInterval?!1:Array.isArray&&Array.isArray(obj)?!0:Ember.Array&&Ember.Array.detect(obj)?!0:obj.length!==undefined&&"object"==typeof obj?!0:!1},Ember.makeArray=function(obj){return obj===null||obj===undefined?[]:Ember.isArray(obj)?obj:[obj]}}(),function(){function normalizePath(path){ember_assert("must pass non-empty string to normalizePath()",path&&path!=="");if(path==="*")return path;var first=path.charAt(0);return first==="."?"this"+path:first==="*"&&path.charAt(1)!=="."?"this."+path.slice(1):path}function getPath(target,path){var len=path.length,idx,next,key;idx=path.indexOf("*");if(idx>0&&path.charAt(idx-1)!==".")return getPath(getPath(target,path.slice(0,idx)),path.slice(idx+1));idx=0;while(target&&idx<len){next=path.indexOf(".",idx),next<0&&(next=len),key=path.slice(idx,next),target=key==="*"?target:get(target,key);if(target&&target.isDestroyed)return undefined;idx=next+1}return target}function firstKey(path){return path.match(FIRST_KEY)[0]}function normalizeTuple(target,path){var hasThis=HAS_THIS.test(path),isGlobal=!hasThis&&IS_GLOBAL_PATH.test(path),key;if(!target||isGlobal)target=window;hasThis&&(path=path.slice(5));var idx=path.indexOf("*");idx>0&&path.charAt(idx-1)!=="."?(target&&meta(target,!1).proto!==target?target=getPath(target,path.slice(0,idx)):target=null,path=path.slice(idx+1)):target===window&&(key=firstKey(path),target=get(target,key),path=path.slice(key.length+1));if(!path||path.length===0)throw new Error("Invalid Path");return TUPLE_RET[0]=target,TUPLE_RET[1]=path,TUPLE_RET}var USE_ACCESSORS=Ember.platform.hasPropertyAccessors&&Ember.ENV.USE_ACCESSORS;Ember.USE_ACCESSORS=!!USE_ACCESSORS;var meta=Ember.meta,get,set;get=function(obj,keyName){keyName===undefined&&"string"==typeof obj&&(keyName=obj,obj=Ember);if(!obj)return undefined;var ret=obj[keyName];return ret===undefined&&"function"==typeof obj.unknownProperty&&(ret=obj.unknownProperty(keyName)),ret},set=function(obj,keyName,value){return"object"!=typeof obj||keyName in obj?obj[keyName]=value:"function"==typeof obj.setUnknownProperty?obj.setUnknownProperty(keyName,value):"function"==typeof obj.unknownProperty?obj.unknownProperty(keyName,value):obj[keyName]=value,value};if(!USE_ACCESSORS){var o_get=get,o_set=set;get=function(obj,keyName){keyName===undefined&&"string"==typeof obj&&(keyName=obj,obj=Ember),ember_assert("You need to provide an object and key to `get`.",!!obj&&keyName);if(!obj)return undefined;var desc=meta(obj,!1).descs[keyName];return desc?desc.get(obj,keyName):o_get(obj,keyName)},set=function(obj,keyName,value){ember_assert("You need to provide an object and key to `set`.",!!obj&&keyName!==undefined);var desc=meta(obj,!1).descs[keyName];return desc?desc.set(obj,keyName,value):o_set(obj,keyName,value),value}}Ember.get=get,Ember.set=set;var TUPLE_RET=[],IS_GLOBAL=/^([A-Z$]|([0-9][A-Z$]))/,IS_GLOBAL_PATH=/^([A-Z$]|([0-9][A-Z$])).*[\.\*]/,HAS_THIS=/^this[\.\*]/,FIRST_KEY=/^([^\.\*]+)/;Ember.normalizePath=normalizePath,Ember.normalizeTuple=function(target,path){return normalizeTuple(target,normalizePath(path))},Ember.normalizeTuple.primitive=normalizeTuple,Ember.getWithDefault=function(root,key,defaultValue){var value=Ember.get(root,key);return value===undefined?defaultValue:value},Ember.getPath=function(root,path,_checkGlobal){var pathOnly,hasThis,hasStar,isGlobal,ret;if(path==="")return root;!path&&"string"==typeof root&&(path=root,root=null,pathOnly=!0),hasStar=path.indexOf("*")>-1;if(root===null&&!hasStar&&path.indexOf(".")<0)return get(window,path);path=normalizePath(path),hasThis=HAS_THIS.test(path);if(!root||hasThis||hasStar){ember_deprecate("Fetching globals with Ember.getPath is deprecated (root: "+root+", path: "+path+")",!root||root===window||!IS_GLOBAL.test(path));var tuple=normalizeTuple(root,path);root=tuple[0],path=tuple[1],tuple.length=0}return ret=getPath(root,path),ret===undefined&&!pathOnly&&!hasThis&&root!==window&&IS_GLOBAL.test(path)&&_checkGlobal!==!1?(ember_deprecate("Fetching globals with Ember.getPath is deprecated (root: "+root+", path: "+path+")"),Ember.getPath(window,path)):ret},Ember.setPath=function(root,path,value,tolerant){var keyName;arguments.length===2&&"string"==typeof root&&(value=path,path=root,root=null),path=normalizePath(path);if(path.indexOf("*")>0){ember_deprecate("Setting globals with Ember.setPath is deprecated (path: "+path+")",!root||root===window||!IS_GLOBAL.test(path));var tuple=normalizeTuple(root,path);root=tuple[0],path=tuple[1],tuple.length=0}if(path.indexOf(".")>0)keyName=path.slice(path.lastIndexOf(".")+1),path=path.slice(0,path.length-(keyName.length+1)),path!=="this"&&(root=Ember.getPath(root,path,!1),!root&&IS_GLOBAL.test(path)&&(ember_deprecate("Setting globals with Ember.setPath is deprecated (path: "+path+")"),root=Ember.getPath(window,path)));else{if(IS_GLOBAL.test(path))throw new Error("Invalid Path");keyName=path}if(!keyName||keyName.length===0||keyName==="*")throw new Error("Invalid Path");if(!root){if(tolerant)return;throw new Error("Object in path "+path+" could not be found or was destroyed.")}return Ember.set(root,keyName,value)},Ember.trySetPath=function(root,path,value){return arguments.length===2&&"string"==typeof root&&(value=path,path=root,root=null),Ember.setPath(root,path,value,!0)},Ember.isGlobalPath=function(path){return!HAS_THIS.test(path)&&IS_GLOBAL.test(path)}}(),function(){function w_get(obj,keyName,values){values=values||meta(obj,!1).values;if(values){var ret=values[keyName];if(ret!==undefined)return ret;if(obj.unknownProperty)return obj.unknownProperty(keyName)}}function w_set(obj,keyName,value){var m=meta(obj),watching;return watching=m.watching[keyName]>0&&value!==m.values[keyName],watching&&Ember.propertyWillChange(obj,keyName),m.values[keyName]=value,watching&&Ember.propertyDidChange(obj,keyName),value}function mkWatchedGetter(keyName){var ret=WATCHED_GETTERS[keyName];return ret||(ret=WATCHED_GETTERS[keyName]=function(){return w_get(this,keyName)}),ret}function mkWatchedSetter(keyName){var ret=WATCHED_SETTERS[keyName];return ret||(ret=WATCHED_SETTERS[keyName]=function(value){return w_set(this,keyName,value)}),ret}function hasDesc(descs,keyName){return keyName==="toString"?"function"!=typeof descs.toString:!!descs[keyName]}var USE_ACCESSORS=Ember.USE_ACCESSORS,GUID_KEY=Ember.GUID_KEY,META_KEY=Ember.META_KEY,meta=Ember.meta,o_create=Ember.platform.create,o_defineProperty=Ember.platform.defineProperty,SIMPLE_PROPERTY,WATCHED_PROPERTY,SIMPLE_DESC={writable:!0,configurable:!0,enumerable:!0,value:null},Dc=Ember.Descriptor=function(){},setup=Dc.setup=function(obj,keyName,value){SIMPLE_DESC.value=value,o_defineProperty(obj,keyName,SIMPLE_DESC),SIMPLE_DESC.value=null},Dp=Ember.Descriptor.prototype;Dp.set=function(obj,keyName,value){return obj[keyName]=value,value},Dp.get=function(obj,keyName){return w_get(obj,keyName,obj)},Dp.setup=setup,Dp.teardown=function(obj,keyName){return obj[keyName]},Dp.val=function(obj,keyName){return obj[keyName]},USE_ACCESSORS||(Ember.Descriptor.MUST_USE_GETTER=function(){this instanceof Ember.Object&&ember_assert("Must use Ember.get() to access this property",!1)},Ember.Descriptor.MUST_USE_SETTER=function(){this instanceof Ember.Object&&(this.isDestroyed?ember_assert("You cannot set observed properties on destroyed objects",!1):ember_assert("Must use Ember.set() to access this property",!1))});var WATCHED_DESC={configurable:!0,enumerable:!0,set:Ember.Descriptor.MUST_USE_SETTER},WATCHED_GETTERS={},WATCHED_SETTERS={};WATCHED_PROPERTY=new Ember.Descriptor,Ember.platform.hasPropertyAccessors?(WATCHED_PROPERTY.get=w_get,WATCHED_PROPERTY.set=w_set,USE_ACCESSORS?WATCHED_PROPERTY.setup=function(obj,keyName,value){WATCHED_DESC.get=mkWatchedGetter(keyName),WATCHED_DESC.set=mkWatchedSetter(keyName),o_defineProperty(obj,keyName,WATCHED_DESC),WATCHED_DESC.get=WATCHED_DESC.set=null,value!==undefined&&(meta(obj).values[keyName]=value)}:WATCHED_PROPERTY.setup=function(obj,keyName,value){WATCHED_DESC.get=mkWatchedGetter(keyName),o_defineProperty(obj,keyName,WATCHED_DESC),WATCHED_DESC.get=null,value!==undefined&&(meta(obj).values[keyName]=value)},WATCHED_PROPERTY.teardown=function(obj,keyName){var ret=meta(obj).values[keyName];return delete meta(obj).values[keyName],ret}):WATCHED_PROPERTY.set=function(obj,keyName,value){var m=meta(obj),watching;return watching=m.watching[keyName]>0&&value!==obj[keyName],watching&&Ember.propertyWillChange(obj,keyName),obj[keyName]=value,watching&&Ember.propertyDidChange(obj,keyName),value},Ember.SIMPLE_PROPERTY=new Ember.Descriptor,SIMPLE_PROPERTY=Ember.SIMPLE_PROPERTY,SIMPLE_PROPERTY.unwatched=WATCHED_PROPERTY.unwatched=SIMPLE_PROPERTY,SIMPLE_PROPERTY.watched=WATCHED_PROPERTY.watched=WATCHED_PROPERTY,Ember.defineProperty=function(obj,keyName,desc,val){var m=meta(obj,!1),descs=m.descs,watching=m.watching[keyName]>0,override=!0;return val===undefined?(override=!1,val=hasDesc(descs,keyName)?descs[keyName].teardown(obj,keyName):obj[keyName]):hasDesc(descs,keyName)&&descs[keyName].teardown(obj,keyName),desc||(desc=SIMPLE_PROPERTY),desc instanceof Ember.Descriptor?(m=meta(obj,!0),descs=m.descs,desc=(watching?desc.watched:desc.unwatched)||desc,descs[keyName]=desc,desc.setup(obj,keyName,val,watching)):(descs[keyName]&&(meta(obj).descs[keyName]=null),o_defineProperty(obj,keyName,desc)),override&&watching&&Ember.overrideChains(obj,keyName,m),this},Ember.create=function(obj,props){var ret=o_create(obj,props);return GUID_KEY in ret&&Ember.generateGuid(ret,"ember"),META_KEY in ret&&Ember.rewatch(ret),ret},Ember.createPrototype=function(obj,props){var ret=o_create(obj,props);return meta(ret,!0).proto=ret,GUID_KEY in ret&&Ember.generateGuid(ret,"ember"),META_KEY in ret&&Ember.rewatch(ret),ret}}(),function(){function uniqDeps(obj,depKey){var m=meta(obj),deps,ret;return deps=m.deps,deps?deps.__emberproto__!==obj&&(deps=m.deps=o_create(deps),deps.__emberproto__=obj):deps=m.deps={__emberproto__:obj},ret=deps[depKey],ret?ret.__emberproto__!==obj&&(ret=deps[depKey]=o_create(ret),ret.__emberproto__=obj):ret=deps[depKey]={__emberproto__:obj},ret}function addDependentKey(obj,keyName,depKey){var deps=uniqDeps(obj,depKey);deps[keyName]=(deps[keyName]||0)+1,Ember.watch(obj,depKey)}function removeDependentKey(obj,keyName,depKey){var deps=uniqDeps(obj,depKey);deps[keyName]=(deps[keyName]||0)-1,Ember.unwatch(obj,depKey)}function addDependentKeys(desc,obj,keyName){var keys=desc._dependentKeys,len=keys?keys.length:0;for(var idx=0;idx<len;idx++)addDependentKey(obj,keyName,keys[idx])}function ComputedProperty(func,opts){this.func=func,this._cacheable=opts&&opts.cacheable,this._dependentKeys=opts&&opts.dependentKeys}function mkCpGetter(keyName,desc){var cacheable=desc._cacheable,func=desc.func;return cacheable?function(){var ret,cache=meta(this).cache;return keyName in cache?cache[keyName]:(ret=cache[keyName]=func.call(this,keyName),ret)}:function(){return func.call(this,keyName)}}function mkCpSetter(keyName,desc){var cacheable=desc._cacheable,func=desc.func;return function(value){var m=meta(this,cacheable),watched=m.source===this&&m.watching[keyName]>0,ret,oldSuspended,lastSetValues;return oldSuspended=desc._suspended,desc._suspended=this,watched=watched&&m.lastSetValues[keyName]!==guidFor(value),watched&&(m.lastSetValues[keyName]=guidFor(value),Ember.propertyWillChange(this,keyName)),cacheable&&delete m.cache[keyName],ret=func.call(this,keyName,value),cacheable&&(m.cache[keyName]=ret),watched&&Ember.propertyDidChange(this,keyName),desc._suspended=oldSuspended,ret}}var meta=Ember.meta,guidFor=Ember.guidFor,USE_ACCESSORS=Ember.USE_ACCESSORS,a_slice=Array.prototype.slice,o_create=Ember.platform.create,o_defineProperty=Ember.platform.defineProperty;Ember.ComputedProperty=ComputedProperty,ComputedProperty.prototype=new Ember.Descriptor;var CP_DESC={configurable:!0,enumerable:!0,get:function(){return undefined},set:Ember.Descriptor.MUST_USE_SETTER},Cp=ComputedProperty.prototype;Cp.cacheable=function(aFlag){return this._cacheable=aFlag!==!1,this},Cp.property=function(){return this._dependentKeys=a_slice.call(arguments),this},Cp.meta=function(meta){return this._meta=meta,this},Cp.setup=function(obj,keyName,value){CP_DESC.get=mkCpGetter(keyName,this),CP_DESC.set=mkCpSetter(keyName,this),o_defineProperty(obj,keyName,CP_DESC),CP_DESC.get=CP_DESC.set=null,addDependentKeys(this,obj,keyName)},Cp.teardown=function(obj,keyName){var keys=this._dependentKeys,len=keys?keys.length:0;for(var idx=0;idx<len;idx++)removeDependentKey(obj,keyName,keys[idx]);return this._cacheable&&delete meta(obj).cache[keyName],null},Cp.didChange=function(obj,keyName){this._cacheable&&this._suspended!==obj&&delete meta(obj).cache[keyName]},Cp.get=function(obj,keyName){var ret,cache;if(this._cacheable){cache=meta(obj).cache;if(keyName in cache)return cache[keyName];ret=cache[keyName]=this.func.call(obj,keyName)}else ret=this.func.call(obj,keyName);return ret},Cp.set=function(obj,keyName,value){var cacheable=this._cacheable,m=meta(obj,cacheable),watched=m.source===obj&&m.watching[keyName]>0,ret,oldSuspended,lastSetValues;return oldSuspended=this._suspended,this._suspended=obj,watched=watched&&m.lastSetValues[keyName]!==guidFor(value),watched&&(m.lastSetValues[keyName]=guidFor(value),Ember.propertyWillChange(obj,keyName)),cacheable&&delete m.cache[keyName],ret=this.func.call(obj,keyName,value),cacheable&&(m.cache[keyName]=ret),watched&&Ember.propertyDidChange(obj,keyName),this._suspended=oldSuspended,ret},Cp.val=function(obj,keyName){return meta(obj,!1).values[keyName]},Ember.platform.hasPropertyAccessors?USE_ACCESSORS||(Cp.setup=function(obj,keyName){o_defineProperty(obj,keyName,CP_DESC),addDependentKeys(this,obj,keyName)}):Cp.setup=function(obj,keyName,value){obj[keyName]=undefined,addDependentKeys(this,obj,keyName)},Ember.computed=function(func){var args;arguments.length>1&&(args=a_slice.call(arguments,0,-1),func=a_slice.call(arguments,-1)[0]);var cp=new ComputedProperty(func);return args&&cp.property.apply(cp,args),cp},Ember.cacheFor=function(obj,key){var cache=meta(obj,!1).cache;if(cache&&cache[key])return cache[key]}}(),function(){var isNativeFunc=function(func){return func&&Function.prototype.toString.call(func).indexOf("[native code]")>-1},arrayMap=isNativeFunc(Array.prototype.map)?Array.prototype.map:function(fun){if(this===void 0||this===null)throw new TypeError;var t=Object(this),len=t.length>>>0;if(typeof fun!="function")throw new TypeError;var res=new Array(len),thisp=arguments[1];for(var i=0;i<len;i++)i in t&&(res[i]=fun.call(thisp,t[i],i,t));return res},arrayForEach=isNativeFunc(Array.prototype.forEach)?Array.prototype.forEach:function(fun){if(this===void 0||this===null)throw new TypeError;var t=Object(this),len=t.length>>>0;if(typeof fun!="function")throw new TypeError;var thisp=arguments[1];for(var i=0;i<len;i++)i in t&&fun.call(thisp,t[i],i,t)},arrayIndexOf=isNativeFunc(Array.prototype.indexOf)?Array.prototype.indexOf:function(obj,fromIndex){fromIndex===null||fromIndex===undefined?fromIndex=0:fromIndex<0&&(fromIndex=Math.max(0,this.length+fromIndex));for(var i=fromIndex,j=this.length;i<j;i++)if(this[i]===obj)return i;return-1};Ember.ArrayUtils={map:function(obj){var args=Array.prototype.slice.call(arguments,1);return obj.map?obj.map.apply(obj,args):arrayMap.apply(obj,args)},forEach:function(obj){var args=Array.prototype.slice.call(arguments,1);return obj.forEach?obj.forEach.apply(obj,args):arrayForEach.apply(obj,args)},indexOf:function(obj){var args=Array.prototype.slice.call(arguments,1);return obj.indexOf?obj.indexOf.apply(obj,args):arrayIndexOf.apply(obj,args)},indexesOf:function(obj){var args=Array.prototype.slice.call(arguments,1);return args[0]===undefined?[]:Ember.ArrayUtils.map(args[0],function(item){return Ember.ArrayUtils.indexOf(obj,item)})},removeObject:function(array,item){var index=this.indexOf(array,item);index!==-1&&array.splice(index,1)}},Ember.SHIM_ES5&&(Array.prototype.map||(Array.prototype.map=arrayMap),Array.prototype.forEach||(Array.prototype.forEach=arrayForEach),Array.prototype.indexOf||(Array.prototype.indexOf=arrayIndexOf))}(),function(){function notifyObservers(obj,eventName,forceNotification){deferred&&!forceNotification?queue.push(obj,eventName):Ember.sendEvent(obj,eventName)}function flushObserverQueue(){beforeObserverSet.clear(),queue.flush()}function changeEvent(keyName){return keyName+AFTER_OBSERVERS}function beforeEvent(keyName){return keyName+BEFORE_OBSERVERS}function changeKey(eventName){return eventName.slice(0,-7)}function beforeKey(eventName){return eventName.slice(0,-7)}function xformForArgs(args){return function(target,method,params){var obj=params[0],keyName=changeKey(params[1]),val,copy_args=args.slice();method.length>2&&(val=Ember.getPath(Ember.isGlobalPath(keyName)?window:obj,keyName)),copy_args.unshift(obj,keyName,val),method.apply(target,copy_args)}}function xformBefore(target,method,params){var obj=params[0],keyName=beforeKey(params[1]),val;method.length>2&&(val=Ember.getPath(obj,keyName)),method.call(target,obj,keyName,val)}var AFTER_OBSERVERS=":change",BEFORE_OBSERVERS=":before",guidFor=Ember.guidFor,normalizePath=Ember.normalizePath,deferred=0,array_Slice=Array.prototype.slice,array_ForEach=Ember.ArrayUtils.forEach,ObserverSet=function(){this.targetSet={}};ObserverSet.prototype.add=function(target,path){var targetSet=this.targetSet,targetGuid=Ember.guidFor(target),pathSet=targetSet[targetGuid];return pathSet||(targetSet[targetGuid]=pathSet={}),pathSet[path]?!1:pathSet[path]=!0},ObserverSet.prototype.clear=function(){this.targetSet={}};var DeferredEventQueue=function(){this.targetSet={},this.queue=[]};DeferredEventQueue.prototype.push=function(target,eventName){var targetSet=this.targetSet,queue=this.queue,targetGuid=Ember.guidFor(target),eventNameSet=targetSet[targetGuid],index;eventNameSet||(targetSet[targetGuid]=eventNameSet={}),index=eventNameSet[eventName],index===undefined?eventNameSet[eventName]=queue.push(Ember.deferEvent(target,eventName))-1:queue[index]=Ember.deferEvent(target,eventName)},DeferredEventQueue.prototype.flush=function(){var queue=this.queue;this.queue=[],this.targetSet={};for(var i=0,len=queue.length;i<len;++i)queue[i]()};var queue=new DeferredEventQueue,beforeObserverSet=new ObserverSet;Ember.beginPropertyChanges=function(){return deferred++,this},Ember.endPropertyChanges=function(){deferred--,deferred<=0&&flushObserverQueue()},Ember.changeProperties=function(cb,binding){Ember.beginPropertyChanges();try{cb.call(binding)}finally{Ember.endPropertyChanges()}},Ember.setProperties=function(self,hash){return Ember.changeProperties(function(){for(var prop in hash)hash.hasOwnProperty(prop)&&Ember.set(self,prop,hash[prop])}),self};var xformChange=xformForArgs([]);Ember.addObserver=function(obj,path,target,method){path=normalizePath(path);var xform;if(arguments.length>4){var args=array_Slice.call(arguments,4);xform=xformForArgs(args)}else xform=xformChange;return Ember.addListener(obj,changeEvent(path),target,method,xform),Ember.watch(obj,path),this},Ember.observersFor=function(obj,path){return Ember.listenersFor(obj,changeEvent(path))},Ember.removeObserver=function(obj,path,target,method){return path=normalizePath(path),Ember.unwatch(obj,path),Ember.removeListener(obj,changeEvent(path),target,method),this},Ember.addBeforeObserver=function(obj,path,target,method){return path=normalizePath(path),Ember.addListener(obj,beforeEvent(path),target,method,xformBefore),Ember.watch(obj,path),this},Ember._suspendObserver=function(obj,path,target,method,callback){return Ember._suspendListener(obj,changeEvent(path),target,method,callback)},Ember.beforeObserversFor=function(obj,path){return Ember.listenersFor(obj,beforeEvent(path))},Ember.removeBeforeObserver=function(obj,path,target,method){return path=normalizePath(path),Ember.unwatch(obj,path),Ember.removeListener(obj,beforeEvent(path),target,method),this},Ember.notifyObservers=function(obj,keyName){if(obj.isDestroying)return;notifyObservers(obj,changeEvent(keyName))},Ember.notifyBeforeObservers=function(obj,keyName){if(obj.isDestroying)return;var guid,set,forceNotification=!1;if(deferred){if(!beforeObserverSet.add(obj,keyName))return;forceNotification=!0}notifyObservers(obj,beforeEvent(keyName),forceNotification)}}(),function(){function firstKey(path){return path.match(FIRST_KEY)[0]}function isKeyName(path){return path==="*"||!IS_PATH.test(path)}function iterDeps(method,obj,depKey,seen,meta){var guid=guidFor(obj);seen[guid]||(seen[guid]={});if(seen[guid][depKey])return;seen[guid][depKey]=!0;var deps=meta.deps;deps=deps&&deps[depKey];if(deps)for(var key in deps){if(DEP_SKIP[key])continue;method(obj,key)}}function dependentKeysWillChange(obj,depKey,meta){if(obj.isDestroying)return;var seen=WILL_SEEN,top=!seen;top&&(seen=WILL_SEEN={}),iterDeps(propertyWillChange,obj,depKey,seen,meta),top&&(WILL_SEEN=null)}function dependentKeysDidChange(obj,depKey,meta){if(obj.isDestroying)return;var seen=DID_SEEN,top=!seen;top&&(seen=DID_SEEN={}),iterDeps(propertyDidChange,obj,depKey,seen,meta),top&&(DID_SEEN=null)}function addChainWatcher(obj,keyName,node){if(!obj||"object"!=typeof obj)return;var m=meta(obj),nodes=m.chainWatchers;if(!nodes||nodes.__emberproto__!==obj)nodes=m.chainWatchers={__emberproto__:obj};nodes[keyName]||(nodes[keyName]={}),nodes[keyName][guidFor(node)]=node,Ember.watch(obj,keyName)}function removeChainWatcher(obj,keyName,node){if(!obj||"object"!=typeof obj)return;var m=meta(obj,!1),nodes=m.chainWatchers;if(!nodes||nodes.__emberproto__!==obj)return;nodes[keyName]&&delete nodes[keyName][guidFor(node)],Ember.unwatch(obj,keyName)}function flushPendingChains(reschedule){if(pendingQueue.length===0)return;var queue=pendingQueue;pendingQueue=[],forEach(queue,function(q){q[0].add(q[1])}),reschedule!==!1&&pendingQueue.length>0&&setTimeout(flushPendingChains,1)}function isProto(pvalue){return meta(pvalue,!1).proto===pvalue}function chainsFor(obj){var m=meta(obj),ret=m.chains;return ret?ret.value()!==obj&&(ret=m.chains=ret.copy(obj)):ret=m.chains=new ChainNode(null,null,obj),ret}function notifyChains(obj,m,keyName,methodName,arg){var nodes=m.chainWatchers;if(!nodes||nodes.__emberproto__!==obj)return;nodes=nodes[keyName];if(!nodes)return;for(var key in nodes){if(!nodes.hasOwnProperty(key))continue;nodes[key][methodName](arg)}}function chainsWillChange(obj,keyName,m){notifyChains(obj,m,keyName,"willChange")}function chainsDidChange(obj,keyName,m){notifyChains(obj,m,keyName,"didChange")}function propertyWillChange(obj,keyName){var m=meta(obj,!1),proto=m.proto,desc=m.descs[keyName];if(proto===obj)return;desc&&desc.willChange&&desc.willChange(obj,keyName),dependentKeysWillChange(obj,keyName,m),chainsWillChange(obj,keyName,m),Ember.notifyBeforeObservers(obj,keyName)}function propertyDidChange(obj,keyName){var m=meta(obj,!1),proto=m.proto,desc=m.descs[keyName];if(proto===obj)return;desc&&desc.didChange&&desc.didChange(obj,keyName),dependentKeysDidChange(obj,keyName,m),chainsDidChange(obj,keyName,m),Ember.notifyObservers(obj,keyName)}var guidFor=Ember.guidFor,meta=Ember.meta,get=Ember.get,set=Ember.set,normalizeTuple=Ember.normalizeTuple.primitive,normalizePath=Ember.normalizePath,SIMPLE_PROPERTY=Ember.SIMPLE_PROPERTY,GUID_KEY=Ember.GUID_KEY,META_KEY=Ember.META_KEY,notifyObservers=Ember.notifyObservers,forEach=Ember.ArrayUtils.forEach,FIRST_KEY=/^([^\.\*]+)/,IS_PATH=/[\.\*]/,DEP_SKIP={__emberproto__:!0},WILL_SEEN,DID_SEEN,pendingQueue=[],ChainNode=function(parent,key,value,separator){var obj;this._parent=parent,this._key=key,this._watching=value===undefined,this._value=value,this._separator=separator||".",this._paths={},this._watching&&(this._object=parent.value(),this._object&&addChainWatcher(this._object,this._key,this)),this._parent&&this._parent._key==="@each"&&this.value()},Wp=ChainNode.prototype;Wp.value=function(){if(this._value===undefined&&this._watching){var obj=this._parent.value();this._value=obj&&!isProto(obj)?get(obj,this._key):undefined}return this._value},Wp.destroy=function(){if(this._watching){var obj=this._object;obj&&removeChainWatcher(obj,this._key,this),this._watching=!1}},Wp.copy=function(obj){var ret=new ChainNode(null,null,obj,this._separator),paths=this._paths,path;for(path in paths){if(paths[path]<=0)continue;ret.add(path)}return ret},Wp.add=function(path){var obj,tuple,key,src,separator,paths;paths=this._paths,paths[path]=(paths[path]||0)+1,obj=this.value(),tuple=normalizeTuple(obj,path);if(tuple[0]&&tuple[0]===obj)path=tuple[1],key=firstKey(path),path=path.slice(key.length+1);else{if(!tuple[0]){pendingQueue.push([this,path]),tuple.length=0;return}src=tuple[0],key=path.slice(0,0-(tuple[1].length+1)),separator=path.slice(key.length,key.length+1),path=tuple[1]}tuple.length=0,this.chain(key,path,src,separator)},Wp.remove=function(path){var obj,tuple,key,src,paths;paths=this._paths,paths[path]>0&&paths[path]--,obj=this.value(),tuple=normalizeTuple(obj,path),tuple[0]===obj?(path=tuple[1],key=firstKey(path),path=path.slice(key.length+1)):(src=tuple[0],key=path.slice(0,0-(tuple[1].length+1)),path=tuple[1]),tuple.length=0,this.unchain(key,path)},Wp.count=0,Wp.chain=function(key,path,src,separator){var chains=this._chains,node;chains||(chains=this._chains={}),node=chains[key],node||(node=chains[key]=new ChainNode(this,key,src,separator)),node.count++,path&&path.length>0&&(key=firstKey(path),path=path.slice(key.length+1),node.chain(key,path))},Wp.unchain=function(key,path){var chains=this._chains,node=chains[key];path&&path.length>1&&(key=firstKey(path),path=path.slice(key.length+1),node.unchain(key,path)),node.count--,node.count<=0&&(delete chains[node._key],node.destroy())},Wp.willChange=function(){var chains=this._chains;if(chains)for(var key in chains){if(!chains.hasOwnProperty(key))continue;chains[key].willChange()}this._parent&&this._parent.chainWillChange(this,this._key,1)},Wp.chainWillChange=function(chain,path,depth){this._key&&(path=this._key+this._separator+path),this._parent?this._parent.chainWillChange(this,path,depth+1):(depth>1&&Ember.propertyWillChange(this.value(),path),path="this."+path,this._paths[path]>0&&Ember.propertyWillChange(this.value(),path))},Wp.chainDidChange=function(chain,path,depth){this._key&&(path=this._key+this._separator+path),this._parent?this._parent.chainDidChange(this,path,depth+1):(depth>1&&Ember.propertyDidChange(this.value(),path),path="this."+path,this._paths[path]>0&&Ember.propertyDidChange(this.value(),path))},Wp.didChange=function(suppressEvent){if(this._watching){var obj=this._parent.value();obj!==this._object&&(removeChainWatcher(this._object,this._key,this),this._object=obj,addChainWatcher(obj,this._key,this)),this._value=undefined,this._parent&&this._parent._key==="@each"&&this.value()}var chains=this._chains;if(chains)for(var key in chains){if(!chains.hasOwnProperty(key))continue;chains[key].didChange(suppressEvent)}if(suppressEvent)return;this._parent&&this._parent.chainDidChange(this,this._key,1)},Ember.overrideChains=function(obj,keyName,m){notifyChains(obj,m,keyName,"didChange",!0)};var WATCHED_PROPERTY=Ember.SIMPLE_PROPERTY.watched;Ember.watch=function(obj,keyName){if(keyName==="length"&&Ember.typeOf(obj)==="array")return this;var m=meta(obj),watching=m.watching,desc;return keyName=normalizePath(keyName),watching[keyName]?watching[keyName]=(watching[keyName]||0)+1:(watching[keyName]=1,isKeyName(keyName)?(desc=m.descs[keyName],desc=desc?desc.watched:WATCHED_PROPERTY,desc&&Ember.defineProperty(obj,keyName,desc)):chainsFor(obj).add(keyName)),this},Ember.isWatching=function(obj,keyName){return!!meta(obj).watching[keyName]},Ember.watch.flushPending=flushPendingChains,Ember.unwatch=function(obj,keyName){if(keyName==="length"&&Ember.typeOf(obj)==="array")return this;var watching=meta(obj).watching,desc,descs;return keyName=normalizePath(keyName),watching[keyName]===1?(watching[keyName]=0,isKeyName(keyName)?(desc=meta(obj).descs[keyName],desc=desc?desc.unwatched:SIMPLE_PROPERTY,desc&&Ember.defineProperty(obj,keyName,desc)):chainsFor(obj).remove(keyName)):watching[keyName]>1&&watching[keyName]--,this},Ember.rewatch=function(obj){var m=meta(obj,!1),chains=m.chains,bindings=m.bindings,key,b;GUID_KEY in obj&&!obj.hasOwnProperty(GUID_KEY)&&Ember.generateGuid(obj,"ember"),chains&&chains.value()!==obj&&chainsFor(obj);if(bindings&&m.proto!==obj)for(key in bindings)b=!DEP_SKIP[key]&&obj[key],b&&b instanceof Ember.Binding&&b.fromDidChange(obj);return this},Ember.propertyWillChange=propertyWillChange,Ember.propertyDidChange=propertyDidChange;var NODE_STACK=[];Ember.destroy=function(obj){var meta=obj[META_KEY],node,nodes,key,nodeObject;if(meta){obj[META_KEY]=null,node=meta.chains;if(node){NODE_STACK.push(node);while(NODE_STACK.length>0){node=NODE_STACK.pop(),nodes=node._chains;if(nodes)for(key in nodes)nodes.hasOwnProperty(key)&&NODE_STACK.push(nodes[key]);node._watching&&(nodeObject=node._object,nodeObject&&removeChainWatcher(nodeObject,node._key,node))}}}}}(),function(){function actionSetFor(obj,eventName,target,writable){var targetGuid=guidFor(target);return metaPath(obj,["listeners",eventName,targetGuid],writable)}function targetSetFor(obj,eventName){var listenerSet=meta(obj,!1).listeners;return listenerSet?listenerSet[eventName]||!1:!1}function iterateSet(targetSet,callback,params){if(!targetSet)return!1;for(var targetGuid in targetSet){if(SKIP_PROPERTIES[targetGuid])continue;var actionSet=targetSet[targetGuid];if(actionSet)for(var methodGuid in actionSet){if(SKIP_PROPERTIES[methodGuid])continue;var action=actionSet[methodGuid];if(action&&callback(action,params)===!0)return!0}}return!1}function invokeAction(action,params){var method=action.method,target=action.target,xform=action.xform;target||(target=params[0]),"string"==typeof method&&(method=target[method]),xform?xform(target,method,params):method.apply(target,params)}function addListener(obj,eventName,target,method,xform){ember_assert("You must pass at least an object and event name to Ember.addListener",!!obj&&!!eventName),!method&&"function"==typeof target&&(method=target,target=null);var actionSet=actionSetFor(obj,eventName,target,!0),methodGuid=guidFor(method),ret;return actionSet[methodGuid]?actionSet[methodGuid].xform=xform:actionSet[methodGuid]={target:target,method:method,xform:xform},"function"==typeof obj.didAddListener&&obj.didAddListener(eventName,target,method),ret}function removeListener(obj,eventName,target,method){!method&&"function"==typeof target&&(method=target,target=null);var actionSet=actionSetFor(obj,eventName,target,!0),methodGuid=guidFor(method);actionSet&&actionSet[methodGuid]&&(actionSet[methodGuid]=null),obj&&"function"==typeof obj.didRemoveListener&&obj.didRemoveListener(eventName,target,method)}function suspendListener(obj,eventName,target,method,callback){!method&&"function"==typeof target&&(method=target,target=null);var actionSet=actionSetFor(obj,eventName,target,!0),methodGuid=guidFor(method),action=actionSet&&actionSet[methodGuid];actionSet[methodGuid]=null;try{return callback.call(target)}finally{actionSet[methodGuid]=action}}function watchedEvents(obj){var listeners=meta(obj,!1).listeners,ret=[];if(listeners)for(var eventName in listeners)!SKIP_PROPERTIES[eventName]&&listeners[eventName]&&ret.push(eventName);return ret}function sendEvent(obj,eventName){obj!==Ember&&"function"==typeof obj.sendEvent&&obj.sendEvent.apply(obj,a_slice.call(arguments,1));var targetSet=targetSetFor(obj,eventName);return iterateSet(targetSet,invokeAction,arguments),!0}function deferEvent(obj,eventName){var targetSet=targetSetFor(obj,eventName),actions=[],params=arguments;return iterateSet(targetSet,function(action){actions.push(action)}),function(){obj!==Ember&&"function"==typeof obj.sendEvent&&obj.sendEvent.apply(obj,a_slice.call(params,1));for(var i=0,len=actions.length;i<len;++i)invokeAction(actions[i],params)}}function hasListeners(obj,eventName){var targetSet=targetSetFor(obj,eventName);if(iterateSet(targetSet,function(){return!0}))return!0;var set=metaPath(obj,["listeners"],!0);return set[eventName]=null,!1}function listenersFor(obj,eventName){var targetSet=targetSetFor(obj,eventName),ret=[];return iterateSet(targetSet,function(action){ret.push([action.target,action.method])}),ret}var o_create=Ember.platform.create,meta=Ember.meta,guidFor=Ember.guidFor,a_slice=Array.prototype.slice,metaPath=Ember.metaPath,SKIP_PROPERTIES={__ember_source__:!0};Ember.addListener=addListener,Ember.removeListener=removeListener,Ember._suspendListener=suspendListener,Ember.sendEvent=sendEvent,Ember.hasListeners=hasListeners,Ember.watchedEvents=watchedEvents,Ember.listenersFor=listenersFor,Ember.deferEvent=deferEvent}(),function(){function meta(obj,writable){var m=Ember.meta(obj,writable!==!1),ret=m.mixins;return writable===!1?ret||EMPTY_META:(ret?ret.__emberproto__!==obj&&(ret=m.mixins=o_create(ret),ret.__emberproto__=obj):ret=m.mixins={__emberproto__:obj},ret)}function initMixin(mixin,args){return args&&args.length>0&&(mixin.mixins=a_map(args,function(x){if(x instanceof Mixin)return x;var mixin=new Mixin;return mixin.properties=x,mixin})),mixin}function isMethod(obj){return"function"!=typeof obj||obj.isMethod===!1?!1:a_indexOf(NATIVES,obj)<0}function mergeMixins(mixins,m,descs,values,base){function removeKeys(keyName){delete descs[keyName],delete values[keyName]}var len=mixins.length,idx,mixin,guid,props,value,key,ovalue,concats;for(idx=0;idx<len;idx++){mixin=mixins[idx];if(!mixin)throw new Error("Null value found in Ember.mixin()");if(mixin instanceof Mixin){guid=Ember.guidFor(mixin);if(m[guid])continue;m[guid]=mixin,props=mixin.properties}else props=mixin;if(props){concats=values.concatenatedProperties||base.concatenatedProperties,props.concatenatedProperties&&(concats=concats?concats.concat(props.concatenatedProperties):props.concatenatedProperties);for(key in props){if(!props.hasOwnProperty(key))continue;value=props[key];if(value instanceof Ember.Descriptor){if(value===REQUIRED&&descs[key])continue;descs[key]=value,values[key]=undefined}else{if(isMethod(value)){ovalue=descs[key]===Ember.SIMPLE_PROPERTY&&values[key],ovalue||(ovalue=base[key]),"function"!=typeof ovalue&&(ovalue=null);if(ovalue){var o=value.__ember_observes__,ob=value.__ember_observesBefore__;value=Ember.wrap(value,ovalue),value.__ember_observes__=o,value.__ember_observesBefore__=ob}}else if(concats&&a_indexOf(concats,key)>=0||key==="concatenatedProperties"){var baseValue=values[key]||base[key];value=baseValue?baseValue.concat(value):Ember.makeArray(value)}descs[key]=Ember.SIMPLE_PROPERTY,values[key]=value}}props.hasOwnProperty("toString")&&(base.toString=props.toString)}else mixin.mixins&&(mergeMixins(mixin.mixins,m,descs,values,base),mixin._without&&a_forEach(mixin._without,removeKeys))}}function writableReq(obj){var m=Ember.meta(obj),req=m.required;if(!req||req.__emberproto__!==obj)req=m.required=req?o_create(req):{__ember_count__:0},req.__emberproto__=obj;return req}function getObserverPaths(value){return"function"==typeof value&&value.__ember_observes__}function getBeforeObserverPaths(value){return"function"==typeof value&&value.__ember_observesBefore__}function applyMixin(obj,mixins,partial){var descs={},values={},m=Ember.meta(obj),req=m.required,key,willApply,didApply,value,desc,mixinBindings=Ember._mixinBindings;mergeMixins(mixins,meta(obj),descs,values,obj),MixinDelegate.detect(obj)&&(willApply=values.willApplyProperty||obj.willApplyProperty,didApply=values.didApplyProperty||obj.didApplyProperty);for(key in descs){if(!descs.hasOwnProperty(key))continue;desc=descs[key],value=values[key];if(desc===REQUIRED){if(!(key in obj)){if(!partial)throw new Error("Required property not defined: "+key);req=writableReq(obj),req.__ember_count__++,req[key]=!0}}else{while(desc instanceof Alias){var altKey=desc.methodName;descs[altKey]?(value=values[altKey],desc=descs[altKey]):m.descs[altKey]?(desc=m.descs[altKey],value=desc.val(obj,altKey)):(value=obj[altKey],desc=Ember.SIMPLE_PROPERTY)}willApply&&willApply.call(obj,key);var observerPaths=getObserverPaths(value),curObserverPaths=observerPaths&&getObserverPaths(obj[key]),beforeObserverPaths=getBeforeObserverPaths(value),curBeforeObserverPaths=beforeObserverPaths&&getBeforeObserverPaths(obj[key]),len,idx;if(curObserverPaths){len=curObserverPaths.length;for(idx=0;idx<len;idx++)Ember.removeObserver(obj,curObserverPaths[idx],null,key)}if(curBeforeObserverPaths){len=curBeforeObserverPaths.length;for(idx=0;idx<len;idx++)Ember.removeBeforeObserver(obj,curBeforeObserverPaths[idx],null,key)}value=mixinBindings(obj,key,value,m),defineProperty(obj,key,desc,value);if(observerPaths){len=observerPaths.length;for(idx=0;idx<len;idx++)Ember.addObserver(obj,observerPaths[idx],null,key)}if(beforeObserverPaths){len=beforeObserverPaths.length;for(idx=0;idx<len;idx++)Ember.addBeforeObserver(obj,beforeObserverPaths[idx],null,key)}req&&req[key]&&(req=writableReq(obj),req.__ember_count__--,req[key]=!1),didApply&&didApply.call(obj,key)}}if(!partial&&req&&req.__ember_count__>0){var keys=[];for(key in req){if(META_SKIP[key])continue;keys.push(key)}throw new Error("Required properties not defined: "+keys.join(","))}return obj}function _detect(curMixin,targetMixin,seen){var guid=Ember.guidFor(curMixin);if(seen[guid])return!1;seen[guid]=!0;if(curMixin===targetMixin)return!0;var mixins=curMixin.mixins,loc=mixins?mixins.length:0;while(--loc>=0)if(_detect(mixins[loc],targetMixin,seen))return!0;return!1}function _keys(ret,mixin,seen){if(seen[Ember.guidFor(mixin)])return;seen[Ember.guidFor(mixin)]=!0;if(mixin.properties){var props=mixin.properties;for(var key in props)props.hasOwnProperty(key)&&(ret[key]=!0)}else mixin.mixins&&a_forEach(mixin.mixins,function(x){_keys(ret,x,seen)})}function processNames(paths,root,seen){var idx=paths.length;for(var key in root){if(!root.hasOwnProperty||!root.hasOwnProperty(key))continue;var obj=root[key];paths[idx]=key;if(obj&&obj.toString===classToString)obj[NAME_KEY]=paths.join(".");else if(obj&&get(obj,"isNamespace")){if(seen[Ember.guidFor(obj)])continue;seen[Ember.guidFor(obj)]=!0,processNames(paths,obj,seen)}}paths.length=idx}function findNamespaces(){var Namespace=Ember.Namespace,obj;if(Namespace.PROCESSED)return;for(var prop in window){if(prop==="globalStorage"&&window.StorageList&&window.globalStorage instanceof window.StorageList)continue;if(window.hasOwnProperty&&!window.hasOwnProperty(prop))continue;try{obj=window[prop]}catch(e){continue}obj&&get(obj,"isNamespace")&&(ember_deprecate("Namespaces should not begin with lowercase.",/^[A-Z]/.test(prop)),obj[NAME_KEY]=prop)}}var Mixin,MixinDelegate,REQUIRED,Alias,classToString,superClassString,a_map=Ember.ArrayUtils.map,a_indexOf=Ember.ArrayUtils.indexOf,a_forEach=Ember.ArrayUtils.forEach,a_slice=Array.prototype.slice,EMPTY_META={},META_SKIP={__emberproto__:!0,__ember_count__:!0},o_create=Ember.platform.create,NATIVES=[Boolean,Object,Number,Array,Date,String],defineProperty=Ember.defineProperty;Ember._mixinBindings=function(obj,key,value,m){return value},Ember.mixin=function(obj){var args=a_slice.call(arguments,1);return applyMixin(obj,args,!1)},Ember.Mixin=function(){return initMixin(this,arguments)},Mixin=Ember.Mixin,Mixin._apply=applyMixin,Mixin.applyPartial=function(obj){var args=a_slice.call(arguments,1);return applyMixin(obj,args,!0)},Mixin.create=function(){classToString.processed=!1;var M=this;return initMixin(new M,arguments)},Mixin.prototype.reopen=function(){var mixin,tmp;this.properties&&(mixin=Mixin.create(),mixin.properties=this.properties,delete this.properties,this.mixins=[mixin]);var len=arguments.length,mixins=this.mixins,idx;for(idx=0;idx<len;idx++)mixin=arguments[idx],mixin instanceof Mixin?mixins.push(mixin):(tmp=Mixin.create(),tmp.properties=mixin,mixins.push(tmp));return this};var TMP_ARRAY=[];Mixin.prototype.apply=function(obj){TMP_ARRAY[0]=this;var ret=applyMixin(obj,TMP_ARRAY,!1);return TMP_ARRAY.length=0,ret},Mixin.prototype.applyPartial=function(obj){TMP_ARRAY[0]=this;var ret=applyMixin(obj,TMP_ARRAY,!0);return TMP_ARRAY.length=0,ret},Mixin.prototype.detect=function(obj){return obj?obj instanceof Mixin?_detect(obj,this,{}):!!meta(obj,!1)[Ember.guidFor(this)]:!1},Mixin.prototype.without=function(){var ret=new Mixin(this);return ret._without=a_slice.call(arguments),ret},Mixin.prototype.keys=function(){var keys={},seen={},ret=[];_keys(keys,this,seen);for(var key in keys)keys.hasOwnProperty(key)&&ret.push(key);return ret};var NAME_KEY=Ember.GUID_KEY+"_name",get=Ember.get;Ember.identifyNamespaces=findNamespaces,superClassString=function(mixin){var superclass=mixin.superclass;if(superclass)return superclass[NAME_KEY]?superclass[NAME_KEY]:superClassString(superclass);return},classToString=function(){var Namespace=Ember.Namespace,namespace;if(Namespace&&!this[NAME_KEY]&&!classToString.processed){Namespace.PROCESSED||(findNamespaces(),Namespace.PROCESSED=!0),classToString.processed=!0;var namespaces=Namespace.NAMESPACES;for(var i=0,l=namespaces.length;i<l;i++)namespace=namespaces[i],processNames([namespace.toString()],namespace,{})}if(this[NAME_KEY])return this[NAME_KEY];var str=superClassString(this);return str?"(subclass of "+str+")":"(unknown mixin)"},Mixin.prototype.toString=classToString,Mixin.mixins=function(obj){var ret=[],mixins=meta(obj,!1),key,mixin;for(key in mixins){if(META_SKIP[key])continue;mixin=mixins[key],mixin.properties||ret.push(mixins[key])}return ret},REQUIRED=new Ember.Descriptor,REQUIRED.toString=function(){return"(Required Property)"},Ember.required=function(){return REQUIRED},Alias=function(methodName){this.methodName=methodName},Alias.prototype=new Ember.Descriptor,Ember.alias=function(methodName){return new Alias(methodName)},Ember.MixinDelegate=Mixin.create({willApplyProperty:Ember.required(),didApplyProperty:Ember.required()}),MixinDelegate=Ember.MixinDelegate,Ember.observer=function(func){var paths=a_slice.call(arguments,1);return func.__ember_observes__=paths,func},Ember.beforeObserver=function(func){var paths=a_slice.call(arguments,1);return func.__ember_observesBefore__=paths,func}}(),function(){function invoke(target,method,args,ignore){method===undefined&&(method=target,target=undefined),"string"==typeof method&&(method=target[method]),args&&ignore>0&&(args=args.length>ignore?slice.call(args,ignore):null);if("function"!=typeof Ember.onerror)return method.apply(target||this,args||[]);try{return method.apply(target||this,args||[])}catch(error){Ember.onerror(error)}}function autorun(){autorunTimer=null,run.currentRunLoop&&run.end()}function invokeLaterTimers(){var now=+(new Date),earliest=-1;for(var key in timers){if(!timers.hasOwnProperty(key))continue;var timer=timers[key];if(timer&&timer.expires)if(now>=timer.expires)delete timers[key],invoke(timer.target,timer.method,timer.args,2);else if(earliest<0||timer.expires<earliest)earliest=timer.expires}earliest>0&&setTimeout(invokeLaterTimers,earliest- +(new Date))}function invokeOnceTimer(guid,onceTimers){onceTimers[this.tguid]&&delete onceTimers[this.tguid][this.mguid],timers[guid]&&invoke(this.target,this.method,this.args,2),delete timers[guid]}function invokeNextTimers(){scheduledNext=null;for(var key in timers){if(!timers.hasOwnProperty(key))continue;var timer=timers[key];timer.next&&(delete timers[key],invoke(timer.target,timer.method,timer.args,2))}}var slice=Array.prototype.slice,forEach=Ember.ArrayUtils.forEach,timerMark,K=function(){},RunLoop=function(prev){var self;return this instanceof RunLoop?self=this:self=new K,self._prev=prev||null,self.onceTimers={},self};K.prototype=RunLoop.prototype,RunLoop.prototype={end:function(){this.flush()},prev:function(){return this._prev},schedule:function(queueName,target,method){var queues=this._queues,queue;queues||(queues=this._queues={}),queue=queues[queueName],queue||(queue=queues[queueName]=[]);var args=arguments.length>3?slice.call(arguments,3):null;return queue.push({target:target,method:method,args:args}),this},flush:function(queueName){function iter(item){invoke(item.target,item.method,item.args)}var queues=this._queues,queueNames,idx,len,queue,log;if(!queues)return this;Ember.watch.flushPending();if(queueName)while(this._queues&&(queue=this._queues[queueName])){this._queues[queueName]=null;if(queueName==="sync"){log=Ember.LOG_BINDINGS,log&&Ember.Logger.log("Begin: Flush Sync Queue"),Ember.beginPropertyChanges();try{forEach(queue,iter)}finally{Ember.endPropertyChanges()}log&&Ember.Logger.log("End: Flush Sync Queue")}else forEach(queue,iter)}else{queueNames=Ember.run.queues,len=queueNames.length;do{this._queues=null;for(idx=0;idx<len;idx++){queueName=queueNames[idx],queue=queues[queueName];if(queue)if(queueName==="sync"){log=Ember.LOG_BINDINGS,log&&Ember.Logger.log("Begin: Flush Sync Queue"),Ember.beginPropertyChanges();try{forEach(queue,iter)}finally{Ember.endPropertyChanges()}log&&Ember.Logger.log("End: Flush Sync Queue")}else forEach(queue,iter)}}while(queues=this._queues)}return timerMark=null,this}},Ember.RunLoop=RunLoop,Ember.run=function(target,method){var ret,loop;run.begin();try{if(target||method)ret=invoke(target,method,arguments,2)}finally{run.end()}return ret};var run=Ember.run;Ember.run.begin=function(){run.currentRunLoop=new RunLoop(run.currentRunLoop)},Ember.run.end=function(){ember_assert("must have a current run loop",run.currentRunLoop);try{run.currentRunLoop.end()}finally{run.currentRunLoop=run.currentRunLoop.prev()}},Ember.run.queues=["sync","actions","destroy","timers"],Ember.run.schedule=function(queue,target,method){var loop=run.autorun();loop.schedule.apply(loop,arguments)};var autorunTimer;Ember.run.autorun=function(){return run.currentRunLoop||(run.begin(),Ember.testing?run.end():autorunTimer||(autorunTimer=setTimeout(autorun,1))),run.currentRunLoop},Ember.run.sync=function(){run.autorun(),run.currentRunLoop.flush("sync")};var timers={},laterScheduled=!1;Ember.run.later=function(target,method){var args,expires,timer,guid,wait;return arguments.length===2&&"function"==typeof target?(wait=method,method=target,target=undefined,args=[target,method]):(args=slice.call(arguments),wait=args.pop()),expires=+(new Date)+wait,timer={target:target,method:method,expires:expires,args:args},guid=Ember.guidFor(timer),timers[guid]=timer,run.once(timers,invokeLaterTimers),guid},Ember.run.once=function(target,method){var tguid=Ember.guidFor(target),mguid=Ember.guidFor(method),guid,timer,onceTimers=run.autorun().onceTimers;return guid=onceTimers[tguid]&&onceTimers[tguid][mguid],guid&&timers[guid]?timers[guid].args=slice.call(arguments):(timer={target:target,method:method,args:slice.call(arguments),tguid:tguid,mguid:mguid},guid=Ember.guidFor(timer),timers[guid]=timer,onceTimers[tguid]||(onceTimers[tguid]={}),onceTimers[tguid][mguid]=guid,run.schedule("actions",timer,invokeOnceTimer,guid,onceTimers)),guid};var scheduledNext=!1;Ember.run.next=function(target,method){var timer,guid;return timer={target:target,method:method,args:slice.call(arguments),next:!0},guid=Ember.guidFor(timer),timers[guid]=timer,scheduledNext||(scheduledNext=setTimeout(invokeNextTimers,1)),guid},Ember.run.cancel=function(timer){delete timers[timer]},Ember.RunLoop.begin=ember_deprecateFunc("Use Ember.run.begin instead of Ember.RunLoop.begin.",Ember.run.begin),Ember.RunLoop.end=ember_deprecateFunc("Use Ember.run.end instead of Ember.RunLoop.end.",Ember.run.end)}(),function(){function MULTIPLE(val){return val instanceof Array?val:val===undefined||val===null?[]:[val]}function SINGLE(val,placeholder){return val instanceof Array?val.length>1?placeholder:val[0]:val}function getTransformedValue(binding,val,obj,dir){var typeTransform=binding._typeTransform;typeTransform&&(val=typeTransform(val,binding._placeholder));var transforms=binding._transforms,len=transforms?transforms.length:0,idx;for(idx=0;idx<len;idx++){var transform=transforms[idx][dir];transform&&(val=transform.call(this,val,obj))}return val}function empty(val){return val===undefined||val===null||val===""||Ember.isArray(val)&&get(val,"length")===0}function getPathWithGlobals(obj,path){return getPath(isGlobalPath(path)?window:obj,path)}function getTransformedFromValue(obj,binding){var operation=binding._operation,fromValue;return operation?fromValue=operation(obj,binding._from,binding._operand):fromValue=getPathWithGlobals(obj,binding._from),getTransformedValue(binding,fromValue,obj,"to")}function getTransformedToValue(obj,binding){var toValue=getPath(obj,binding._to);return getTransformedValue(binding,toValue,obj,"from")}function mixinProperties(to,from){for(var key in from)from.hasOwnProperty(key)&&(to[key]=from[key])}Ember.LOG_BINDINGS=!!Ember.ENV.LOG_BINDINGS,Ember.BENCHMARK_BINDING_NOTIFICATIONS=!!Ember.ENV.BENCHMARK_BINDING_NOTIFICATIONS,Ember.BENCHMARK_BINDING_SETUP=!!Ember.ENV.BENCHMARK_BINDING_SETUP,Ember.MULTIPLE_PLACEHOLDER="@@MULT@@",Ember.EMPTY_PLACEHOLDER="@@EMPTY@@";var BOOL={to:function(val){return!!val}},NOT={to:function(val){return!val}},get=Ember.get,getPath=Ember.getPath,setPath=Ember.setPath,guidFor=Ember.guidFor,isGlobalPath=Ember.isGlobalPath,AND_OPERATION=function(obj,left,right){return getPathWithGlobals(obj,left)&&getPathWithGlobals(obj,right)},OR_OPERATION=function(obj,left,right){return getPathWithGlobals(obj,left)||getPathWithGlobals(obj,right)},K=function(){},Binding=function(toPath,fromPath){var self;return this instanceof Binding?self=this:self=new K,self._direction="fwd",self._from=fromPath,self._to=toPath,self};K.prototype=Binding.prototype,Binding.prototype={from:function(path){return this._from=path,this},to:function(path){return this._to=path,this},oneWay:function(flag){return this._oneWay=flag===undefined?!0:!!flag,this},transform:function(transform){return"function"==typeof transform&&(transform={to:transform}),this._transforms||(this._transforms=[]),this._transforms.push(transform),this},resetTransforms:function(){return this._transforms=null,this},single:function(placeholder){return placeholder===undefined&&(placeholder=Ember.MULTIPLE_PLACEHOLDER),this._typeTransform=SINGLE,this._placeholder=placeholder,this},multiple:function(){return this._typeTransform=MULTIPLE,this._placeholder=null,this},bool:function(){return this.transform(BOOL),this},notEmpty:function(placeholder){if(placeholder===null||placeholder===undefined)placeholder=Ember.EMPTY_PLACEHOLDER;return this.transform({to:function(val){return empty(val)?placeholder:val}}),this},notNull:function(placeholder){if(placeholder===null||placeholder===undefined)placeholder=Ember.EMPTY_PLACEHOLDER;return this.transform({to:function(val){return val===null||val===undefined?placeholder:val}}),this},not:function(){return this.transform(NOT),this},isNull:function(){return this.transform(function(val){return val===null||val===undefined}),this},toString:function(){var oneWay=this._oneWay?"[oneWay]":"";return"Ember.Binding<"+guidFor(this)+">("+this._from+" -> "+this._to+")"+oneWay},connect:function(obj){ember_assert("Must pass a valid object to Ember.Binding.connect()",!!obj);var oneWay=this._oneWay,operand=this._operand;return Ember.addObserver(obj,this._from,this,this.fromDidChange),operand&&Ember.addObserver(obj,operand,this,this.fromDidChange),oneWay||Ember.addObserver(obj,this._to,this,this.toDidChange),Ember.meta(obj,!1).proto!==obj&&this._scheduleSync(obj,"fwd"),this._readyToSync=!0,this},disconnect:function(obj){ember_assert("Must pass a valid object to Ember.Binding.disconnect()",!!obj);var oneWay=this._oneWay,operand=this._operand;return Ember.removeObserver(obj,this._from,this,this.fromDidChange),operand&&Ember.removeObserver(obj,operand,this,this.fromDidChange),oneWay||Ember.removeObserver(obj,this._to,this,this.toDidChange),this._readyToSync=!1,this},fromDidChange:function(target){this._scheduleSync(target,"fwd")},toDidChange:function(target){this._scheduleSync(target,"back")},_scheduleSync:function(obj,dir){var guid=guidFor(obj),existingDir=this[guid];existingDir||(Ember.run.schedule("sync",this,this._sync,obj),this[guid]=dir),existingDir==="back"&&dir==="fwd"&&(this[guid]="fwd")},_sync:function(obj){var log=Ember.LOG_BINDINGS;if(obj.isDestroyed||!this._readyToSync)return;var guid=guidFor(obj),direction=this[guid],fromPath=this._from,toPath=this._to;delete this[guid];if(direction==="fwd"){var fromValue=getTransformedFromValue(obj,this);log&&Ember.Logger.log(" ",this.toString(),"->",fromValue,obj),this._oneWay?Ember.trySetPath(Ember.isGlobalPath(toPath)?window:obj,toPath,fromValue):Ember._suspendObserver(obj,toPath,this,this.toDidChange,function(){Ember.trySetPath(Ember.isGlobalPath(toPath)?window:obj,toPath,fromValue)})}else if(direction==="back"){var toValue=getTransformedToValue(obj,this);log&&Ember.Logger.log(" ",this.toString(),"<-",toValue,obj),Ember._suspendObserver(obj,fromPath,this,this.fromDidChange,function(){Ember.trySetPath(Ember.isGlobalPath(fromPath)?window:obj,fromPath,toValue)})}}},mixinProperties(Binding,{from:function(){var C=this,binding=new C;return binding.from.apply(binding,arguments)},to:function(){var C=this,binding=new C;return binding.to.apply(binding,arguments)},oneWay:function(from,flag){var C=this,binding=new C(null,from);return binding.oneWay(flag)},single:function(from,placeholder){var C=this,binding=new C(null,from);return binding.single(placeholder)},multiple:function(from){var C=this,binding=new C(null,from);return binding.multiple()},transform:function(from,func){func||(func=from,from=null);var C=this,binding=new C(null,from);return binding.transform(func)},notEmpty:function(from,placeholder){var C=this,binding=new C(null,from);return binding.notEmpty(placeholder)},notNull:function(from,placeholder){var C=this,binding=new C(null,from);return binding.notNull(placeholder)},bool:function(from){var C=this,binding=new C(null,from);return binding.bool()},not:function(from){var C=this,binding=new C(null,from);return binding.not()},isNull:function(from){var C=this,binding=new C(null,from);return binding.isNull()},and:function(pathA,pathB){var C=this,binding=(new C(null,pathA)).oneWay();return binding._operand=pathB,binding._operation=AND_OPERATION,binding},or:function(pathA,pathB){var C=this,binding=(new C(null,pathA)).oneWay();return binding._operand=pathB,binding._operation=OR_OPERATION,binding}}),Ember.Binding=Binding,Ember.bind=function(obj,to,from){return(new Ember.Binding(to,from)).connect(obj)},Ember.oneWay=function(obj,to,from){return(new Ember.Binding(to,from)).oneWay().connect(obj)}}(),function(){}(),function(){}(),function(){function _copy(obj,deep,seen,copies){var ret,loc,key;if("object"!=typeof obj||obj===null)return obj;if(deep&&(loc=indexOf(seen,obj))>=0)return copies[loc];ember_assert("Cannot clone an Ember.Object that does not implement Ember.Copyable",!(obj instanceof Ember.Object)||Ember.Copyable&&Ember.Copyable.detect(obj));if(Ember.typeOf(obj)==="array"){ret=obj.slice();if(deep){loc=ret.length;while(--loc>=0)ret[loc]=_copy(ret[loc],deep,seen,copies)}}else if(Ember.Copyable&&Ember.Copyable.detect(obj))ret=obj.copy(deep,seen,copies);else{ret={};for(key in obj){if(!obj.hasOwnProperty(key))continue;ret[key]=deep?_copy(obj[key],deep,seen,copies):obj[key]}}return deep&&(seen.push(obj),copies.push(ret)),ret}var indexOf=Ember.ArrayUtils.indexOf;typeof console=="undefined"&&(window.console={},console.log=console.info=console.warn=console.error=function(){});var TYPE_MAP={},t="Boolean Number String Function Array Date RegExp Object".split(" ");Ember.ArrayUtils.forEach(t,function(name){TYPE_MAP["[object "+name+"]"]=name.toLowerCase()});var toString=Object.prototype.toString;Ember.typeOf=function(item){var ret;return ret=item===null||item===undefined?String(item):TYPE_MAP[toString.call(item)]||"object",ret==="function"?Ember.Object&&Ember.Object.detect(item)&&(ret="class"):ret==="object"&&(item instanceof Error?ret="error":Ember.Object&&item instanceof Ember.Object?ret="instance":ret="object"),ret},Ember.none=function(obj){return obj===null||obj===undefined},Ember.empty=function(obj){return obj===null||obj===undefined||obj.length===0&&typeof obj!="function"},Ember.compare=function e(v,w){if(v===w)return 0;var type1=Ember.typeOf(v),type2=Ember.typeOf(w),Comparable=Ember.Comparable;if(Comparable){if(type1==="instance"&&Comparable.detect(v.constructor))return v.constructor.compare(v,w);if(type2==="instance"&&Comparable.detect(w.constructor))return 1-w.constructor.compare(w,v)}var mapping=Ember.ORDER_DEFINITION_MAPPING;if(!mapping){var order=Ember.ORDER_DEFINITION;mapping=Ember.ORDER_DEFINITION_MAPPING={};var idx,len;for(idx=0,len=order.length;idx<len;++idx)mapping[order[idx]]=idx;delete Ember.ORDER_DEFINITION}var type1Index=mapping[type1],type2Index=mapping[type2];if(type1Index<type2Index)return-1;if(type1Index>type2Index)return 1;switch(type1){case"boolean":case"number":if(v<w)return-1;if(v>w)return 1;return 0;case"string":var comp=v.localeCompare(w);if(comp<0)return-1;if(comp>0)return 1;return 0;case"array":var vLen=v.length,wLen=w.length,l=Math.min(vLen,wLen),r=0,i=0;while(r===0&&i<l)r=compare(v[i],w[i]),i++;if(r!==0)return r;if(vLen<wLen)return-1;if(vLen>wLen)return 1;return 0;case"instance":if(Ember.Comparable&&Ember.Comparable.detect(v))return v.compare(v,w);return 0;default:return 0}},Ember.copy=function(obj,deep){return"object"!=typeof obj||obj===null?obj:Ember.Copyable&&Ember.Copyable.detect(obj)?obj.copy(deep):_copy(obj,deep,deep?[]:null,deep?[]:null)},Ember.inspect=function(obj){var v,ret=[];for(var key in obj)if(obj.hasOwnProperty(key)){v=obj[key];if(v==="toString")continue;Ember.typeOf(v)==="function"&&(v="function() { ... }"),ret.push(key+": "+v)}return"{"+ret.join(" , ")+"}"},Ember.isEqual=function(a,b){return a&&"function"==typeof a.isEqual?a.isEqual(b):a===b},Ember.ORDER_DEFINITION=Ember.ENV.ORDER_DEFINITION||["undefined","null","boolean","number","string","array","object","instance","function","class"],Ember.keys=Object.keys,Ember.keys||(Ember.keys=function(obj){var ret=[];for(var key in obj)obj.hasOwnProperty(key)&&ret.push(key);return ret}),Ember.Error=function(){var tmp=Error.prototype.constructor.apply(this,arguments);for(var p in tmp)tmp.hasOwnProperty(p)&&(this[p]=tmp[p]);this.message=tmp.message},Ember.Error.prototype=Ember.create(Error.prototype)}(),function(){var STRING_DASHERIZE_REGEXP=/[ _]/g,STRING_DASHERIZE_CACHE={},STRING_DECAMELIZE_REGEXP=/([a-z])([A-Z])/g,STRING_CAMELIZE_REGEXP=/(\-|_|\s)+(.)?/g,STRING_UNDERSCORE_REGEXP_1=/([a-z\d])([A-Z]+)/g,STRING_UNDERSCORE_REGEXP_2=/\-|\s+/g;Ember.STRINGS={},Ember.String={fmt:function(str,formats){var idx=0;return str.replace(/%@([0-9]+)?/g,function(s,argIndex){return argIndex=argIndex?parseInt(argIndex,0)-1:idx++,s=formats[argIndex],(s===null?"(null)":s===undefined?"":s).toString()})},loc:function(str,formats){return str=Ember.STRINGS[str]||str,Ember.String.fmt(str,formats)},w:function(str){return str.split(/\s+/)},decamelize:function(str){return str.replace(STRING_DECAMELIZE_REGEXP,"$1_$2").toLowerCase()},dasherize:function(str){var cache=STRING_DASHERIZE_CACHE,ret=cache[str];return ret?ret:(ret=Ember.String.decamelize(str).replace(STRING_DASHERIZE_REGEXP,"-"),cache[str]=ret,ret)},camelize:function(str){return str.replace(STRING_CAMELIZE_REGEXP,function(match,separator,chr){return chr?chr.toUpperCase():""})},underscore:function(str){return str.replace(STRING_UNDERSCORE_REGEXP_1,"$1_$2").replace(STRING_UNDERSCORE_REGEXP_2,"_").toLowerCase()}}}(),function(){var fmt=Ember.String.fmt,w=Ember.String.w,loc=Ember.String.loc,camelize=Ember.String.camelize,decamelize=Ember.String.decamelize,dasherize=Ember.String.dasherize,underscore=Ember.String.underscore;Ember.EXTEND_PROTOTYPES&&(String.prototype.fmt=function(){return fmt(this,arguments)},String.prototype.w=function(){return w(this)},String.prototype.loc=function(){return loc(this,arguments)},String.prototype.camelize=function(){return camelize(this)},String.prototype.decamelize=function(){return decamelize(this)},String.prototype.dasherize=function(){return dasherize(this)},String.prototype.underscore=function(){return underscore(this)})}(),function(){var a_slice=Array.prototype.slice;Ember.EXTEND_PROTOTYPES&&(Function.prototype.property=function(){var ret=Ember.computed(this);return ret.property.apply(ret,arguments)},Function.prototype.observes=function(){return this.__ember_observes__=a_slice.call(arguments),this},Function.prototype.observesBefore=function(){return this.__ember_observesBefore__=a_slice.call(arguments),this})}(),function(){var IS_BINDING=Ember.IS_BINDING=/^.+Binding$/;Ember._mixinBindings=function(obj,key,value,m){if(IS_BINDING.test(key)){value instanceof Ember.Binding?value.to(key.slice(0,-7)):value=new Ember.Binding(key.slice(0,-7),value),value.connect(obj);var bindings=m.bindings;bindings?bindings.__emberproto__!==obj&&(bindings=m.bindings=Ember.create(m.bindings),bindings.__emberproto__=obj):bindings=m.bindings={__emberproto__:obj},bindings[key]=!0}return value}}(),function(){}(),function(){function popCtx(){return contexts.length===0?{}:contexts.pop()}function pushCtx(ctx){return contexts.push(ctx),null}function iter(key,value){function i(item){var cur=get(item,key);return valueProvided?value===cur:!!cur}var valueProvided=arguments.length===2;return i}function xform(target,method,params){method.call(target,params[0],params[2],params[3])}var get=Ember.get,set=Ember.set,a_slice=Array.prototype.slice,a_indexOf=Ember.ArrayUtils.indexOf,contexts=[];Ember.Enumerable=Ember.Mixin.create({isEnumerable:!0,nextObject:Ember.required(Function),firstObject:Ember.computed(function(){if(get(this,"length")===0)return undefined;if(Ember.Array&&Ember.Array.detect(this))return this.objectAt(0);var context=popCtx(),ret;return ret=this.nextObject(0,null,context),pushCtx(context),ret}).property(),lastObject:Ember.computed(function(){var len=get(this,"length");if(len===0)return undefined;if(Ember.Array&&Ember.Array.detect(this))return this.objectAt(len-1);var context=popCtx(),idx=0,cur,last=null;do last=cur,cur=this.nextObject(idx++,last,context);while(cur!==undefined);return pushCtx(context),last}).property(),contains:function(obj){return this.find(function(item){return item===obj})!==undefined},forEach:function(callback,target){if(typeof callback!="function")throw new TypeError;var len=get(this,"length"),last=null,context=popCtx();target===undefined&&(target=null);for(var idx=0;idx<len;idx++){var next=this.nextObject(idx,last,context);callback.call(target,next,idx,this),last=next}return last=null,context=pushCtx(context),this},getEach:function(key){return this.mapProperty(key)},setEach:function(key,value){return this.forEach(function(item){set(item,key,value)})},map:function(callback,target){var ret=[];return this.forEach(function(x,idx,i){ret[idx]=callback.call(target,x,idx,i)}),ret},mapProperty:function(key){return this.map(function(next){return get(next,key)})},filter:function(callback,target){var ret=[];return this.forEach(function(x,idx,i){callback.call(target,x,idx,i)&&ret.push(x)}),ret},filterProperty:function(key,value){return this.filter(iter.apply(this,arguments))},find:function(callback,target){var len=get(this,"length");target===undefined&&(target=null);var last=null,next,found=!1,ret,context=popCtx();for(var idx=0;idx<len&&!found;idx++){next=this.nextObject(idx,last,context);if(found=callback.call(target,next,idx,this))ret=next;last=next}return next=last=null,context=pushCtx(context),ret},findProperty:function(key,value){return this.find(iter.apply(this,arguments))},every:function(callback,target){return!this.find(function(x,idx,i){return!callback.call(target,x,idx,i)})},everyProperty:function(key,value){return this.every(iter.apply(this,arguments))},some:function(callback,target){return!!this.find(function(x,idx,i){return!!callback.call(target,x,idx,i)})},someProperty:function(key,value){return this.some(iter.apply(this,arguments))},reduce:function(callback,initialValue,reducerProperty){if(typeof callback!="function")throw new TypeError;var ret=initialValue;return this.forEach(function(item,i){ret=callback.call(null,ret,item,i,this,reducerProperty)},this),ret},invoke:function(methodName){var args,ret=[];return arguments.length>1&&(args=a_slice.call(arguments,1)),this.forEach(function(x,idx){var method=x&&x[methodName];"function"==typeof method&&(ret[idx]=args?method.apply(x,args):method.call(x))},this),ret},toArray:function(){var ret=[];return this.forEach(function(o,idx){ret[idx]=o}),ret},compact:function(){return this.without(null)},without:function(value){if(!this.contains(value))return this;var ret=[];return this.forEach(function(k){k!==value&&(ret[ret.length]=k)}),ret},uniq:function(){var ret=[];return this.forEach(function(k){a_indexOf(ret,k)<0&&ret.push(k)}),ret},"[]":Ember.computed(function(key,value){return this}).property().cacheable(),addEnumerableObserver:function(target,opts){var willChange=opts&&opts.willChange||"enumerableWillChange",didChange=opts&&opts.didChange||"enumerableDidChange",hasObservers=get(this,"hasEnumerableObservers");return hasObservers||Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.addListener(this,"@enumerable:before",target,willChange,xform),Ember.addListener(this,"@enumerable:change",target,didChange,xform),hasObservers||Ember.propertyDidChange(this,"hasEnumerableObservers"),this},removeEnumerableObserver:function(target,opts){var willChange=opts&&opts.willChange||"enumerableWillChange",didChange=opts&&opts.didChange||"enumerableDidChange",hasObservers=get(this,"hasEnumerableObservers");return hasObservers&&Ember.propertyWillChange(this,"hasEnumerableObservers"),Ember.removeListener(this,"@enumerable:before",target,willChange),Ember.removeListener(this,"@enumerable:change",target,didChange),hasObservers&&Ember.propertyDidChange(this,"hasEnumerableObservers"),this},hasEnumerableObservers:Ember.computed(function(){return Ember.hasListeners(this,"@enumerable:change")||Ember.hasListeners(this,"@enumerable:before")}).property().cacheable(),enumerableContentWillChange:function(removing,adding){var removeCnt,addCnt,hasDelta;return"number"==typeof removing?removeCnt=removing:removing?removeCnt=get(removing,"length"):removeCnt=removing=-1,"number"==typeof adding?addCnt=adding:adding?addCnt=get(adding,"length"):addCnt=adding=-1,hasDelta=addCnt<0||removeCnt<0||addCnt-removeCnt!==0,removing===-1&&(removing=null),adding===-1&&(adding=null),hasDelta&&Ember.propertyWillChange(this,"length"),Ember.sendEvent(this,"@enumerable:before",removing,adding),this},enumerableContentDidChange:function(removing,adding){var notify=this.propertyDidChange,removeCnt,addCnt,hasDelta;return"number"==typeof removing?removeCnt=removing:removing?removeCnt=get(removing,"length"):removeCnt=removing=-1,"number"==typeof adding?addCnt=adding:adding?addCnt=get(adding,"length"):addCnt=adding=-1,hasDelta=addCnt<0||removeCnt<0||addCnt-removeCnt!==0,removing===-1&&(removing=null),adding===-1&&(adding=null),Ember.sendEvent(this,"@enumerable:change",removing,adding),hasDelta&&Ember.propertyDidChange(this,"length"),this}})}(),function(){function none(obj){return obj===null||obj===undefined}function xform(target,method,params){method.call(target,params[0],params[2],params[3],params[4])}var get=Ember.get,set=Ember.set,meta=Ember.meta,map=Ember.ArrayUtils.map;Ember.Array=Ember.Mixin.create(Ember.Enumerable,{isSCArray:!0,length:Ember.required(),objectAt:function(idx){return idx<0||idx>=get(this,"length")?undefined:get(this,idx)},objectsAt:function(indexes){var self=this;return map(indexes,function(idx){return self.objectAt(idx)})},nextObject:function(idx){return this.objectAt(idx)},"[]":Ember.computed(function(key,value){return value!==undefined&&this.replace(0,get(this,"length"),value),this}).property().cacheable(),contains:function(obj){return this.indexOf(obj)>=0},slice:function(beginIndex,endIndex){var ret=[],length=get(this,"length");none(beginIndex)&&(beginIndex=0);if(none(endIndex)||endIndex>length)endIndex=length;while(beginIndex<endIndex)ret[ret.length]=this.objectAt(beginIndex++);return ret},indexOf:function(object,startAt){var idx,len=get(this,"length");startAt===undefined&&(startAt=0),startAt<0&&(startAt+=len);for(idx=startAt;idx<len;idx++)if(this.objectAt(idx,!0)===object)return idx;return-1},lastIndexOf:function(object,startAt){var idx,len=get(this,"length");if(startAt===undefined||startAt>=len)startAt=len-1;startAt<0&&(startAt+=len);for(idx=startAt;idx>=0;idx--)if(this.objectAt(idx)===object)return idx;return-1},addArrayObserver:function(target,opts){var willChange=opts&&opts.willChange||"arrayWillChange",didChange=opts&&opts.didChange||"arrayDidChange",hasObservers=get(this,"hasArrayObservers");return hasObservers||Ember.propertyWillChange(this,"hasArrayObservers"),Ember.addListener(this,"@array:before",target,willChange,xform),Ember.addListener(this,"@array:change",target,didChange,xform),hasObservers||Ember.propertyDidChange(this,"hasArrayObservers"),this},removeArrayObserver:function(target,opts){var willChange=opts&&opts.willChange||"arrayWillChange",didChange=opts&&opts.didChange||"arrayDidChange",hasObservers=get(this,"hasArrayObservers");return hasObservers&&Ember.propertyWillChange(this,"hasArrayObservers"),Ember.removeListener(this,"@array:before",target,willChange,xform),Ember.removeListener(this,"@array:change",target,didChange,xform),hasObservers&&Ember.propertyDidChange(this,"hasArrayObservers"),this},hasArrayObservers:Ember.computed(function(){return Ember.hasListeners(this,"@array:change")||Ember.hasListeners(this,"@array:before")}).property().cacheable(),arrayContentWillChange:function(startIdx,removeAmt,addAmt){startIdx===undefined?(startIdx=0,removeAmt=addAmt=-1):(removeAmt||(removeAmt=0),addAmt||(addAmt=0)),Ember.sendEvent(this,"@array:before",startIdx,removeAmt,addAmt);var removing,lim;if(startIdx>=0&&removeAmt>=0&&get(this,"hasEnumerableObservers")){removing=[],lim=startIdx+removeAmt;for(var idx=startIdx;idx<lim;idx++)removing.push(this.objectAt(idx))}else removing=removeAmt;return this.enumerableContentWillChange(removing,addAmt),Ember.isWatching(this,"@each")&&get(this,"@each"),this},arrayContentDidChange:function(startIdx,removeAmt,addAmt){startIdx===undefined?(startIdx=0,removeAmt=addAmt=-1):(removeAmt||(removeAmt=0),addAmt||(addAmt=0));var adding,lim;if(startIdx>=0&&addAmt>=0&&get(this,"hasEnumerableObservers")){adding=[],lim=startIdx+addAmt;for(var idx=startIdx;idx<lim;idx++)adding.push(this.objectAt(idx))}else adding=addAmt;return this.enumerableContentDidChange(removeAmt,adding),Ember.sendEvent(this,"@array:change",startIdx,removeAmt,addAmt),this},"@each":Ember.computed(function(){return this.__each||(this.__each=new Ember.EachProxy(this)),this.__each}).property().cacheable()})}(),function(){Ember.Comparable=Ember.Mixin.create({isComparable:!0,compare:Ember.required(Function)})}(),function(){var get=Ember.get,set=Ember.set;Ember.Copyable=Ember.Mixin.create({copy:Ember.required(Function),frozenCopy:function(){if(Ember.Freezable&&Ember.Freezable.detect(this))return get(this,"isFrozen")?this:this.copy().freeze();throw new Error(Ember.String.fmt("%@ does not support freezing",[this]))}})}(),function(){var get=Ember.get,set=Ember.set;Ember.Freezable=Ember.Mixin.create({isFrozen:!1,freeze:function(){return get(this,"isFrozen")?this:(set(this,"isFrozen",!0),this)}}),Ember.FROZEN_ERROR="Frozen object cannot be modified."}(),function(){var forEach=Ember.ArrayUtils.forEach;Ember.MutableEnumerable=Ember.Mixin.create(Ember.Enumerable,{addObject:Ember.required(Function),addObjects:function(objects){return Ember.beginPropertyChanges(this),forEach(objects,function(obj){this.addObject(obj)},this),Ember.endPropertyChanges(this),this},removeObject:Ember.required(Function),removeObjects:function(objects){return Ember.beginPropertyChanges(this),forEach(objects,function(obj){this.removeObject(obj)},this),Ember.endPropertyChanges(this),this}})}(),function(){var OUT_OF_RANGE_EXCEPTION="Index out of range",EMPTY=[],get=Ember.get,set=Ember.set,forEach=Ember.ArrayUtils.forEach;Ember.MutableArray=Ember.Mixin.create(Ember.Array,Ember.MutableEnumerable,{replace:Ember.required(),clear:function(){var len=get(this,"length");return len===0?this:(this.replace(0,len,EMPTY),this)},insertAt:function(idx,object){if(idx>get(this,"length"))throw new Error(OUT_OF_RANGE_EXCEPTION);return this.replace(idx,0,[object]),this},removeAt:function(start,len){var delta=0;if("number"==typeof start){if(start<0||start>=get(this,"length"))throw new Error(OUT_OF_RANGE_EXCEPTION);len===undefined&&(len=1),this.replace(start,len,EMPTY)}return this},pushObject:function(obj){return this.insertAt(get(this,"length"),obj),obj},pushObjects:function(objects){return this.replace(get(this,"length"),0,objects),this},popObject:function(){var len=get(this,"length");if(len===0)return null;var ret=this.objectAt(len-1);return this.removeAt(len-1,1),ret},shiftObject:function(){if(get(this,"length")===0)return null;var ret=this.objectAt(0);return this.removeAt(0),ret},unshiftObject:function(obj){return this.insertAt(0,obj),obj},unshiftObjects:function(objects){return this.beginPropertyChanges(),forEach(objects,function(obj){this.unshiftObject(obj)},this),this.endPropertyChanges(),this},removeObject:function(obj){var loc=get(this,"length")||0;while(--loc>=0){var curObject=this.objectAt(loc);curObject===obj&&this.removeAt(loc)}return this},addObject:function(obj){return this.contains(obj)||this.pushObject(obj),this}})}(),function(){var get=Ember.get,set=Ember.set;Ember.Observable=Ember.Mixin.create({isObserverable:!0,get:function(keyName){return get(this,keyName)},getProperties:function(){var ret={},propertyNames=arguments;arguments.length===1&&Ember.typeOf(arguments[0])==="array"&&(propertyNames=arguments[0]);for(var i=0;i<propertyNames.length;i++)ret[propertyNames[i]]=get(this,propertyNames[i]);return ret},set:function(keyName,value){return set(this,keyName,value),this},setProperties:function(hash){return Ember.setProperties(this,hash)},beginPropertyChanges:function(){return Ember.beginPropertyChanges(),this},endPropertyChanges:function(){return Ember.endPropertyChanges(),this},propertyWillChange:function(keyName){return Ember.propertyWillChange(this,keyName),this},propertyDidChange:function(keyName){return Ember.propertyDidChange(this,keyName),this},notifyPropertyChange:function(keyName){return this.propertyWillChange(keyName),this.propertyDidChange(keyName),this},addObserver:function(key,target,method){Ember.addObserver(this,key,target,method)},removeObserver:function(key,target,method){Ember.removeObserver(this,key,target,method)},hasObserverFor:function(key){return Ember.hasListeners(this,key+":change")},unknownProperty:function(key){return undefined},setUnknownProperty:function(key,value){this[key]=value},getPath:function(path){return Ember.getPath(this,path)},setPath:function(path,value){return Ember.setPath(this,path,value),this},getWithDefault:function(keyName,defaultValue){return Ember.getWithDefault(this,keyName,defaultValue)},incrementProperty:function(keyName,increment){return increment||(increment=1),set(this,keyName,(get(this,keyName)||0)+increment),get(this,keyName)},decrementProperty:function(keyName,increment){return increment||(increment=1),set(this,keyName,(get(this,keyName)||0)-increment),get(this,keyName)},toggleProperty:function(keyName){return set(this,keyName,!get(this,keyName)),get(this,keyName)},cacheFor:function(keyName){return Ember.cacheFor(this,keyName)},observersForKey:function(keyName){return Ember.observersFor(this,keyName)}})}(),function(){var get=Ember.get,set=Ember.set,getPath=Ember.getPath;Ember.TargetActionSupport=Ember.Mixin.create({target:null,action:null,targetObject:Ember.computed(function(){var target=get(this,"target");if(Ember.typeOf(target)==="string"){var value=getPath(this,target,!1);return value===undefined&&(value=getPath(window,target)),value}return target}).property("target").cacheable(),triggerAction:function(){var action=get(this,"action"),target=get(this,"targetObject");if(target&&action){var ret;return typeof target.send=="function"?ret=target.send(action,this):(typeof action=="string"&&(action=target[action]),ret=action.call(target,this)),ret!==!1&&(ret=!0),ret}return!1}})}(),function(){function xform(target,method,params){var args=a_slice.call(params,2);method.apply(target,args)}var get=Ember.get,set=Ember.set,a_slice=Array.prototype.slice;Ember.Evented=Ember.Mixin.create({on:function(name,target,method){method||(method=target,target=null),Ember.addListener(this,name,target,method,xform)},fire:function(name){Ember.sendEvent.apply(null,[this,name].concat(a_slice.call(arguments,1)))},off:function(name,target,method){Ember.removeListener(this,name,target,method)}})}(),function(){}(),function(){function makeCtor(){var wasApplied=!1,initMixins,init=!1,hasChains=!1,Class=function(){wasApplied||Class.proto(),initMixins?(this.reopen.apply(this,initMixins),initMixins=null,rewatch(this),this.init.apply(this,arguments)):(hasChains?rewatch(this):(Ember.GUID_DESC.value=undefined,o_defineProperty(this,Ember.GUID_KEY,Ember.GUID_DESC)),init===!1&&(init=this.init),Ember.GUID_DESC.value=undefined,o_defineProperty(this,"_super",Ember.GUID_DESC),init.apply(this,arguments))};return Class.toString=classToString,Class.willReopen=function(){wasApplied&&(Class.PrototypeMixin=Ember.Mixin.create(Class.PrototypeMixin)),wasApplied=!1},Class._initMixins=function(args){initMixins=args},Class.proto=function(){var superclass=Class.superclass;return superclass&&superclass.proto(),wasApplied||(wasApplied=!0,Class.PrototypeMixin.applyPartial(Class.prototype),Ember.rewatch(Class.prototype),hasChains=!!meta(Class.prototype,!1).chains),this.prototype},Class}var rewatch=Ember.rewatch,classToString=Ember.Mixin.prototype.toString,set=Ember.set,get=Ember.get,o_create=Ember.platform.create,o_defineProperty=Ember.platform.defineProperty,a_slice=Array.prototype.slice,meta=Ember.meta,CoreObject=makeCtor();CoreObject.PrototypeMixin=Ember.Mixin.create({reopen:function(){return Ember.Mixin._apply(this,arguments,!0),this},isInstance:!0,init:function(){},isDestroyed:!1,isDestroying:!1,destroy:function(){if(this.isDestroying)return;return this.isDestroying=!0,this.willDestroy&&this.willDestroy(),set(this,"isDestroyed",!0),Ember.run.schedule("destroy",this,this._scheduledDestroy),this},_scheduledDestroy:function(){Ember.destroy(this),this.didDestroy&&this.didDestroy()},bind:function(to,from){return from instanceof Ember.Binding||(from=Ember.Binding.from(from)),from.to(to).connect(this),from},toString:function(){return"<"+this.constructor.toString()+":"+Ember.guidFor(this)+">"}}),CoreObject.__super__=null;var ClassMixin=Ember.Mixin.create({ClassMixin:Ember.required(),PrototypeMixin:Ember.required(),isClass:!0,isMethod:!1,extend:function(){var Class=makeCtor(),proto;Class.ClassMixin=Ember.Mixin.create(this.ClassMixin),Class.PrototypeMixin=Ember.Mixin.create(this.PrototypeMixin),Class.ClassMixin.ownerConstructor=Class,Class.PrototypeMixin.ownerConstructor=Class;var PrototypeMixin=Class.PrototypeMixin;return PrototypeMixin.reopen.apply(PrototypeMixin,arguments),Class.superclass=this,Class.__super__=this.prototype,proto=Class.prototype=o_create(this.prototype),proto.constructor=Class,Ember.generateGuid(proto,"ember"),meta(proto).proto=proto,Class.subclasses=Ember.Set?new Ember.Set:null,this.subclasses&&this.subclasses.add(Class),Class.ClassMixin.apply(Class),Class},create:function(){var C=this;return arguments.length>0&&this._initMixins(arguments),new C},reopen:function(){this.willReopen();var PrototypeMixin=this.PrototypeMixin;return PrototypeMixin.reopen.apply(PrototypeMixin,arguments),this},reopenClass:function(){var ClassMixin=this.ClassMixin;return ClassMixin.reopen.apply(ClassMixin,arguments),Ember.Mixin._apply(this,arguments,!1),this},detect:function(obj){if("function"!=typeof obj)return!1;while(obj){if(obj===this)return!0;obj=obj.superclass}return!1},detectInstance:function(obj){return obj instanceof this},metaForProperty:function(key){var desc=meta(this.proto(),!1).descs[key];return ember_assert("metaForProperty() could not find a computed property with key '"+key+"'.",!!desc&&desc instanceof Ember.ComputedProperty),desc._meta||{}},eachComputedProperty:function(callback,binding){var proto=this.proto(),descs=meta(proto).descs,empty={},property;for(var name in descs)property=descs[name],property instanceof Ember.ComputedProperty&&callback.call(binding||this,name,property._meta||empty)}});CoreObject.ClassMixin=ClassMixin,ClassMixin.apply(CoreObject),Ember.CoreObject=CoreObject}(),function(){var get=Ember.get,set=Ember.set,guidFor=Ember.guidFor,none=Ember.none;Ember.Set=Ember.CoreObject.extend(Ember.MutableEnumerable,Ember.Copyable,Ember.Freezable,{length:0,clear:function(){if(this.isFrozen)throw new Error(Ember.FROZEN_ERROR);var len=get(this,"length"),guid;this.enumerableContentWillChange(len,0);for(var i=0;i<len;i++)guid=guidFor(this[i]),delete this[guid],delete this[i];return set(this,"length",0),this.enumerableContentDidChange(len,0),this},isEqual:function(obj){if(!Ember.Enumerable.detect(obj))return!1;var loc=get(this,"length");if(get(obj,"length")!==loc)return!1;while(--loc>=0)if(!obj.contains(this[loc]))return!1;return!0},add:Ember.alias("addObject"),remove:Ember.alias("removeObject"),pop:function(){if(get(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);var obj=this.length>0?this[this.length-1]:null;return this.remove(obj),obj},push:Ember.alias("addObject"),shift:Ember.alias("pop"),unshift:Ember.alias("push"),addEach:Ember.alias("addObjects"),removeEach:Ember.alias("removeObjects"),init:function(items){this._super(),items&&this.addObjects(items)},nextObject:function(idx){return this[idx]},firstObject:Ember.computed(function(){return this.length>0?this[0]:undefined}).property("[]").cacheable(),lastObject:Ember.computed(function(){return this.length>0?this[this.length-1]:undefined}).property("[]").cacheable(),addObject:function(obj){if(get(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);if(none(obj))return this;var guid=guidFor(obj),idx=this[guid],len=get(this,"length"),added;return idx>=0&&idx<len&&this[idx]===obj?this:(added=[obj],this.enumerableContentWillChange(null,added),len=get(this,"length"),this[guid]=len,this[len]=obj,set(this,"length",len+1),this.enumerableContentDidChange(null,added),this)},removeObject:function(obj){if(get(this,"isFrozen"))throw new Error(Ember.FROZEN_ERROR);if(none(obj))return this;var guid=guidFor(obj),idx=this[guid],len=get(this,"length"),last,removed;return idx>=0&&idx<len&&this[idx]===obj&&(removed=[obj],this.enumerableContentWillChange(removed,null),idx<len-1&&(last=this[len-1],this[idx]=last,this[guidFor(last)]=idx),delete this[guid],delete this[len-1],set(this,"length",len-1),this.enumerableContentDidChange(removed,null)),this},contains:function(obj){return this[guidFor(obj)]>=0},copy:function(){var C=this.constructor,ret=new C,loc=get(this,"length");set(ret,"length",loc);while(--loc>=0)ret[loc]=this[loc],ret[guidFor(this[loc])]=loc;return ret},toString:function(){var len=this.length,idx,array=[];for(idx=0;idx<len;idx++)array[idx]=this[idx];return"Ember.Set<%@>".fmt(array.join(","))},isSet:!0});var o_create=Ember.Set.create;Ember.Set.create=function(items){return items&&Ember.Enumerable.detect(items)?(ember_deprecate("Passing an enumerable to Ember.Set.create() is deprecated and will be removed in a future version of Ember.  Use new Ember.Set(items) instead."),new Ember.Set(items)):o_create.apply(this,arguments)}}(),function(){Ember.CoreObject.subclasses=new Ember.Set,Ember.Object=Ember.CoreObject.extend(Ember.Observable)}(),function(){var indexOf=Ember.ArrayUtils.indexOf;Ember.Namespace=Ember.Object.extend({isNamespace:!0,init:function(){Ember.Namespace.NAMESPACES.push(this),Ember.Namespace.PROCESSED=!1},toString:function(){return Ember.identifyNamespaces(),this[Ember.GUID_KEY+"_name"]},destroy:function(){var namespaces=Ember.Namespace.NAMESPACES;window[this.toString()]=undefined,namespaces.splice(indexOf(namespaces,this),1),this._super()}}),Ember.Namespace.NAMESPACES=[Ember],Ember.Namespace.PROCESSED=!1}(),function(){Ember.Application=Ember.Namespace.extend()}(),function(){var get=Ember.get,set=Ember.set;Ember.ArrayProxy=Ember.Object.extend(Ember.MutableArray,{content:null,objectAtContent:function(idx){return get(this,"content").objectAt(idx)},replaceContent:function(idx,amt,objects){get(this,"content").replace(idx,amt,objects)},contentWillChange:Ember.beforeObserver(function(){var content=get(this,"content"),len=content?get(content,"length"):0;this.arrayWillChange(content,0,len,undefined),content&&content.removeArrayObserver(this)},"content"),contentDidChange:Ember.observer(function(){var content=get(this,"content"),len=content?get(content,"length"):0;content&&content.addArrayObserver(this),this.arrayDidChange(content,0,undefined,len)},"content"),objectAt:function(idx){return get(this,"content")&&this.objectAtContent(idx)},length:Ember.computed(function(){var content=get(this,"content");return content?get(content,"length"):0}).property("content.length").cacheable(),replace:function(idx,amt,objects){return get(this,"content")&&this.replaceContent(idx,amt,objects),this},arrayWillChange:function(item,idx,removedCnt,addedCnt){this.arrayContentWillChange(idx,removedCnt,addedCnt)},arrayDidChange:function(item,idx,removedCnt,addedCnt){this.arrayContentDidChange(idx,removedCnt,addedCnt)},init:function(){this._super(),this.contentDidChange()}})}(),function(){function addObserverForContentKey(content,keyName,proxy,idx,loc){var objects=proxy._objects,guid;objects||(objects=proxy._objects={});while(--loc>=idx){var item=content.objectAt(loc);item&&(Ember.addBeforeObserver(item,keyName,proxy,"contentKeyWillChange"),Ember.addObserver(item,keyName,proxy,"contentKeyDidChange"),guid=guidFor(item),objects[guid]||(objects[guid]=[]),objects[guid].push(loc))}}function removeObserverForContentKey(content,keyName,proxy,idx,loc){var objects=proxy._objects;objects||(objects=proxy._objects={});var indicies,guid;while(--loc>=idx){var item=content.objectAt(loc);item&&(Ember.removeBeforeObserver(item,keyName,proxy,"contentKeyWillChange"),Ember.removeObserver(item,keyName,proxy,"contentKeyDidChange"),guid=guidFor(item),indicies=objects[guid],indicies[indicies.indexOf(loc)]=null)}}var set=Ember.set,get=Ember.get,guidFor=Ember.guidFor,forEach=Ember.ArrayUtils.forEach,EachArray=Ember.Object.extend(Ember.Array,{init:function(content,keyName,owner){this._super(),this._keyName=keyName,this._owner=owner,this._content=content},objectAt:function(idx){var item=this._content.objectAt(idx);return item&&get(item,this._keyName)},length:Ember.computed(function(){var content=this._content;return content?get(content,"length"):0}).property("[]").cacheable()}),IS_OBSERVER=/^.+:(before|change)$/;Ember.EachProxy=Ember.Object.extend({init:function(content){this._super(),this._content=content,content.addArrayObserver(this),forEach(Ember.watchedEvents(this),function(eventName){this.didAddListener(eventName)},this)},unknownProperty:function(keyName,value){var ret;return ret=new EachArray(this._content,keyName,this),(new Ember.Descriptor).setup(this,keyName,ret),this.beginObservingContentKey(keyName),ret},arrayWillChange:function(content,idx,removedCnt,addedCnt){var keys=this._keys,key,array,lim;lim=removedCnt>0?idx+removedCnt:-1,Ember.beginPropertyChanges(this);for(key in keys){if(!keys.hasOwnProperty(key))continue;lim>0&&removeObserverForContentKey(content,key,this,idx,lim),Ember.propertyWillChange(this,key)}Ember.propertyWillChange(this._content,"@each"),Ember.endPropertyChanges(this)},arrayDidChange:function(content,idx,removedCnt,addedCnt){var keys=this._keys,key,array,lim;lim=addedCnt>0?idx+addedCnt:-1,Ember.beginPropertyChanges(this);for(key in keys){if(!keys.hasOwnProperty(key))continue;lim>0&&addObserverForContentKey(content,key,this,idx,lim),Ember.propertyDidChange(this,key)}Ember.propertyDidChange(this._content,"@each"),Ember.endPropertyChanges(this)},didAddListener:function(eventName){IS_OBSERVER.test(eventName)&&this.beginObservingContentKey(eventName.slice(0,-7))},didRemoveListener:function(eventName){IS_OBSERVER.test(eventName)&&this.stopObservingContentKey(eventName.slice(0,-7))},beginObservingContentKey:function(keyName){var keys=this._keys;keys||(keys=this._keys={});if(!keys[keyName]){keys[keyName]=1;var content=this._content,len=get(content,"length");addObserverForContentKey(content,keyName,this,0,len)}else keys[keyName]++},stopObservingContentKey:function(keyName){var keys=this._keys;if(keys&&keys[keyName]>0&&--keys[keyName]<=0){var content=this._content,len=get(content,"length");removeObserverForContentKey(content,keyName,this,0,len)}},contentKeyWillChange:function(obj,keyName){Ember.propertyWillChange(this,keyName)},contentKeyDidChange:function(obj,keyName){Ember.propertyDidChange(this,keyName)}})}(),function(){var get=Ember.get,set=Ember.set,NativeArray=Ember.Mixin.create(Ember.MutableArray,Ember.Observable,Ember.Copyable,{get:function(key){return key==="length"?this.length:"number"==typeof key?this[key]:this._super(key)},objectAt:function(idx){return this[idx]},replace:function(idx,amt,objects){if(this.isFrozen)throw Ember.FROZEN_ERROR;var len=objects?get(objects,"length"):0;this.arrayContentWillChange(idx,amt,len);if(!objects||objects.length===0)this.splice(idx,amt);else{var args=[idx,amt].concat(objects);this.splice.apply(this,args)}return this.arrayContentDidChange(idx,amt,len),this},unknownProperty:function(key,value){var ret;return value!==undefined&&ret===undefined&&(ret=this[key]=value),ret},indexOf:function(object,startAt){var idx,len=this.length;startAt===undefined?startAt=0:startAt=startAt<0?Math.ceil(startAt):Math.floor(startAt),startAt<0&&(startAt+=len);for(idx=startAt;idx<len;idx++)if(this[idx]===object)return idx;return-1},lastIndexOf:function(object,startAt){var idx,len=this.length;startAt===undefined?startAt=len-1:startAt=startAt<0?Math.ceil(startAt):Math.floor(startAt),startAt<0&&(startAt+=len);for(idx=startAt;idx>=0;idx--)if(this[idx]===object)return idx;return-1},copy:function(){return this.slice()}}),ignore=["length"];Ember.ArrayUtils.forEach(NativeArray.keys(),function(methodName){Array.prototype[methodName]&&ignore.push(methodName)}),ignore.length>0&&(NativeArray=NativeArray.without.apply(NativeArray,ignore)),Ember.NativeArray=NativeArray,Ember.A=function(arr){return arr===undefined&&(arr=[]),Ember.NativeArray.apply(arr)},Ember.NativeArray.activate=function(){NativeArray.apply(Array.prototype),Ember.A=function(arr){return arr||[]}},Ember.EXTEND_PROTOTYPES&&Ember.NativeArray.activate()}(),function(){var guidFor=Ember.guidFor,indexOf=Ember.ArrayUtils.indexOf,OrderedSet=Ember.OrderedSet=function(){this.clear()};OrderedSet.create=function(){return new OrderedSet},OrderedSet.prototype={clear:function(){this.presenceSet={},this.list=[]},add:function(obj){var guid=guidFor(obj),presenceSet=this.presenceSet,list=this.list;if(guid in presenceSet)return;presenceSet[guid]=!0,list.push(obj)},remove:function(obj){var guid=guidFor(obj),presenceSet=this.presenceSet,list=this.list;delete presenceSet[guid];var index=indexOf(list,obj);index>-1&&list.splice(index,1)},isEmpty:function(){return this.list.length===0},forEach:function(fn,self){var list=this.list.slice();for(var i=0,j=list.length;i<j;i++)fn.call(self,list[i])},toArray:function(){return this.list.slice()}};var Map=Ember.Map=function(){this.keys=Ember.OrderedSet.create(),this.values={}};Map.create=function(){return new Map},Map.prototype={get:function(key){var values=this.values,guid=guidFor(key);return values[guid]},set:function(key,value){var keys=this.keys,values=this.values,guid=guidFor(key);keys.add(key),values[guid]=value},remove:function(key){var keys=this.keys,values=this.values,guid=guidFor(key),value;return values.hasOwnProperty(guid)?(keys.remove(key),value=values[guid],delete values[guid],!0):!1},has:function(key){var values=this.values,guid=guidFor(key);return values.hasOwnProperty(guid)},forEach:function(callback,self){var keys=this.keys,values=this.values;keys.forEach(function(key){var guid=guidFor(key);callback.call(self,key,values[guid])})}}}(),function(){}(),function(){Ember.ArrayController=Ember.ArrayProxy.extend()}(),function(){}(),function(){}(),function(){ember_assert("Ember requires jQuery 1.6 or 1.7",window.jQuery&&window.jQuery().jquery.match(/^1\.[67](\.\d+)?(pre|rc\d?)?/)),Ember.$=window.jQuery}(),function(){var get=Ember.get,set=Ember.set,forEach=Ember.ArrayUtils.forEach,indexOf=Ember.ArrayUtils.indexOf,ClassSet=function(){this.seen={},this.list=[]};ClassSet.prototype={add:function(string){if(string in this.seen)return;this.seen[string]=!0,this.list.push(string)},toDOM:function(){return this.list.join(" ")}},Ember.RenderBuffer=function(tagName){return new Ember._RenderBuffer(tagName)},Ember._RenderBuffer=function(tagName){this.elementTag=tagName,this.childBuffers=[]},Ember._RenderBuffer.prototype={elementClasses:null,elementId:null,elementAttributes:null,elementTag:null,elementStyle:null,parentBuffer:null,push:function(string){return this.childBuffers.push(String(string)),this},addClass:function(className){var elementClasses=this.elementClasses=this.elementClasses||new ClassSet;return this.elementClasses.add(className),this},id:function(id){return this.elementId=id,this},attr:function(name,value){var attributes=this.elementAttributes=this.elementAttributes||{};return arguments.length===1?attributes[name]:(attributes[name]=value,this)},removeAttr:function(name){var attributes=this.elementAttributes;return attributes&&delete attributes[name],this},style:function(name,value){var style=this.elementStyle=this.elementStyle||{};return this.elementStyle[name]=value,this},newBuffer:function(tagName,parent,fn,other){var buffer=new Ember._RenderBuffer(tagName);return buffer.parentBuffer=parent,other&&buffer.setProperties(other),fn&&fn.call(this,buffer),buffer},replaceWithBuffer:function(newBuffer){var parent=this.parentBuffer;if(!parent)return;var childBuffers=parent.childBuffers,index=indexOf(childBuffers,this);newBuffer?childBuffers.splice(index,1,newBuffer):childBuffers.splice(index,1)},begin:function(tagName){return this.newBuffer(tagName,this,function(buffer){this.childBuffers.push(buffer)})},prepend:function(tagName){return this.newBuffer(tagName,this,function(buffer){this.childBuffers.splice(0,0,buffer)})},replaceWith:function(tagName){var parentBuffer=this.parentBuffer;return this.newBuffer(tagName,parentBuffer,function(buffer){this.replaceWithBuffer(buffer)})},insertAfter:function(tagName){var parentBuffer=get(this,"parentBuffer");return this.newBuffer(tagName,parentBuffer,function(buffer){var siblings=parentBuffer.childBuffers,index=indexOf(siblings,this);siblings.splice(index+1,0,buffer)})},end:function(){var parent=this.parentBuffer;return parent||this},remove:function(){this.replaceWithBuffer(null)},element:function(){return Ember.$(this.string())[0]},string:function(){var content="",tag=this.elementTag,openTag;if(tag){var id=this.elementId,classes=this.elementClasses,attrs=this.elementAttributes,style=this.elementStyle,styleBuffer="",prop;openTag=["<"+tag],id&&openTag.push('id="'+this._escapeAttribute(id)+'"'),classes&&openTag.push('class="'+this._escapeAttribute(classes.toDOM())+'"');if(style){for(prop in style)style.hasOwnProperty(prop)&&(styleBuffer+=prop+":"+this._escapeAttribute(style[prop])+";");openTag.push('style="'+styleBuffer+'"')}if(attrs)for(prop in attrs)attrs.hasOwnProperty(prop)&&openTag.push(prop+'="'+this._escapeAttribute(attrs[prop])+'"');openTag=openTag.join(" ")+">"}var childBuffers=this.childBuffers;return forEach(childBuffers,function(buffer){var stringy=typeof buffer=="string";content+=stringy?buffer:buffer.string()}),tag?openTag+content+"</"+tag+">":content},_escapeAttribute:function(value){return value.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#x27;").replace(/"/g,"&quot;")}}}(),function(){var get=Ember.get,set=Ember.set,fmt=Ember.String.fmt;Ember.EventDispatcher=Ember.Object.extend({rootElement:"body",setup:function(addedEvents){var event,events={touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchcancel:"touchCancel",keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",mousedown:"mouseDown",mouseup:"mouseUp",contextmenu:"contextMenu",click:"click",dblclick:"doubleClick",mousemove:"mouseMove",focusin:"focusIn",focusout:"focusOut",mouseenter:"mouseEnter",mouseleave:"mouseLeave",submit:"submit",change:"change",dragstart:"dragStart",drag:"drag",dragenter:"dragEnter",dragleave:"dragLeave",dragover:"dragOver",drop:"drop",dragend:"dragEnd"};Ember.$.extend(events,addedEvents||{});var rootElement=Ember.$(get(this,"rootElement"));ember_assert(fmt("You cannot use the same root element (%@) multiple times in an Ember.Application",[rootElement.selector||rootElement[0].tagName]),!rootElement.is(".ember-application")),ember_assert("You cannot make a new Ember.Application using a root element that is a descendent of an existing Ember.Application",!rootElement.closest(".ember-application").length),ember_assert("You cannot make a new Ember.Application using a root element that is an ancestor of an existing Ember.Application",!rootElement.find(".ember-application").length),rootElement.addClass("ember-application"),ember_assert('Unable to add "ember-application" class to rootElement. Make sure you set rootElement to the body or an element in the body.',rootElement.is(".ember-application"));for(event in events)events.hasOwnProperty(event)&&this.setupHandler(rootElement,event,events[event])},setupHandler:function(rootElement,event,eventName){var self=this;rootElement.delegate(".ember-view",event+".ember",function(evt,triggeringManager){var view=Ember.View.views[this.id],result=!0,manager=null;return manager=self._findNearestEventManager(view,eventName),manager&&manager!==triggeringManager?result=self._dispatchEvent(manager,evt,eventName,view):view?result=self._bubbleEvent(view,evt,eventName):evt.stopPropagation(),result}),rootElement.delegate("[data-ember-action]",event+".ember",function(evt){var actionId=Ember.$(evt.currentTarget).attr("data-ember-action"),action=Ember.Handlebars.ActionHelper.registeredActions[actionId],handler=action.handler;if(action.eventName===eventName)return handler(evt)})},_findNearestEventManager:function(view,eventName){var manager=null;while(view){manager=get(view,"eventManager");if(manager&&manager[eventName])break;view=get(view,"parentView")}return manager},_dispatchEvent:function(object,evt,eventName,view){var result=!0,handler=object[eventName];return Ember.typeOf(handler)==="function"?(result=handler.call(object,evt,view),evt.stopPropagation()):result=this._bubbleEvent(view,evt,eventName),result},_bubbleEvent:function(view,evt,eventName){return Ember.run(function(){return view.handleEvent(eventName,evt)})},destroy:function(){var rootElement=get(this,"rootElement");return Ember.$(rootElement).undelegate(".ember").removeClass("ember-application"),this._super()}})}(),function(){var get=Ember.get,set=Ember.set;Ember.Application=Ember.Namespace.extend({rootElement:"body",eventDispatcher:null,customEvents:null,init:function(){var eventDispatcher,rootElement=get(this,"rootElement");this._super(),eventDispatcher=Ember.EventDispatcher.create({rootElement:rootElement}),set(this,"eventDispatcher",eventDispatcher);if(Ember.$.isReady)this.didBecomeReady();else{var self=this;Ember.$(document).ready(function(){self.didBecomeReady()})}},didBecomeReady:function(){var eventDispatcher=get(this,"eventDispatcher"),customEvents=get(this,"customEvents");eventDispatcher.setup(customEvents),this.ready()},ready:Ember.K,destroy:function(){return get(this,"eventDispatcher").destroy(),this._super()}})}(),function(){var queues=Ember.run.queues;queues.splice(Ember.$.inArray("actions",queues)+1,0,"render")}(),function(){}(),function(){var get=Ember.get,set=Ember.set,addObserver=Ember.addObserver,getPath=Ember.getPath,meta=Ember.meta,fmt=Ember.String.fmt,a_slice=Array.prototype.slice,a_forEach=Ember.ArrayUtils.forEach,childViewsProperty=Ember.computed(function(){var childViews=get(this,"_childViews"),ret=Ember.A();return a_forEach(childViews,function(view){view.isVirtual?ret.pushObjects(get(view,"childViews")):ret.push(view)}),ret}).property().cacheable();Ember.TEMPLATES={};var invokeForState={preRender:{},inBuffer:{},hasElement:{},inDOM:{},destroyed:{}};Ember.View=Ember.Object.extend(Ember.Evented,{concatenatedProperties:["classNames","classNameBindings","attributeBindings"],isView:!0,templateName:null,layoutName:null,templates:Ember.TEMPLATES,template:Ember.computed(function(key,value){if(value!==undefined)return value;var templateName=get(this,"templateName"),template=this.templateForName(templateName,"template");return template||get(this,"defaultTemplate")}).property("templateName").cacheable(),controller:null,layout:Ember.computed(function(key,value){if(arguments.length===2)return value;var layoutName=get(this,"layoutName"),layout=this.templateForName(layoutName,"layout");return layout||get(this,"defaultLayout")}).property("layoutName").cacheable(),templateForName:function(name,type){if(!name)return;var templates=get(this,"templates"),template=get(templates,name);if(!template)throw new Ember.Error(fmt('%@ - Unable to find %@ "%@".',[this,type,name]));return template},templateContext:Ember.computed(function(key,value){return arguments.length===2?(set(this,"_templateContext",value),value):get(this,"_templateContext")}).cacheable(),_templateContext:Ember.computed(function(key,value){return arguments.length===2?value:this}).cacheable(),_displayPropertyDidChange:Ember.observer(function(){this.rerender()},"templateContext","controller"),_parentView:null,parentView:Ember.computed(function(){var parent=get(this,"_parentView");return parent&&parent.isVirtual?get(parent,"parentView"):parent}).property("_parentView"),concreteView:Ember.computed(function(){return this.isVirtual?get(this,"parentView"):this}).property("_parentView"),isVisible:!0,childViews:childViewsProperty,_childViews:[],nearestInstanceOf:function(klass){var view=get(this,"parentView");while(view){if(view instanceof klass)return view;view=get(view,"parentView")}},nearestWithProperty:function(property){var view=get(this,"parentView");while(view){if(property in view)return view;view=get(view,"parentView")}},nearestChildOf:function(klass){var view=get(this,"parentView");while(view){if(get(view,"parentView")instanceof klass)return view;view=get(view,"parentView")}},collectionView:Ember.computed(function(){return this.nearestInstanceOf(Ember.CollectionView)}).cacheable(),itemView:Ember.computed(function(){return this.nearestChildOf(Ember.CollectionView)}).cacheable(),contentView:Ember.computed(function(){return this.nearestWithProperty("content")}).cacheable(),_parentViewDidChange:Ember.observer(function(){if(this.isDestroying)return;this.invokeRecursively(function(view){view.propertyDidChange("collectionView"),view.propertyDidChange("itemView"),view.propertyDidChange("contentView")})},"_parentView"),render:function(buffer){var template=get(this,"layout")||get(this,"template");if(template){var context=get(this,"_templateContext"),templateData=this.get("templateData"),controller=this.get("controller"),data={view:this,buffer:buffer,isRenderData:!0,keywords:{view:get(this,"concreteView")}};data.keywords.controller=controller||templateData&&templateData.keywords.controller;var output=template(context,{data:data});output!==undefined&&buffer.push(output)}},invokeForState:function(name){var stateName=this.state,args;if(fn=invokeForState[stateName][name])return args=a_slice.call(arguments),args[0]=this,fn.apply(this,args);var parent=this,states=parent.states,state;while(states){state=states[stateName];while(state){var fn=state[name];if(fn)return invokeForState[stateName][name]=fn,args=a_slice.call(arguments,1),args.unshift(this),fn.apply(this,args);state=state.parentState}states=states.parent}},rerender:function(){return this.invokeForState("rerender")},clearRenderedChildren:function(){var lengthBefore=this.lengthBeforeRender,lengthAfter=this.lengthAfterRender,childViews=get(this,"_childViews");for(var i=lengthAfter-1;i>=lengthBefore;i--)childViews[i]&&childViews[i].destroy()},_applyClassNameBindings:function(){var classBindings=get(this,"classNameBindings"),classNames=get(this,"classNames"),elem,newClass,dasherizedClass;if(!classBindings)return;a_forEach(classBindings,function(binding){var oldClass,property,observer=function(){newClass=this._classStringForProperty(binding),elem=this.$(),oldClass&&(elem.removeClass(oldClass),classNames.removeObject(oldClass)),newClass?(elem.addClass(newClass),oldClass=newClass):oldClass=null};dasherizedClass=this._classStringForProperty(binding),dasherizedClass&&(classNames.push(dasherizedClass),oldClass=dasherizedClass),property=binding.split(":")[0],addObserver(this,property,observer)},this)},_applyAttributeBindings:function(buffer){var attributeBindings=get(this,"attributeBindings"),attributeValue,elem,type;if(!attributeBindings)return;a_forEach(attributeBindings,function(binding){var split=binding.split(":"),property=split[0],attributeName=split[1]||property,observer=function(){elem=this.$(),attributeValue=get(this,property),Ember.View.applyAttributeBindings(elem,attributeName,attributeValue)};addObserver(this,property,observer),attributeValue=get(this,property),Ember.View.applyAttributeBindings(buffer,attributeName,attributeValue)},this)},_classStringForProperty:function(property){var split=property.split(":"),className=split[1];property=split[0];var val=Ember.getPath(this,property,!1);val===undefined&&Ember.isGlobalPath(property)&&(val=Ember.getPath(window,property));if(val===!0){if(className)return className;var parts=property.split(".");return Ember.String.dasherize(parts[parts.length-1])}return val!==!1&&val!==undefined&&val!==null?val:null},element:Ember.computed(function(key,value){return value!==undefined?this.invokeForState("setElement",value):this.invokeForState("getElement")}).property("_parentView").cacheable(),$:function(sel){return this.invokeForState("$",sel)},mutateChildViews:function(callback){var childViews=get(this,"_childViews"),idx=get(childViews,"length"),view;while(--idx>=0)view=childViews[idx],callback.call(this,view,idx);return this},forEachChildView:function(callback){var childViews=get(this,"_childViews");if(!childViews)return this;var len=get(childViews,"length"),view,idx;for(idx=0;idx<len;idx++)view=childViews[idx],callback.call(this,view);return this},appendTo:function(target){return this._insertElementLater(function(){this.$().appendTo(target)}),this},replaceIn:function(target){return this._insertElementLater(function(){Ember.$(target).empty(),this.$().appendTo(target)}),this},_insertElementLater:function(fn){Ember.run.schedule("render",this,this.invokeForState,"insertElement",fn)},append:function(){return this.appendTo(document.body)},remove:function(){this.destroyElement(),this.invokeRecursively(function(view){view.clearRenderedChildren()})},elementId:Ember.computed(function(key,value){return value!==undefined?value:Ember.guidFor(this)}).cacheable(),_elementIdDidChange:Ember.beforeObserver(function(){throw"Changing a view's elementId after creation is not allowed."},"elementId"),findElementInParentElement:function(parentElem){var id="#"+get(this,"elementId");return Ember.$(id)[0]||Ember.$(id,parentElem)[0]},renderBuffer:function(tagName){tagName=tagName||get(this,"tagName");if(tagName===null||tagName===undefined)tagName="div";return Ember.RenderBuffer(tagName)},createElement:function(){if(get(this,"element"))return this;var buffer=this.renderToBuffer();return set(this,"element",buffer.element()),this},willInsertElement:Ember.K,didInsertElement:Ember.K,willRerender:Ember.K,invokeRecursively:function(fn){fn.call(this,this),this.forEachChildView(function(view){view.invokeRecursively(fn)})},invalidateRecursively:function(key){this.forEachChildView(function(view){view.propertyDidChange(key)})},_notifyWillInsertElement:function(fromPreRender){this.invokeRecursively(function(view){fromPreRender&&(view._willInsertElementAccessUnsupported=!0),view.fire("willInsertElement"),view._willInsertElementAccessUnsupported=!1})},_notifyDidInsertElement:function(){this.invokeRecursively(function(view){view.fire("didInsertElement")})},_notifyWillRerender:function(){this.invokeRecursively(function(view){view.fire("willRerender")})},destroyElement:function(){return this.invokeForState("destroyElement")},willDestroyElement:function(){},_notifyWillDestroyElement:function(){this.invokeRecursively(function(view){view.fire("willDestroyElement")})},_elementWillChange:Ember.beforeObserver(function(){this.forEachChildView(function(view){Ember.propertyWillChange(view,"element")})},"element"),_elementDidChange:Ember.observer(function(){this.forEachChildView(function(view){Ember.propertyDidChange(view,"element")})},"element"),parentViewDidChange:Ember.K,renderToBuffer:function(parentBuffer,bufferOperation){var buffer;Ember.run.sync(),bufferOperation=bufferOperation||"begin";if(parentBuffer){var tagName=get(this,"tagName");if(tagName===null||tagName===undefined)tagName="div";buffer=parentBuffer[bufferOperation](tagName)}else buffer=this.renderBuffer();return this.buffer=buffer,this.transitionTo("inBuffer",!1),this.lengthBeforeRender=get(get(this,"_childViews"),"length"),this.beforeRender(buffer),this.render(buffer),this.afterRender(buffer),this.lengthAfterRender=get(get(this,"_childViews"),"length"),buffer},beforeRender:function(buffer){this.applyAttributesToBuffer(buffer)},afterRender:Ember.K,applyAttributesToBuffer:function(buffer){this._applyClassNameBindings(),this._applyAttributeBindings(buffer),a_forEach(get(this,"classNames"),function(name){buffer.addClass(name)}),buffer.id(get(this,"elementId"));var role=get(this,"ariaRole");role&&buffer.attr("role",role),get(this,"isVisible")===!1&&buffer.style("display","none")},tagName:null,ariaRole:null,classNames:["ember-view"],classNameBindings:[],attributeBindings:[],state:"preRender",init:function(){this._super(),Ember.View.views[get(this,"elementId")]=this;var childViews=get(this,"_childViews").slice();set(this,"_childViews",childViews),ember_assert("Only arrays are allowed for 'classNameBindings'",Ember.typeOf(this.classNameBindings)==="array"),this.classNameBindings=Ember.A(this.classNameBindings.slice()),ember_assert("Only arrays are allowed for 'classNames'",Ember.typeOf(this.classNames)==="array"),this.classNames=Ember.A(this.classNames.slice());var viewController=get(this,"viewController");viewController&&(viewController=Ember.getPath(viewController),viewController&&set(viewController,"view",this))},appendChild:function(view,options){return this.invokeForState("appendChild",view,options)},removeChild:function(view){if(this.isDestroying)return;set(view,"_parentView",null);var childViews=get(this,"_childViews");return Ember.ArrayUtils.removeObject(childViews,view),this.propertyDidChange("childViews"),this},removeAllChildren:function(){return this.mutateChildViews(function(view){this.removeChild(view)})},destroyAllChildren:function(){return this.mutateChildViews(function(view){view.destroy()})},removeFromParent:function(){var parent=get(this,"_parentView");return this.remove(),parent&&parent.removeChild(this),this},willDestroy:function(){var childViews=get(this,"_childViews"),parent=get(this,"_parentView"),elementId=get(this,"elementId"),childLen;this.removedFromDOM||this.destroyElement();if(this.viewName){var nonVirtualParentView=get(this,"parentView");nonVirtualParentView&&set(nonVirtualParentView,this.viewName,null)}parent&&parent.removeChild(this),this.state="destroyed",childLen=get(childViews,"length");for(var i=childLen-1;i>=0;i--)childViews[i].removedFromDOM=!0,childViews[i].destroy();delete Ember.View.views[get(this,"elementId")]},createChildView:function(view,attrs){var coreAttrs;if(Ember.View.detect(view)){coreAttrs={_parentView:this},attrs?view=view.create(coreAttrs,attrs):view=view.create(coreAttrs);var viewName=view.viewName;viewName&&set(get(this,"concreteView"),viewName,view)}else ember_assert("must pass instance of View",view instanceof Ember.View),set(view,"_parentView",this);return view},becameVisible:Ember.K,becameHidden:Ember.K,_isVisibleDidChange:Ember.observer(function(){var isVisible=get(this,"isVisible");this.$().toggle(isVisible);if(this._isAncestorHidden())return;isVisible?this._notifyBecameVisible():this._notifyBecameHidden()},"isVisible"),_notifyBecameVisible:function(){this.fire("becameVisible"),this.forEachChildView(function(view){var isVisible=get(view,"isVisible");(isVisible||isVisible===null)&&view._notifyBecameVisible()})},_notifyBecameHidden:function(){this.fire("becameHidden"),this.forEachChildView(function(view){var isVisible=get(view,"isVisible");(isVisible||isVisible===null)&&view._notifyBecameHidden()})},_isAncestorHidden:function(){var parent=get(this,"parentView");while(parent){if(get(parent,"isVisible")===!1)return!0;parent=get(parent,"parentView")}return!1},clearBuffer:function(){this.invokeRecursively(function(view){this.buffer=null})},transitionTo:function(state,children){this.state=state,children!==!1&&this.forEachChildView(function(view){view.transitionTo(state)})},fire:function(name){this[name]&&this[name].apply(this,[].slice.call(arguments,1)),this._super.apply(this,arguments)},handleEvent:function(eventName,evt){return this.invokeForState("handleEvent",eventName,evt)}});var DOMManager={prepend:function(view,childView){childView._insertElementLater(function(){var element=view.$();element.prepend(childView.$())})},after:function(view,nextView){nextView._insertElementLater(function(){var element=view.$();element.after(nextView.$())})},replace:function(view){var element=get(view,"element");set(view,"element",null),view._insertElementLater(function(){Ember.$(element).replaceWith(get(view,"element"))})},remove:function(view){var elem=get(view,"element");set(view,"element",null),Ember.$(elem).remove()},empty:function(view){view.$().empty()}};Ember.View.reopen({states:Ember.View.states,domManager:DOMManager}),Ember.View.views={},Ember.View.childViewsProperty=childViewsProperty,Ember.View.applyAttributeBindings=function(elem,name,value){var type=Ember.typeOf(value),currentValue=elem.attr(name);(type==="string"||type==="number"&&!isNaN(value))&&value!==currentValue?elem.attr(name,value):value&&type==="boolean"?elem.attr(name,name):value||elem.removeAttr(name)}}(),function(){var get=Ember.get,set=Ember.set;Ember.View.states={_default:{appendChild:function(){throw"You can't use appendChild outside of the rendering process"},$:function(){return Ember.$()},getElement:function(){return null},handleEvent:function(){return!0}}},Ember.View.reopen({states:Ember.View.states})}(),function(){Ember.View.states.preRender={parentState:Ember.View.states._default,insertElement:function(view,fn){view.createElement(),view._notifyWillInsertElement(!0),fn.call(view),view.transitionTo("inDOM"),view._notifyDidInsertElement()},$:function(view){return view._willInsertElementAccessUnsupported&&console.error("Getting element from willInsertElement is unreliable and no longer supported."),Ember.$()},empty:Ember.K,getElement:function(view){return view._willInsertElementAccessUnsupported&&console.error("Getting element from willInsertElement is unreliable and no longer supported."),null},setElement:function(view,value){return view.beginPropertyChanges(),view.invalidateRecursively("element"),value!==null&&view.transitionTo("hasElement"),view.endPropertyChanges(),value}}}(),function(){var get=Ember.get,set=Ember.set,meta=Ember.meta;Ember.View.states.inBuffer={parentState:Ember.View.states._default,$:function(view,sel){return view.rerender(),Ember.$()},rerender:function(view){ember_deprecate("Something you did caused a view to re-render after it rendered but before it was inserted into the DOM. Because this is avoidable and the cause of significant performance issues in applications, this behavior is deprecated. If you want to use the debugger to find out what caused this, you can set ENV.RAISE_ON_DEPRECATION to true."),view._notifyWillRerender(),view.clearRenderedChildren(),view.renderToBuffer(view.buffer,"replaceWith")},appendChild:function(view,childView,options){var buffer=view.buffer;return childView=this.createChildView(childView,options),get(view,"_childViews").push(childView),childView.renderToBuffer(buffer),view.propertyDidChange("childViews"),childView},destroyElement:function(view){return view.clearBuffer(),view._notifyWillDestroyElement(),view.transitionTo("preRender"),view},empty:function(){throw"EWOT"},insertElement:function(){throw"You can't insert an element that has already been rendered"},setElement:function(view,value){return view.invalidateRecursively("element"),value===null?view.transitionTo("preRender"):(view.clearBuffer(),view.transitionTo("hasElement")),value}}}(),function(){var get=Ember.get,set=Ember.set,meta=Ember.meta;Ember.View.states.hasElement={parentState:Ember.View.states._default,$:function(view,sel){var elem=get(view,"element");return sel?Ember.$(sel,elem):Ember.$(elem)},getElement:function(view){var parent=get(view,"parentView");return parent&&(parent=get(parent,"element")),parent?view.findElementInParentElement(parent):Ember.$("#"+get(view,"elementId"))[0]},setElement:function(view,value){if(value!==null)throw"You cannot set an element to a non-null value when the element is already in the DOM.";return view.invalidateRecursively("element"),view.transitionTo("preRender"),value},rerender:function(view){return view._notifyWillRerender(),view.clearRenderedChildren(),view.domManager.replace(view),view},destroyElement:function(view){return view._notifyWillDestroyElement(),view.domManager.remove(view),view},empty:function(view){var _childViews=get(view,"_childViews"),len,idx;if(_childViews){len=get(_childViews,"length");for(idx=0;idx<len;idx++)_childViews[idx]._notifyWillDestroyElement()}view.domManager.empty(view)},handleEvent:function(view,eventName,evt){var handler=view[eventName];return Ember.typeOf(handler)==="function"?handler.call(view,evt):!0}},Ember.View.states.inDOM={parentState:Ember.View.states.hasElement,insertElement:function(){throw"You can't insert an element into the DOM that has already been inserted"}}}(),function(){var destroyedError="You can't call %@ on a destroyed view",fmt=Ember.String.fmt;Ember.View.states.destroyed={parentState:Ember.View.states._default,appendChild:function(){throw fmt(destroyedError,["appendChild"])},rerender:function(){throw fmt(destroyedError,["rerender"])},destroyElement:function(){throw fmt(destroyedError,["destroyElement"])},empty:function(){throw fmt(destroyedError,["empty"])},setElement:function(){throw fmt(destroyedError,["set('element', ...)"])},insertElement:Ember.K}}(),function(){}(),function(){var get=Ember.get,set=Ember.set,meta=Ember.meta,forEach=Ember.ArrayUtils.forEach,childViewsProperty=Ember.computed(function(){return get(this,"_childViews")}).property("_childViews").cacheable();Ember.ContainerView=Ember.View.extend({init:function(){var childViews=get(this,"childViews");Ember.defineProperty(this,"childViews",childViewsProperty),this._super();var _childViews=get(this,"_childViews");forEach(childViews,function(viewName,idx){var view;"string"==typeof viewName?(view=get(this,viewName),view=this.createChildView(view),set(this,viewName,view)):view=this.createChildView(viewName),_childViews[idx]=view},this),Ember.A(_childViews),get(this,"childViews").addArrayObserver(this,{willChange:"childViewsWillChange",didChange:"childViewsDidChange"})},render:function(buffer){this.forEachChildView(function(view){view.renderToBuffer(buffer)})},willDestroy:function(){get(this,"childViews").removeArrayObserver(this,{willChange:"childViewsWillChange",didChange:"childViewsDidChange"}),this._super()},childViewsWillChange:function(views,start,removed){if(removed===0)return;var changedViews=views.slice(start,start+removed);this.initializeViews(changedViews,null,null),this.invokeForState("childViewsWillChange",views,start,removed)},childViewsDidChange:function(views,start,removed,added){var len=get(views,"length");if(added===0)return;var changedViews=views.slice(start,start+added);this.initializeViews(changedViews,this,get(this,"templateData")),this.invokeForState("childViewsDidChange",views,start,added)},initializeViews:function(views,parentView,templateData){forEach(views,function(view){set(view,"_parentView",parentView),set(view,"templateData",templateData)})},_scheduleInsertion:function(view,prev){prev?prev.domManager.after(prev,view):this.domManager.prepend(this,view)}}),Ember.ContainerView.states={parent:Ember.View.states,inBuffer:{childViewsDidChange:function(parentView,views,start,added){var buffer=parentView.buffer,startWith,prev,prevBuffer,view;start===0?(view=views[start],startWith=start+1,view.renderToBuffer(buffer,"prepend")):(view=views[start-1],startWith=start);for(var i=startWith;i<start+added;i++)prev=view,view=views[i],prevBuffer=prev.buffer,view.renderToBuffer(prevBuffer,"insertAfter")}},hasElement:{childViewsWillChange:function(view,views,start,removed){for(var i=start;i<start+removed;i++)views[i].remove()},childViewsDidChange:function(view,views,start,added){var prev=start===0?null:views[start-1];for(var i=start;i<start+added;i++)view=views[i],this._scheduleInsertion(view,prev),prev=view}}},Ember.ContainerView.states.inDOM={parentState:Ember.ContainerView.states.hasElement},Ember.ContainerView.reopen({states:Ember.ContainerView.states})}(),function(){var get=Ember.get,set=Ember.set,fmt=Ember.String.fmt;Ember.CollectionView=Ember.ContainerView.extend({content:null,emptyView:null,itemViewClass:Ember.View,init:function(){var ret=this._super();return this._contentDidChange(),ret},_contentWillChange:Ember.beforeObserver(function(){var content=this.get("content");content&&content.removeArrayObserver(this);var len=content?get(content,"length"):0;this.arrayWillChange(content,0,len)},"content"),_contentDidChange:Ember.observer(function(){var content=get(this,"content");content&&(ember_assert(fmt("an Ember.CollectionView's content must implement Ember.Array. You passed %@",[content]),Ember.Array.detect(content)),content.addArrayObserver(this));var len=content?get(content,"length"):0;this.arrayDidChange(content,0,null,len)},"content"),willDestroy:function(){var content=get(this,"content");content&&content.removeArrayObserver(this),this._super()},arrayWillChange:function(content,start,removedCount){var emptyView=get(this,"emptyView");emptyView&&emptyView instanceof Ember.View&&emptyView.removeFromParent();var childViews=get(this,"childViews"),childView,idx,len;len=get(childViews,"length");var removingAll=removedCount===len;removingAll&&this.invokeForState("empty");for(idx=start+removedCount-1;idx>=start;idx--)childView=childViews[idx],removingAll&&(childView.removedFromDOM=!0),childView.destroy()},arrayDidChange:function(content,start,removed,added){var itemViewClass=get(this,"itemViewClass"),childViews=get(this,"childViews"),addedViews=[],view,item,idx,len,itemTagName;"string"==typeof itemViewClass&&(itemViewClass=Ember.getPath(itemViewClass)),ember_assert(fmt("itemViewClass must be a subclass of Ember.View, not %@",[itemViewClass]),Ember.View.detect(itemViewClass)),len=content?get(content,"length"):0;if(len)for(idx=start;idx<start+added;idx++)item=content.objectAt(idx),view=this.createChildView(itemViewClass,{content:item,contentIndex:idx}),addedViews.push(view);else{var emptyView=get(this,"emptyView");if(!emptyView)return;emptyView=this.createChildView(emptyView),addedViews.push(emptyView),set(this,"emptyView",emptyView)}childViews.replace(start,0,addedViews)},createChildView:function(view,attrs){view=this._super(view,attrs);var itemTagName=get(view,"tagName"),tagName=itemTagName===null||itemTagName===undefined?Ember.CollectionView.CONTAINER_MAP[get(this,"tagName")]:itemTagName;return set(view,"tagName",tagName),view}}),Ember.CollectionView.CONTAINER_MAP={ul:"li",ol:"li",table:"tr",thead:"tr",tbody:"tr",tfoot:"tr",tr:"td",select:"option"}}(),function(){}(),function(){}(),function(){var get=Ember.get,set=Ember.set,getPath=Ember.getPath;Ember.State=Ember.Object.extend({isState:!0,parentState:null,start:null,name:null,path:Ember.computed(function(){var parentPath=getPath(this,"parentState.path"),path=get(this,"name");return parentPath&&(path=parentPath+"."+path),path}).property().cacheable(),init:function(){var states=get(this,"states"),foundStates,name;if(!states){states={};for(name in this){if(name==="constructor")continue;this.setupChild(states,name,this[name])}set(this,"states",states)}else for(name in states)this.setupChild(states,name,states[name]);set(this,"routes",{})},setupChild:function(states,name,value){if(!value)return!1;Ember.State.detect(value)?value=value.create({name:name}):value.isState&&set(value,"name",name),value.isState&&(set(value,"parentState",this),states[name]=value)},enter:Ember.K,exit:Ember.K})}(),function(){var get=Ember.get,set=Ember.set,getPath=Ember.getPath,fmt=Ember.String.fmt;Ember.StateManager=Ember.State.extend({init:function(){this._super();var initialState=get(this,"initialState");!initialState&&getPath(this,"states.start")&&(initialState="start"),initialState&&this.goToState(initialState)},currentState:null,errorOnUnhandledEvent:!0,currentView:Ember.computed(function(){var currentState=get(this,"currentState"),view;while(currentState){if(get(currentState,"isViewState")){view=get(currentState,"view");if(view)return view}currentState=get(currentState,"parentState")}return null}).property("currentState").cacheable(),send:function(event,context){this.sendRecursively(event,get(this,"currentState"),context)},sendRecursively:function(event,currentState,context){var log=this.enableLogging,action=currentState[event];if(action)log&&console.log(fmt("STATEMANAGER: Sending event '%@' to state %@.",[event,get(currentState,"path")])),action.call(currentState,this,context);else{var parentState=get(currentState,"parentState");if(parentState)this.sendRecursively(event,parentState,context);else if(get(this,"errorOnUnhandledEvent"))throw new Ember.Error(this.toString()+" could not respond to event "+event+" in state "+getPath(this,"currentState.path")+".")}},findStatesByRoute:function(state,route){if(!route||route==="")return undefined;var r=route.split("."),ret=[];for(var i=0,len=r.length;i<len;i+=1){var states=get(state,"states");if(!states)return undefined;var s=get(states,r[i]);if(!s)return undefined;state=s,ret.push(s)}return ret},goToState:function(name){if(Ember.empty(name))return;var currentState=get(this,"currentState")||this,state,newState,exitStates=[],enterStates;state=currentState;if(state.routes[name])exitStates=state.routes[name].exitStates,enterStates=state.routes[name].enterStates,state=state.routes[name].futureState;else{newState=this.findStatesByRoute(currentState,name);while(state&&!newState){exitStates.unshift(state),state=get(state,"parentState");if(!state){newState=this.findStatesByRoute(this,name);if(!newState)return}newState=this.findStatesByRoute(state,name)}enterStates=newState.slice(0),exitStates=exitStates.slice(0);if(enterStates.length>0){state=enterStates[enterStates.length-1];while(enterStates.length>0&&enterStates[0]===exitStates[0])enterStates.shift(),exitStates.shift()}currentState.routes[name]={exitStates:exitStates,enterStates:enterStates,futureState:state}}this.enterState(exitStates,enterStates,state)},getState:function(name){var state=get(this,name),parentState=get(this,"parentState");if(state)return state;if(parentState)return parentState.getState(name)},asyncEach:function(list,callback,doneCallback){var async=!1,self=this;if(!list.length){doneCallback&&doneCallback.call(this);return}var head=list[0],tail=list.slice(1),transition={async:function(){async=!0},resume:function(){self.asyncEach(tail,callback,doneCallback)}};callback.call(this,head,transition),async||transition.resume()},enterState:function(exitStates,enterStates,state){var log=this.enableLogging,stateManager=this;exitStates=exitStates.slice(0).reverse(),this.asyncEach(exitStates,function(state,transition){state.exit(stateManager,transition)},function(){this.asyncEach(enterStates,function(state,transition){log&&console.log("STATEMANAGER: Entering "+get(state,"path")),state.enter(stateManager,transition)},function(){var startState=state,enteredState,initialState;initialState=get(startState,"initialState"),initialState||(initialState="start");while(startState=get(get(startState,"states"),initialState))enteredState=startState,log&&console.log("STATEMANAGER: Entering "+get(startState,"path")),startState.enter(stateManager),initialState=get(startState,"initialState"),initialState||(initialState="start");set(this,"currentState",enteredState||state)})})}})}(),function(){var get=Ember.get,set=Ember.set;Ember.ViewState=Ember.State.extend({isViewState:!0,enter:function(stateManager){var view=get(this,"view"),root,childViews;view&&(Ember.View.detect(view)&&(view=view.create(),set(this,"view",view)),ember_assert("view must be an Ember.View",view instanceof Ember.View),root=stateManager.get("rootView"),root?(childViews=get(root,"childViews"),childViews.pushObject(view)):(root=stateManager.get("rootElement")||"body",view.appendTo(root)))},exit:function(stateManager){var view=get(this,"view");view&&(get(view,"parentView")?view.removeFromParent():view.remove())}})}(),function(){}(),function(){(function(window){var K=function(){},guid=0,document=window.document,supportsRange="createRange"in document&&typeof Range!="undefined"&&Range.prototype.createContextualFragment,needsShy=function(){var testEl=document.createElement("div");return testEl.innerHTML="<div></div>",testEl.firstChild.innerHTML="<script></script>",testEl.firstChild.innerHTML===""}(),Metamorph=function(html){var self;this instanceof Metamorph?self=this:self=new K,self.innerHTML=html;var myGuid="metamorph-"+guid++;return self.start=myGuid+"-start",self.end=myGuid+"-end",self};K.prototype=Metamorph.prototype;var rangeFor,htmlFunc,removeFunc,outerHTMLFunc,appendToFunc,afterFunc,prependFunc,startTagFunc,endTagFunc;outerHTMLFunc=function(){return this.startTag()+this.innerHTML+this.endTag()},startTagFunc=function(){return"<script id='"+this.start+"' type='text/x-placeholder'></script>"},endTagFunc=function(){return"<script id='"+this.end+"' type='text/x-placeholder'></script>"};if(supportsRange)rangeFor=function(morph,outerToo){var range=document.createRange(),before=document.getElementById(morph.start),after=document.getElementById(morph.end);return outerToo?(range.setStartBefore(before),range.setEndAfter(after)):(range.setStartAfter(before),range.setEndBefore(after)),range},htmlFunc=function(html,outerToo){var range=rangeFor(this,outerToo);range.deleteContents();var fragment=range.createContextualFragment(html);range.insertNode(fragment)},removeFunc=function(){var range=rangeFor(this,!0);range.deleteContents()},appendToFunc=function(node){var range=document.createRange();range.setStart(node),range.collapse(!1);var frag=range.createContextualFragment(this.outerHTML());node.appendChild(frag)},afterFunc=function(html){var range=document.createRange(),after=document.getElementById(this.end);range.setStartAfter(after),range.setEndAfter(after);var fragment=range.createContextualFragment(html);range.insertNode(fragment)},prependFunc=function(html){var range=document.createRange(),start=document.getElementById(this.start);range.setStartAfter(start),range.setEndAfter(start);var fragment=range.createContextualFragment(html);range.insertNode(fragment)};else{var wrapMap={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],_default:[0,"",""]},firstNodeFor=function(parentNode,html){var arr=wrapMap[parentNode.tagName.toLowerCase()]||wrapMap._default,depth=arr[0],start=arr[1],end=arr[2];needsShy&&(html="&shy;"+html);var element=document.createElement("div");element.innerHTML=start+html+end;for(var i=0;i<=depth;i++)element=element.firstChild;if(needsShy){var shyElement=element;while(shyElement.nodeType===1&&!shyElement.nodeName&&shyElement.childNodes.length===1)shyElement=shyElement.firstChild;shyElement.nodeType===3&&shyElement.nodeValue.charAt(0)==="­"&&(shyElement.nodeValue=shyElement.nodeValue.slice(1))}return element},realNode=function(start){while(start.parentNode.tagName==="")start=start.parentNode;return start},fixParentage=function(start,end){start.parentNode!==end.parentNode&&end.parentNode.insertBefore(start,end.parentNode.firstChild)};htmlFunc=function(html,outerToo){var start=realNode(document.getElementById(this.start)),end=document.getElementById(this.end),parentNode=end.parentNode,node,nextSibling,last;fixParentage(start,end),node=start.nextSibling;while(node){nextSibling=node.nextSibling,last=node===end;if(last){if(!outerToo)break;end=node.nextSibling}node.parentNode.removeChild(node);if(last)break;node=nextSibling}node=firstNodeFor(start.parentNode,html);while(node)nextSibling=node.nextSibling,parentNode.insertBefore(node,end),node=nextSibling},removeFunc=function(){var start=realNode(document.getElementById(this.start)),end=document.getElementById(this.end);this.html(""),start.parentNode.removeChild(start),end.parentNode.removeChild(end)},appendToFunc=function(parentNode){var node=firstNodeFor(parentNode,this.outerHTML());while(node)nextSibling=node.nextSibling,parentNode.appendChild(node),node=nextSibling},afterFunc=function(html){var end=document.getElementById(this.end),insertBefore=end.nextSibling,parentNode=end.parentNode,nextSibling,node;node=firstNodeFor(parentNode,html);while(node)nextSibling=node.nextSibling,parentNode.insertBefore(node,insertBefore),node=nextSibling},prependFunc=function(html){var start=document.getElementById(this.start),parentNode=start.parentNode,nextSibling,node;node=firstNodeFor(parentNode,html);var insertBefore=start.nextSibling;while(node)nextSibling=node.nextSibling,parentNode.insertBefore(node,insertBefore),node=nextSibling}}Metamorph.prototype.html=function(html){this.checkRemoved();if(html===undefined)return this.innerHTML;htmlFunc.call(this,html),this.innerHTML=html},Metamorph.prototype.replaceWith=function(html){this.checkRemoved(),htmlFunc.call(this,html,!0)},Metamorph.prototype.remove=removeFunc,Metamorph.prototype.outerHTML=outerHTMLFunc,Metamorph.prototype.appendTo=appendToFunc,Metamorph.prototype.after=afterFunc,Metamorph.prototype.prepend=prependFunc,Metamorph.prototype.startTag=startTagFunc,Metamorph.prototype.endTag=endTagFunc,Metamorph.prototype.isRemoved=function(){var before=document.getElementById(this.start),after=document.getElementById(this.end);return!before||!after},Metamorph.prototype.checkRemoved=function(){if(this.isRemoved())throw new Error("Cannot perform operations on a Metamorph that is not in the DOM.")},window.Metamorph=Metamorph})(this)}(),function(){Ember.Handlebars=Ember.create(Handlebars),Ember.Handlebars.helpers=Ember.create(Handlebars.helpers),Ember.Handlebars.Compiler=function(){},Ember.Handlebars.Compiler.prototype=Ember.create(Handlebars.Compiler.prototype),Ember.Handlebars.Compiler.prototype.compiler=Ember.Handlebars.Compiler,Ember.Handlebars.JavaScriptCompiler=function(){},Ember.Handlebars.JavaScriptCompiler.prototype=Ember.create(Handlebars.JavaScriptCompiler.prototype),Ember.Handlebars.JavaScriptCompiler.prototype.compiler=Ember.Handlebars.JavaScriptCompiler,Ember.Handlebars.JavaScriptCompiler.prototype.namespace="Ember.Handlebars",Ember.Handlebars.JavaScriptCompiler.prototype.initializeBuffer=function(){return"''"},Ember.Handlebars.JavaScriptCompiler.prototype.appendToBuffer=function(string){return"data.buffer.push("+string+");"},Ember.Handlebars.Compiler.prototype.mustache=function(mustache){if(mustache.params.length||mustache.hash)return Handlebars.Compiler.prototype.mustache.call(this,mustache);var id=new Handlebars.AST.IdNode(["_triageMustache"]);return mustache.escaped&&(mustache.hash=mustache.hash||new Handlebars.AST.HashNode([]),mustache.hash.pairs.push(["escaped",new Handlebars.AST.StringNode("true")])),mustache=new Handlebars.AST.MustacheNode([id].concat([mustache.id]),mustache.hash,!mustache.escaped),Handlebars.Compiler.prototype.mustache.call(this,mustache)},Ember.Handlebars.precompile=function(string){var ast=Handlebars.parse(string),options={data:!0,stringParams:!0},environment=(new Ember.Handlebars.Compiler).compile(ast,options);return(new Ember.Handlebars.JavaScriptCompiler).compile(environment,options,undefined,!0)},Ember.Handlebars.compile=function(string){var ast=Handlebars.parse(string),options={data:!0,stringParams:!0},environment=(new Ember.Handlebars.Compiler).compile(ast,options),templateSpec=(new Ember.Handlebars.JavaScriptCompiler).compile(environment,options,undefined,!0);return Handlebars.template(templateSpec)};var normalizePath=Ember.Handlebars.normalizePath=function(root,path,data){var keywords=data&&data.keywords||{},keyword,isKeyword;return keyword=path.split(".",1)[0],keywords.hasOwnProperty(keyword)&&(root=keywords[keyword],isKeyword=!0,path===keyword?path="":path=path.substr(keyword.length)),{root:root,path:path,isKeyword:isKeyword}};Ember.Handlebars.getPath=function(root,path,options){var data=options&&options.data,normalizedPath=normalizePath(root,path,data),value;return root=normalizedPath.root,path=normalizedPath.path,value=Ember.getPath(root,path,!1),value===undefined&&root!==window&&Ember.isGlobalPath(path)&&(value=Ember.getPath(window,path)),value},Ember.Handlebars.registerHelper("helperMissing",function(path,options){var error,view="";throw error="%@ Handlebars error: Could not find property '%@' on object %@.",options.data&&(view=options.data.view),new Ember.Error(Ember.String.fmt(error,[view,path,this]))})}(),function(){var set=Ember.set,get=Ember.get,getPath=Ember.getPath,DOMManager={remove:function(view){var morph=view.morph;if(morph.isRemoved())return;morph.remove()},prepend:function(view,childView){childView._insertElementLater(function(){var morph=view.morph;morph.prepend(childView.outerHTML),childView.outerHTML=null})},after:function(view,nextView){nextView._insertElementLater(function(){var morph=view.morph;morph.after(nextView.outerHTML),nextView.outerHTML=null})},replace:function(view){var morph=view.morph;view.transitionTo("preRender"),view.clearRenderedChildren();var buffer=view.renderToBuffer();Ember.run.schedule("render",this,function(){if(get(view,"isDestroyed"))return;view.invalidateRecursively("element"),view._notifyWillInsertElement(),morph.replaceWith(buffer.string()),view.transitionTo("inDOM"),view._notifyDidInsertElement()})},empty:function(view){view.morph.html("")}};Ember.Metamorph=Ember.Mixin.create({isVirtual:!0,tagName:"",init:function(){this._super(),this.morph=Metamorph()},beforeRender:function(buffer){buffer.push(this.morph.startTag())},afterRender:function(buffer){buffer.push(this.morph.endTag())},createElement:function(){var buffer=this.renderToBuffer();this.outerHTML=buffer.string(),this.clearBuffer()},domManager:DOMManager})}(),function(){var get=Ember.get,set=Ember.set,getPath=Ember.Handlebars.getPath;Ember._BindableSpanView=Ember.View.extend(Ember.Metamorph,{shouldDisplayFunc:null,preserveContext:!1,displayTemplate:null,inverseTemplate:null,property:null,normalizedValue:Ember.computed(function(){var property=get(this,"property"),context=get(this,"previousContext"),valueNormalizer=get(this,"valueNormalizerFunc"),result,templateData;return property===""?result=context:(templateData=get(this,"templateData"),result=getPath(context,property,{data:templateData})),valueNormalizer?valueNormalizer(result):result}).property("property","previousContext","valueNormalizerFunc"),rerenderIfNeeded:function(){!get(this,"isDestroyed")&&get(this,"normalizedValue")!==this._lastNormalizedValue&&this.rerender()},render:function(buffer){var escape=get(this,"isEscaped"),shouldDisplay=get(this,"shouldDisplayFunc"),preserveContext=get(this,"preserveContext"),context=get(this,"previousContext"),inverseTemplate=get(this,"inverseTemplate"),displayTemplate=get(this,"displayTemplate"),result=get(this,"normalizedValue");this._lastNormalizedValue=result;if(shouldDisplay(result)){set(this,"template",displayTemplate);if(preserveContext)set(this,"_templateContext",context);else{if(!displayTemplate){result===null||result===undefined?result="":result=String(result),escape&&(result=Handlebars.Utils.escapeExpression(result)),buffer.push(result);return}set(this,"_templateContext",result)}}else inverseTemplate?(set(this,"template",inverseTemplate),preserveContext?set(this,"_templateContext",context):set(this,"_templateContext",result)):set(this,"template",function(){return""});return this._super(buffer)}})}(),function(){var get=Ember.get,getPath=Ember.Handlebars.getPath,set=Ember.set,fmt=Ember.String.fmt,forEach=Ember.ArrayUtils.forEach,EmberHandlebars=Ember.Handlebars,helpers=EmberHandlebars.helpers;(function(){var bind=function(property,options,preserveContext,shouldDisplay,valueNormalizer){var data=options.data,fn=options.fn,inverse=options.inverse,view=data.view,ctx=this,normalized;normalized=Ember.Handlebars.normalizePath(ctx,property,data),ctx=normalized.root,property=normalized.path;if("object"==typeof this){var bindView=view.createChildView(Ember._BindableSpanView,{preserveContext:preserveContext,shouldDisplayFunc:shouldDisplay,valueNormalizerFunc:valueNormalizer,displayTemplate:fn,inverseTemplate:inverse,property:property,previousContext:ctx,isEscaped:options.hash.escaped,templateData:options.data});view.appendChild(bindView);var observer=function(){Ember.run.once(bindView,"rerenderIfNeeded")};property!==""&&Ember.addObserver(ctx,property,observer)}else data.buffer.push(getPath(this,property,options))};EmberHandlebars.registerHelper("_triageMustache",function(property,fn){return ember_assert("You cannot pass more than one argument to the _triageMustache helper",arguments.length<=2),helpers[property]?helpers[property].call(this,fn):helpers.bind.apply(this,arguments)}),EmberHandlebars.registerHelper("bind",function(property,fn){ember_assert("You cannot pass more than one argument to the bind helper",arguments.length<=2);var context=fn.contexts&&fn.contexts[0]||this;return bind.call(context,property,fn,!1,function(result){return!Ember.none(result)})}),EmberHandlebars.registerHelper("boundIf",function(property,fn){var context=fn.contexts&&fn.contexts[0]||this,func=function(result){return Ember.typeOf(result)==="array"?get(result,"length")!==0:!!result};return bind.call(context,property,fn,!0,func,func)})})(),EmberHandlebars.registerHelper("with",function(context,options){return ember_assert("You must pass exactly one argument to the with helper",arguments.length===2),ember_assert("You must pass a block to the with helper",options.fn&&options.fn!==Handlebars.VM.noop),helpers.bind.call(options.contexts[0],context,options)}),EmberHandlebars.registerHelper("if",function(context,options){return ember_assert("You must pass exactly one argument to the if helper",arguments.length===2),ember_assert("You must pass a block to the if helper",options.fn&&options.fn!==Handlebars.VM.noop),helpers.boundIf.call(options.contexts[0],context,options)}),EmberHandlebars.registerHelper("unless",function(context,options){ember_assert("You must pass exactly one argument to the unless helper",arguments.length===2),ember_assert("You must pass a block to the unless helper",options.fn&&options.fn!==Handlebars.VM.noop);var fn=options.fn,inverse=options.inverse;return options.fn=inverse,options.inverse=fn,helpers.boundIf.call(options.contexts[0],context,options)}),EmberHandlebars.registerHelper("bindAttr",function(options){var attrs=options.hash;ember_assert("You must specify at least one hash argument to bindAttr",!!Ember.keys(attrs).length);var view=options.data.view,ret=[],ctx=this,dataId=++Ember.$.uuid,classBindings=attrs["class"];if(classBindings!==null&&classBindings!==undefined){var classResults=EmberHandlebars.bindClasses(this,classBindings,view,dataId,options);ret.push('class="'+classResults.join(" ")+'"'),delete attrs["class"]}var attrKeys=Ember.keys(attrs);return forEach(attrKeys,function(attr){var property=attrs[attr];ember_assert(fmt("You must provide a String for a bound attribute, not %@",[property]),typeof property=="string");var value=property==="this"?ctx:getPath(ctx,property,options),type=Ember.typeOf(value);ember_assert(fmt("Attributes must be numbers, strings or booleans, not %@",[value]),value===null||value===undefined||type==="number"||type==="string"||type==="boolean");var observer,invoker;observer=function(){var result=getPath(ctx,property,options);ember_assert(fmt("Attributes must be numbers, strings or booleans, not %@",[result]),result===null||result===undefined||typeof result=="number"||typeof result=="string"||typeof result=="boolean");var elem=view.$("[data-bindattr-"+dataId+"='"+dataId+"']");if(elem.length===0){Ember.removeObserver(ctx,property,invoker);return}Ember.View.applyAttributeBindings(elem,attr,result)},invoker=function(){Ember.run.once(observer)},property!=="this"&&Ember.addObserver(ctx,property,invoker),type==="string"||type==="number"&&!isNaN(value)?ret.push(attr+'="'+value+'"'):value&&type==="boolean"&&ret.push(attr+'="'+attr+'"')},this),ret.push("data-bindattr-"+dataId+'="'+dataId+'"'),new EmberHandlebars.SafeString(ret.join(" "))}),EmberHandlebars.bindClasses=function(context,classBindings,view,bindAttrId,options){var ret=[],newClass,value,elem,classStringForProperty=function(property){var split=property.split(":"),className=split[1];property=split[0];var val=property!==""?getPath(context,property,options):!0;if(val===!0){if(className)return className;var parts=property.split(".");return Ember.String.dasherize(parts[parts.length-1])}return val!==!1&&val!==undefined&&val!==null?val:null};return forEach(classBindings.split(" "),function(binding){var oldClass,observer,invoker;observer=function(){newClass=classStringForProperty(binding),elem=bindAttrId?view.$("[data-bindattr-"+bindAttrId+"='"+bindAttrId+"']"):view.$(),elem.length===0?Ember.removeObserver(context,binding,invoker):(oldClass&&elem.removeClass(oldClass),newClass?(elem.addClass(newClass),oldClass=newClass):oldClass=null)},invoker=function(){Ember.run.once(observer)};var property=binding.split(":")[0];property!==""&&Ember.addObserver(context,property,invoker),value=classStringForProperty(binding),value&&(ret.push(value),oldClass=value)}),ret}}(),function(){var get=Ember.get,set=Ember.set,indexOf=Ember.ArrayUtils.indexOf,PARENT_VIEW_PATH=/^parentView\./,EmberHandlebars=Ember.Handlebars;EmberHandlebars.ViewHelper=Ember.Object.create({viewClassFromHTMLOptions:function(viewClass,options,thisContext){var hash=options.hash,data=options.data,extensions={},classes=hash["class"],dup=!1;hash.id&&(extensions.elementId=hash.id,dup=!0),classes&&(classes=classes.split(" "),extensions.classNames=classes,dup=!0),hash.classBinding&&(extensions.classNameBindings=hash.classBinding.split(" "),dup=!0),hash.classNameBindings&&(extensions.classNameBindings=hash.classNameBindings.split(" "),dup=!0),hash.attributeBindings&&(ember_assert("Setting 'attributeBindings' via Handlebars is not allowed. Please subclass Ember.View and set it there instead."),extensions.attributeBindings=null,dup=!0),dup&&(hash=Ember.$.extend({},hash),delete hash.id,delete hash["class"],delete hash.classBinding);var path,normalized;for(var prop in hash){if(!hash.hasOwnProperty(prop))continue;Ember.IS_BINDING.test(prop)&&(path=hash[prop],normalized=Ember.Handlebars.normalizePath(null,path,data),normalized.isKeyword?hash[prop]="templateData.keywords."+path:Ember.isGlobalPath(path)||(path==="this"?hash[prop]="bindingContext":hash[prop]="bindingContext."+path))}return extensions.bindingContext=thisContext,viewClass.extend(hash,extensions)},helper:function(thisContext,path,options){var inverse=options.inverse,data=options.data,view=data.view,fn=options.fn,hash=options.hash,newView;"string"==typeof path?(newView=EmberHandlebars.getPath(thisContext,path,options),ember_assert("Unable to find view at path '"+path+"'",!!newView)):newView=path,ember_assert(Ember.String.fmt("You must pass a view class to the #view helper, not %@ (%@)",[path,newView]),Ember.View.detect(newView)),newView=this.viewClassFromHTMLOptions(newView,options,thisContext);var currentView=data.view,viewOptions={templateData:options.data};fn&&(ember_assert("You cannot provide a template block if you also specified a templateName",!get(viewOptions,"templateName")&&!get(newView.proto(),"templateName")),viewOptions.template=fn),currentView.appendChild(newView,viewOptions)}}),EmberHandlebars.registerHelper("view",function(path,options){return ember_assert("The view helper only takes a single argument",arguments.length<=2),path&&path.data&&path.data.isRenderData&&(options=path,path="Ember.View"),EmberHandlebars.ViewHelper.helper(this,path,options)})}(),function(){var get=Ember.get,getPath=Ember.Handlebars.getPath,fmt=Ember.String.fmt;Ember.Handlebars.registerHelper("collection",function(path,options){path&&path.data&&path.data.isRenderData?(options=path,path=undefined,ember_assert("You cannot pass more than one argument to the collection helper",arguments.length===1)):ember_assert("You cannot pass more than one argument to the collection helper",arguments.length===2);var fn=options.fn,data=options.data,inverse=options.inverse,collectionClass;collectionClass=path?getPath(this,path,options):Ember.CollectionView,ember_assert(fmt("%@ #collection: Could not find %@",data.view,path),!!collectionClass);var hash=options.hash,itemHash={},match,itemViewClass,itemViewPath=hash.itemViewClass,collectionPrototype=collectionClass.proto();delete hash.itemViewClass,itemViewClass=itemViewPath?getPath(collectionPrototype,itemViewPath,options):collectionPrototype.itemViewClass,ember_assert(fmt("%@ #collection: Could not find %@",data.view,itemViewPath),!!itemViewClass);for(var prop in hash)hash.hasOwnProperty(prop)&&(match=prop.match(/^item(.)(.*)$/),match&&(itemHash[match[1].toLowerCase()+match[2]]=hash[prop],delete hash[prop]));var tagName=hash.tagName||collectionPrototype.tagName;fn&&(itemHash.template=fn,delete options.fn);if(inverse&&inverse!==Handlebars.VM.noop){var emptyViewClass=Ember.View;hash.emptyViewClass&&(emptyViewClass=Ember.View.detect(hash.emptyViewClass)?hash.emptyViewClass:getPath(this,hash.emptyViewClass,options)),hash.emptyView=emptyViewClass.extend({template:inverse,tagName:itemHash.tagName})}return hash.preserveContext&&(itemHash._templateContext=Ember.computed(function(){return get(this,"content")}).property("content"),delete hash.preserveContext),hash.itemViewClass=Ember.Handlebars.ViewHelper.viewClassFromHTMLOptions(itemViewClass,{data:data,hash:itemHash},this),Ember.Handlebars.helpers.view.call(this,collectionClass,options)})}(),function(){var getPath=Ember.Handlebars.getPath;Ember.Handlebars.registerHelper("unbound",function(property,fn){var context=fn.contexts&&fn.contexts[0]||this;return getPath(context,property,fn)})}(),function(){var getPath=Ember.getPath;Ember.Handlebars.registerHelper("log",function(property,fn){var context=fn.contexts&&fn.contexts[0]||this;Ember.Logger.log(getPath(context,property))}),Ember.Handlebars.registerHelper("debugger",function(){debugger})}(),function(){Ember.Handlebars.EachView=Ember.CollectionView.extend(Ember.Metamorph,{itemViewClass:Ember.View.extend(Ember.Metamorph)}),Ember.Handlebars.registerHelper("each",function(path,options){return options.hash.contentBinding=path,options.hash.preserveContext=!0,options.hash.itemTagName="",options.hash.emptyViewClass=Ember.View.extend(Ember.Metamorph),Ember.Handlebars.helpers.collection.call(this,"Ember.Handlebars.EachView",options)})}(),function(){Ember.Handlebars.registerHelper("template",function(name,options){var template=Ember.TEMPLATES[name];ember_assert("Unable to find template with name '"+name+"'.",!!template),Ember.TEMPLATES[name](this,{data:options.data})})}(),function(){var EmberHandlebars=Ember.Handlebars,getPath=EmberHandlebars.getPath,ActionHelper=EmberHandlebars.ActionHelper={registeredActions:{}};ActionHelper.registerAction=function(actionName,eventName,target,view,context){var actionId=(++Ember.$.uuid).toString();return ActionHelper.registeredActions[actionId]={eventName:eventName,handler:function(event){return event.view=view,event.context=context,target.isState&&typeof target.send=="function"?target.send(actionName,event):target[actionName].call(target,event)}},view.on("willRerender",function(){delete ActionHelper.registeredActions[actionId]}),actionId},EmberHandlebars.registerHelper("action",function(actionName,options){var hash=options.hash||{},eventName=hash.on||"click",view=options.data.view,target,context;view.isVirtual&&(view=view.get("parentView")),target=hash.target?getPath(this,hash.target,options):view,context=options.contexts[0];var actionId=ActionHelper.registerAction(actionName,eventName,target,view,context);return new EmberHandlebars.SafeString('data-ember-action="'+actionId+'"')})}(),function(){var get=Ember.get,set=Ember.set;Ember.Handlebars.registerHelper("yield",function(options){var view=options.data.view,template;while(view&&!get(view,"layout"))view=get(view,"parentView");ember_assert("You called yield in a template that was not a layout",!!view),template=get(view,"template"),template&&template(this,options)})}(),function(){}(),function(){}(),function(){var set=Ember.set,get=Ember.get;Ember.Checkbox=Ember.View.extend({classNames:["ember-checkbox"],tagName:Ember.computed(function(){return get(this,"title")?undefined:"input"}).property(),attributeBindings:Ember.computed(function(){return get(this,"title")?[]:["type","checked","disabled"]}).property(),type:"checkbox",checked:!1,disabled:!1,title:Ember.computed(function(propName,value){return ember_deprecate("Automatically surrounding Ember.Checkbox inputs with a label by providing a 'title' property is deprecated",value===undefined),value}).property().cacheable(),defaultTemplate:Ember.computed(function(){return get(this,"title")?Ember.Handlebars.compile('<label><input type="checkbox" {{bindAttr checked="checked" disabled="disabled"}}>{{title}}</label>'):undefined}).property().cacheable(),value:Ember.computed(function(propName,value){return ember_deprecate("Ember.Checkbox's 'value' property has been renamed to 'checked' to match the html element attribute name"),value!==undefined?set(this,"checked",value):get(this,"checked")}).property("checked"),change:function(){Ember.run.once(this,this._updateElementValue)},_updateElementValue:function(){var input=get(this,"title")?this.$("input:checkbox"):this.$();set(this,"checked",input.prop("checked"))}})}(),function(){var get=Ember.get,set=Ember.set;Ember.TextSupport=Ember.Mixin.create({value:"",attributeBindings:["placeholder","disabled","maxlength"],placeholder:null,disabled:!1,maxlength:null,insertNewline:Ember.K,cancel:Ember.K,focusOut:function(event){this._elementValueDidChange()},change:function(event){this._elementValueDidChange()},keyUp:function(event){this.interpretKeyEvents(event)},interpretKeyEvents:function(event){var map=Ember.TextSupport.KEY_EVENTS,method=map[event.keyCode];this._elementValueDidChange();if(method)return this[method](event)},_elementValueDidChange:function(){set(this,"value",this.$().val())}}),Ember.TextSupport.KEY_EVENTS={13:"insertNewline",27:"cancel"}}(),function(){var get=Ember.get,set=Ember.set;Ember.TextField=Ember.View.extend(Ember.TextSupport,{classNames:["ember-text-field"],tagName:"input",attributeBindings:["type","value","size"],type:"text",size:null})}(),function(){var get=Ember.get,set=Ember.set;Ember.Button=Ember.View.extend(Ember.TargetActionSupport,{classNames:["ember-button"],classNameBindings:["isActive"],tagName:"button",propagateEvents:!1,attributeBindings:["type","disabled","href"],targetObject:Ember.computed(function(){var target=get(this,"target"),root=get(this,"templateContext"),data=get(this,"templateData");return typeof target!="string"?target:Ember.Handlebars.getPath(root,target,{data:data})}).property("target").cacheable(),type:Ember.computed(function(key,value){var tagName=this.get("tagName");value!==undefined&&(this._type=value);if(this._type!==undefined)return this._type;if(tagName==="input"||tagName==="button")return"button"}).property("tagName").cacheable(),disabled:!1,href:Ember.computed(function(){return this.get("tagName")==="a"?"#":null}).property("tagName").cacheable(),mouseDown:function(){return get(this,"disabled")||(set(this,"isActive",!0),this._mouseDown=!0,this._mouseEntered=!0),get(this,"propagateEvents")},mouseLeave:function(){this._mouseDown&&(set(this,"isActive",!1),this._mouseEntered=!1)},mouseEnter:function(){this._mouseDown&&(set(this,"isActive",!0),this._mouseEntered=!0)},mouseUp:function(event){return get(this,"isActive")&&(this.triggerAction(),set(this,"isActive",!1)),this._mouseDown=!1,this._mouseEntered=!1,get(this,"propagateEvents")},keyDown:function(event){(event.keyCode===13||event.keyCode===32)&&this.mouseDown()},keyUp:function(event){(event.keyCode===13||event.keyCode===32)&&this.mouseUp()},touchStart:function(touch){return this.mouseDown(touch)},touchEnd:function(touch){return this.mouseUp(touch)}})}(),function(){var get=Ember.get,set=Ember.set;Ember.TextArea=Ember.View.extend(Ember.TextSupport,{classNames:["ember-text-area"],tagName:"textarea",attributeBindings:["rows","cols"],rows:null,cols:null,didInsertElement:function(){this._updateElementValue()},_updateElementValue:Ember.observer(function(){this.$().val(get(this,"value"))},"value")})}(),function(){Ember.TabContainerView=Ember.View.extend()}(),function(){var get=Ember.get,getPath=Ember.getPath;Ember.TabPaneView=Ember.View.extend({tabsContainer:Ember.computed(function(){return this.nearestInstanceOf(Ember.TabContainerView)}).property(),isVisible:Ember.computed(function(){return get(this,"viewName")===getPath(this,"tabsContainer.currentView")}).property("tabsContainer.currentView")})}(),function(){var get=Ember.get,setPath=Ember.setPath;Ember.TabView=Ember.View.extend({tabsContainer:Ember.computed(function(){return this.nearestInstanceOf(Ember.TabContainerView)}).property(),mouseUp:function(){setPath(this,"tabsContainer.currentView",get(this,"value"))}})}(),function(){}(),function(){var set=Ember.set,get=Ember.get,getPath=Ember.getPath,indexOf=Ember.ArrayUtils.indexOf,indexesOf=Ember.ArrayUtils.indexesOf;Ember.Select=Ember.View.extend({tagName:"select",template:Ember.Handlebars.compile('{{#if prompt}}<option>{{prompt}}</option>{{/if}}{{#each content}}{{view Ember.SelectOption contentBinding="this"}}{{/each}}'),attributeBindings:["multiple"],multiple:!1,content:null,selection:null,prompt:null,optionLabelPath:"content",optionValuePath:"content",didInsertElement:function(){var selection=get(this,"selection");selection&&this.selectionDidChange(),this.change()},change:function(){get(this,"multiple")?this._changeMultiple():this._changeSingle()},selectionDidChange:Ember.observer(function(){var selection=get(this,"selection"),isArray=Ember.isArray(selection);if(get(this,"multiple")){if(!isArray){set(this,"selection",Ember.A([selection]));return}this._selectionDidChangeMultiple()}else this._selectionDidChangeSingle()},"selection"),_changeSingle:function(){var selectedIndex=this.$()[0].selectedIndex,content=get(this,"content"),prompt=get(this,"prompt");if(!content)return;if(prompt&&selectedIndex===0){set(this,"selection",null);return}prompt&&(selectedIndex-=1),set(this,"selection",content.objectAt(selectedIndex))},_changeMultiple:function(){var options=this.$("option:selected"),prompt=get(this,"prompt"),offset=prompt?1:0,content=get(this,"content");if(!content)return;if(options){var selectedIndexes=options.map(function(){return this.index-offset}).toArray();set(this,"selection",content.objectsAt(selectedIndexes))}},_selectionDidChangeSingle:function(){var el=this.$()[0],content=get(this,"content"),selection=get(this,"selection"),selectionIndex=indexOf(content,selection),prompt=get(this,"prompt");prompt&&(selectionIndex+=1),el&&(el.selectedIndex=selectionIndex)},_selectionDidChangeMultiple:function(){var content=get(this,"content"),selection=get(this,"selection"),selectedIndexes=indexesOf(content,selection),prompt=get(this,"prompt"),offset=prompt?1:0,options=this.$("option");options&&options.each(function(){this.selected=indexOf(selectedIndexes,this.index+offset)>-1})}}),Ember.SelectOption=Ember.View.extend({tagName:"option",template:Ember.Handlebars.compile("{{label}}"),attributeBindings:["value","selected"],init:function(){this.labelPathDidChange(),this.valuePathDidChange(),this._super()},selected:Ember.computed(function(){var content=get(this,"content"),selection=getPath(this,"parentView.selection");return getPath(this,"parentView.multiple")?selection&&indexOf(selection,content)>-1:content==selection}).property("content","parentView.selection"),labelPathDidChange:Ember.observer(function(){var labelPath=getPath(this,"parentView.optionLabelPath");if(!labelPath)return;Ember.defineProperty(this,"label",Ember.computed(function(){return getPath(this,labelPath)}).property(labelPath).cacheable())},"parentView.optionLabelPath"),valuePathDidChange:Ember.observer(function(){var valuePath=getPath(this,"parentView.optionValuePath");if(!valuePath)return;Ember.defineProperty(this,"value",Ember.computed(function(){return getPath(this,valuePath)}).property(valuePath).cacheable())},"parentView.optionValuePath")})}(),function(){}(),function(){Ember.Handlebars.bootstrap=function(ctx){var selectors='script[type="text/x-handlebars"], script[type="text/x-raw-handlebars"]';Ember.ENV.LEGACY_HANDLEBARS_TAGS&&(selectors+=', script[type="text/html"]'),ember_warn("Ember no longer parses text/html script tags by default. Set ENV.LEGACY_HANDLEBARS_TAGS = true to restore this functionality.",Ember.ENV.LEGACY_HANDLEBARS_TAGS||Ember.$('script[type="text/html"]').length===0),Ember.$(selectors,ctx).each(function(){var script=Ember.$(this),type=script.attr("type");if(type==="text/html"&&!Ember.ENV.LEGACY_HANDLEBARS_TAGS)return;var compile=script.attr("type")==="text/x-raw-handlebars"?Ember.$.proxy(Handlebars.compile,Handlebars):Ember.$.proxy(Ember.Handlebars.compile,Ember.Handlebars),templateName=script.attr("data-template-name")||script.attr("id"),template=compile(script.html()),view,viewPath,elementId,tagName,options;if(templateName)Ember.TEMPLATES[templateName]=template,script.remove();else{if(script.parents("head").length!==0)throw new Ember.Error("Template found in <head> without a name specified. Please provide a data-template-name attribute.\n"+script.html());viewPath=script.attr("data-view"),view=viewPath?Ember.getPath(viewPath):Ember.View,elementId=script.attr("data-element-id"),tagName=script.attr("data-tag-name"),options={template:template},elementId&&(options.elementId=elementId),tagName&&(options.tagName=tagName),view=view.create(options),view._insertElementLater(function(){script.replaceWith(this.$()),script=null})}})},Ember.$(document).ready(function(){Ember.Handlebars.bootstrap(Ember.$(document))})}(),function(){}(),function(){}(),define("Library/emberjs/ember-0.9.7",function(){}),define("emberjs",["Library/emberjs/ember-0.9.7"],function(){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("emberjs"),window.localStorage.showDevelopmentFeatures&&(Ember.CP_DEFAULT_CACHEABLE=!0,Ember.RAISE_ON_DEPRECATION=!0),Ember}),function($,undefined){function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();return"area"===nodeName?(map=element.parentNode,mapName=map.name,!element.href||!mapName||map.nodeName.toLowerCase()!=="map"?!1:(img=$("img[usemap=#"+mapName+"]")[0],!!img&&visible(img))):(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return!$(element).parents().andSelf().filter(function(){return $.css(this,"visibility")==="hidden"||$.expr.filters.hidden(this)}).length}var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};if($.ui.version)return;$.extend($.ui,{version:"1.9.0-beta.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return typeof delay=="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus(),fn&&fn.call(elem)},delay)}):this._focus.apply(this,arguments)},scrollParent:function(){var scrollParent;return $.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?scrollParent=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0):scrollParent=this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0)return value}elem=elem.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++uuid)})},removeUniqueId:function(){return this.each(function(){runiqueId.test(this.id)&&$(this).removeAttr("id")})},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),$("<a>").outerWidth(1).jquery||$.each(["Width","Height"],function(i,name){function reduce(elem,size,border,margin){return $.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0,border&&(size-=parseFloat($.css(elem,"border"+this+"Width"))||0),margin&&(size-=parseFloat($.css(elem,"margin"+this))||0)}),size}var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};$.fn["inner"+name]=function(size){return size===undefined?orig["inner"+name].call(this):this.each(function(){$(this).css(type,reduce(this,size)+"px")})},$.fn["outer"+name]=function(size,margin){return typeof size!="number"?orig["outer"+name].call(this,size):this.each(function(){$(this).css(type,reduce(this,size,!0,margin)+"px")})}}),$.extend($.expr[":"],{data:function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}}),$(function(){var body=document.body,div=body.appendChild(div=document.createElement("div"));div.offsetHeight,$.extend(div.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),$.support.minHeight=div.offsetHeight===100,$.support.selectstart="onselectstart"in div,body.removeChild(div).style.display="none"}),$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set)proto.plugins[i]=proto.plugins[i]||[],proto.plugins[i].push([option,set[i]])},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)return;for(i=0;i<set.length;i++)instance.options[set[i][0]]&&set[i][1].apply(instance.element,args)}},contains:$.contains,hasScroll:function(el,a){if($(el).css("overflow")==="hidden")return!1;var scroll=a&&a==="left"?"scrollLeft":"scrollTop",has=!1;return el[scroll]>0?!0:(el[scroll]=1,has=el[scroll]>0,el[scroll]=0,has)},isOverAxis:function(x,reference,size){return x>reference&&x<reference+size},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width)}})}(jQuery),function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)},$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,namespace=name.split(".")[0];name=name.split(".")[1],fullName=namespace+"-"+name,prototype||(prototype=base,base=$.Widget),$.expr[":"][fullName]=function(elem){return!!$.data(elem,fullName)},$[namespace]=$[namespace]||{},existingConstructor=$[namespace][name],constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,element);arguments.length&&this._createWidget(options,element)},$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]}),basePrototype=new base,basePrototype.options=$.widget.extend({},basePrototype.options),$.each(prototype,function(prop,value){$.isFunction(value)&&(prototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var __super=this._super,__superApply=this._superApply,returnValue;return this._super=_super,this._superApply=_superApply,returnValue=value.apply(this,arguments),this._super=__super,this._superApply=__superApply,returnValue}}())}),constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:name},prototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetBaseClass:fullName,widgetFullName:fullName}),existingConstructor?($.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)}),delete existingConstructor._childConstructors):base._childConstructors.push(constructor),$.widget.bridge(name,constructor)},$.widget.extend=function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex])value=input[inputIndex][key],input[inputIndex].hasOwnProperty(key)&&value!==undefined&&(target[key]=$.isPlainObject(value)?$.widget.extend({},target[key],value):value);return target},$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName;$.fn[name]=function(options){var isMethodCall=typeof options=="string",args=slice.call(arguments,1),returnValue=this;return options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options,isMethodCall?this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance)return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");if(!$.isFunction(instance[options])||options.charAt(0)==="_")return $.error("no such method '"+options+"' for "+name+" widget instance");methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined)return returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue,!1}):this.each(function(){var instance=$.data(this,fullName);instance?instance.option(options||{})._init():new object(options,this)}),returnValue}},$.Widget=function(options,element){},$.Widget._childConstructors=[],$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0],this.element=$(element),this.uuid=uuid++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=$.widget.extend({},this.options,this._getCreateOptions(),options),this.bindings=$(),this.hoverable=$(),this.focusable=$(),element!==this&&($.data(element,this.widgetName,this),$.data(element,this.widgetFullName,this),this._on({remove:"destroy"}),this.document=$(element.style?element.ownerDocument:element.document||element),this.window=$(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0)return $.widget.extend({},this.options);if(typeof key=="string"){options={},parts=key.split("."),key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++)curOption[parts[i]]=curOption[parts[i]]||{},curOption=curOption[parts[i]];key=parts.pop();if(value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}}return this._setOptions(options),this},_setOptions:function(options){var key;for(key in options)this._setOption(key,options[key]);return this},_setOption:function(key,value){return this.options[key]=value,key==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(element,handlers){handlers?(element=$(element),this.bindings=this.bindings.add(element)):(handlers=element,element=this.element);var instance=this;$.each(handlers,function(event,handler){function handlerProxy(){if(instance.options.disabled===!0||$(this).hasClass("ui-state-disabled"))return;return(typeof handler=="string"?instance[handler]:handler).apply(instance,arguments)}typeof handler!="string"&&(handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++);var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];selector?instance.widget().delegate(selector,eventName,handlerProxy):element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return(typeof handler=="string"?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element),this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element),this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{},event=$.Event(event),event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase(),event.target=this.element[0],orig=event.originalEvent;if(orig)for(prop in orig)prop in event||(event[prop]=orig[prop]);return this.element.trigger(event,data),!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===!1||event.isDefaultPrevented())}},$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){typeof options=="string"&&(options={effect:options});var hasOptions,effectName=options?options===!0||typeof options=="number"?defaultEffect:options.effect||defaultEffect:method;options=options||{},typeof options=="number"&&(options={duration:options}),hasOptions=!$.isEmptyObject(options),options.complete=callback,options.delay&&element.delay(options.delay),hasOptions&&$.effects&&($.effects.effect[effectName]||$.uiBackCompat!==!1&&$.effects[effectName])?element[method](options):effectName!==method&&element[effectName]?element[effectName](options.duration,options.easing,callback):element.queue(function(next){$(this)[method](),callback&&callback.call(element[0]),next()})}}),$.uiBackCompat!==!1&&($.Widget.prototype._getCreateOptions=function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function($,undefined){var mouseHandled=!1;$(document).mouseup(function(e){mouseHandled=!1}),$.widget("ui.mouse",{version:"1.9.0-beta.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(!0===$.data(event.target,that.widgetName+".preventClickEvent"))return $.removeData(event.target,that.widgetName+".preventClickEvent"),event.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(mouseHandled)return;this._mouseStarted&&this._mouseUp(event),this._mouseDownEvent=event;var that=this,btnIsLeft=event.which===1,elIsCancel=typeof this.options.cancel=="string"&&event.target.nodeName?$(event.target).closest(this.options.cancel).length:!1;if(!btnIsLeft||elIsCancel||!this._mouseCapture(event))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==!1;if(!this._mouseStarted)return event.preventDefault(),!0}return!0===$.data(event.target,this.widgetName+".preventClickEvent")&&$.removeData(event.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(event){return that._mouseMove(event)},this._mouseUpDelegate=function(event){return that._mouseUp(event)},$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),event.preventDefault(),mouseHandled=!0,!0},_mouseMove:function(event){return!$.browser.msie||document.documentMode>=9||!!event.button?this._mouseStarted?(this._mouseDrag(event),event.preventDefault()):(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==!1,this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)),!this._mouseStarted):this._mouseUp(event)},_mouseUp:function(event){return $(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,event.target===this._mouseDownEvent.target&&$.data(event.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(event)),!1},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(event){return this.mouseDelayMet},_mouseStart:function(event){},_mouseDrag:function(event){},_mouseStop:function(event){},_mouseCapture:function(event){return!0}})}(jQuery),function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.9.0-beta.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;return this.helper||o.disabled||$(event.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(event),this.handle?($(o.iframeFix===!0?"iframe":o.iframeFix).each(function(){$('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css($(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(event){var o=this.options;return this.helper=this._createHelper(event),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),$.ui.ddmanager&&($.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),o.containment&&this._setContainment(),this._trigger("start",event)===!1?(this._clear(),!1):(this._cacheHelperProportions(),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this._mouseDrag(event,!0),$.ui.ddmanager&&$.ui.ddmanager.dragStart(this,event),!0)},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===!1)return this._mouseUp({}),!1;this.position=ui.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return $.ui.ddmanager&&$.ui.ddmanager.drag(this,event),!1},_mouseStop:function(event){var dropped=!1;$.ui.ddmanager&&!this.options.dropBehaviour&&(dropped=$.ui.ddmanager.drop(this,event)),this.dropped&&(dropped=this.dropped,this.dropped=!1);var element=this.element[0],elementInDom=!1;while(element&&(element=element.parentNode))element==document&&(elementInDom=!0);if(!elementInDom&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!dropped||this.options.revert=="valid"&&dropped||this.options.revert===!0||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped)){var that=this;$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){that._trigger("stop",event)!==!1&&that._clear()})}else this._trigger("stop",event)!==!1&&this._clear();return!1},_mouseUp:function(event){return this.options.iframeFix===!0&&$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),$.ui.ddmanager&&$.ui.ddmanager.dragStop(this,event),$.ui.mouse.prototype._mouseUp.call(this,event)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length?!0:!1;return $(this.options.handle,this.element).find("*").andSelf().each(function(){this==event.target&&(handle=!0)}),handle},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):o.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return helper.parents("body").length||helper.appendTo(o.appendTo=="parent"?this.element[0].parentNode:o.appendTo),helper[0]!=this.element[0]&&!/(fixed|absolute)/.test(helper.css("position"))&&helper.css("position","absolute"),helper},_adjustOffsetFromHelper:function(obj){typeof obj=="string"&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o=this.options;o.containment=="parent"&&(o.containment=this.helper[0].parentNode);if(o.containment=="document"||o.containment=="window")this.containment=[o.containment=="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,o.containment=="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(o.containment=="document"?0:$(window).scrollLeft())+$(o.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(o.containment=="document"?0:$(window).scrollTop())+($(o.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)&&o.containment.constructor!=Array){var c=$(o.containment),ce=c[0];if(!ce)return;var co=c.offset(),over=$(ce).css("overflow")!="hidden";this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else o.containment.constructor==Array&&(this.containment=o.containment)},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod=d=="absolute"?1:-1,o=this.options,scroll=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName),pageX=event.pageX,pageY=event.pageY;if(this.originalPosition){var containment;if(this.containment){if(this.relative_container){var co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]}else containment=this.containment;event.pageX-this.offset.click.left<containment[0]&&(pageX=containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<containment[1]&&(pageY=containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>containment[2]&&(pageX=containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>containment[3]&&(pageY=containment[3]+this.offset.click.top)}if(o.grid){var top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?top-this.offset.click.top<containment[1]||top-this.offset.click.top>containment[3]?top-this.offset.click.top<containment[1]?top+o.grid[1]:top-o.grid[1]:top:top;var left=o.grid[0]?this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?left-this.offset.click.left<containment[0]||left-this.offset.click.left>containment[2]?left-this.offset.click.left<containment[0]?left+o.grid[0]:left-o.grid[0]:left:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(type,event,ui){return ui=ui||this._uiHash(),$.ui.plugin.call(this,type,[event,ui]),type=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),$.Widget.prototype._trigger.call(this,type,event,ui)},plugins:{},_uiHash:function(event){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[],$(o.connectToSortable).each(function(){var sortable=$.data(this,"sortable");sortable&&!sortable.options.disabled&&(inst.sortables.push({instance:sortable,shouldRevert:sortable.options.revert}),sortable.refreshPositions(),sortable._trigger("activate",event,uiSortable))})},stop:function(event,ui){var inst=$(this).data("draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){this.instance.isOver?(this.instance.isOver=0,inst.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(event),this.instance.options.helper=this.instance.options._helper,inst.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",event,uiSortable))})},drag:function(event,ui){var inst=$(this).data("draggable"),that=this,checkPos=function(o){var dyClick=this.offset.click.top,dxClick=this.offset.click.left,helperTop=this.positionAbs.top,helperLeft=this.positionAbs.left,itemHeight=o.height,itemWidth=o.width,itemTop=o.top,itemLeft=o.left;return $.ui.isOver(helperTop+dyClick,helperLeft+dxClick,itemTop,itemLeft,itemHeight,itemWidth)};$.each(inst.sortables,function(i){this.instance.positionAbs=inst.positionAbs,this.instance.helperProportions=inst.helperProportions,this.instance.offset.click=inst.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return ui.helper[0]},event.target=this.instance.currentItem[0],this.instance._mouseCapture(event,!0),this.instance._mouseStart(event,!0,!0),this.instance.offset.click.top=inst.offset.click.top,this.instance.offset.click.left=inst.offset.click.left,this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=inst.offset.parent.top-this.instance.offset.parent.top,inst._trigger("toSortable",event),inst.dropped=this.instance.element,inst.currentItem=inst.element,this.instance.fromOutside=inst),this.instance.currentItem&&this.instance._mouseDrag(event)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",event,this.instance._uiHash(this.instance)),this.instance._mouseStop(event,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),inst._trigger("fromSortable",event),inst.dropped=!1)})}}),$.ui.plugin.add("draggable","cursor",{start:function(event,ui){var t=$("body"),o=$(this).data("draggable").options;t.css("cursor")&&(o._cursor=t.css("cursor")),t.css("cursor",o.cursor)},stop:function(event,ui){var o=$(this).data("draggable").options;o._cursor&&$("body").css("cursor",o._cursor)}}),$.ui.plugin.add("draggable","opacity",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;t.css("opacity")&&(o._opacity=t.css("opacity")),t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("draggable").options;o._opacity&&$(ui.helper).css("opacity",o._opacity)}}),$.ui.plugin.add("draggable","scroll",{start:function(event,ui){var i=$(this).data("draggable");i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML"&&(i.overflowOffset=i.scrollParent.offset())},drag:function(event,ui){var i=$(this).data("draggable"),o=i.options,scrolled=!1;if(i.scrollParent[0]!=document&&i.scrollParent[0].tagName!="HTML"){if(!o.axis||o.axis!="x")i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-i.overflowOffset.top<o.scrollSensitivity&&(i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed);if(!o.axis||o.axis!="y")i.overflowOffset.left+i.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-i.overflowOffset.left<o.scrollSensitivity&&(i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed)}else{if(!o.axis||o.axis!="x")event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed));if(!o.axis||o.axis!="y")event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed))}scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(i,event)}}),$.ui.plugin.add("draggable","snap",{start:function(event,ui){var i=$(this).data("draggable"),o=i.options;i.snapElements=[],$(o.snap.constructor!=String?o.snap.items||":data(draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();this!=i.element[0]&&i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var inst=$(this).data("draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(var i=inst.snapElements.length-1;i>=0;i--){var l=inst.snapElements[i].left,r=l+inst.snapElements[i].width,t=inst.snapElements[i].top,b=t+inst.snapElements[i].height;if(!(l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d||l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d||l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d||l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d)){inst.snapElements[i].snapping&&inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=!1;continue}if(o.snapMode!="inner"){var ts=Math.abs(t-y2)<=d,bs=Math.abs(b-y1)<=d,ls=Math.abs(l-x2)<=d,rs=Math.abs(r-x1)<=d;ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left)}var first=ts||bs||ls||rs;if(o.snapMode!="outer"){var ts=Math.abs(t-y1)<=d,bs=Math.abs(b-y2)<=d,ls=Math.abs(l-x1)<=d,rs=Math.abs(r-x2)<=d;ts&&(ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top),bs&&(ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top),ls&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-inst.margins.left),rs&&(ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left)}!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first)&&inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item})),inst.snapElements[i].snapping=ts||bs||ls||rs||first}}}),$.ui.plugin.add("draggable","stack",{start:function(event,ui){var o=$(this).data("draggable").options,group=$.makeArray($(o.stack)).sort(function(a,b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!group.length)return;var min=parseInt(group[0].style.zIndex)||0;$(group).each(function(i){this.style.zIndex=min+i}),this[0].style.zIndex=min+group.length}}),$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("draggable").options;t.css("zIndex")&&(o._zIndex=t.css("zIndex")),t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("draggable").options;o._zIndex&&$(ui.helper).css("zIndex",o._zIndex)}})}(jQuery),function($,undefined){$.widget("ui.droppable",{version:"1.9.0-beta.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var o=this.options,accept=o.accept;this.isover=0,this.isout=1,this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[],$.ui.ddmanager.droppables[o.scope].push(this),o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var drop=$.ui.ddmanager.droppables[this.options.scope];for(var i=0;i<drop.length;i++)drop[i]==this&&drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){key=="accept"&&(this.accept=$.isFunction(value)?value:function(d){return d.is(value)}),$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),draggable&&this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),draggable&&this._trigger("deactivate",event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",event,this.ui(draggable)))},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return;this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",event,this.ui(draggable)))},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]==this.element[0])return!1;var childrenIntersection=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,"droppable");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope==draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance))return childrenIntersection=!0,!1}),childrenIntersection?!1:this.accept.call(this.element[0],draggable.currentItem||draggable.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",event,this.ui(draggable)),this.element):!1},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}}),$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return!1;var x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case"fit":return l<=x1&&x2<=r&&t<=y1&&y2<=b;case"intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case"pointer":var draggableLeft=(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left,draggableTop=(draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top,isOver=$.ui.isOver(draggableTop,draggableLeft,t,l,droppable.proportions.height,droppable.proportions.width);return isOver;case"touch":return(y1>=t&&y1<=b||y2>=t&&y2<=b||y1<t&&y2>b)&&(x1>=l&&x1<=r||x2>=l&&x2<=r||x1<l&&x2>r);default:return!1}},$.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,event){var m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var i=0;i<m.length;i++){if(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))continue;for(var j=0;j<list.length;j++)if(list[j]==m[i].element[0]){m[i].proportions.height=0;continue e}m[i].visible=m[i].element.css("display")!="none";if(!m[i].visible)continue;type=="mousedown"&&m[i]._activate.call(m[i],event),m[i].offset=m[i].element.offset(),m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight}}},drop:function(draggable,event){var dropped=!1;return $.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance)&&(dropped=this._drop.call(this,event)||dropped),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,event))}),dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){draggable.options.refreshPositions&&$.ui.ddmanager.prepareOffsets(draggable,event),$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=!intersects&&this.isover==1?"isout":intersects&&this.isover==0?"isover":null;if(!c)return;var parentInstance;if(this.options.greedy){var parent=this.element.parents(":data(droppable):eq(0)");parent.length&&(parentInstance=$.data(parent[0],"droppable"),parentInstance.greedyChild=c=="isover"?1:0)}parentInstance&&c=="isover"&&(parentInstance.isover=0,parentInstance.isout=1,parentInstance._out.call(parentInstance,event)),this[c]=1,this[c=="isout"?"isover":"isout"]=0,this[c=="isover"?"_over":"_out"].call(this,event),parentInstance&&c=="isout"&&(parentInstance.isout=0,parentInstance.isover=1,parentInstance._over.call(parentInstance,event))})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable"),draggable.options.refreshPositions||$.ui.ddmanager.prepareOffsets(draggable,event)}}}(jQuery),function($,undefined){$.widget("ui.resizable",$.ui.mouse,{version:"1.9.0-beta.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var that=this,o=this.options;this.element.addClass("ui-resizable"),$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap($('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=o.handles||($(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var n=this.handles.split(",");this.handles={};for(var i=0;i<n.length;i++){var handle=$.trim(n[i]),hname="ui-resizable-"+handle,axis=$('<div class="ui-resizable-handle '+hname+'"></div>');axis.css({zIndex:o.zIndex}),"se"==handle&&axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[handle]=".ui-resizable-"+handle,this.element.append(axis)}}this._renderAxis=function(target){target=target||this.element;for(var i in this.handles){this.handles[i].constructor==String&&(this.handles[i]=$(this.handles[i],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var axis=$(this.handles[i],this.element),padWrapper=0;padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();var padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");target.css(padPos,padWrapper),this._proportionallyResize()}if(!$(this.handles[i]).length)continue}},this._renderAxis(this.element),this._handles=$(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!that.resizing){if(this.className)var axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);that.axis=axis&&axis[1]?axis[1]:"se"}}),o.autoHide&&(this._handles.hide(),$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled)return;$(this).removeClass("ui-resizable-autohide"),that._handles.show()}).mouseleave(function(){if(o.disabled)return;that.resizing||($(this).addClass("ui-resizable-autohide"),that._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var _destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){_destroy(this.element);var wrapper=this.element;wrapper.after(this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),_destroy(this.originalElement),this},_mouseCapture:function(event){var handle=!1;for(var i in this.handles)$(this.handles[i])[0]==event.target&&(handle=!0);return!this.options.disabled&&handle},_mouseStart:function(event){var o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=!0,this.documentScroll={top:$(document).scrollTop(),left:$(document).scrollLeft()},(el.is(".ui-draggable")||/absolute/.test(el.css("position")))&&el.css({position:"absolute",top:iniPos.top,left:iniPos.left}),this._renderProxy();var curleft=num(this.helper.css("left")),curtop=num(this.helper.css("top"));o.containment&&(curleft+=$(o.containment).scrollLeft()||0,curtop+=$(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:curleft,top:curtop},this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()},this.originalPosition={left:curleft,top:curtop},this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()},this.originalMousePosition={left:event.pageX,top:event.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;var cursor=$(".ui-resizable-"+this.axis).css("cursor");return $("body").css("cursor",cursor=="auto"?this.axis+"-resize":cursor),el.addClass("ui-resizable-resizing"),this._propagate("start",event),!0},_mouseDrag:function(event){var el=this.helper,o=this.options,props={},that=this,smp=this.originalMousePosition,a=this.axis,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];if(!trigger)return!1;var data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey)data=this._updateRatio(data,event);return data=this._respectSize(data,event),this._propagate("resize",event),el.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(data),this._trigger("resize",event,this.ui()),!1},_mouseStop:function(event){this.resizing=!1;var o=this.options,that=this;if(this._helper){var pr=this._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;o.animate||this.element.css($.extend(s,{top:top,left:left})),that.helper.height(that.size.height),that.helper.width(that.size.width),this._helper&&!o.animate&&this._proportionallyResize()}return $("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",event),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(forceAspectRatio){var o=this.options,pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio)pMinWidth=b.minHeight*this.aspectRatio,pMinHeight=b.minWidth/this.aspectRatio,pMaxWidth=b.maxHeight*this.aspectRatio,pMaxHeight=b.maxWidth/this.aspectRatio,pMinWidth>b.minWidth&&(b.minWidth=pMinWidth),pMinHeight>b.minHeight&&(b.minHeight=pMinHeight),pMaxWidth<b.maxWidth&&(b.maxWidth=pMaxWidth),pMaxHeight<b.maxHeight&&(b.maxHeight=pMaxHeight);this._vBoundaries=b},_updateCache:function(data){var o=this.options;this.offset=this.helper.offset(),isNumber(data.left)&&(this.position.left=data.left),isNumber(data.top)&&(this.position.top=data.top),isNumber(data.height)&&(this.size.height=data.height),isNumber(data.width)&&(this.size.width=data.width)},_updateRatio:function(data,event){var o=this.options,cpos=this.position,csize=this.size,a=this.axis;return isNumber(data.height)?data.width=data.height*this.aspectRatio:isNumber(data.width)&&(data.height=data.width/this.aspectRatio),a=="sw"&&(data.left=cpos.left+(csize.width-data.width),data.top=null),a=="nw"&&(data.top=cpos.top+(csize.height-data.height),data.left=cpos.left+(csize.width-data.width)),data},_respectSize:function(data,event){var el=this.helper,o=this._vBoundaries,pRatio=this._aspectRatio||event.shiftKey,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height;isminw&&(data.width=o.minWidth),isminh&&(data.height=o.minHeight),ismaxw&&(data.width=o.maxWidth),ismaxh&&(data.height=o.maxHeight);var dw=this.originalPosition.left+this.originalSize.width,dh=this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);isminw&&cw&&(data.left=dw-o.minWidth),ismaxw&&cw&&(data.left=dw-o.maxWidth),isminh&&ch&&(data.top=dh-o.minHeight),ismaxh&&ch&&(data.top=dh-o.maxHeight);var isNotwh=!data.width&&!data.height;return isNotwh&&!data.left&&data.top?data.top=null:isNotwh&&!data.top&&data.left&&(data.left=null),data},_proportionallyResize:function(){var o=this.options;if(!this._proportionallyResizeElements.length)return;var element=this.helper||this.element;for(var i=0;i<this._proportionallyResizeElements.length;i++){var prel=this._proportionallyResizeElements[i];if(!this.borderDif){var b=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")],p=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];this.borderDif=$.map(b,function(v,i){var border=parseInt(v,10)||0,padding=parseInt(p[i],10)||0;return border+padding})}prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$('<div style="overflow:hidden;"></div>');var ie6=$.browser.msie&&$.browser.version<7,ie6offset=ie6?1:0,pxyoffset=ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+pxyoffset,height:this.element.outerHeight()+pxyoffset,position:"absolute",left:this.elementOffset.left-ie6offset+"px",top:this.elementOffset.top-ie6offset+"px",zIndex:++o.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(event,dx,dy){return{width:this.originalSize.width+dx}},w:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var o=this.options,cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]),n!="resize"&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),$.ui.plugin.add("resizable","alsoResize",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};typeof o.alsoResize=="object"&&!o.alsoResize.parentNode?o.alsoResize.length?(o.alsoResize=o.alsoResize[0],_store(o.alsoResize)):$.each(o.alsoResize,function(exp){_store(exp)}):_store(o.alsoResize)},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width","height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);sum&&sum>=0&&(style[prop]=sum||null)}),el.css(style)})};typeof o.alsoResize=="object"&&!o.alsoResize.nodeType?$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)}):_alsoResize(o.alsoResize)},stop:function(event,ui){$(this).removeData("resizable-alsoresize")}}),$.ui.plugin.add("resizable","animate",{stop:function(event,ui){var that=$(this).data("resizable"),o=that.options,pr=that._proportionallyResizeElements,ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};pr&&pr.length&&$(pr[0]).css({width:data.width,height:data.height}),that._updateCache(data),that._propagate("resize",event)}})}}),$.ui.plugin.add("resizable","containment",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;if(!ce)return;that.containerElement=$(ce);if(/document/.test(oc)||oc==document)that.containerOffset={left:0,top:0},that.containerPosition={left:0,top:0},that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight};else{var element=$(ce),p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+name))}),that.containerOffset=element.offset(),that.containerPosition=element.position(),that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]};var co=that.containerOffset,ch=that.containerSize.height,cw=that.containerSize.width,width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw,height=$.ui.hasScroll(ce)?ce.scrollHeight:ch;that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}}},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,ps=that.containerSize,co=that.containerOffset,cs=that.size,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;ce[0]!=document&&/static/.test(ce.css("position"))&&(cop=co),cp.left<(that._helper?co.left:0)&&(that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left),pRatio&&(that.size.height=that.size.width/that.aspectRatio),that.position.left=o.helper?co.left:0),cp.top<(that._helper?co.top:0)&&(that.size.height=that.size.height+(that._helper?that.position.top-co.top:that.position.top),pRatio&&(that.size.width=that.size.height*that.aspectRatio),that.position.top=that._helper?co.top:0),that.offset.left=that.parentData.left+that.position.left,that.offset.top=that.parentData.top+that.position.top;var woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width),hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-co.top)+that.sizeDiff.height),isParent=that.containerElement.get(0)==that.element.parent().get(0),isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));isParent&&isOffsetRelative&&(woset-=that.parentData.left),woset+that.size.width>=that.parentData.width&&(that.size.width=that.parentData.width-woset,pRatio&&(that.size.height=that.size.width/that.aspectRatio)),hoset+that.size.height>=that.parentData.height&&(that.size.height=that.parentData.height-hoset,pRatio&&(that.size.width=that.size.height*that.aspectRatio))},stop:function(event,ui){var that=$(this).data("resizable"),o=that.options,cp=that.position,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;that._helper&&!o.animate&&/relative/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h}),that._helper&&!o.animate&&/static/.test(ce.css("position"))&&$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}}),$.ui.plugin.add("resizable","ghost",{start:function(event,ui){var that=$(this).data("resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone(),that.ghost.css({opacity:.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost=="string"?o.ghost:""),that.ghost.appendTo(that.helper)},resize:function(event,ui){var that=$(this).data("resizable"),o=that.options;that.ghost&&that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(event,ui){var that=$(this).data("resizable"),o=that.options;that.ghost&&that.helper&&that.helper.get(0).removeChild(that.ghost.get(0))}}),$.ui.plugin.add("resizable","grid",{resize:function(event,ui){var that=$(this).data("resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,ratio=o._aspectRatio||event.shiftKey;o.grid=typeof o.grid=="number"?[o.grid,o.grid]:o.grid;var ox=Math.round((cs.width-os.width)/(o.grid[0]||1))*(o.grid[0]||1),oy=Math.round((cs.height-os.height)/(o.grid[1]||1))*(o.grid[1]||1);/^(se|s|e)$/.test(a)?(that.size.width=os.width+ox,that.size.height=os.height+oy):/^(ne)$/.test(a)?(that.size.width=os.width+ox,that.size.height=os.height+oy,that.position.top=op.top-oy):/^(sw)$/.test(a)?(that.size.width=os.width+ox,that.size.height=os.height+oy,that.position.left=op.left-ox):(that.size.width=os.width+ox,that.size.height=os.height+oy,that.position.top=op.top-oy,that.position.left=op.left-ox)}});var num=function(v){return parseInt(v,10)||0},isNumber=function(value){return!isNaN(parseInt(value,10))}}(jQuery),function($,undefined){$.widget("ui.selectable",$.ui.mouse,{version:"1.9.0-beta.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var that=this;this.element.addClass("ui-selectable"),this.dragged=!1;var selectees;this.refresh=function(){selectees=$(that.options.filter,that.element[0]),selectees.addClass("ui-selectee"),selectees.each(function(){var $this=$(this),pos=$this.offset();$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:!1,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=selectees.addClass("ui-selectee"),this._mouseInit(),this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(event){var that=this;this.opos=[event.pageX,event.pageY];if(this.options.disabled)return;var options=this.options;this.selectees=$(options.filter,this.element[0]),this._trigger("start",event),$(options.appendTo).append(this.helper),this.helper.css({left:event.clientX,top:event.clientY,width:0,height:0}),options.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var selectee=$.data(this,"selectable-item");selectee.startselected=!0,!event.metaKey&&!event.ctrlKey&&(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element}))}),$(event.target).parents().andSelf().each(function(){var selectee=$.data(this,"selectable-item");if(selectee){var doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected");return selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting"),selectee.unselecting=!doSelect,selectee.selecting=doSelect,selectee.selected=doSelect,doSelect?that._trigger("selecting",event,{selecting:selectee.element}):that._trigger("unselecting",event,{unselecting:selectee.element}),!1}})},_mouseDrag:function(event){var that=this;this.dragged=!0;if(this.options.disabled)return;var options=this.options,x1=this.opos[0],y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){var tmp=x2;x2=x1,x1=tmp}if(y1>y2){var tmp=y2;y2=y1,y1=tmp}return this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1}),this.selectees.each(function(){var selectee=$.data(this,"selectable-item");if(!selectee||selectee.element==that.element[0])return;var hit=!1;options.tolerance=="touch"?hit=!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1):options.tolerance=="fit"&&(hit=selectee.left>x1&&selectee.right<x2&&selectee.top>y1&&selectee.bottom<y2),hit?(selectee.selected&&(selectee.$element.removeClass("ui-selected"),selectee.selected=!1),selectee.unselecting&&(selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1),selectee.selecting||(selectee.$element.addClass("ui-selecting"),selectee.selecting=!0,that._trigger("selecting",event,{selecting:selectee.element}))):(selectee.selecting&&((event.metaKey||event.ctrlKey)&&selectee.startselected?(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.$element.addClass("ui-selected"),selectee.selected=!0):(selectee.$element.removeClass("ui-selecting"),selectee.selecting=!1,selectee.startselected&&(selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0),that._trigger("unselecting",event,{unselecting:selectee.element}))),selectee.selected&&!event.metaKey&&!event.ctrlKey&&!selectee.startselected&&(selectee.$element.removeClass("ui-selected"),selectee.selected=!1,selectee.$element.addClass("ui-unselecting"),selectee.unselecting=!0,that._trigger("unselecting",event,{unselecting:selectee.element})))}),!1},_mouseStop:function(event){var that=this;this.dragged=!1;var options=this.options;return $(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting"),selectee.unselecting=!1,selectee.startselected=!1,that._trigger("unselected",event,{unselected:selectee.element})}),$(".ui-selecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected"),selectee.selecting=!1,selectee.selected=!0,selectee.startselected=!0,that._trigger("selected",event,{selected:selectee.element})}),this._trigger("stop",event),this.helper.remove(),!1}})}(jQuery),function($,undefined){$.widget("ui.sortable",$.ui.mouse,{version:"1.9.0-beta.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var o=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?o.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_setOption:function(key,value){key==="disabled"?(this.options[key]=value,this.widget().toggleClass("ui-sortable-disabled",!!value)):$.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(event,overrideHandle){var that=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(event);var currentItem=null,nodes=$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")==that)return currentItem=$(this),!1});$.data(event.target,that.widgetName+"-item")==that&&(currentItem=$(event.target));if(!currentItem)return!1;if(this.options.handle&&!overrideHandle){var validHandle=!1;$(this.options.handle,currentItem).find("*").andSelf().each(function(){this==event.target&&(validHandle=!0)});if(!validHandle)return!1}return this.currentItem=currentItem,this._removeCurrentsFromItems(),!0},_mouseStart:function(event,overrideHandle,noActivation){var o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(event),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(event),this.originalPageX=event.pageX,this.originalPageY=event.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&($("body").css("cursor")&&(this._storedCursor=$("body").css("cursor")),$("body").css("cursor",o.cursor)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",event,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!noActivation)for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));return $.ui.ddmanager&&($.ui.ddmanager.current=this),$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(event),!0},_mouseDrag:function(event){this.position=this._generatePosition(event),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var o=this.options,scrolled=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed:event.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed:event.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(event.pageY-$(document).scrollTop()<o.scrollSensitivity?scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed):$(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity&&(scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed)),event.pageX-$(document).scrollLeft()<o.scrollSensitivity?scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed):$(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity&&(scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed))),scrolled!==!1&&$.ui.ddmanager&&!o.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,event)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var item=this.items[i],itemElement=item.item[0],intersection=this._intersectsWithPointer(item);if(!intersection)continue;if(itemElement!=this.currentItem[0]&&this.placeholder[intersection==1?"next":"prev"]()[0]!=itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type=="semi-dynamic"?!$.contains(this.element[0],itemElement):!0)){this.direction=intersection==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(item))break;this._rearrange(event,item),this._trigger("change",event,this._uiHash());break}}return this._contactContainers(event),$.ui.ddmanager&&$.ui.ddmanager.drag(this,event),this._trigger("sort",event,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(event,noPropagation){if(!event)return;$.ui.ddmanager&&!this.options.dropBehaviour&&$.ui.ddmanager.drop(this,event);if(this.options.revert){var that=this,cur=this.placeholder.offset();this.reverting=!0,$(this.helper).animate({left:cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,this._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,this._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),$.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?$(this.domPosition.prev).after(this.currentItem):$(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];return o=o||{},$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[-=_](.+)/);res&&str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))}),!str.length&&o.key&&str.push(o.key+"="),str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];return o=o||{},items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")}),ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElement=y1+dyClick>t&&y1+dyClick<b&&x1+dxClick>l&&x1+dxClick<r;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"]?isOverElement:l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight=this.options.axis==="x"||$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=this.options.axis==="y"||$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return isOverElement?this.floating?horizontalDirection&&horizontalDirection=="right"||verticalDirection=="down"?2:1:verticalDirection&&(verticalDirection=="down"?2:1):!1},_intersectsWithSides:function(item){var isOverBottomHalf=$.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=$.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();return this.floating&&horizontalDirection?horizontalDirection=="right"&&isOverRightHalf||horizontalDirection=="left"&&!isOverRightHalf:verticalDirection&&(verticalDirection=="down"&&isOverBottomHalf||verticalDirection=="up"&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!=0&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!=0&&(delta>0?"right":"left")},refresh:function(event){return this._refreshItems(event),this.refreshPositions(),this},_connectWith:function(){var options=this.options;return options.connectWith.constructor==String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);inst&&inst!=this&&!inst.options.disabled&&queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst])}}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var i=queries.length-1;i>=0;i--)queries[i][0].each(function(){items.push(this)});return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+this.widgetName+"-item)");for(var i=0;i<this.items.length;i++)for(var j=0;j<list.length;j++)list[j]==this.items[i].item[0]&&this.items.splice(i,1)},_refreshItems:function(event){this.items=[],this.containers=[this];var items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(var i=connectWith.length-1;i>=0;i--){var cur=$(connectWith[i]);for(var j=cur.length-1;j>=0;j--){var inst=$.data(cur[j],this.widgetName);inst&&inst!=this&&!inst.options.disabled&&(queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]),this.containers.push(inst))}}for(var i=queries.length-1;i>=0;i--){var targetData=queries[i][1],_queries=queries[i][0];for(var j=0,queriesLength=_queries.length;j<queriesLength;j++){var item=$(_queries[j]);item.data(this.widgetName+"-item",targetData),items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})}}},refreshPositions:function(fast){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var item=this.items[i];if(item.instance!=this.currentContainer&&this.currentContainer&&item.item[0]!=this.currentItem[0])continue;var t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):item.item;fast||(item.width=t.outerWidth(),item.height=t.outerHeight());var p=t.offset();item.left=p.left,item.top=p.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left,this.containers[i].containerCache.top=p.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(that){that=that||this;var o=that.options;if(!o.placeholder||o.placeholder.constructor==String){var className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(that.currentItem[0].nodeName)).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return className||(el.style.visibility="hidden"),el},update:function(container,p){if(className&&!o.forcePlaceholderSize)return;p.height()||p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10)),p.width()||p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10))}}}that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem)),that.currentItem.after(that.placeholder),o.placeholder.update(that,that.placeholder)},_contactContainers:function(event){var innermostContainer=null,innermostIndex=null;for(var i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i],innermostIndex=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",event,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!innermostContainer)return;if(this.containers.length===1)this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1;else if(this.currentContainer!=this.containers[innermostIndex]){var dist=1e4,itemWithLeastDistance=null,base=this.positionAbs[this.containers[innermostIndex].floating?"left":"top"];for(var j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0]))continue;var cur=this.containers[innermostIndex].floating?this.items[j].item.offset().left:this.items[j].item.offset().top;Math.abs(cur-base)<dist&&(dist=Math.abs(cur-base),itemWithLeastDistance=this.items[j],this.direction=cur-base>0?"down":"up")}if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[innermostIndex],itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,!0):this._rearrange(event,null,this.containers[innermostIndex].element,!0),this._trigger("change",event,this._uiHash()),this.containers[innermostIndex]._trigger("change",event,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[innermostIndex]._trigger("over",event,this._uiHash(this)),this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):o.helper=="clone"?this.currentItem.clone():this.currentItem;return helper.parents("body").length||$(o.appendTo!="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]),helper[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(helper[0].style.width==""||o.forceHelperSize)&&helper.width(this.currentItem.width()),(helper[0].style.height==""||o.forceHelperSize)&&helper.height(this.currentItem.height()),helper},_adjustOffsetFromHelper:function(obj){typeof obj=="string"&&(obj=obj.split(" ")),$.isArray(obj)&&(obj={left:+obj[0],top:+obj[1]||0}),"left"in obj&&(this.offset.click.left=obj.left+this.margins.left),"right"in obj&&(this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left),"top"in obj&&(this.offset.click.top=obj.top+this.margins.top),"bottom"in obj&&(this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&$.contains(this.scrollParent[0],this.offsetParent[0])&&(po.left+=this.scrollParent.scrollLeft(),po.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&$.browser.msie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var p=this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var o=this.options;o.containment=="parent"&&(o.containment=this.helper[0].parentNode);if(o.containment=="document"||o.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)){var ce=$(o.containment)[0],co=$(o.containment).offset(),over=$(ce).css("overflow")!="hidden";this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,pos){pos||(pos=this.position);var mod=d=="absolute"?1:-1,o=this.options,scroll=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var o=this.options,scroll=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!$.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var pageX=event.pageX,pageY=event.pageY;if(this.originalPosition){this.containment&&(event.pageX-this.offset.click.left<this.containment[0]&&(pageX=this.containment[0]+this.offset.click.left),event.pageY-this.offset.click.top<this.containment[1]&&(pageY=this.containment[1]+this.offset.click.top),event.pageX-this.offset.click.left>this.containment[2]&&(pageX=this.containment[2]+this.offset.click.left),event.pageY-this.offset.click.top>this.containment[3]&&(pageY=this.containment[3]+this.offset.click.top));if(o.grid){var top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?top-this.offset.click.top<this.containment[1]||top-this.offset.click.top>this.containment[3]?top-this.offset.click.top<this.containment[1]?top+o.grid[1]:top-o.grid[1]:top:top;var left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?left-this.offset.click.left<this.containment[0]||left-this.offset.click.left>this.containment[2]?left-this.offset.click.left<this.containment[0]?left+o.grid[0]:left-o.grid[0]:left:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?i.item[0]:i.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){counter==this.counter&&this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=!1;var delayedTriggers=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)if(this._storedCSS[i]=="auto"||this._storedCSS[i]=="static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!noPropagation&&delayedTriggers.push(function(event){this._trigger("update",event,this._uiHash())});if(!$.contains(this.element[0],this.currentItem[0])){noPropagation||delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())});for(var i=this.containers.length-1;i>=0;i--)$.contains(this.containers[i].element[0],this.currentItem[0])&&!noPropagation&&(delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.containers[i])),delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.containers[i])))}for(var i=this.containers.length-1;i>=0;i--)noPropagation||delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(delayedTriggers.push(function(c){return function(event){c._trigger("out",event,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);this._storedCursor&&$("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(var i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return!1}noPropagation||this._trigger("beforeStop",event,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!noPropagation){for(var i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){$.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})}(jQuery),jQuery.effects||function($,undefined){var backCompat=$.uiBackCompat!==!1,dataSpace="ui-effects-";$.effects={effect:{}},function(jQuery,undefined){function clamp(value,prop,alwaysAllowEmpty){var type=propTypes[prop.type]||{},allowEmpty=alwaysAllowEmpty||prop.empty;return allowEmpty&&value==null?null:prop.def&&value==null?prop.def:(type.floor?value=~~value:value=parseFloat(value),value==null||isNaN(value)?prop.def:type.mod?(value%=type.mod,value<0?type.mod+value:value):type.min>value?type.min:type.max<value?type.max:value)}function stringParse(string){var inst=color(),rgba=inst._rgba=[];return string=string.toLowerCase(),each(stringParsers,function(i,parser){var match=parser.re.exec(string),values=match&&parser.parse(match),parsed,spaceName=parser.space||"rgba",cache=spaces[spaceName].cache;if(values)return parsed=inst[spaceName](values),inst[cache]=parsed[cache],rgba=inst._rgba=parsed._rgba,!1}),rgba.length!==0?(Math.max.apply(Math,rgba)===0&&jQuery.extend(rgba,colors.transparent),inst):colors[string]}function hue2rgb(p,q,h){return h=(h+1)%1,h*6<1?p+(q-p)*6*h:h*2<1?q:h*3<2?p+(q-p)*(2/3-h)*6:p}var stepHooks="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),rplusequals=/^([\-+])=\s*(\d+\.?\d*)/,stringParsers=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[execResult[1],execResult[2],execResult[3],execResult[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(execResult){return[2.55*execResult[1],2.55*execResult[2],2.55*execResult[3],execResult[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(execResult){return[parseInt(execResult[1],16),parseInt(execResult[2],16),parseInt(execResult[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(execResult){return[parseInt(execResult[1]+execResult[1],16),parseInt(execResult[2]+execResult[2],16),parseInt(execResult[3]+execResult[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(execResult){return[execResult[1],execResult[2]/100,execResult[3]/100,execResult[4]]}}],color=jQuery.Color=function(color,green,blue,alpha){return new jQuery.Color.fn.parse(color,green,blue,alpha)},spaces={rgba:{cache:"_rgba",props:{red:{idx:0,type:"byte",empty:!0},green:{idx:1,type:"byte",empty:!0},blue:{idx:2,type:"byte",empty:!0},alpha:{idx:3,type:"percent",def:1}}},hsla:{cache:"_hsla",props:{hue:{idx:0,type:"degrees",empty:!0},saturation:{idx:1,type:"percent",empty:!0},lightness:{idx:2,type:"percent",empty:!0}}}},propTypes={"byte":{floor:!0,min:0,max:255},percent:{min:0,max:1},degrees:{mod:360,floor:!0}},support=color.support={},colors,each=jQuery.each;spaces.hsla.props.alpha=spaces.rgba.props.alpha,color.fn=jQuery.extend(color.prototype,{parse:function(red,green,blue,alpha){if(red===undefined)return this._rgba=[null,null,null,null],this;if(red.jquery||red.nodeType)red=jQuery(red).css(green),green=undefined;var inst=this,type=jQuery.type(red),rgba=this._rgba=[],source;green!==undefined&&(red=[red,green,blue,alpha],type="array");if(type==="string")return this.parse(stringParse(red)||colors._default);if(type==="array")return each(spaces.rgba.props,function(key,prop){rgba[prop.idx]=clamp(red[prop.idx],prop)}),this;if(type==="object")return red instanceof color?each(spaces,function(spaceName,space){red[space.cache]&&(inst[space.cache]=red[space.cache].slice())}):each(spaces,function(spaceName,space){each(space.props,function(key,prop){var cache=space.cache;if(!inst[cache]&&space.to){if(red[key]==null||key==="alpha")return;inst[cache]=space.to(inst._rgba)}inst[cache][prop.idx]=clamp(red[key],prop,!0)})}),this},is:function(compare){var is=color(compare),same=!0,myself=this;return each(spaces,function(_,space){var isCache=is[space.cache],localCache;return isCache&&(localCache=myself[space.cache]||space.to&&space.to(myself._rgba)||[],each(space.props,function(_,prop){if(isCache[prop.idx]!=null)return same=isCache[prop.idx]===localCache[prop.idx],same})),same}),same},_space:function(){var used=[],inst=this;return each(spaces,function(spaceName,space){inst[space.cache]&&used.push(spaceName)}),used.pop()},transition:function(other,distance){var end=color(other),spaceName=end._space(),space=spaces[spaceName],start=this[space.cache]||space.to(this._rgba),result=start.slice();return end=end[space.cache],each(space.props,function(key,prop){var index=prop.idx,startValue=start[index],endValue=end[index],type=propTypes[prop.type]||{};if(endValue===null)return;startValue===null?result[index]=endValue:(type.mod&&(endValue-startValue>type.mod/2?startValue+=type.mod:startValue-endValue>type.mod/2&&(startValue-=type.mod)),result[prop.idx]=clamp((endValue-startValue)*distance+startValue,prop))}),this[spaceName](result)},blend:function(opaque){if(this._rgba[3]===1)return this;var rgb=this._rgba.slice(),a=rgb.pop(),blend=color(opaque)._rgba;return color(jQuery.map(rgb,function(v,i){return(1-a)*blend[i]+a*v}))},toRgbaString:function(){var prefix="rgba(",rgba=jQuery.map(this._rgba,function(v,i){return v==null?i>2?1:0:v});return rgba[3]===1&&(rgba.pop(),prefix="rgb("),prefix+rgba.join(",")+")"},toHslaString:function(){var prefix="hsla(",hsla=jQuery.map(this.hsla(),function(v,i){return v==null&&(v=i>2?1:0),i&&i<3&&(v=Math.round(v*100)+"%"),v});return hsla[3]===1&&(hsla.pop(),prefix="hsl("),prefix+hsla.join(",")+")"},toHexString:function(includeAlpha){var rgba=this._rgba.slice(),alpha=rgba.pop();return includeAlpha&&rgba.push(~~(alpha*255)),"#"+jQuery.map(rgba,function(v,i){return v=(v||0).toString(16),v.length===1?"0"+v:v}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),color.fn.parse.prototype=color.fn,spaces.hsla.to=function(rgba){if(rgba[0]==null||rgba[1]==null||rgba[2]==null)return[null,null,null,rgba[3]];var r=rgba[0]/255,g=rgba[1]/255,b=rgba[2]/255,a=rgba[3],max=Math.max(r,g,b),min=Math.min(r,g,b),diff=max-min,add=max+min,l=add*.5,h,s;return min===max?h=0:r===max?h=60*(g-b)/diff+360:g===max?h=60*(b-r)/diff+120:h=60*(r-g)/diff+240,l===0||l===1?s=l:l<=.5?s=diff/add:s=diff/(2-add),[Math.round(h)%360,s,l,a==null?1:a]},spaces.hsla.from=function(hsla){if(hsla[0]==null||hsla[1]==null||hsla[2]==null)return[null,null,null,hsla[3]];var h=hsla[0]/360,s=hsla[1],l=hsla[2],a=hsla[3],q=l<=.5?l*(1+s):l+s-l*s,p=2*l-q,r,g,b;return[Math.round(hue2rgb(p,q,h+1/3)*255),Math.round(hue2rgb(p,q,h)*255),Math.round(hue2rgb(p,q,h-1/3)*255),a]},each(spaces,function(spaceName,space){var props=space.props,cache=space.cache,to=space.to,from=space.from;color.fn[spaceName]=function(value){to&&!this[cache]&&(this[cache]=to(this._rgba));if(value===undefined)return this[cache].slice();var type=jQuery.type(value),arr=type==="array"||type==="object"?value:arguments,local=this[cache].slice(),ret;return each(props,function(key,prop){var val=arr[type==="object"?key:prop.idx];val==null&&(val=local[prop.idx]),local[prop.idx]=clamp(val,prop)}),from?(ret=color(from(local)),ret[cache]=local,ret):color(local)},each(props,function(key,prop){if(color.fn[key])return;color.fn[key]=function(value){var vtype=jQuery.type(value),fn=key==="alpha"?this._hsla?"hsla":"rgba":spaceName,local=this[fn](),cur=local[prop.idx],match;return vtype==="undefined"?cur:(vtype==="function"&&(value=value.call(this,cur),vtype=jQuery.type(value)),value==null&&prop.empty?this:(vtype==="string"&&(match=rplusequals.exec(value),match&&(value=cur+parseFloat(match[2])*(match[1]==="+"?1:-1))),local[prop.idx]=value,this[fn](local)))}})}),each(stepHooks,function(i,hook){jQuery.cssHooks[hook]={set:function(elem,value){var parsed,backgroundColor,curElem;if(jQuery.type(value)!=="string"||(parsed=stringParse(value))){value=color(parsed||value);if(!support.rgba&&value._rgba[3]!==1){curElem=hook==="backgroundColor"?elem.parentNode:elem;do backgroundColor=jQuery.curCSS(curElem,"backgroundColor");while((backgroundColor===""||backgroundColor==="transparent")&&(curElem=curElem.parentNode)&&curElem.style);value=value.blend(backgroundColor&&backgroundColor!=="transparent"?backgroundColor:"_default")}value=value.toRgbaString()}try{elem.style[hook]=value}catch(value){}}},jQuery.fx.step[hook]=function(fx){fx.colorInit||(fx.start=color(fx.elem,hook),fx.end=color(fx.end),fx.colorInit=!0),jQuery.cssHooks[hook].set(fx.elem,fx.start.transition(fx.end,fx.pos))}}),jQuery(function(){var div=document.createElement("div"),div_style=div.style;div_style.cssText="background-color:rgba(1,1,1,.5)",support.rgba=div_style.backgroundColor.indexOf("rgba")>-1}),colors=jQuery.Color.names={aqua:"#00ffff",azure:"#f0ffff",beige:"#f5f5dc",black:"#000000",blue:"#0000ff",brown:"#a52a2a",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkviolet:"#9400d3",fuchsia:"#ff00ff",gold:"#ffd700",green:"#008000",indigo:"#4b0082",khaki:"#f0e68c",lightblue:"#add8e6",lightcyan:"#e0ffff",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightyellow:"#ffffe0",lime:"#00ff00",magenta:"#ff00ff",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",violet:"#800080",red:"#ff0000",silver:"#c0c0c0",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function getElementStyles(){var style=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,newStyle={},key,camelCase,len;if(style&&style.length&&style[0]&&style[style[0]]){len=style.length;while(len--)key=style[len],typeof style[key]=="string"&&(newStyle[$.camelCase(key)]=style[key])}else for(key in style)typeof style[key]=="string"&&(newStyle[key]=style[key]);return newStyle}function styleDifference(oldStyle,newStyle){var diff={},name,value;for(name in newStyle)value=newStyle[name],oldStyle[name]!==value&&!shorthandStyles[name]&&($.fx.step[name]||!isNaN(parseFloat(value)))&&(diff[name]=value);return diff}var classAnimationActions=["add","remove","toggle"],shorthandStyles={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};$.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(_,prop){$.fx.step[prop]=function(fx){if(fx.end!=="none"&&!fx.setAttr||fx.pos===1&&!fx.setAttr)jQuery.style(fx.elem,prop,fx.end),fx.setAttr=!0}}),$.effects.animateClass=function(value,duration,easing,callback){var o=$.speed(duration,easing,callback);return this.queue(function(){var animated=$(this),baseClass=animated.attr("class")||"",applyClassChange,allAnimations=o.children?animated.find("*").andSelf():animated;allAnimations=allAnimations.map(function(){var el=$(this);return{el:el,start:getElementStyles.call(this)}}),applyClassChange=function(){$.each(classAnimationActions,function(i,action){value[action]&&animated[action+"Class"](value[action])})},applyClassChange(),allAnimations=allAnimations.map(function(){return this.end=getElementStyles.call(this.el[0]),this.diff=styleDifference(this.start,this.end),this}),animated.attr("class",baseClass),allAnimations=allAnimations.map(function(){var styleInfo=this,dfd=$.Deferred(),opts=jQuery.extend({},o,{queue:!1,complete:function(){dfd.resolve(styleInfo)}});return this.el.animate(this.diff,opts),dfd.promise()}),$.when.apply($,allAnimations.get()).done(function(){applyClassChange(),$.each(arguments,function(){var el=this.el;$.each(this.diff,function(key){el.css(key,"")})}),o.complete.call(animated[0])})})},$.fn.extend({_addClass:$.fn.addClass,addClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{add:classNames},speed,easing,callback]):this._addClass(classNames)},_removeClass:$.fn.removeClass,removeClass:function(classNames,speed,easing,callback){return speed?$.effects.animateClass.apply(this,[{remove:classNames},speed,easing,callback]):this._removeClass(classNames)},_toggleClass:$.fn.toggleClass,toggleClass:function(classNames,force,speed,easing,callback){return typeof force=="boolean"||force===undefined?speed?$.effects.animateClass.apply(this,[force?{add:classNames}:{remove:classNames},speed,easing,callback]):this._toggleClass(classNames,force):$.effects.animateClass.apply(this,[{toggle:classNames},force,speed,easing])},switchClass:function(remove,add,speed,easing,callback){return $.effects.animateClass.apply(this,[{add:add,remove:remove},speed,easing,callback])}})}(),function(){function _normalizeArguments(effect,options,speed,callback){$.isPlainObject(effect)&&(options=effect,effect=effect.effect),effect={effect:effect},options===undefined&&(options={}),$.isFunction(options)&&(callback=options,speed=null,options={});if(typeof options=="number"||$.fx.speeds[options])callback=speed,speed=options,options={};return $.isFunction(speed)&&(callback=speed,speed=null),options&&$.extend(effect,options),speed=speed||options.duration,effect.duration=$.fx.off?0:typeof speed=="number"?speed:speed in $.fx.speeds?$.fx.speeds[speed]:$.fx.speeds._default,effect.complete=callback||options.complete,effect}function standardSpeed(speed){return!speed||typeof speed=="number"||$.fx.speeds[speed]?!0:typeof speed=="string"&&!$.effects.effect[speed]?backCompat&&$.effects[speed]?!1:!0:!1}$.extend($.effects,{version:"1.9.0-beta.1",save:function(element,set){for(var i=0;i<set.length;i++)set[i]!==null&&element.data(dataSpace+set[i],element[0].style[set[i]])},restore:function(element,set){for(var i=0;i<set.length;i++)set[i]!==null&&element.css(set[i],element.data(dataSpace+set[i]))},setMode:function(el,mode){return mode==="toggle"&&(mode=el.is(":hidden")?"show":"hide"),mode},getBaseline:function(origin,original){var y,x;switch(origin[0]){case"top":y=0;break;case"middle":y=.5;break;case"bottom":y=1;break;default:y=origin[0]/original.height}switch(origin[1]){case"left":x=0;break;case"center":x=.5;break;case"right":x=1;break;default:x=origin[1]/original.width}return{x:x,y:y}},createWrapper:function(element){if(element.parent().is(".ui-effects-wrapper"))return element.parent();var props={width:element.outerWidth(!0),height:element.outerHeight(!0),"float":element.css("float")},wrapper=$("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),size={width:element.width(),height:element.height()},active=document.activeElement;try{active.id}catch(e){active=document.body}return element.wrap(wrapper),(element[0]===active||$.contains(element[0],active))&&$(active).focus(),wrapper=element.parent(),element.css("position")==="static"?(wrapper.css({position:"relative"}),element.css({position:"relative"})):($.extend(props,{position:element.css("position"),zIndex:element.css("z-index")}),$.each(["top","left","bottom","right"],function(i,pos){props[pos]=element.css(pos),isNaN(parseInt(props[pos],10))&&(props[pos]="auto")}),element.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),element.css(size),wrapper.css(props).show()},removeWrapper:function(element){var active=document.activeElement;return element.parent().is(".ui-effects-wrapper")&&(element.parent().replaceWith(element),(element[0]===active||$.contains(element[0],active))&&$(active).focus()),element},setTransition:function(element,list,factor,value){return value=value||{},$.each(list,function(i,x){var unit=element.cssUnit(x);unit[0]>0&&(value[x]=unit[0]*factor+unit[1])}),value}}),$.fn.extend({effect:function(effect,options,speed,callback){function run(next){function done(){$.isFunction(complete)&&complete.call(elem[0]),$.isFunction(next)&&next()}var elem=$(this),complete=args.complete,mode=args.mode;(elem.is(":hidden")?mode==="hide":mode==="show")?done():effectMethod.call(elem[0],args,done)}var args=_normalizeArguments.apply(this,arguments),mode=args.mode,queue=args.queue,effectMethod=$.effects.effect[args.effect],oldEffectMethod=!effectMethod&&backCompat&&$.effects[args.effect];return $.fx.off||!effectMethod&&!oldEffectMethod?mode?this[mode](args.duration,args.complete):this.each(function(){args.complete&&args.complete.call(this)}):effectMethod?queue===!1?this.each(run):this.queue(queue||"fx",run):oldEffectMethod.call(this,{options:args,duration:args.duration,callback:args.complete,mode:args.mode})},_show:$.fn.show,show:function(speed){if(standardSpeed(speed))return this._show.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="show",this.effect.call(this,args)},_hide:$.fn.hide,hide:function(speed){if(standardSpeed(speed))return this._hide.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="hide",this.effect.call(this,args)},__toggle:$.fn.toggle,toggle:function(speed){if(standardSpeed(speed)||typeof speed=="boolean"||$.isFunction(speed))return this.__toggle.apply(this,arguments);var args=_normalizeArguments.apply(this,arguments);return args.mode="toggle",this.effect.call(this,args)},cssUnit:function(key){var style=this.css(key),val=[];return $.each(["em","px","%","pt"],function(i,unit){style.indexOf(unit)>0&&(val=[parseFloat(style),unit])}),val}})}(),function(){var baseEasings={};$.each(["Quad","Cubic","Quart","Quint","Expo"],function(i,name){baseEasings[name]=function(p){return Math.pow(p,i+2)}}),$.extend(baseEasings,{Sine:function(p){return 1-Math.cos(p*Math.PI/2)},Circ:function(p){return 1-Math.sqrt(1-p*p)},Elastic:function(p){return p===0||p===1?p:-Math.pow(2,8*(p-1))*Math.sin(((p-1)*80-7.5)*Math.PI/15)},Back:function(p){return p*p*(3*p-2)},Bounce:function(p){var pow2,bounce=4;while(p<((pow2=Math.pow(2,--bounce))-1)/11);return 1/Math.pow(4,3-bounce)-7.5625*Math.pow((pow2*3-2)/22-p,2)}}),$.each(baseEasings,function(name,easeIn){$.easing["easeIn"+name]=easeIn,$.easing["easeOut"+name]=function(p){return 1-easeIn(1-p)},$.easing["easeInOut"+name]=function(p){return p<.5?easeIn(p*2)/2:1-easeIn(p*-2+2)/2}})}()}(jQuery),function($,undefined){var uid=0,hideProps={},showProps={},showPropsAdjust={};hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=hideProps.borderTopWidth=hideProps.borderBottomWidth="hide",showProps.height=showProps.paddingTop=showProps.paddingBottom=showProps.borderTopWidth=showProps.borderBottomWidth="show",$.extend(showPropsAdjust,showProps,{accordionHeight:"show"}),$.fx.step.accordionHeight=function(fx){var elem=$(fx.elem),data=elem.data("ui-accordion-height");elem.height(data.total-elem.outerHeight()-data.toHide.outerHeight()+elem.height())},$.widget("ui.accordion",{version:"1.9.0-beta.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var accordionId=this.accordionId="ui-accordion-"+(this.element.attr("id")||++uid),options=this.options;this.prevShow=this.prevHide=$(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),!options.collapsible&&options.active===!1&&(options.active=0),options.active<0&&(options.active+=this.headers.length),this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.originalHeight=this.element[0].style.height,this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(i){var header=$(this),headerId=header.attr("id"),panel=header.next(),panelId=panel.attr("id");headerId||(headerId=accordionId+"-header-"+i,header.attr("id",headerId)),panelId||(panelId=accordionId+"-panel-"+i,panel.attr("id",panelId)),header.attr("aria-controls",panelId),panel.attr("aria-labelledby",headerId)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(options.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():$()}},_createIcons:function(){var icons=this.options.icons;icons&&($("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),contents=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&(this.element.css("height",this.originalHeight),contents.css("height",""))},_setOption:function(key,value){if(key==="active"){this._activate(value);return}key==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(value)),this._super(key,value),key==="collapsible"&&!value&&this.options.active===!1&&this._activate(0),key==="icons"&&(this._destroyIcons(),value&&this._createIcons()),key==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!value)},_keydown:function(event){if(event.altKey||event.ctrlKey)return;var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=!1;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];break;case keyCode.END:toFocus=this.headers[length-1]}toFocus&&($(event.target).attr("tabIndex",-1),$(toFocus).attr("tabIndex",0),toFocus.focus(),event.preventDefault())},_panelKeyDown:function(event){event.keyCode===$.ui.keyCode.UP&&event.ctrlKey&&$(event.currentTarget).prev().focus()},refresh:function(){var maxHeight,overflow,heightStyle=this.options.heightStyle,parent=this.element.parent();this.element.css("height",this.originalHeight),heightStyle==="fill"?($.support.minHeight||(overflow=parent.css("overflow"),parent.css("overflow","hidden")),maxHeight=parent.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed")return;maxHeight-=elem.outerHeight(!0)}),overflow&&parent.css("overflow",overflow),this.headers.each(function(){maxHeight-=$(this).outerHeight(!0)}),this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):heightStyle==="auto"&&(maxHeight=0,this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight)),heightStyle!=="content"&&this.element.height(this.element.height())},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0])return;active=active||this.active[0],this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop})},_findActive:function(selector){return typeof selector=="number"?this.headers.eq(selector):$()},_setupEvents:function(event){var events={};if(!event)return;$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._on(this.headers,events)},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if(clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1)return;options.active=collapsing?!1:this.headers.index(clicked),this.active=clickedIsActive?$():clicked,this._toggle(eventData),active.removeClass("ui-accordion-header-active ui-state-active"),options.icons&&active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header),clickedIsActive||(clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),options.icons&&clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader),clicked.next().addClass("ui-accordion-content-active"))},_toggle:function(data){var toShow=data.newPanel,toHide=this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=toShow,this.prevHide=toHide,this.options.animate?this._animate(toShow,toHide,data):(toHide.hide(),toShow.show(),this._toggleComplete(data)),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),toHide.prev().attr("aria-selected","false"),toShow.length&&toHide.length?toHide.prev().attr("tabIndex",-1):toShow.length&&this.headers.filter(function(){return $(this).attr("tabIndex")===0}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,down=toShow.length&&(!toHide.length||toShow.index()<toHide.index()),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){toShow.removeData("ui-accordion-height"),that._toggleComplete(data)};typeof options=="number"&&(duration=options),typeof options=="string"&&(easing=options),easing=easing||options.easing||animate.easing,duration=duration||options.duration||animate.duration;if(!toHide.length)return toShow.animate(showProps,duration,easing,complete);if(!toShow.length)return toHide.animate(hideProps,duration,easing,complete);total=toShow.show().outerHeight(),toHide.animate(hideProps,duration,easing),toShow.hide().data("ui-accordion-height",{total:total,toHide:toHide}).animate(this.options.heightStyle==="content"?showProps:showPropsAdjust,duration,easing,complete)},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),toHide.length&&(toHide.parent()[0].className=toHide.parent()[0].className),this._trigger("activate",null,data)}}),$.uiBackCompat!==!1&&(function($,prototype){$.extend(prototype.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var _create=prototype._create;prototype._create=function(){if(this.options.navigation){var that=this,headers=this.element.find(this.options.header),content=headers.next(),current=headers.add(content).find("a").filter(this.options.navigationFilter)[0];current&&headers.add(content).each(function(index){if($.contains(this,current))return that.options.active=Math.floor(index/2),!1})}_create.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function($,prototype){$.extend(prototype.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var _create=prototype._create,_setOption=prototype._setOption;$.extend(prototype,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),_create.call(this)},_setOption:function(key,value){if(key==="autoHeight"||key==="clearStyle"||key==="fillSpace")this.options.heightStyle=this._mergeHeightStyle();_setOption.apply(this,arguments)},_mergeHeightStyle:function(){var options=this.options;if(options.fillSpace)return"fill";if(options.clearStyle)return"content";if(options.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),function($,prototype){$.extend(prototype.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var _createIcons=prototype._createIcons;prototype._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),_createIcons.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function($,prototype){prototype.activate=prototype._activate;var _findActive=prototype._findActive;prototype._findActive=function(index){return index===-1&&(index=!1),index&&typeof index!="number"&&(index=this.headers.index(this.headers.filter(index)),index===-1&&(index=!1)),_findActive.call(this,index)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function($,prototype){$.extend(prototype.options,{change:null,changestart:null});var _trigger=prototype._trigger;prototype._trigger=function(type,event,data){var ret=_trigger.apply(this,arguments);return ret?(type==="beforeActivate"?ret=_trigger.call(this,"changestart",event,{oldHeader:data.oldHeader,oldContent:data.oldPanel,newHeader:data.newHeader,newContent:data.newPanel}):type==="activate"&&(ret=_trigger.call(this,"change",event,{oldHeader:data.oldHeader,oldContent:data.oldPanel,newHeader:data.newHeader,newContent:data.newPanel})),ret):!1}}(jQuery,jQuery.ui.accordion.prototype),function($,prototype){$.extend(prototype.options,{animate:null,animated:"slide"});var _create=prototype._create;prototype._create=function(){var options=this.options;options.animate===null&&(options.animated?options.animated==="slide"?options.animate=300:options.animated==="bounceslide"?options.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:options.animate=options.animated:options.animate=!1),_create.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{version:"1.9.0-beta.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on({keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=!0,suppressInput=!0,suppressKeyPressRepeat=!0;return}suppressKeyPress=!1,suppressInput=!1,suppressKeyPressRepeat=!1;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=!0,this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=!0,this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=!0,this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=!0,this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:this.menu.active&&(suppressKeyPress=!0,event.preventDefault(),this.menu.select(event));break;case keyCode.TAB:this.menu.active&&this.menu.select(event);break;case keyCode.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(event),event.preventDefault());break;default:suppressKeyPressRepeat=!0,this._searchTimeout(event)}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=!1,event.preventDefault();return}if(suppressKeyPressRepeat)return;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event)}},input:function(event){if(suppressInput){suppressInput=!1,event.preventDefault();return}this._searchTimeout(event)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(event),this._change(event)}}),this._initSource(),this.menu=$("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:$(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(event){event.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var menuElement=this.menu.element[0];$(event.target).closest(".ui-menu-item").length||this._delay(function(){var that=this;this.document.one("mousedown",function(event){event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target)&&that.close()})})},menufocus:function(event,ui){if(this.isNewMenu){this.isNewMenu=!1;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent)});return}}var item=ui.item.data("ui-autocomplete-item")||ui.item.data("item.autocomplete");!1!==this._trigger("focus",event,{item:item})?event.originalEvent&&/^key/.test(event.originalEvent.type)&&this._value(item.value):this.liveRegion.text(item.value)},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item")||ui.item.data("item.autocomplete"),previous=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous,this.selectedItem=item})),!1!==this._trigger("select",event,{item:item})&&this._value(item.value),this.term=this._value(),this.close(event),this.selectedItem=item}}),this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),$.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(key,value){this._super(key,value),key==="source"&&this._initSource(),key==="appendTo"&&this.menu.element.appendTo(this.document.find(value||"body")[0]),key==="disabled"&&value&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var array,url,that=this;$.isArray(this.options.source)?(array=this.options.source,this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}):typeof this.options.source=="string"?(url=this.options.source,this.source=function(request,response){that.xhr&&that.xhr.abort(),that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data,status){response(data)},error:function(){response([])}})}):this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,event))},this.options.delay)},search:function(value,event){value=value!=null?value:this._value(),this.term=this._value();if(value.length<this.options.minLength)return this.close(event);if(this._trigger("search",event)===!1)return;return this._search(value)},_search:function(value){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:value},this._response())},_response:function(){var that=this,index=++requestIndex;return function(content){index===requestIndex&&that.__response(content),that.pending--,that.pending||that.element.removeClass("ui-autocomplete-loading")}},__response:function(content){content&&(content=this._normalize(content)),this._trigger("response",null,{content:content}),!this.options.disabled&&content&&content.length&&!this.cancelSearch?(this._suggest(content),this._trigger("open")):this._close()},close:function(event){this.cancelSearch=!0,this._close(event)},_close:function(event){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",event))},_change:function(event){this.previous!==this._value()&&this._trigger("change",event,{item:this.selectedItem})},_normalize:function(items){return items.length&&items[0].label&&items[0].value?items:$.map(items,function(item){return typeof item=="string"?{label:item,value:item}:$.extend({label:item.label||item.value,value:item.value||item.label},item)})},_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(ul,items),this.menu.blur(),this.menu.refresh(),ul.show(),this._resizeMenu(),ul.position($.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul)},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,event);return}if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){this._value(this.term),this.menu.blur();return}this.menu[direction](event)},widget:function(){return this.menu.element},_value:function(value){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(keyEvent,event),event.preventDefault()}}),$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}}),$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;content&&content.length?message=this.options.messages.results(content.length):message=this.options.messages.noResults,this.liveRegion.text(message)}})}(jQuery),function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh")},1)},radioGroup=function(radio){var name=radio.name,form=radio.form,radios=$([]);return name&&(form?radios=$(form).find("[name='"+name+"']"):radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form})),radios};$.widget("ui.button",{version:"1.9.0-beta.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",hoverClass="ui-state-hover"+(toggleButton?"":" ui-state-active"),focusClass="ui-state-focus";options.label===null&&(options.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled)return;$(this).addClass("ui-state-hover"),this===lastActive&&$(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled)return;$(this).removeClass(hoverClass)}).bind("click"+this.eventNamespace,function(event){options.disabled&&(event.preventDefault(),event.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){that.buttonElement.addClass(focusClass)}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass)}),toggleButton&&(this.element.bind("change"+this.eventNamespace,function(){if(clickDragged)return;that.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){if(options.disabled)return;clickDragged=!1,startXPos=event.pageX,startYPos=event.pageY}).bind("mouseup"+this.eventNamespace,function(event){if(options.disabled)return;if(startXPos!==event.pageX||startYPos!==event.pageY)clickDragged=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return!1;$(this).toggleClass("ui-state-active"),that.buttonElement.attr("aria-pressed",that.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return!1;$(this).addClass("ui-state-active"),that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled)return!1;$(this).addClass("ui-state-active"),lastActive=this,that.document.one("mouseup",function(){lastActive=null})}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled)return!1;$(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled)return!1;(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER)&&$(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(event){event.keyCode===$.ui.keyCode.SPACE&&$(this).click()})),this._setOption("disabled",options.disabled),this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(ancestor=this.element.parents().last(),labelSelector="label[for='"+this.element.attr("id")+"']",this.buttonElement=ancestor.find(labelSelector),this.buttonElement.length||(ancestor=ancestor.length?ancestor.siblings():this.element.siblings(),this.buttonElement=ancestor.filter(labelSelector),this.buttonElement.length||(this.buttonElement=ancestor.find(labelSelector))),this.element.addClass("ui-helper-hidden-accessible"),checked=this.element.is(":checked"),checked&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",checked)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(key,value){this._super(key,value);if(key==="disabled"){value?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var isDisabled=this.element.is(":disabled");isDisabled!==this.options.disabled&&this._setOption("disabled",isDisabled),this.type==="radio"?radioGroup(this.element[0]).each(function(){$(this).is(":checked")?$(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):$(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];icons.primary||icons.secondary?(this.options.text&&buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary")),icons.primary&&buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>"),icons.secondary&&buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+icons.secondary+"'></span>"),this.options.text||(buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||buttonElement.attr("title",$.trim(buttonText)))):buttonClasses.push("ui-button-text-only"),buttonElement.addClass(buttonClasses.join(" "))}}),$.widget("ui.buttonset",{version:"1.9.0-beta.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(key,value){key==="disabled"&&this.buttons.button("option",key,value),this._super(key,value)},refresh:function(){var rtl=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(selector,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!=-1&&$(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!=-1&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(target,props){$.extend(target,props);for(var name in props)if(props[name]==null||props[name]==undefined)target[name]=props[name];return target}$.extend($.ui,{datepicker:{version:"1.9.0-beta.1"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:inline?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]),inst.trigger=$([]);if(input.hasClass(this.markerClassName))return;this._attachments(input,inst),input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)}),this._autoSize(inst),$.data(target,PROP_NAME,inst),inst.settings.disabled&&this._disableDatepicker(target)},_attachments:function(input,inst){var appendText=this._get(inst,"appendText"),isRTL=this._get(inst,"isRTL");inst.append&&inst.append.remove(),appendText&&(inst.append=$('<span class="'+this._appendClass+'">'+appendText+"</span>"),input[isRTL?"before":"after"](inst.append)),input.unbind("focus",this._showDatepicker),inst.trigger&&inst.trigger.remove();var showOn=this._get(inst,"showOn");(showOn=="focus"||showOn=="both")&&input.focus(this._showDatepicker);if(showOn=="button"||showOn=="both"){var buttonText=this._get(inst,"buttonText"),buttonImage=this._get(inst,"buttonImage");inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$('<button type="button"></button>').addClass(this._triggerClass).html(buttonImage==""?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText}))),input[isRTL?"before":"after"](inst.trigger),inst.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==input[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=input[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(input[0])):$.datepicker._showDatepicker(input[0]),!1})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var date=new Date(2009,11,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){var findMax=function(names){var max=0,maxI=0;for(var i=0;i<names.length;i++)names[i].length>max&&(max=names[i].length,maxI=i);return maxI};date.setMonth(findMax(this._get(inst,dateFormat.match(/MM/)?"monthNames":"monthNamesShort"))),date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))return;divSpan.addClass(this.markerClassName).append(inst.dpDiv).bind("setData.datepicker",function(event,key,value){inst.settings[key]=value}).bind("getData.datepicker",function(event,key){return this._get(inst,key)}),$.data(target,PROP_NAME,inst),this._setDate(inst,this._getDefaultDate(inst),!0),this._updateDatepicker(inst),this._updateAlternate(inst),inst.settings.disabled&&this._disableDatepicker(target),inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var inst=this._dialogInst;if(!inst){this.uuid+=1;var id="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+id+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),inst=this._dialogInst=this._newInst(this._dialogInput,!1),inst.settings={},$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{}),date=date&&date.constructor==Date?this._formatDate(inst,date):date,this._dialogInput.val(date),this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null;if(!this._pos){var browserWidth=document.documentElement.clientWidth,browserHeight=document.documentElement.clientHeight,scrollX=document.documentElement.scrollLeft||document.body.scrollLeft,scrollY=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),inst.settings.onSelect=onSelect,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,inst),this},_destroyDatepicker:function(target){var $target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;var nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME),nodeName=="input"?(inst.append.remove(),inst.trigger.remove(),$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(nodeName=="div"||nodeName=="span")&&$target.removeClass(this.markerClassName).empty()},_enableDatepicker:function(target){var $target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;var nodeName=target.nodeName.toLowerCase();if(nodeName=="input")target.disabled=!1,inst.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value==target?null:value})},_disableDatepicker:function(target){var $target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;var nodeName=target.nodeName.toLowerCase();if(nodeName=="input")target.disabled=!0,inst.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(nodeName=="div"||nodeName=="span"){var inline=$target.children("."+this._inlineClass);inline.children().addClass("ui-state-disabled"),inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value==target?null:value}),this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target)return!1;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]==target)return!0;return!1},_getInst:function(target){try{return $.data(target,PROP_NAME)}catch(err){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(target,name,value){var inst=this._getInst(target);if(arguments.length==2&&typeof name=="string")return name=="defaults"?$.extend({},$.datepicker._defaults):inst?name=="all"?$.extend({},inst.settings):this._get(inst,name):null;var settings=name||{};typeof name=="string"&&(settings={},settings[name]=value);if(inst){this._curInst==inst&&this._hideDatepicker();var date=this._getDateDatepicker(target,!0),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings),minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined&&(inst.settings.minDate=this._formatDate(inst,minDate)),maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined&&(inst.settings.maxDate=this._formatDate(inst,maxDate)),this._attachments($(target),inst),this._autoSize(inst),this._setDate(inst,date),this._updateAlternate(inst),this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);inst&&this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);inst&&(this._setDate(inst,date),this._updateDatepicker(inst),this._updateAlternate(inst))},_getDateDatepicker:function(target,noDefault){var inst=this._getInst(target);return inst&&!inst.inline&&this._setDateFromField(inst,noDefault),inst?this._getDate(inst):null},_doKeyDown:function(event){var inst=$.datepicker._getInst(event.target),handled=!0,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=!0;if($.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker(),handled=!1;break;case 13:var sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",inst.dpDiv);sel[0]&&$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);var onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){var dateStr=$.datepicker._formatDate(inst);onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:(event.ctrlKey||event.metaKey)&&$.datepicker._clearDate(event.target),handled=event.ctrlKey||event.metaKey;break;case 36:(event.ctrlKey||event.metaKey)&&$.datepicker._gotoToday(event.target),handled=event.ctrlKey||event.metaKey;break;case 37:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?1:-1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,-7,"D"),handled=event.ctrlKey||event.metaKey;break;case 39:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,isRTL?-1:1,"D"),handled=event.ctrlKey||event.metaKey,event.originalEvent.altKey&&$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:(event.ctrlKey||event.metaKey)&&$.datepicker._adjustDate(event.target,7,"D"),handled=event.ctrlKey||event.metaKey;break;default:handled=!1}else event.keyCode==36&&event.ctrlKey?$.datepicker._showDatepicker(this):handled=!1;handled&&(event.preventDefault(),event.stopPropagation())},_doKeyPress:function(event){var inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,"constrainInput")){var chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),chr=String.fromCharCode(event.charCode==undefined?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||chr<" "||!chars||chars.indexOf(chr)>-1}},_doKeyUp:function(event){var inst=$.datepicker._getInst(event.target);if(inst.input.val()!=inst.lastVal)try{var date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst));date&&($.datepicker._setDateFromField(inst),$.datepicker._updateAlternate(inst),$.datepicker._updateDatepicker(inst))}catch(err){$.datepicker.log(err)}return!0},_showDatepicker:function(input){input=input.target||input,input.nodeName.toLowerCase()!="input"&&(input=$("input",input.parentNode)[0]);if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput==input)return;var inst=$.datepicker._getInst(input);$.datepicker._curInst&&$.datepicker._curInst!=inst&&($.datepicker._curInst.dpDiv.stop(!0,!0),inst&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var beforeShow=$.datepicker._get(inst,"beforeShow"),beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===!1)return;extendRemove(inst.settings,beforeShowSettings),inst.lastVal=null,$.datepicker._lastInput=input,$.datepicker._setDateFromField(inst),$.datepicker._inDialog&&(input.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(input),$.datepicker._pos[1]+=input.offsetHeight);var isFixed=!1;$(input).parents().each(function(){return isFixed|=$(this).css("position")=="fixed",!isFixed});var offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,inst.dpDiv.empty(),inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(inst),offset=$.datepicker._checkOffset(inst,offset,isFixed),inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){var showAnim=$.datepicker._get(inst,"showAnim"),duration=$.datepicker._get(inst,"duration"),postProcess=function(){var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");if(!!cover.length){var borders=$.datepicker._getBorders(inst.dpDiv);cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()})}};inst.dpDiv.zIndex($(input).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv[showAnim||"show"](showAnim?duration:null,postProcess),(!showAnim||!duration)&&postProcess(),inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input.focus(),$.datepicker._curInst=inst}},_updateDatepicker:function(inst){this.maxRows=4;var borders=$.datepicker._getBorders(inst.dpDiv);instActive=inst,inst.dpDiv.empty().append(this._generateHTML(inst)),this._attachHandlers(inst);var cover=inst.dpDiv.find("iframe.ui-datepicker-cover");!cover.length||cover.css({left:-borders[0],top:-borders[1],width:inst.dpDiv.outerWidth(),height:inst.dpDiv.outerHeight()}),inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),cols>1&&inst.dpDiv.addClass("ui-datepicker-multi-"+cols).css("width",width*cols+"em"),inst.dpDiv[(numMonths[0]!=1||numMonths[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),inst==$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!=document.activeElement&&inst.input.focus();if(inst.yearshtml){var origyearshtml=inst.yearshtml;setTimeout(function(){origyearshtml===inst.yearshtml&&inst.yearshtml&&inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml),origyearshtml=inst.yearshtml=null},0)}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+$(document).scrollLeft(),viewHeight=document.documentElement.clientHeight+$(document).scrollTop();return offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0,offset.left-=isFixed&&offset.left==inst.input.offset().left?$(document).scrollLeft():0,offset.top-=isFixed&&offset.top==inst.input.offset().top+inputHeight?$(document).scrollTop():0,offset.left-=Math.min(offset.left,offset.left+dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0),offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0),offset},_findPos:function(obj){var inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type=="hidden"||obj.nodeType!=1||$.expr.filters.hidden(obj)))obj=obj[isRTL?"previousSibling":"nextSibling"];var position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var inst=this._curInst;if(!inst||input&&inst!=$.data(input,PROP_NAME))return;if(this._datepickerShowing){var showAnim=this._get(inst,"showAnim"),duration=this._get(inst,"duration"),postProcess=function(){$.datepicker._tidyDialog(inst)};$.effects&&($.effects.effect[showAnim]||$.effects[showAnim])?inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess):inst.dpDiv[showAnim=="slideDown"?"slideUp":showAnim=="fadeIn"?"fadeOut":"hide"](showAnim?duration:null,postProcess),showAnim||postProcess(),this._datepickerShowing=!1;var onClose=this._get(inst,"onClose");onClose&&onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(event){if(!$.datepicker._curInst)return;var $target=$(event.target),inst=$.datepicker._getInst($target[0]);($target[0].id!=$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length==0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||$target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=inst)&&$.datepicker._hideDatepicker()},_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0]))return;this._adjustInstDate(inst,offset+(period=="M"?this._get(inst,"showCurrentAtPos"):0),period),this._updateDatepicker(inst)},_gotoToday:function(id){var target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay)inst.selectedDay=inst.currentDay,inst.drawMonth=inst.selectedMonth=inst.currentMonth,inst.drawYear=inst.selectedYear=inst.currentYear;else{var date=new Date;inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst),this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period=="M"?"Month":"Year")]=inst["draw"+(period=="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10),this._notifyChange(inst),this._adjustDate(target)},_selectDay:function(id,month,year,td){var target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0]))return;var inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html(),inst.selectedMonth=inst.currentMonth=month,inst.selectedYear=inst.currentYear=year,this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id),inst=this._getInst(target[0]);this._selectDate(target,"")},_selectDate:function(id,dateStr){var target=$(id),inst=this._getInst(target[0]);dateStr=dateStr!=null?dateStr:this._formatDate(inst),inst.input&&inst.input.val(dateStr),this._updateAlternate(inst);var onSelect=this._get(inst,"onSelect");onSelect?onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]):inst.input&&inst.input.trigger("change"),inst.inline?this._updateDatepicker(inst):(this._hideDatepicker(),this._lastInput=inst.input[0],typeof inst.input[0]!="object"&&inst.input.focus(),this._lastInput=null)},_updateAlternate:function(inst){var altField=this._get(inst,"altField");if(altField){var altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat"),date=this._getDate(inst),dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null)throw"Invalid arguments";value=typeof value=="object"?value.toString():value+"";if(value=="")return null;var shortYearCutoff=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff;shortYearCutoff=typeof shortYearCutoff!="string"?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)==match;return matches&&iFormat++,matches},getNumber=function(match){var isDoubled=lookAhead(match),size=match=="@"?14:match=="!"?20:match=="y"&&isDoubled?4:match=="o"?3:2,digits=new RegExp("^\\d{1,"+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;return iValue+=num[0].length,parseInt(num[0],10)},getName=function(match,shortNames,longNames){var names=$.map(lookAhead(match)?longNames:shortNames,function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),index=-1;$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()==name.toLowerCase())return index=pair[0],iValue+=name.length,!1});if(index!=-1)return index+1;throw"Unknown name at position "+iValue},checkLiteral=function(){if(value.charAt(iValue)!=format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++},iValue=0;for(var iFormat=0;iFormat<format.length;iFormat++)if(literal)format.charAt(iFormat)=="'"&&!lookAhead("'")?literal=!1:checkLiteral();else switch(format.charAt(iFormat)){case"d":day=getNumber("d");break;case"D":getName("D",dayNamesShort,dayNames);break;case"o":doy=getNumber("o");break;case"m":month=getNumber("m");break;case"M":month=getName("M",monthNamesShort,monthNames);break;case"y":year=getNumber("y");break;case"@":var date=new Date(getNumber("@"));year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"!":var date=new Date((getNumber("!")-this._ticksTo1970)/1e4);year=date.getFullYear(),month=date.getMonth()+1,day=date.getDate();break;case"'":lookAhead("'")?checkLiteral():literal=!0;break;default:checkLiteral()}if(iValue<value.length){var extra=value.substr(iValue);if(!/^\s+/.test(extra))throw"Extra/unparsed characters found in date: "+extra}year==-1?year=(new Date).getFullYear():year<100&&(year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100));if(doy>-1){month=1,day=doy;do{var dim=this._getDaysInMonth(year,month-1);if(day<=dim)break;month++,day-=dim}while(!0)}var date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!=year||date.getMonth()+1!=month||date.getDate()!=day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(format,date,settings){if(!date)return"";var dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)==match;return matches&&iFormat++,matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))while(num.length<len)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=!1;if(date)for(var iFormat=0;iFormat<format.length;iFormat++)if(literal)format.charAt(iFormat)=="'"&&!lookAhead("'")?literal=!1:output+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case"d":output+=formatNumber("d",date.getDate(),2);break;case"D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case"o":output+=formatNumber("o",Math.round(((new Date(date.getFullYear(),date.getMonth(),date.getDate())).getTime()-(new Date(date.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":output+=formatNumber("m",date.getMonth()+1,2);break;case"M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case"y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%100<10?"0":"")+date.getYear()%100;break;case"@":output+=date.getTime();break;case"!":output+=date.getTime()*1e4+this._ticksTo1970;break;case"'":lookAhead("'")?output+="'":literal=!0;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var chars="",literal=!1,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)==match;return matches&&iFormat++,matches};for(var iFormat=0;iFormat<format.length;iFormat++)if(literal)format.charAt(iFormat)=="'"&&!lookAhead("'")?literal=!1:chars+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case"d":case"m":case"y":case"@":chars+="0123456789";break;case"D":case"M":return null;case"'":lookAhead("'")?chars+="'":literal=!0;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()==inst.lastVal)return;var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,date,defaultDate;date=defaultDate=this._getDefaultDate(inst);var settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){this.log(event),dates=noDefault?"":dates}inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),inst.currentDay=dates?date.getDate():0,inst.currentMonth=dates?date.getMonth():0,inst.currentYear=dates?date.getFullYear():0,this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;return date.setDate(date.getDate()+offset),date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case"d":case"D":day+=parseInt(matches[1],10);break;case"w":case"W":day+=parseInt(matches[1],10)*7;break;case"m":case"M":month+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case"y":case"Y":year+=parseInt(matches[1],10),day=Math.min(day,$.datepicker._getDaysInMonth(year,month))}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=date==null||date===""?defaultDate:typeof date=="string"?offsetString(date):typeof date=="number"?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());return newDate=newDate&&newDate.toString()=="Invalid Date"?defaultDate:newDate,newDate&&(newDate.setHours(0),newDate.setMinutes(0),newDate.setSeconds(0),newDate.setMilliseconds(0)),this._daylightSavingAdjust(newDate)},_daylightSavingAdjust:function(date){return date?(date.setHours(date.getHours()>12?date.getHours()+2:0),date):null},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate(),inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth(),inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear(),(origMonth!=inst.selectedMonth||origYear!=inst.selectedYear)&&!noChange&&this._notifyChange(inst),this._adjustInstDate(inst),inst.input&&inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&inst.input.val()==""?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id;inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,-stepMonths,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(id)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var today=new Date;today=this._daylightSavingAdjust(new Date(today.getFullYear(),today.getMonth(),today.getDate()));var isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=numMonths[0]!=1||numMonths[1]!=1,currentDate=this._daylightSavingAdjust(inst.currentDay?new Date(inst.currentYear,inst.currentMonth,inst.currentDay):new Date(9999,9,9)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;drawMonth<0&&(drawMonth+=12,drawYear--);if(maxDate){var maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw)drawMonth--,drawMonth<0&&(drawMonth=11,drawYear--)}inst.drawMonth=drawMonth,inst.drawYear=drawYear;var prevText=this._get(inst,"prevText");prevText=navigationAsDateFormat?this.formatDate(prevText,this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst)):prevText;var prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>":hideIfNoPrevNext?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+prevText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"e":"w")+'">'+prevText+"</span></a>",nextText=this._get(inst,"nextText");nextText=navigationAsDateFormat?this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst)):nextText;var next=this._canAdjustMonth(inst,1,drawYear,drawMonth)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>":hideIfNoPrevNext?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+nextText+'"><span class="ui-icon ui-icon-circle-triangle-'+(isRTL?"w":"e")+'">'+nextText+"</span></a>",currentText=this._get(inst,"currentText"),gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=navigationAsDateFormat?this.formatDate(currentText,gotoDate,this._getFormatConfig(inst)):currentText;var controls=inst.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(inst,"closeText")+"</button>",buttonPanel=showButtonPanel?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"",firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;var showWeek=this._get(inst,"showWeek"),dayNames=this._get(inst,"dayNames"),dayNamesShort=this._get(inst,"dayNamesShort"),dayNamesMin=this._get(inst,"dayNamesMin"),monthNames=this._get(inst,"monthNames"),monthNamesShort=this._get(inst,"monthNamesShort"),beforeShowDay=this._get(inst,"beforeShowDay"),showOtherMonths=this._get(inst,"showOtherMonths"),selectOtherMonths=this._get(inst,"selectOtherMonths"),calculateWeek=this._get(inst,"calculateWeek")||this.iso8601Week,defaultDate=this._getDefaultDate(inst),html="";for(var row=0;row<numMonths[0];row++){var group="";this.maxRows=4;for(var col=0;col<numMonths[1];col++){var selectedDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,inst.selectedDay)),cornerClass=" ui-corner-all",calender="";if(isMultiMonth){calender+='<div class="ui-datepicker-group';if(numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first",cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last",cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle",cornerClass=""}calender+='">'}calender+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+cornerClass+'">'+(/all|left/.test(cornerClass)&&row==0?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&row==0?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var thead=showWeek?'<th class="ui-datepicker-week-col">'+this._get(inst,"weekHeader")+"</th>":"";for(var dow=0;dow<7;dow++){var day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+dayNames[day]+'">'+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";var daysInMonth=this._getDaysInMonth(drawYear,drawMonth);drawYear==inst.selectedYear&&drawMonth==inst.selectedMonth&&(inst.selectedDay=Math.min(inst.selectedDay,daysInMonth));var leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7,curRows=Math.ceil((leadDays+daysInMonth)/7),numRows=isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows;this.maxRows=numRows;var printDate=this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(var dRow=0;dRow<numRows;dRow++){calender+="<tr>";var tbody=showWeek?'<td class="ui-datepicker-week-col">'+this._get(inst,"calculateWeek")(printDate)+"</td>":"";for(var dow=0;dow<7;dow++){var daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[!0,""],otherMonth=printDate.getMonth()!=drawMonth,unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate;tbody+='<td class="'+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()==selectedDate.getTime()&&drawMonth==inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()==printDate.getTime()&&defaultDate.getTime()==selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()==currentDate.getTime()?" "+this._currentClass:"")+(printDate.getTime()==today.getTime()?" ui-datepicker-today":""))+'"'+((!otherMonth||showOtherMonths)&&daySettings[2]?' title="'+daySettings[2]+'"':"")+(unselectable?"":' data-handler="selectDay" data-event="click" data-month="'+printDate.getMonth()+'" data-year="'+printDate.getFullYear()+'"')+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?'<span class="ui-state-default">'+printDate.getDate()+"</span>":'<a class="ui-state-default'+(printDate.getTime()==today.getTime()?" ui-state-highlight":"")+(printDate.getTime()==currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+'" href="#">'+printDate.getDate()+"</a>")+"</td>",printDate.setDate(printDate.getDate()+1),printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++,drawMonth>11&&(drawMonth=0,drawYear++),calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col==numMonths[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),group+=calender}html+=group}return html+=buttonPanel+($.browser.msie&&parseInt($.browser.version,10)<7&&!inst.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),inst._keyEvent=!1,html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html='<div class="ui-datepicker-title">',monthHtml="";if(secondary||!changeMonth)monthHtml+='<span class="ui-datepicker-month">'+monthNames[drawMonth]+"</span>";else{var inMinYear=minDate&&minDate.getFullYear()==drawYear,inMaxYear=maxDate&&maxDate.getFullYear()==drawYear;monthHtml+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var month=0;month<12;month++)(!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth())&&(monthHtml+='<option value="'+month+'"'+(month==drawMonth?' selected="selected"':"")+">"+monthNamesShort[month]+"</option>");monthHtml+="</select>"}showMonthAfterYear||(html+=monthHtml+(secondary||!changeMonth||!changeYear?"&#xa0;":""));if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear)html+='<span class="ui-datepicker-year">'+drawYear+"</span>";else{var years=this._get(inst,"yearRange").split(":"),thisYear=(new Date).getFullYear(),determineYear=function(value){var year=value.match(/c[+-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year},year=determineYear(years[0]),endYear=Math.max(year,determineYear(years[1]||""));year=minDate?Math.max(year,minDate.getFullYear()):year,endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear,inst.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;year<=endYear;year++)inst.yearshtml+='<option value="'+year+'"'+(year==drawYear?' selected="selected"':"")+">"+year+"</option>";inst.yearshtml+="</select>",html+=inst.yearshtml,inst.yearshtml=null}}return html+=this._get(inst,"yearSuffix"),showMonthAfterYear&&(html+=(secondary||!changeMonth||!changeYear?"&#xa0;":"")+monthHtml),html+="</div>",html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period=="Y"?offset:0),month=inst.drawMonth+(period=="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period=="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate(),inst.drawMonth=inst.selectedMonth=date.getMonth(),inst.drawYear=inst.selectedYear=date.getFullYear(),(period=="M"||period=="Y")&&this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&date<minDate?minDate:date;return newDate=maxDate&&newDate>maxDate?maxDate:newDate,newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");onChange&&onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return numMonths==null?[1,1]:typeof numMonths=="number"?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return(new Date(year,month,1)).getDay()},_canAdjustMonth:function(inst,offset,curYear,curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));return offset<0&&date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth())),this._isInRange(inst,date)},_isInRange:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max");return(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");return shortYearCutoff=typeof shortYearCutoff!="string"?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,10),{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){day||(inst.currentDay=inst.selectedDay,inst.currentMonth=inst.selectedMonth,inst.currentYear=inst.selectedYear);var date=day?typeof day=="object"?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}}),$.fn.datepicker=function(options){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var otherArgs=Array.prototype.slice.call(arguments,1);return typeof options!="string"||options!="isDisabled"&&options!="getDate"&&options!="widget"?options=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs)):this.each(function(){typeof options=="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)}):$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.0-beta.1",window["DP_jQuery_"+dpuuid]=$}(jQuery),function($,undefined){var uiDialogClasses="ui-dialog ui-widget ui-widget-content ui-corner-all ",sizeRelatedOptions={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};$.widget("ui.dialog",{version:"1.9.0-beta.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;topOffset<0&&$(this).css("top",pos.top-topOffset)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var that=this,options=this.options,title=options.title||"&#160;",uiDialog=(this.uiDialog=$("<div>")).addClass(uiDialogClasses+options.dialogClass).css({display:"none",outline:0,zIndex:options.zIndex}).attr("tabIndex",-1).keydown(function(event){options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE&&(that.close(event),event.preventDefault())}).mousedown(function(event){that.moveToTop(!1,event)}).appendTo("body"),uiDialogContent=this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(uiDialog),uiDialogTitlebar=(this.uiDialogTitlebar=$("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").prependTo(uiDialog),uiDialogTitlebarClose=$("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(event){event.preventDefault(),that.close(event)}).appendTo(uiDialogTitlebar),uiDialogTitlebarCloseText=(this.uiDialogTitlebarCloseText=$("<span>")).addClass("ui-icon ui-icon-closethick").text(options.closeText).appendTo(uiDialogTitlebarClose),uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").html(title).prependTo(uiDialogTitlebar),uiDialogButtonPane=(this.uiDialogButtonPane=$("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),uiButtonSet=(this.uiButtonSet=$("<div>")).addClass("ui-dialog-buttonset").appendTo(uiDialogButtonPane);uiDialog.attr({role:"dialog","aria-labelledby":uiDialogTitle.attr("id")}),uiDialogTitlebar.find("*").add(uiDialogTitlebar).disableSelection(),this._hoverable(uiDialogTitlebarClose),this._focusable(uiDialogTitlebarClose),options.draggable&&$.fn.draggable&&this._makeDraggable(),options.resizable&&$.fn.resizable&&this._makeResizable(),this._createButtons(options.buttons),this._isOpen=!1,$.fn.bgiframe&&uiDialog.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var next,oldPosition=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),next=oldPosition.parent.children().eq(oldPosition.index),next.length?next.before(this.element):oldPosition.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(event){var that=this,maxZ,thisZ;if(!this._isOpen)return;if(!1===this._trigger("beforeClose",event))return;return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this._off(this.uiDialog,"keypress"),this.options.hide?this.uiDialog.hide(this.options.hide,function(){that._trigger("close",event)}):(this.uiDialog.hide(),this._trigger("close",event)),$.ui.dialog.overlay.resize(),this.options.modal&&(maxZ=0,$(".ui-dialog").each(function(){this!==that.uiDialog[0]&&(thisZ=$(this).css("z-index"),isNaN(thisZ)||(maxZ=Math.max(maxZ,thisZ)))}),$.ui.dialog.maxZ=maxZ),this},isOpen:function(){return this._isOpen},moveToTop:function(force,event){var options=this.options,saveScroll;return options.modal&&!force||!options.stack&&!options.modal?this._trigger("focus",event):(options.zIndex>$.ui.dialog.maxZ&&($.ui.dialog.maxZ=options.zIndex),this.overlay&&($.ui.dialog.maxZ+=1,$.ui.dialog.overlay.maxZ=$.ui.dialog.maxZ,this.overlay.$el.css("z-index",$.ui.dialog.overlay.maxZ)),saveScroll={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},$.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",$.ui.dialog.maxZ),this.element.attr(saveScroll),this._trigger("focus",event),this)},open:function(){if(this._isOpen)return;var hasFocus,options=this.options,uiDialog=this.uiDialog;return this._size(),this._position(options.position),uiDialog.show(options.show),this.overlay=options.modal?new $.ui.dialog.overlay(this):null,this.moveToTop(!0),options.modal&&this._on(uiDialog,{keydown:function(event){if(event.keyCode!==$.ui.keyCode.TAB)return;var tabbables=$(":tabbable",this),first=tabbables.filter(":first"),last=tabbables.filter(":last");if(event.target===last[0]&&!event.shiftKey)return first.focus(1),!1;if(event.target===first[0]&&event.shiftKey)return last.focus(1),!1}}),hasFocus=this.element.find(":tabbable"),hasFocus.length||(hasFocus=this.uiDialogButtonPane.find(":tabbable"),hasFocus.length||(hasFocus=uiDialog)),hasFocus.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this},_createButtons:function(buttons){var uiDialogButtonPane,uiButtonSet,that=this,hasButtons=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),typeof buttons=="object"&&buttons!==null&&$.each(buttons,function(){return!(hasButtons=!0)}),hasButtons?($.each(buttons,function(name,props){props=$.isFunction(props)?{click:props,text:name}:props;var button=$("<button type='button'>").attr(props,!0).unbind("click").click(function(){props.click.apply(that.element[0],arguments)}).appendTo(that.uiButtonSet);$.fn.button&&button.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function filteredUi(ui){return{position:ui.position,offset:ui.offset}}var that=this,options=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging"),that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()],$(this).removeClass("ui-dialog-dragging"),that._trigger("dragStop",event,filteredUi(ui)),$.ui.dialog.overlay.resize()}})},_makeResizable:function(handles){function filteredUi(ui){return{originalPosition:ui.originalPosition,originalSize:ui.originalSize,position:ui.position,size:ui.size}}handles=handles===undefined?this.options.resizable:handles;var that=this,options=this.options,position=this.uiDialog.css("position"),resizeHandles=typeof handles=="string"?handles:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing"),that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,ui){$(this).removeClass("ui-dialog-resizing"),options.height=$(this).height(),options.width=$(this).width(),that._trigger("resizeStop",event,filteredUi(ui)),$.ui.dialog.overlay.resize()}}).css("position",position).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(position){var myAt=[],offset=[0,0],isVisible;if(position){if(typeof position=="string"||typeof position=="object"&&"0"in position)myAt=position.split?position.split(" "):[position[0],position[1]],myAt.length===1&&(myAt[1]=myAt[0]),$.each(["left","top"],function(i,offsetPosition){+myAt[i]===myAt[i]&&(offset[i]=myAt[i],myAt[i]=offsetPosition)}),position={my:myAt.join(" "),at:myAt.join(" "),offset:offset.join(" ")};position=$.extend({},$.ui.dialog.prototype.options.position,position)}else position=$.ui.dialog.prototype.options.position;isVisible=this.uiDialog.is(":visible"),isVisible||this.uiDialog.show(),this.uiDialog.position(position),isVisible||this.uiDialog.hide()},_setOptions:function(options){var that=this,resizableOptions={},resize=!1;$.each(options,function(key,value){that._setOption(key,value),key in sizeRelatedOptions&&(resize=!0),key in resizableRelatedOptions&&(resizableOptions[key]=value)}),resize&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;switch(key){case"buttons":this._createButtons(value);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+value);break;case"dialogClass":uiDialog.removeClass(this.options.dialogClass).addClass(uiDialogClasses+value);break;case"disabled":value?uiDialog.addClass("ui-dialog-disabled"):uiDialog.removeClass("ui-dialog-disabled");break;case"draggable":isDraggable=uiDialog.is(":data(draggable)"),isDraggable&&!value&&uiDialog.draggable("destroy"),!isDraggable&&value&&this._makeDraggable();break;case"position":this._position(value);break;case"resizable":isResizable=uiDialog.is(":data(resizable)"),isResizable&&!value&&uiDialog.resizable("destroy"),isResizable&&typeof value=="string"&&uiDialog.resizable("option","handles",value),!isResizable&&value!==!1&&this._makeResizable(value);break;case"title":$(".ui-dialog-title",this.uiDialogTitlebar).html(""+(value||"&#160;"))}this._super(key,value)},_size:function(){var nonContentHeight,minContentHeight,autoHeight,options=this.options,isVisible=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),options.minWidth>options.width&&(options.width=options.minWidth),nonContentHeight=this.uiDialog.css({height:"auto",width:options.width}).outerHeight(),minContentHeight=Math.max(0,options.minHeight-nonContentHeight),options.height==="auto"?$.support.minHeight?this.element.css({minHeight:minContentHeight,height:"auto"}):(this.uiDialog.show(),autoHeight=this.element.css("height","auto").height(),isVisible||this.uiDialog.hide(),this.element.height(Math.max(autoHeight,minContentHeight))):this.element.height(Math.max(options.height-nonContentHeight,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),$.extend($.ui.dialog,{uuid:0,maxZ:0,getTitleId:function($el){var id=$el.attr("id");return id||(this.uuid+=1,id=this.uuid),"ui-dialog-title-"+id},overlay:function(dialog){this.$el=$.ui.dialog.overlay.create(dialog)}}),$.extend($.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:$.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(event){return event+".dialog-overlay"}).join(" "),create:function(dialog){this.instances.length===0&&(setTimeout(function(){$.ui.dialog.overlay.instances.length&&$(document).bind($.ui.dialog.overlay.events,function(event){if($(event.target).zIndex()<$.ui.dialog.overlay.maxZ)return!1})},1),$(window).bind("resize.dialog-overlay",$.ui.dialog.overlay.resize));var $el=this.oldInstances.pop()||$("<div>").addClass("ui-widget-overlay");return $(document).bind("keydown.dialog-overlay",function(event){var instances=$.ui.dialog.overlay.instances;instances.length!==0&&instances[instances.length-1]===$el&&dialog.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE&&(dialog.close(event),event.preventDefault())}),$el.appendTo(document.body).css({width:this.width(),height:this.height()}),$.fn.bgiframe&&$el.bgiframe(),this.instances.push($el),$el},destroy:function($el){var indexOf=$.inArray($el,this.instances),maxZ=0;indexOf!==-1&&this.oldInstances.push(this.instances.splice(indexOf,1)[0]),this.instances.length===0&&$([document,window]).unbind(".dialog-overlay"),$el.height(0).width(0).remove(),$.each(this.instances,function(){maxZ=Math.max(maxZ,this.css("z-index"))}),this.maxZ=maxZ},height:function(){var scrollHeight,offsetHeight;return $.browser.msie?(scrollHeight=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),offsetHeight=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),scrollHeight<offsetHeight?$(window).height()+"px":scrollHeight+"px"):$(document).height()+"px"},width:function(){var scrollWidth,offsetWidth;return $.browser.msie?(scrollWidth=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),offsetWidth=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),scrollWidth<offsetWidth?$(window).width()+"px":scrollWidth+"px"):$(document).width()+"px"},resize:function(){var $overlays=$([]);$.each($.ui.dialog.overlay.instances,function(){$overlays=$overlays.add(this)}),$overlays.css({width:0,height:0}).css({width:$.ui.dialog.overlay.width(),height:$.ui.dialog.overlay.height()})}}),$.extend($.ui.dialog.overlay.prototype,{destroy:function(){$.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function($,undefined){var rvertical=/up|down|vertical/,rpositivemotion=/up|left|vertical|horizontal/;$.effects.effect.blind=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),direction=o.direction||"up",vertical=rvertical.test(direction),ref=vertical?"height":"width",ref2=vertical?"top":"left",motion=rpositivemotion.test(direction),animation={},show=mode==="show",wrapper,distance,margin;el.parent().is(".ui-effects-wrapper")?$.effects.save(el.parent(),props):$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),distance=wrapper[ref](),margin=parseFloat(wrapper.css(ref2)),animation[ref]=show?distance:0,motion||(el.css(vertical?"bottom":"right",0).css(vertical?"top":"left","auto").css({position:"absolute"}),animation[ref2]=show?margin:distance+margin),show&&(wrapper.css(ref,0),motion||wrapper.css(ref2,margin+distance)),wrapper.animate(animation,{duration:o.duration,easing:o.easing,queue:!1,complete:function(){mode==="hide"&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.bounce=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),hide=mode==="hide",show=mode==="show",direction=o.direction||"up",distance=o.distance,times=o.times||5,anims=times*2+(show||hide?1:0),speed=o.duration/anims,easing=o.easing,ref=direction==="up"||direction==="down"?"top":"left",motion=direction==="up"||direction==="left",i,upAnim,downAnim,queue=el.queue(),queuelen=queue.length;(show||hide)&&props.push("opacity"),$.effects.save(el,props),el.show(),$.effects.createWrapper(el),distance||(distance=el[ref==="top"?"outerHeight":"outerWidth"]()/3),show&&(downAnim={opacity:1},downAnim[ref]=0,el.css("opacity",0).css(ref,motion?-distance*2:distance*2).animate(downAnim,speed,easing)),hide&&(distance/=Math.pow(2,times-1)),downAnim={},downAnim[ref]=0;for(i=0;i<times;i++)upAnim={},upAnim[ref]=(motion?"-=":"+=")+distance,el.animate(upAnim,speed,easing).animate(downAnim,speed,easing),distance=hide?distance*2:distance/2;hide&&(upAnim={opacity:0},upAnim[ref]=(motion?"-=":"+=")+distance,el.animate(upAnim,speed,easing)),el.queue(function(){hide&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),el.dequeue()}}(jQuery),function($,undefined){$.effects.effect.clip=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"vertical",vert=direction==="vertical",size=vert?"height":"width",position=vert?"top":"left",animation={},wrapper,animate,distance;$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),animate=el[0].tagName==="IMG"?wrapper:el,distance=animate[size](),show&&(animate.css(size,0),animate.css(position,distance/2)),animation[size]=show?distance:0,animation[position]=show?0:distance/2,animate.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){show||el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.drop=function(o,done){var el=$(this),props=["position","top","bottom","left","right","opacity","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",direction=o.direction||"left",ref=direction==="up"||direction==="down"?"top":"left",motion=direction==="up"||direction==="left"?"pos":"neg",animation={opacity:show?1:0},distance;$.effects.save(el,props),el.show(),$.effects.createWrapper(el),distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"]({margin:!0})/2,show&&el.css("opacity",0).css(ref,motion==="pos"?-distance:distance),animation[ref]=(show?motion==="pos"?"+=":"-=":motion==="pos"?"-=":"+=")+distance,el.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){mode==="hide"&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.explode=function(o,done){function childComplete(){pieces.push(this),pieces.length===rows*cells&&animComplete()}function animComplete(){el.css({visibility:"visible"}),$(pieces).remove(),show||el.hide(),done()}var rows=o.pieces?Math.round(Math.sqrt(o.pieces)):3,cells=rows,el=$(this),mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",offset=el.show().css("visibility","hidden").offset(),width=Math.ceil(el.outerWidth()/cells),height=Math.ceil(el.outerHeight()/rows),pieces=[],i,j,left,top,mx,my;for(i=0;i<rows;i++){top=offset.top+i*height,my=i-(rows-1)/2;for(j=0;j<cells;j++)left=offset.left+j*width,mx=j-(cells-1)/2,el.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*width,top:-i*height}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:width,height:height,left:left+(show?mx*width:0),top:top+(show?my*height:0),opacity:show?0:1}).animate({left:left+(show?0:mx*width),top:top+(show?0:my*height),opacity:show?1:0},o.duration||500,o.easing,childComplete)}}}(jQuery),function($,undefined){$.effects.effect.fade=function(o,done){var el=$(this),mode=$.effects.setMode(el,o.mode||"toggle");el.animate({opacity:mode},{queue:!1,duration:o.duration,easing:o.easing,complete:done})}}(jQuery),function($,undefined){$.effects.effect.fold=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"hide"),show=mode==="show",hide=mode==="hide",size=o.size||15,percent=/([0-9]+)%/.exec(size),horizFirst=!!o.horizFirst,widthFirst=show!==horizFirst,ref=widthFirst?["width","height"]:["height","width"],duration=o.duration/2,wrapper,distance,animation1={},animation2={};$.effects.save(el,props),el.show(),wrapper=$.effects.createWrapper(el).css({overflow:"hidden"}),distance=widthFirst?[wrapper.width(),wrapper.height()]:[wrapper.height(),wrapper.width()],percent&&(size=parseInt(percent[1],10)/100*distance[hide?0:1]),show&&wrapper.css(horizFirst?{height:0,width:size}:{height:size,width:0}),animation1[ref[0]]=show?distance[0]:size,animation2[ref[1]]=show?distance[1]:0,wrapper.animate(animation1,duration,o.easing).animate(animation2,duration,o.easing,function(){hide&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()})}}(jQuery),function($,undefined){$.effects.effect.highlight=function(o,done){var elem=$(this),props=["backgroundImage","backgroundColor","opacity"],mode=$.effects.setMode(elem,o.mode||"show"),animation={backgroundColor:elem.css("backgroundColor")};mode==="hide"&&(animation.opacity=0),$.effects.save(elem,props),elem.show().css({backgroundImage:"none",backgroundColor:o.color||"#ffff99"}).animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){mode==="hide"&&elem.hide(),$.effects.restore(elem,props),done()}})}}(jQuery),function($,undefined){$.effects.effect.pulsate=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"show"),show=mode==="show",hide=mode==="hide",showhide=show||mode==="hide",anims=(o.times||5)*2+(showhide?1:0),duration=o.duration/anims,animateTo=0,queue=elem.queue(),queuelen=queue.length,i;if(show||!elem.is(":visible"))elem.css("opacity",0).show(),animateTo=1;for(i=1;i<anims;i++)elem.animate({opacity:animateTo},duration,o.easing),animateTo=1-animateTo;elem.animate({opacity:animateTo},duration,o.easing),elem.queue(function(){hide&&elem.hide(),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),elem.dequeue()}}(jQuery),function($,undefined){$.effects.effect.puff=function(o,done){var elem=$(this),mode=$.effects.setMode(elem,o.mode||"hide"),hide=mode==="hide",percent=parseInt(o.percent,10)||150,factor=percent/100,original={height:elem.height(),width:elem.width()};$.extend(o,{effect:"scale",queue:!1,fade:!0,mode:mode,complete:done,percent:hide?percent:100,from:hide?original:{height:original.height*factor,width:original.width*factor}}),elem.effect(o)},$.effects.effect.scale=function(o,done){var el=$(this),options=$.extend(!0,{},o),mode=$.effects.setMode(el,o.mode||"effect"),percent=parseInt(o.percent,10)||(parseInt(o.percent,10)===0?0:mode==="hide"?0:100),direction=o.direction||"both",origin=o.origin,original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},factor={y:direction!=="horizontal"?percent/100:1,x:direction!=="vertical"?percent/100:1};options.effect="size",options.queue=!1,options.complete=done,mode!=="effect"&&(options.origin=origin||["middle","center"],options.restore=!0),options.from=o.from||(mode==="show"?{height:0,width:0}:original),options.to={height:original.height*factor.y,width:original.width*factor.x,outerHeight:original.outerHeight*factor.y,outerWidth:original.outerWidth*factor.x},options.fade&&(mode==="show"&&(options.from.opacity=0,options.to.opacity=1),mode==="hide"&&(options.from.opacity=1,options.to.opacity=0)),el.effect(options)},$.effects.effect.size=function(o,done){var el=$(this),props=["position","top","bottom","left","right","width","height","overflow","opacity"],props1=["position","top","bottom","left","right","overflow","opacity"],props2=["width","height","overflow"],cProps=["fontSize"],vProps=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],hProps=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],mode=$.effects.setMode(el,o.mode||"effect"),restore=o.restore||mode!=="effect",scale=o.scale||"both",origin=o.origin||["middle","center"],original,baseline,factor,position=el.css("position");mode==="show"&&el.show(),original={height:el.height(),width:el.width(),outerHeight:el.outerHeight(),outerWidth:el.outerWidth()},el.from=o.from||original,el.to=o.to||original,factor={from:{y:el.from.height/original.height,x:el.from.width/original.width},to:{y:el.to.height/original.height,x:el.to.width/original.width}};if(scale==="box"||scale==="both")factor.from.y!==factor.to.y&&(props=props.concat(vProps),el.from=$.effects.setTransition(el,vProps,factor.from.y,el.from),el.to=$.effects.setTransition(el,vProps,factor.to.y,el.to)),factor.from.x!==factor.to.x&&(props=props.concat(hProps),el.from=$.effects.setTransition(el,hProps,factor.from.x,el.from),el.to=$.effects.setTransition(el,hProps,factor.to.x,el.to));(scale==="content"||scale==="both")&&factor.from.y!==factor.to.y&&(props=props.concat(cProps),el.from=$.effects.setTransition(el,cProps,factor.from.y,el.from),el.to=$.effects.setTransition(el,cProps,factor.to.y,el.to)),$.effects.save(el,restore?props:props1),el.show(),$.effects.createWrapper(el),el.css("overflow","hidden").css(el.from),origin&&(baseline=$.effects.getBaseline(origin,original),el.from.top=(original.outerHeight-el.outerHeight())*baseline.y,el.from.left=(original.outerWidth-el.outerWidth())*baseline.x,el.to.top=(original.outerHeight-el.to.outerHeight)*baseline.y,el.to.left=(original.outerWidth-el.to.outerWidth)*baseline.x),el.css(el.from);if(scale==="content"||scale==="both")vProps=vProps.concat(["marginTop","marginBottom"]).concat(cProps),hProps=hProps.concat(["marginLeft","marginRight"]),props2=props.concat(vProps).concat(hProps),el.find("*[width]").each(function(){var child=$(this),c_original={height:child.height(),width:child.width()};restore&&$.effects.save(child,props2),child.from={height:c_original.height*factor.from.y,width:c_original.width*factor.from.x},child.to={height:c_original.height*factor.to.y,width:c_original.width*factor.to.x},factor.from.y!==factor.to.y&&(child.from=$.effects.setTransition(child,vProps,factor.from.y,child.from),child.to=$.effects.setTransition(child,vProps,factor.to.y,child.to)),factor.from.x!==factor.to.x&&(child.from=$.effects.setTransition(child,hProps,factor.from.x,child.from),child.to=$.effects.setTransition(child,hProps,factor.to.x,child.to)),child.css(child.from),child.animate(child.to,o.duration,o.easing,function(){restore&&$.effects.restore(child,props2)})});el.animate(el.to,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){el.to.opacity===0&&el.css("opacity",el.from.opacity),mode==="hide"&&el.hide(),$.effects.restore(el,restore?props:props1),restore||(position==="static"?el.css({position:"relative",top:el.to.top,left:el.to.left}):$.each(["top","left"],function(idx,pos){el.css(pos,function(_,str){var val=parseInt(str,10),toRef=idx?el.to.left:el.to.top;return str==="auto"?toRef+"px":val+toRef+"px"})})),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.shake=function(o,done){var el=$(this),props=["position","top","bottom","left","right","height","width"],mode=$.effects.setMode(el,o.mode||"effect"),direction=o.direction||"left",distance=o.distance||20,times=o.times||3,anims=times*2+1,speed=o.duration,ref=direction==="up"||direction==="down"?"top":"left",positiveMotion=direction==="up"||direction==="left",animation={},animation1={},animation2={},i,queue=el.queue(),queuelen=queue.length;$.effects.save(el,props),el.show(),$.effects.createWrapper(el),animation[ref]=(positiveMotion?"-=":"+=")+distance,animation1[ref]=(positiveMotion?"+=":"-=")+distance*2,animation2[ref]=(positiveMotion?"-=":"+=")+distance*2,el.animate(animation,speed,o.easing);for(i=1;i<times;i++)el.animate(animation1,speed,o.easing).animate(animation2,speed,o.easing);el.animate(animation1,speed,o.easing).animate(animation,speed/2,o.easing).queue(function(){mode==="hide"&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}),queuelen>1&&queue.splice.apply(queue,[1,0].concat(queue.splice(queuelen,anims+1))),el.dequeue()}}(jQuery),function($,undefined){$.effects.effect.slide=function(o,done){var el=$(this),props=["position","top","bottom","left","right","width","height"],mode=$.effects.setMode(el,o.mode||"show"),show=mode==="show",direction=o.direction||"left",ref=direction==="up"||direction==="down"?"top":"left",positiveMotion=direction==="up"||direction==="left",distance,animation={};$.effects.save(el,props),el.show(),distance=o.distance||el[ref==="top"?"outerHeight":"outerWidth"]({margin:!0}),$.effects.createWrapper(el).css({overflow:"hidden"}),show&&el.css(ref,positiveMotion?isNaN(distance)?"-"+distance:-distance:distance),animation[ref]=(show?positiveMotion?"+=":"-=":positiveMotion?"-=":"+=")+distance,el.animate(animation,{queue:!1,duration:o.duration,easing:o.easing,complete:function(){mode==="hide"&&el.hide(),$.effects.restore(el,props),$.effects.removeWrapper(el),done()}})}}(jQuery),function($,undefined){$.effects.effect.transfer=function(o,done){var elem=$(this),target=$(o.to),targetFixed=target.css("position")==="fixed",body=$("body"),fixTop=targetFixed?body.scrollTop():0,fixLeft=targetFixed?body.scrollLeft():0,endPosition=target.offset(),animation={top:endPosition.top-fixTop,left:endPosition.left-fixLeft,height:target.innerHeight(),width:target.innerWidth()},startPosition=elem.offset(),transfer=$('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(o.className).css({top:startPosition.top-fixTop,left:startPosition.left-fixLeft,height:elem.innerHeight(),width:elem.innerWidth(),position:targetFixed?"fixed":"absolute"}).animate(animation,o.duration,o.easing,function(){transfer.remove(),done()})}}(jQuery),function($,undefined){var currentEventTarget=null;$.widget("ui.menu",{version:"1.9.0-beta.1",defaultElement:"<ul>",delay:300,options:{menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,$.proxy(function(event){this.options.disabled&&event.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault()},"click .ui-state-disabled > a":function(event){event.preventDefault()},"click .ui-menu-item:has(a)":function(event){var target=$(event.target);target[0]!==currentEventTarget&&(currentEventTarget=target[0],target.one("click"+this.eventNamespace,function(event){currentEventTarget=null}),target.closest(".ui-menu-item").is(".ui-state-disabled")||(this.select(event),this._delay(function(){this.element.is(":focus")||this.element.focus()},20)))},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event){var menuTop,menu=this.element,item=menu.children(".ui-menu-item").eq(0);this.active?item=this.active:this._hasScroll()&&(menuTop=menu.offset().top,menu.children().each(function(){var currentItem=$(this);if(currentItem.offset().top-menuTop>=0)return item=currentItem,!1})),this.focus(event,item)},blur:function(event){this._delay(function(){$.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(event)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(event){$(event.target).closest(".ui-menu").length||this.collapseAll(event)}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);elem.data("ui-menu-submenu-carat")&&elem.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content"),this._off($(currentEventTarget),"click")},_keydown:function(event){function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var match,prev,character,skip,preventDefault=!0;switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;case $.ui.keyCode.RIGHT:this.active.is(".ui-state-disabled")||this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=!1,prev=this.previousFilter||"",character=String.fromCharCode(event.keyCode),skip=!1,clearTimeout(this.filterTimer),character===prev?skip=!0:character=prev+character,match=this.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+escape(character),"i")).test($(this).children("a").text())}),match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match,match.length||(character=String.fromCharCode(event.keyCode),match=this.activeMenu.children(".ui-menu-item").filter(function(){return(new RegExp("^"+escape(character),"i")).test($(this).children("a").text())})),match.length?(this.focus(event,match),match.length>1?(this.previousFilter=character,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}preventDefault&&event.preventDefault()},_activate:function(event){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(event):this.select(event))},refresh:function(){var menus,submenus=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"});menus=submenus.add(this.element),menus.children(":not( .ui-menu-item ):has( a )").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);/[^\-—–\s]/.test(item.text())||item.addClass("ui-widget-content ui-menu-divider")}),menus.children(".ui-state-disabled").attr("aria-disabled","true"),submenus.each(function(){var menu=$(this),item=menu.prev("a"),submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon ui-icon-carat-1-e").data("ui-menu-submenu-carat",!0);item.attr("aria-haspopup","true").prepend(submenuCarat),menu.attr("aria-labelledby",item.attr("id"))})},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus"),this._scrollIntoView(item),this.active=item.first(),focused=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",focused.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),event&&event.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),nested=item.children(".ui-menu"),nested.length&&/^mouse/.test(event.type)&&this._startOpening(nested),this.activeMenu=item.parent(),this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;this._hasScroll()&&(borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0,paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0,offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop,scroll=this.activeMenu.scrollTop(),elementHeight=this.activeMenu.height(),itemHeight=item.height(),offset<0?this.activeMenu.scrollTop(scroll+offset):offset+itemHeight>elementHeight&&this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight))},blur:function(event,fromFocus){fromFocus||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",event,{item:this.active})},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(submenu)},this.delay)},_open:function(submenu){var position=$.extend({of:this.active},$.type(this.options.position)==="function"?this.options.position(this.active):this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true"),submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer),this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));currentMenu.length||(currentMenu=this.element),this._close(currentMenu),this.blur(event),this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){startMenu||(startMenu=this.active?this.active.parent():this.element),startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length)return this._close(),this.focus(event,newItem),!0},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(newItem&&newItem.length)return this._open(newItem.parent()),this._delay(function(){this.focus(event,newItem)},20),!0},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(direction,filter,event){var next;this.active&&(direction==="first"||direction==="last"?next=this.active[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):next=this.active[direction+"All"](".ui-menu-item").eq(0));if(!next||!next.length||!this.active)next=this.activeMenu.children(".ui-menu-item")[filter]();this.focus(event,next)},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return}if(this.isLastItem())return;this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base-height<0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return}if(this.isFirstItem())return;this._hasScroll()?(base=this.active.offset().top,height=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return item=$(this),item.offset().top-base+height>0}),this.focus(event,item)):this.focus(event,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){var ui={item:this.active};this.collapseAll(event,!0),this._trigger("select",event,ui)}})}(jQuery),function($,undefined){function getOffsets(offsets,width,height){return[parseInt(offsets[0],10)*(rpercent.test(offsets[0])?width/100:1),parseInt(offsets[1],10)*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||0}$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];return $("body").append(div),w1=innerDiv.offsetWidth,div.css("overflow","scroll"),w2=innerDiv.offsetWidth,w1===w2&&(w2=div[0].clientWidth),div.remove(),cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),hasOverflowX=overflowX==="scroll"||overflowX==="auto"&&within.width<within.element[0].scrollWidth,hasOverflowY=overflowY==="scroll"||overflowY==="auto"&&within.height<within.element[0].scrollHeight;return{width:hasOverflowX?$.position.scrollbarWidth():0,height:hasOverflowY?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}},$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),targetElem=target[0],collision=(options.collision||"flip").split(" "),offsets={};return targetElem.nodeType===9?(targetWidth=target.width(),targetHeight=target.height(),targetOffset={top:0,left:0}):$.isWindow(targetElem)?(targetWidth=target.width(),targetHeight=target.height(),targetOffset={top:target.scrollTop(),left:target.scrollLeft()}):targetElem.preventDefault?(options.at="left top",targetWidth=targetHeight=0,targetOffset={top:targetElem.pageY,left:targetElem.pageX}):(targetWidth=target.outerWidth(),targetHeight=target.outerHeight(),targetOffset=target.offset()),basePosition=$.extend({},targetOffset),$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;pos.length===1&&(pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"]),pos[0]=rhorizontal.test(pos[0])?pos[0]:"center",pos[1]=rvertical.test(pos[1])?pos[1]:"center",horizontalOffset=roffset.exec(pos[0]),verticalOffset=roffset.exec(pos[1]),offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0],options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]}),collision.length===1&&(collision[1]=collision[0]),options.at[0]==="right"?basePosition.left+=targetWidth:options.at[0]==="center"&&(basePosition.left+=targetWidth/2),options.at[1]==="bottom"?basePosition.top+=targetHeight:options.at[1]==="center"&&(basePosition.top+=targetHeight/2),atOffset=getOffsets(offsets.at,targetWidth,targetHeight),basePosition.left+=atOffset[0],basePosition.top+=atOffset[1],this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());options.my[0]==="right"?position.left-=elemWidth:options.my[0]==="center"&&(position.left-=elemWidth/2),options.my[1]==="bottom"?position.top-=elemHeight:options.my[1]==="center"&&(position.top-=elemHeight/2),position.left+=myOffset[0],position.top+=myOffset[1],$.support.offsetFractions||(position.left=round(position.left),position.top=round(position.top)),collisionPosition={marginLeft:marginLeft,marginTop:marginTop},$.each(["left","top"],function(i,dir){$.ui.position[collision[i]]&&$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,within:within,elem:elem})}),$.fn.bgiframe&&elem.bgiframe(),options.using&&(using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":"middle"};targetWidth<elemWidth&&abs(left+right)<targetWidth&&(feedback.horizontal="center"),targetHeight<elemHeight&&abs(top+bottom)<targetHeight&&(feedback.vertical="middle"),max(abs(left),abs(right))>max(abs(top),abs(bottom))?feedback.important="horizontal":feedback.important="vertical",options.using.call(this,props,feedback)}),elem.offset($.extend(position,{using:using}))})},$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;data.collisionWidth>outerWidth?overLeft>0&&overRight<=0?(newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset,position.left+=overLeft-newOverRight):overRight>0&&overLeft<=0?position.left=withinOffset:overLeft>overRight?position.left=withinOffset+outerWidth-data.collisionWidth:position.left=withinOffset:overLeft>0?position.left+=overLeft:overRight>0?position.left-=overRight:position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-withinOffset,newOverBottom;data.collisionHeight>outerHeight?overTop>0&&overBottom<=0?(newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset,position.top+=overTop-newOverBottom):overBottom>0&&overTop<=0?position.top=withinOffset:overTop>overBottom?position.top=withinOffset+outerHeight-data.collisionHeight:position.top=withinOffset:overTop>0?position.top+=overTop:overBottom>0?position.top-=overBottom:position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?0:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft))position.left+=myOffset+atOffset+offset}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight)position.left+=myOffset+atOffset+offset}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?0:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;overTop<0?(newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset,position.top+myOffset+atOffset+offset>overTop&&(newOverBottom<0||newOverBottom<abs(overTop))&&(position.top+=myOffset+atOffset+offset)):overBottom>0&&(newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop,position.top+myOffset+atOffset+offset>overBottom&&(newOverTop>0||abs(newOverTop)<overBottom)&&(position.top+=myOffset+atOffset+offset))}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments),$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments),$.ui.position.fit.top.apply(this,arguments)}}},function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?"div":"body"),testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},body&&$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div),testElementParent=body||document.documentElement,testElementParent.insertBefore(testElement,testElementParent.firstChild),div.style.cssText="position: absolute; left: 10.7432222px;",offsetLeft=$(div).offset().left,$.support.offsetFractions=offsetLeft>10&&offsetLeft<11,testElement.innerHTML="",testElementParent.removeChild(testElement)}(),$.uiBackCompat!==!1&&function($){var _position=$.fn.position;$.fn.position=function(options){if(!options||!options.offset)return _position.call(this,options);var offset=options.offset.split(" "),at=options.at.split(" ");return offset.length===1&&(offset[1]=offset[0]),/^\d/.test(offset[0])&&(offset[0]="+"+offset[0]),/^\d/.test(offset[1])&&(offset[1]="+"+offset[1]),at.length===1&&(/left|center|right/.test(at[0])?at[1]="center":(at[1]=at[0],at[0]="center")),_position.call(this,$.extend(options,{at:at[0]+offset[0]+" "+at[1]+offset[1],offset:undefined}))}}(jQuery)}(jQuery),function($,undefined){$.widget("ui.progressbar",{version:"1.9.0-beta.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(newValue){return newValue===undefined?this._value():(this._setOption("value",newValue),this)},_setOption:function(key,value){key==="value"&&(this.options.value=value,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(key,value)},_value:function(){var val=this.options.value;return typeof val!="number"&&(val=0),Math.min(this.options.max,Math.max(this.min,val))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var value=this.value(),percentage=this._percentage();this.oldValue!==value&&(this.oldValue=value,this._trigger("change")),this.valueDiv.toggle(value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+"%"),this.element.attr("aria-valuenow",value)}})}(jQuery),function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.9.0-beta.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i,o=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",handleCount=o.values&&o.values.length||1,handles=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(o.disabled?" ui-slider-disabled ui-disabled":"")),this.range=$([]),o.range&&(o.range===!0&&(o.values||(o.values=[this._valueMin(),this._valueMin()]),o.values.length&&o.values.length!==2&&(o.values=[o.values[0],o.values[0]])),this.range=$("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(o.range==="min"||o.range==="max"?" ui-slider-range-"+o.range:"")));for(i=existingHandles.length;i<handleCount;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(event){event.preventDefault()}).mouseenter(function(){o.disabled||$(this).addClass("ui-state-hover")}).mouseleave(function(){$(this).removeClass("ui-state-hover")}).focus(function(){o.disabled?$(this).blur():($(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),$(this).addClass("ui-state-focus"))}).blur(function(){$(this).removeClass("ui-state-focus")}),this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)}),this._on(this.handles,{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();if(!this._keySliding){this._keySliding=!0,$(event.target).addClass("ui-state-active"),allowed=this._start(event,index);if(allowed===!1)return}}step=this.options.step,this.options.values&&this.options.values.length?curVal=newVal=this.values(index):curVal=newVal=this.value();switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step)}this._slide(event,index,newVal)},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(event,index),this._change(event,index),$(event.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;return o.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position),distance=this._valueMax()-this._valueMin()+1,this.handles.each(function(i){var thisDistance=Math.abs(normValue-that.values(i));distance>thisDistance&&(distance=thisDistance,closestHandle=$(this),index=i)}),o.range===!0&&this.values(1)===o.min&&(index+=1,closestHandle=$(this.handles[index])),allowed=this._start(event,index),allowed===!1?!1:(this._mouseSliding=!0,this._handleIndex=index,closestHandle.addClass("ui-state-active").focus(),offset=closestHandle.offset(),mouseOverHandle=!$(event.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(event,index,normValue),this._animateOff=!0,!0))},_mouseStart:function(event){return!0},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);return this._slide(event,this._handleIndex,normValue),!1},_mouseStop:function(event){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(event,this._handleIndex),this._change(event,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,valueTotal,valueMouse;return this.orientation==="horizontal"?(pixelTotal=this.elementSize.width,pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(pixelTotal=this.elementSize.height,pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),percentMouse=pixelMouse/pixelTotal,percentMouse>1&&(percentMouse=1),percentMouse<0&&(percentMouse=0),this.orientation==="vertical"&&(percentMouse=1-percentMouse),valueTotal=this._valueMax()-this._valueMin(),valueMouse=this._valueMin()+percentMouse*valueTotal,this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};return this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;this.options.values&&this.options.values.length?(otherVal=this.values(index?0:1),this.options.values.length===2&&this.options.range===!0&&(index===0&&newVal>otherVal||index===1&&newVal<otherVal)&&(newVal=otherVal),newVal!==this.values(index)&&(newValues=this.values(),newValues[index]=newVal,allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues}),otherVal=this.values(index?0:1),allowed!==!1&&this.values(index,newVal,!0))):newVal!==this.value()&&(allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal}),allowed!==!1&&this.value(newVal))},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};this.options.values&&this.options.values.length&&(uiHash.value=this.values(index),uiHash.values=this.values()),this._trigger("change",event,uiHash)}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue),this._refreshValue(),this._change(null,index);return}if(!arguments.length)return this._values();if(!$.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(index):this.value();vals=this.options.values,newValues=arguments[0];for(i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(newValues[i]),this._change(null,i);this._refreshValue()},_setOption:function(key,value){var i,valsLength=0;$.isArray(this.options.values)&&(valsLength=this.options.values.length),$.Widget.prototype._setOption.apply(this,arguments);switch(key){case"disabled":value?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(i=0;i<valsLength;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var val=this.options.value;return val=this._trimAlignValue(val),val},_values:function(index){var val,vals,i;if(arguments.length)return val=this.options.values[index],val=this._trimAlignValue(val),val;vals=this.options.values.slice();for(i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals},_trimAlignValue:function(val){if(val<=this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;return Math.abs(valModStep)*2>=step&&(alignValue+=valModStep>0?step:-step),parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,o=this.options,that=this,animate=this._animateOff?!1:o.animate,_set={};this.options.values&&this.options.values.length?this.handles.each(function(i,j){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100,_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%",$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate),that.options.range===!0&&(that.orientation==="horizontal"?(i===0&&that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+"%"},o.animate),i===1&&that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate})):(i===0&&that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate),i===1&&that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:!1,duration:o.animate}))),lastValPercent=valPercent}):(value=this.value(),valueMin=this._valueMin(),valueMax=this._valueMax(),valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-valueMin)*100:0,_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%",this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate),oRange==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate),oRange==="max"&&this.orientation==="horizontal"&&this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:!1,duration:o.animate}),oRange==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[animate?"animate":"css"]({height:valPercent+"%"},o.animate),oRange==="max"&&this.orientation==="vertical"&&this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:!1,duration:o.animate}))}})}(jQuery),function($){function modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments),this._refresh(),previous!==this.element.val()&&this._trigger("change")}}$.widget("ui.spinner",{version:"1.9.0-beta.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var options={},element=this.element;return $.each(["min","max","step"],function(i,option){var value=element.attr(option);value!==undefined&&value.length&&(options[option]=value)}),options},_events:{keydown:function(event){this._start(event)&&this._keydown(event)&&event.preventDefault()},keyup:"_stop",focus:function(){this.uiSpinner.addClass("ui-state-active"),this.previous=this.element.val()},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh(),this.uiSpinner.removeClass("ui-state-active"),this.previous!==this.element.val()&&this._trigger("change",event)},mousewheel:function(event,delta){if(!delta)return;if(!this.spinning&&!this._start(event))return!1;this._spin((delta>0?1:-1)*this.options.step,event),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(event)},100),event.preventDefault()},"mousedown .ui-spinner-button":function(event){function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;isActive||(this.element.focus(),this.previous=previous,this._delay(function(){this.previous=previous}))}var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),event.preventDefault(),checkFocus.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,checkFocus.call(this)});if(this._start(event)===!1)return;this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active"))return;if(this._start(event)===!1)return!1;this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this._hoverable(uiSpinner),this.element.attr("role","spinbutton"),this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(uiSpinner.height()*.5)&&uiSpinner.height()>0&&uiSpinner.height(uiSpinner.height()),this.options.disabled&&this.disable()},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:return this._repeat(null,1,event),!0;case keyCode.DOWN:return this._repeat(null,-1,event),!0;case keyCode.PAGE_UP:return this._repeat(null,options.page,event),!0;case keyCode.PAGE_DOWN:return this._repeat(null,-options.page,event),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-state-default ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon ui-icon-triangle-1-n'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon ui-icon-triangle-1-s'>&#9660;</span></a>"},_start:function(event){return!this.spinning&&this._trigger("start",event)===!1?!1:(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(i,steps,event){i=i||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,steps,event)},i),this._spin(steps*this.options.step,event)},_spin:function(step,event){var value=this.value()||0;this.counter||(this.counter=1),value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==!1)this._value(value),this.counter++},_increment:function(i){var incremental=this.options.incremental;return incremental?$.isFunction(incremental)?incremental(i):Math.floor(i*i*i/5e4-i*i/500+17*i/200+1):1},_precision:function(){var precision=this._precisionOf(this.options.step);return this.options.min!==null&&(precision=Math.max(precision,this._precisionOf(this.options.min))),precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1},_adjustValue:function(value){var base,aboveMin,options=this.options;return base=options.min!==null?options.min:0,aboveMin=value-base,aboveMin=Math.round(aboveMin/options.step)*options.step,value=base+aboveMin,value=parseFloat(value.toFixed(this._precision())),options.max!==null&&value>options.max?options.max:options.min!==null&&value<options.min?options.min:value},_stop:function(event){if(!this.spinning)return;clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",event)},_setOption:function(key,value){if(key==="culture"||key==="numberFormat"){var prevValue=this._parse(this.element.val());this.options[key]=value,this.element.val(this._format(prevValue));return}(key==="max"||key==="min"||key==="step")&&typeof value=="string"&&(value=this._parse(value)),this._super(key,value),key==="disabled"&&(value?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:modifier(function(options){this._super(options),this._value(this.element.val())}),_parse:function(val){return typeof val=="string"&&val!==""&&(val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val),val===""||isNaN(val)?null:val},_format:function(value){return value===""?"":window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(value,allowAny){var parsed;value!==""&&(parsed=this._parse(value),parsed!==null&&(allowAny||(parsed=this._adjustValue(parsed)),value=this._format(parsed))),this.element.val(value),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:modifier(function(steps){this._stepUp(steps)}),_stepUp:function(steps){this._spin((steps||1)*this.options.step)},stepDown:modifier(function(steps){this._stepDown(steps)}),_stepDown:function(steps){this._spin((steps||1)*-this.options.step)},pageUp:modifier(function(pages){this._stepUp((pages||1)*this.options.page)}),pageDown:modifier(function(pages){this._stepDown((pages||1)*this.options.page)}),value:function(newVal){if(!arguments.length)return this._parse(this.element.val());modifier(this._value).call(this,newVal)},widget:function(){return this.uiSpinner}})}(jQuery),function($,undefined){function getNextTabId(){return++tabId}function isLocal(anchor){var rhash=/#.*$/,currentPage=location.href.replace(rhash,"");return function(anchor){var href=anchor.href.replace(location.origin+"/",location.href);return anchor=anchor.cloneNode(!1),anchor.hash.length>1&&href.replace(rhash,"")===currentPage}}var tabId=0,rhash=/#.*$/;$.widget("ui.tabs",{version:"1.9.0-beta.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var panel,that=this,options=this.options,active=options.active;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(event){$(this).is(".ui-state-disabled")&&event.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){$(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs();if(active===null){location.hash&&this.anchors.each(function(i,anchor){if(anchor.hash===location.hash)return active=i,!1}),active===null&&(active=this.tabs.filter(".ui-tabs-active").index());if(active===null||active===-1)active=this.tabs.length?0:!1}active!==!1&&(active=this.tabs.eq(active).index(),active===-1&&(active=options.collapsible?!1:0)),options.active=active,!options.collapsible&&options.active===!1&&this.anchors.length&&(options.active=0),$.isArray(options.disabled)&&(options.disabled=$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=$(),this._refresh(),this.active.length&&this.load(options.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):$()}},_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=!0;if(this._handlePageNav(event))return;switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=!1,selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault(),clearTimeout(this.activating),this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault(),clearTimeout(this.activating),this._activate(selectedIndex===this.options.active?!1:selectedIndex);return;default:return}event.preventDefault(),clearTimeout(this.activating),selectedIndex=this._focusNextTab(selectedIndex,goingForward),event.ctrlKey||(focusedTab.attr("aria-selected","false"),this.tabs.eq(selectedIndex).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",selectedIndex)},this.delay))},_panelKeydown:function(event){if(this._handlePageNav(event))return;event.ctrlKey&&event.keyCode===$.ui.keyCode.UP&&(event.preventDefault(),this.active.focus())},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(index,goingForward){function constrain(){return index>lastTabIndex&&(index=0),index<0&&(index=lastTabIndex),index}var lastTabIndex=this.tabs.length-1;while($.inArray(constrain(),this.options.disabled)!==-1)index=goingForward?index+1:index-1;return index},_focusNextTab:function(index,goingForward){return index=this._findNextTab(index,goingForward),this.tabs.eq(index).focus(),index},_setOption:function(key,value){if(key==="active"){this._activate(value);return}if(key==="disabled"){this._setupDisabled(value);return}this._super(key,value),key==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",value),!value&&this.options.active===!1&&this._activate(0)),key==="event"&&this._setupEvents(value),key==="heightStyle"&&this._setupHeightStyle(value)},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId()},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var next,options=this.options,lis=this.tablist.children(":has(a[href])");options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)}),this._processTabs(),options.active===!1||!this.anchors.length?(options.active=!1,this.active=$()):this.active.length&&!$.contains(this.tablist[0],this.active[0])?this.tabs.length===options.disabled.length?(options.active=!1,this.active=$()):this._activate(this._findNextTab(Math.max(0,options.active-1),!1)):options.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=$(),this.anchors.each(function(i,anchor){var selector,panel,panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");isLocal(anchor)?(selector=anchor.hash,panel=that.element.find(that._sanitizeSelector(selector))):(panelId=that._tabId(tab),selector="#"+panelId,panel=that.element.find(selector),panel.length||(panel=that._createPanel(panelId),panel.insertAfter(that.panels[i-1]||that.tablist)),panel.attr("aria-live","polite")),panel.length&&(that.panels=that.panels.add(panel)),originalAriaControls&&tab.data("ui-tabs-aria-controls",originalAriaControls),tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId}),panel.attr("aria-labelledby",anchorId)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(disabled){$.isArray(disabled)&&(disabled.length?disabled.length===this.anchors.length&&(disabled=!0):disabled=!1);for(var i=0,li;li=this.tabs[i];i++)disabled===!0||$.inArray(i,disabled)!==-1?$(li).addClass("ui-state-disabled").attr("aria-disabled","true"):$(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=disabled},_setupEvents:function(event){var events={click:function(event){event.preventDefault()}};event&&$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,events),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(heightStyle){var maxHeight,overflow,parent=this.element.parent();heightStyle==="fill"?($.support.minHeight||(overflow=parent.css("overflow"),parent.css("overflow","hidden")),maxHeight=parent.height(),this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed")return;maxHeight-=elem.outerHeight(!0)}),overflow&&parent.css("overflow",overflow),this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(!0)}),this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")):heightStyle==="auto"&&(maxHeight=0,this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight))},_eventHandler:function(event){var options=this.options,active=this.active,anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=active.length?this._getPanelForTab(active):$(),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===!1)return;options.active=collapsing?!1:this.tabs.index(tab),this.active=clickedIsActive?$():tab,this.xhr&&this.xhr.abort(),!toHide.length&&!toShow.length&&$.error("jQuery UI Tabs: Mismatching fragment identifier."),toShow.length&&this.load(this.tabs.index(tab),event),this._toggle(event,eventData)},_toggle:function(event,eventData){function complete(){that.running=!1,that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),toShow.length&&that.options.show?that._show(toShow,that.options.show,complete):(toShow.show(),complete())}var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=!0,toHide.length&&this.options.hide?this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),show()}):(eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),toHide.hide(),show()),toHide.attr({"aria-expanded":"false","aria-hidden":"true"}),eventData.oldTab.attr("aria-selected","false"),toShow.length&&toHide.length?eventData.oldTab.attr("tabIndex",-1):toShow.length&&this.tabs.filter(function(){return $(this).attr("tabIndex")===0}).attr("tabIndex",-1),toShow.attr({"aria-expanded":"true","aria-hidden":"false"}),eventData.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0])return;active.length||(active=this.active),anchor=active.find(".ui-tabs-anchor")[0],this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop})},_findActive:function(index){return index===!1?$():this.tabs.eq(index)},_getIndex:function(index){return typeof index=="string"&&(index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"))),index},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){$.data(this,"ui-tabs-destroy")?$(this).remove():$(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");prev?li.attr("aria-controls",prev):li.removeAttr("aria-controls")}),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(index){var disabled=this.options.disabled;if(disabled===!1)return;index===undefined?disabled=!1:(index=this._getIndex(index),$.isArray(disabled)?disabled=$.map(disabled,function(num){return num!==index?num:null}):disabled=$.map(this.tabs,function(li,num){return num!==index?num:null})),this._setupDisabled(disabled)},disable:function(index){var disabled=this.options.disabled;if(disabled===!0)return;if(index===undefined)disabled=!0;else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1)return;$.isArray(disabled)?disabled=$.merge([index],disabled).sort():disabled=[index]}this._setupDisabled(disabled)},load:function(index,event){index=this._getIndex(index);var that=this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};if(isLocal(anchor[0]))return;this.xhr=$.ajax({url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}}),this.xhr&&this.xhr.statusText!=="canceled"&&(tab.addClass("ui-tabs-loading"),panel.attr("aria-busy","true"),this.xhr.success(function(response){setTimeout(function(){panel.html(response),that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){status==="abort"&&that.panels.stop(!1,!0),tab.removeClass("ui-tabs-loading"),panel.removeAttr("aria-busy"),jqXHR===that.xhr&&delete that.xhr},1)}))},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}}),$.uiBackCompat!==!1&&($.ui.tabs.prototype._ui=function(tab,panel){return{tab:tab,panel:panel,index:this.anchors.index(tab)}},$.widget("ui.tabs",$.ui.tabs,{url:function(index,url){this.anchors.eq(index).attr("href",url)}}),$.widget("ui.tabs",$.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var that=this;this._on({tabsbeforeload:function(event,ui){if($.data(ui.tab[0],"cache.tabs")){event.preventDefault();return}$.extend(ui.ajaxSettings,that.options.ajaxOptions,{error:function(xhr,s,e){try{that.options.ajaxOptions.error(xhr,s,ui.tab.closest("li").index(),ui.tab[0])}catch(e){}}}),ui.jqXHR.success(function(){that.options.cache&&$.data(ui.tab[0],"cache.tabs",!0)})}})},_setOption:function(key,value){key==="cache"&&value===!1&&this.anchors.removeData("cache.tabs"),this._super(key,value)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(index,url){this.anchors.eq(index).removeData("cache.tabs"),this._superApply(arguments)}}),$.widget("ui.tabs",$.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),$.widget("ui.tabs",$.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(event,ui){if(!this.options.spinner)return;var span=ui.tab.find("span"),html=span.html();span.html(this.options.spinner),ui.jqXHR.complete(function(){span.html(html)})}})}}),$.widget("ui.tabs",$.ui.tabs,{options:{enable:null,disable:null},enable:function(index){var options=this.options,trigger;if(index&&options.disabled===!0||$.isArray(options.disabled)&&$.inArray(index,options.disabled)!==-1)trigger=!0;this._superApply(arguments),trigger&&this._trigger("enable",null,this._ui(this.anchors[index],this.panels[index]))},disable:function(index){var options=this.options,trigger;if(index&&options.disabled===!1||$.isArray(options.disabled)&&$.inArray(index,options.disabled)===-1)trigger=!0;this._superApply(arguments),trigger&&this._trigger("disable",null,this._ui(this.anchors[index],this.panels[index]))}}),$.widget("ui.tabs",$.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(url,label,index){index===undefined&&(index=this.anchors.length);var doInsertAfter,panel,options=this.options,li=$(options.tabTemplate.replace(/#\{href\}/g,url).replace(/#\{label\}/g,label)),id=url.indexOf("#")?this._tabId(li):url.replace("#","");return li.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),li.attr("aria-controls",id),doInsertAfter=index>=this.tabs.length,panel=this.element.find("#"+id),panel.length||(panel=this._createPanel(id),doInsertAfter?index>0?panel.insertAfter(this.panels.eq(-1)):panel.appendTo(this.element):panel.insertBefore(this.panels[index])),panel.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),doInsertAfter?li.appendTo(this.tablist):li.insertBefore(this.tabs[index]),options.disabled=$.map(options.disabled,function(n){return n>=index?++n:n}),this.refresh(),this.tabs.length===1&&options.active===!1&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[index],this.panels[index])),this},remove:function(index){index=this._getIndex(index);var options=this.options,tab=this.tabs.eq(index).remove(),panel=this._getPanelForTab(tab).remove();return tab.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(index+(index+1<this.anchors.length?1:-1)),options.disabled=$.map($.grep(options.disabled,function(n){return n!==index}),function(n){return n>=index?--n:n}),this.refresh(),this._trigger("remove",null,this._ui(tab.find("a")[0],panel[0])),this}}),$.widget("ui.tabs",$.ui.tabs,{length:function(){return this.anchors.length}}),$.widget("ui.tabs",$.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(tab){var a=tab.is("li")?tab.find("a[href]"):tab;return a=a[0],$(a).closest("li").attr("aria-controls")||a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+getNextTabId()}}),$.widget("ui.tabs",$.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(id){return $(this.options.panelTemplate).attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),$.widget("ui.tabs",$.ui.tabs,{_create:function(){var options=this.options;options.active===null&&options.selected!==undefined&&(options.active=options.selected===-1?!1:options.selected),this._super(),options.selected=options.active,options.selected===!1&&(options.selected=-1)},_setOption:function(key,value){if(key!=="selected")return this._super(key,value);var options=this.options;this._super("active",value===-1?!1:value),options.selected=options.active,options.selected===!1&&(options.selected=-1)},_eventHandler:function(event){this._superApply(arguments),this.options.selected=this.options.active,this.options.selected===!1&&(this.options.selected=-1)}}),$.widget("ui.tabs",$.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),this.options.active!==!1&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(type,event,data){var ret=this._superApply(arguments);return ret?(type==="beforeActivate"&&data.newTab.length?ret=this._super("select",event,{tab:data.newTab.find(".ui-tabs-anchor")[0],panel:data.newPanel[0],index:data.newTab.closest("li").index()}):type==="activate"&&data.newTab.length&&(ret=this._super("show",event,{tab:data.newTab.find(".ui-tabs-anchor")[0],panel:data.newPanel[0],index:data.newTab.closest("li").index()})),ret):!1}}),$.widget("ui.tabs",$.ui.tabs,{select:function(index){index=this._getIndex(index);if(index===-1){if(!this.options.collapsible||this.options.selected===-1)return;index=this.options.selected}this.anchors.eq(index).trigger(this.options.event+this.eventNamespace)}}),function(){var listId=0;$.widget("ui.tabs",$.ui.tabs,{options:{cookie:null},_create:function(){var options=this.options,active;options.active==null&&options.cookie&&(active=parseInt(this._cookie(),10),active===-1&&(active=!1),options.active=active),this._super()},_cookie:function(active){var cookie=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++listId)];return arguments.length&&(cookie.push(active===!1?-1:active),cookie.push(this.options.cookie)),$.cookie.apply(null,cookie)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(event){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),$.widget("ui.tabs",$.ui.tabs,{_trigger:function(type,event,data){var _data=$.extend({},data);return type==="load"&&(_data.panel=_data.panel[0],_data.tab=_data.tab.find(".ui-tabs-anchor")[0]),this._super(type,event,_data)}}),$.widget("ui.tabs",$.ui.tabs,{options:{fx:null},_getFx:function(){var hide,show,fx=this.options.fx;return fx&&($.isArray(fx)?(hide=fx[0],show=fx[1]):hide=show=fx),fx?{show:show,hide:hide}:null},_toggle:function(event,eventData){function complete(){that.running=!1,that._trigger("activate",event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),toShow.length&&fx.show?toShow.animate(fx.show,fx.show.duration,function(){complete()}):(toShow.show(),complete())}var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel,fx=this._getFx();if(!fx)return this._super(event,eventData);that.running=!0,toHide.length&&fx.hide?toHide.animate(fx.hide,fx.hide.duration,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),show()}):(eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),toHide.hide(),show())}}))}(jQuery),function($){function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id),elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);index!==-1&&describedby.splice(index,1),elem.removeData("ui-tooltip-id"),describedby=$.trim(describedby.join(" ")),describedby?elem.attr("aria-describedby",describedby):elem.removeAttr("aria-describedby")}var increments=0;$.widget("ui.tooltip",{version:"1.9.0-beta.1",options:{content:function(){return $(this).attr("title")},hide:!0,items:"[title]",position:{my:"left+15 center",at:"right center",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={}},_setOption:function(key,value){if(key==="disabled"){this[value?"_disable":"_enable"](),this.options[key]=value;return}this._super(key,value)},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0],that.close(event,!0)}),this.element.find(this.options.items).andSelf().each(function(){var element=$(this);element.is("[title]")&&element.data("ui-tooltip-title",element.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var element=$(this);element.data("ui-tooltip-title")&&element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var content,that=this,target=$(event?event.target:this.element).closest(this.options.items);if(!target.length)return;if(this.options.track&&target.data("ui-tooltip-id")){this._find(target).position($.extend({of:target},this.options.position));return}target.attr("title")&&target.data("ui-tooltip-title",target.attr("title")),target.data("tooltip-open",!0),content=this.options.content.call(target[0],function(response){if(!target.data("tooltip-open"))return;setTimeout(function(){that._open(event,target,response)},1)}),content&&that._open(event,target,content)},_open:function(event,target,content){function position(event){positionOption.of=event,tooltip.position(positionOption)}var tooltip,positionOption;if(!content)return;tooltip=this._find(target);if(tooltip.length){tooltip.find(".ui-tooltip-content").html(content);return}target.is("[title]")&&(event&&event.type==="mouseover"?target.attr("title",""):target.removeAttr("title")),tooltip=this._tooltip(target),addDescribedBy(target,tooltip.attr("id")),tooltip.find(".ui-tooltip-content").html(content),this.options.track&&/^mouse/.test(event.originalEvent.type)?(positionOption=$.extend({},this.options.position),this._on(this.document,{mousemove:position}),position(event)):tooltip.position($.extend({of:target},this.options.position)),tooltip.hide(),this._show(tooltip,this.options.show),this._trigger("open",event,{tooltip:tooltip}),this._on(target,{mouseleave:"close",focusout:"close",keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=$.Event(event);fakeEvent.currentTarget=target[0],this.close(fakeEvent,!0)}}})},close:function(event,force){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);if(this.closing)return;if(!force&&event&&event.type!=="focusout"&&this.document[0].activeElement===target[0])return;target.data("ui-tooltip-title")&&target.attr("title",target.data("ui-tooltip-title")),removeDescribedBy(target),tooltip.stop(!0),this._hide(tooltip,this.options.hide,function(){$(this).remove(),delete that.tooltips[this.id]}),target.removeData("tooltip-open"),this._off(target,"mouseleave focusout keyup"),this._off(this.document,"mousemove"),this.closing=!0,this._trigger("close",event,{tooltip:tooltip}),this.closing=!1},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("<div>").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return $("<div>").addClass("ui-tooltip-content").appendTo(tooltip),tooltip.appendTo(this.document[0].body),$.fn.bgiframe&&tooltip.bgiframe(),this.tooltips[id]=element,tooltip},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$()},_destroy:function(){$.each(this.tooltips,function(id){$("#"+id).remove()})}})}(jQuery),define("Library/jquery-ui/js/jquery-ui-1.9b1",function(){}),define("jquery-ui",["jquery","emberjs","Library/jquery-ui/js/jquery-ui-1.9b1"],function(jQuery,Ember){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("jquery-ui")}),function(){function q(a,c,d){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;a._chain&&(a=a._wrapped),c._chain&&(c=c._wrapped);if(a.isEqual&&b.isFunction(a.isEqual))return a.isEqual(c);if(c.isEqual&&b.isFunction(c.isEqual))return c.isEqual(a);var e=l.call(a);if(e!=l.call(c))return!1;switch(e){case"[object String]":return a==String(c);case"[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case"[object Date]":case"[object Boolean]":return+a==+c;case"[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return!1;for(var f=d.length;f--;)if(d[f]==a)return!0;d.push(a);var f=0,g=!0;if(e=="[object Array]"){if(f=a.length,g=f==c.length)for(;f--;)if(!(g=f in a==f in c&&q(a[f],c[f],d)))break}else{if("constructor"in a!="constructor"in c||a.constructor!=c.constructor)return!1;for(var h in a)if(b.has(a,h)&&(f++,!(g=b.has(c,h)&&q(a[h],c[h],d))))break;if(g){for(h in c)if(b.has(c,h)&&!(f--))break;g=!f}}return d.pop(),g}var r=this,G=r._,n={},k=Array.prototype,o=Object.prototype,i=k.slice,H=k.unshift,l=o.toString,I=o.hasOwnProperty,w=k.forEach,x=k.map,y=k.reduce,z=k.reduceRight,A=k.filter,B=k.every,C=k.some,p=k.indexOf,D=k.lastIndexOf,o=Array.isArray,J=Object.keys,s=Function.prototype.bind,b=function(a){return new m(a)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=b),exports._=b):r._=b,b.VERSION="1.3.1";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(w&&a.forEach===w)a.forEach(c,d);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&c.call(d,a[e],e,a)===n)break}else for(e in a)if(b.has(a,e)&&c.call(d,a[e],e,a)===n)break};b.map=b.collect=function(a,c,b){var e=[];return a==null?e:x&&a.map===x?a.map(c,b):(j(a,function(a,g,h){e[e.length]=c.call(b,a,g,h)}),a.length===+a.length&&(e.length=a.length),e)},b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(y&&a.reduce===y)return e&&(c=b.bind(c,e)),f?a.reduce(c,d):a.reduce(c);j(a,function(a,b,i){f?d=c.call(e,d,a,b,i):(d=a,f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d},b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(z&&a.reduceRight===z)return e&&(c=b.bind(c,e)),f?a.reduceRight(c,d):a.reduceRight(c);var g=b.toArray(a).reverse();return e&&!f&&(c=b.bind(c,e)),f?b.reduce(g,c,d,e):b.reduce(g,c)},b.find=b.detect=function(a,c,b){var e;return E(a,function(a,g,h){if(c.call(b,a,g,h))return e=a,!0}),e},b.filter=b.select=function(a,c,b){var e=[];return a==null?e:A&&a.filter===A?a.filter(c,b):(j(a,function(a,g,h){c.call(b,a,g,h)&&(e[e.length]=a)}),e)},b.reject=function(a,c,b){var e=[];return a==null?e:(j(a,function(a,g,h){c.call(b,a,g,h)||(e[e.length]=a)}),e)},b.every=b.all=function(a,c,b){var e=!0;return a==null?e:B&&a.every===B?a.every(c,b):(j(a,function(a,g,h){if(!(e=e&&c.call(b,a,g,h)))return n}),e)};var E=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=!1;return a==null?e:C&&a.some===C?a.some(c,d):(j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return n}),!!e)};b.include=b.contains=function(a,c){var b=!1;return a==null?b:p&&a.indexOf===p?a.indexOf(c)!=-1:b=E(a,function(a){return a===c})},b.invoke=function(a,c){var d=i.call(arguments,2);return b.map(a,function(a){return(b.isFunction(c)?c||a:a[c]).apply(a,d)})},b.pluck=function(a,c){return b.map(a,function(a){return a[c]})},b.max=function(a,c,d){if(!c&&b.isArray(a))return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity};return j(a,function(a,b,h){b=c?c.call(d,a,b,h):a,b>=e.computed&&(e={value:a,computed:b})}),e.value},b.min=function(a,c,d){if(!c&&b.isArray(a))return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity};return j(a,function(a,b,h){b=c?c.call(d,a,b,h):a,b<e.computed&&(e={value:a,computed:b})}),e.value},b.shuffle=function(a){var b=[],d;return j(a,function(a,f){f==0?b[0]=a:(d=Math.floor(Math.random()*(f+1)),b[f]=b[d],b[d]=a)}),b},b.sortBy=function(a,c,d){return b.pluck(b.map(a,function(a,b,g){return{value:a,criteria:c.call(d,a,b,g)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},b.groupBy=function(a,c){var d={},e=b.isFunction(c)?c:function(a){return a[c]};return j(a,function(a,b){var c=e(a,b);(d[c]||(d[c]=[])).push(a)}),d},b.sortedIndex=function(a,c,d){d||(d=b.identity);for(var e=0,f=a.length;e<f;){var g=e+f>>1;d(a[g])<d(c)?e=g+1:f=g}return e},b.toArray=function(a){return a?a.toArray?a.toArray():b.isArray(a)?i.call(a):b.isArguments(a)?i.call(a):b.values(a):[]},b.size=function(a){return b.toArray(a).length},b.first=b.head=function(a,b,d){return b!=null&&!d?i.call(a,0,b):a[0]},b.initial=function(a,b,d){return i.call(a,0,a.length-(b==null||d?1:b))},b.last=function(a,b,d){return b!=null&&!d?i.call(a,Math.max(a.length-b,0)):a[a.length-1]},b.rest=b.tail=function(a,b,d){return i.call(a,b==null||d?1:b)},b.compact=function(a){return b.filter(a,function(a){return!!a})},b.flatten=function(a,c){return b.reduce(a,function(a,e){return b.isArray(e)?a.concat(c?e:b.flatten(e)):(a[a.length]=e,a)},[])},b.without=function(a){return b.difference(a,i.call(arguments,1))},b.uniq=b.unique=function(a,c,d){var d=d?b.map(a,d):a,e=[];return b.reduce(d,function(d,g,h){if(0==h||(c===!0?b.last(d)!=g:!b.include(d,g)))d[d.length]=g,e[e.length]=a[h];return d},[]),e},b.union=function(){return b.uniq(b.flatten(arguments,!0))},b.intersection=b.intersect=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})},b.difference=function(a){var c=b.flatten(i.call(arguments,1));return b.filter(a,function(a){return!b.include(c,a)})},b.zip=function(){for(var a=i.call(arguments),c=b.max(b.pluck(a,"length")),d=Array(c),e=0;e<c;e++)d[e]=b.pluck(a,""+e);return d},b.indexOf=function(a,c,d){if(a==null)return-1;var e;if(d)return d=b.sortedIndex(a,c),a[d]===c?d:-1;if(p&&a.indexOf===p)return a.indexOf(c);for(d=0,e=a.length;d<e;d++)if(d in a&&a[d]===c)return d;return-1},b.lastIndexOf=function(a,b){if(a==null)return-1;if(D&&a.lastIndexOf===D)return a.lastIndexOf(b);for(var d=a.length;d--;)if(d in a&&a[d]===b)return d;return-1},b.range=function(a,b,d){arguments.length<=1&&(b=a||0,a=0);for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;)g[f++]=a,a+=d;return g};var F=function(){};b.bind=function(a,c){var d,e;if(a.bind===s&&s)return s.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;return e=i.call(arguments,2),d=function(){if(this instanceof d){F.prototype=a.prototype;var b=new F,g=a.apply(b,e.concat(i.call(arguments)));return Object(g)===g?g:b}return a.apply(c,e.concat(i.call(arguments)))}},b.bindAll=function(a){var c=i.call(arguments,1);return c.length==0&&(c=b.functions(a)),j(c,function(c){a[c]=b.bind(a[c],a)}),a},b.memoize=function(a,c){var d={};return c||(c=b.identity),function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}},b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(a,d)},b)},b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))},b.throttle=function(a,c){var d,e,f,g,h,i=b.debounce(function(){h=g=!1},c);return function(){d=this,e=arguments;var b;f||(f=setTimeout(function(){f=null,h&&a.apply(d,e),i()},c)),g?h=!0:a.apply(d,e),i(),g=!0}},b.debounce=function(a,b){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,a.apply(e,f)},b)}},b.once=function(a){var b=!1,d;return function(){return b?d:(b=!0,d=a.apply(this,arguments))}},b.wrap=function(a,b){return function(){var d=[a].concat(i.call(arguments,0));return b.apply(this,d)}},b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}},b.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},b.keys=J||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&(c[c.length]=d);return c},b.values=function(a){return b.map(a,b.identity)},b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()},b.extend=function(a){return j(i.call(arguments,1),function(b){for(var d in b)a[d]=b[d]}),a},b.defaults=function(a){return j(i.call(arguments,1),function(b){for(var d in b)a[d]==null&&(a[d]=b[d])}),a},b.clone=function(a){return b.isObject(a)?b.isArray(a)?a.slice():b.extend({},a):a},b.tap=function(a,b){return b(a),a},b.isEqual=function(a,b){return q(a,b,[])},b.isEmpty=function(a){if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return!1;return!0},b.isElement=function(a){return!!a&&a.nodeType==1},b.isArray=o||function(a){return l.call(a)=="[object Array]"},b.isObject=function(a){return a===Object(a)},b.isArguments=function(a){return l.call(a)=="[object Arguments]"},b.isArguments(arguments)||(b.isArguments=function(a){return!!a&&!!b.has(a,"callee")}),b.isFunction=function(a){return l.call(a)=="[object Function]"},b.isString=function(a){return l.call(a)=="[object String]"},b.isNumber=function(a){return l.call(a)=="[object Number]"},b.isNaN=function(a){return a!==a},b.isBoolean=function(a){return a===!0||a===!1||l.call(a)=="[object Boolean]"},b.isDate=function(a){return l.call(a)=="[object Date]"},b.isRegExp=function(a){return l.call(a)=="[object RegExp]"},b.isNull=function(a){return a===null},b.isUndefined=function(a){return a===void 0},b.has=function(a,b){return I.call(a,b)},b.noConflict=function(){return r._=G,this},b.identity=function(a){return a},b.times=function(a,b,d){for(var e=0;e<a;e++)b.call(d,e)},b.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},b.mixin=function(a){j(b.functions(a),function(c){K(c,b[c]=a[c])})};var L=0;b.uniqueId=function(a){var b=L++;return a?a+b:b},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var t=/.^/,u=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};b.template=function(a,c){var d=b.templateSettings,d="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(d.escape||t,function(a,b){return"',_.escape("+u(b)+"),'"}).replace(d.interpolate||t,function(a,b){return"',"+u(b)+",'"}).replace(d.evaluate||t,function(a,b){return"');"+u(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",e=new Function("obj","_",d);return c?e(c,b):function(a){return e.call(this,a,b)}},b.chain=function(a){return b(a).chain()};var m=function(a){this._wrapped=a};b.prototype=m.prototype;var v=function(a,c){return c?b(a).chain():a},K=function(a,c){m.prototype[a]=function(){var a=i.call(arguments);return H.call(a,this._wrapped),v(c.apply(b,a),this._chain)}};b.mixin(b),j("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=k[a];m.prototype[a]=function(){var d=this._wrapped;b.apply(d,arguments);var e=d.length;return(a=="shift"||a=="splice")&&e===0&&delete d[0],v(d,this._chain)}}),j(["concat","join","slice"],function(a){var b=k[a];m.prototype[a]=function(){return v(b.apply(this._wrapped,arguments),this._chain)}}),m.prototype.chain=function(){return this._chain=!0,this},m.prototype.value=function(){return this._wrapped}}.call(this),define("underscorejs",function(global){return function(){return global._}}(this)),function(){var l=this,y=l.Backbone,z=Array.prototype.slice,A=Array.prototype.splice,g;g="undefined"!=typeof exports?exports:l.Backbone={},g.VERSION="0.9.2";var f=l._;!f&&"undefined"!=typeof require&&(f=require("underscore"));var i=l.jQuery||l.Zepto||l.ender;g.setDomLibrary=function(a){i=a},g.noConflict=function(){return l.Backbone=y,this},g.emulateHTTP=!1,g.emulateJSON=!1;var p=/\s+/,k=g.Events={on:function(a,b,c){var d,e,f,g,j;if(!b)return this;a=a.split(p);for(d=this._callbacks||(this._callbacks={});e=a.shift();)f=(j=d[e])?j.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:j?j.next:f};return this},off:function(a,b,c){var d,e,h,g,j,q;if(e=this._callbacks){if(!a&&!b&&!c)return delete this._callbacks,this;for(a=a?a.split(p):f.keys(e);d=a.shift();)if(h=e[d],delete e[d],h&&(b||c))for(g=h.tail;(h=h.next)!==g;)(j=h.callback,q=h.context,b&&j!==b||c&&q!==c)&&this.on(d,j,q);return this}},trigger:function(a){var b,c,d,e,f,g;if(!(d=this._callbacks))return this;f=d.all,a=a.split(p);for(g=z.call(arguments,1);b=a.shift();){if(c=d[b])for(e=c.tail;(c=c.next)!==e;)c.callback.apply(c.context||this,g);if(c=f){e=c.tail;for(b=[b].concat(g);(c=c.next)!==e;)c.callback.apply(c.context||this,b)}}return this}};k.bind=k.on,k.unbind=k.off;var o=g.Model=function(a,b){var c;a||(a={}),b&&b.parse&&(a=this.parse(a));if(c=n(this,"defaults"))a=f.extend({},c,a);b&&b.collection&&(this.collection=b.collection),this.attributes={},this._escapedAttributes={},this.cid=f.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(a,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=f.clone(this.attributes),this.initialize.apply(this,arguments)};f.extend(o.prototype,k,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(){return f.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;return(b=this._escapedAttributes[a])?b:(b=this.get(a),this._escapedAttributes[a]=f.escape(null==b?"":""+b))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b),c||(c={});if(!d)return this;d instanceof o&&(d=d.attributes);if(c.unset)for(e in d)d[e]=void 0;if(!this._validate(d,c))return!1;this.idAttribute in d&&(this.id=d[this.idAttribute]);var b=c.changes={},h=this.attributes,g=this._escapedAttributes,j=this._previousAttributes||{};for(e in d){a=d[e];if(!f.isEqual(h[e],a)||c.unset&&f.has(h,e))delete g[e],(c.silent?this._silent:b)[e]=!0;c.unset?delete h[e]:h[e]=a,!f.isEqual(j[e],a)||f.has(h,e)!=f.has(j,e)?(this.changed[e]=a,c.silent||(this._pending[e]=!0)):(delete this.changed[e],delete this._pending[e])}return c.silent||this.change(c),this},unset:function(a,b){return(b||(b={})).unset=!0,this.set(a,null,b)},clear:function(a){return(a||(a={})).unset=!0,this.set(f.clone(this.attributes),a)},fetch:function(a){var a=a?f.clone(a):{},b=this,c=a.success;return a.success=function(d,e,f){if(!b.set(b.parse(d,f),a))return!1;c&&c(b,d)},a.error=g.wrapError(a.error,b,a),(this.sync||g.sync).call(this,"read",this,a)},save:function(a,b,c){var d,e;f.isObject(a)||null==a?(d=a,c=b):(d={},d[a]=b),c=c?f.clone(c):{};if(c.wait){if(!this._validate(d,c))return!1;e=f.clone(this.attributes)}a=f.extend({},c,{silent:!0});if(d&&!this.set(d,c.wait?a:c))return!1;var h=this,i=c.success;return c.success=function(a,b,e){b=h.parse(a,e),c.wait&&(delete c.wait,b=f.extend(d||{},b));if(!h.set(b,c))return!1;i?i(h,a):h.trigger("sync",h,a,c)},c.error=g.wrapError(c.error,h,c),b=this.isNew()?"create":"update",b=(this.sync||g.sync).call(this,b,this,c),c.wait&&this.set(e,a),b},destroy:function(a){var a=a?f.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};if(this.isNew())return d(),!1;a.success=function(e){a.wait&&d(),c?c(b,e):b.trigger("sync",b,e,a)},a.error=g.wrapError(a.error,b,a);var e=(this.sync||g.sync).call(this,"delete",this,a);return a.wait||d(),e},url:function(){var a=n(this,"urlRoot")||n(this.collection,"url")||t();return this.isNew()?a:a+("/"==a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var c in this._silent)this._pending[c]=!0;var d=f.extend({},a.changes,this._silent);this._silent={};for(c in d)this.trigger("change:"+c,this,this.get(c),a);if(b)return this;for(;!f.isEmpty(this._pending);){this._pending={},this.trigger("change",this,a);for(c in this.changed)!this._pending[c]&&!this._silent[c]&&delete this.changed[c];this._previousAttributes=f.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(a){return arguments.length?f.has(this.changed,a):!f.isEmpty(this.changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?f.clone(this.changed):!1;var b,c=!1,d=this._previousAttributes,e;for(e in a)f.isEqual(d[e],b=a[e])||((c||(c={}))[e]=b);return c},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return f.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;var a=f.extend({},this.attributes,a),c=this.validate(a,b);return c?(b&&b.error?b.error(this,c,b):this.trigger("error",this,c,b),!1):!0}});var r=g.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})};f.extend(r.prototype,k,{model:o,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var c,d,e,g,i,j={},k={},l=[];b||(b={}),a=f.isArray(a)?a.slice():[a],c=0;for(d=a.length;c<d;c++){if(!(e=a[c]=this._prepareModel(a[c],b)))throw Error("Can't add an invalid model to a collection");g=e.cid,i=e.id,j[g]||this._byCid[g]||null!=i&&(k[i]||this._byId[i])?l.push(c):j[g]=k[i]=e}for(c=l.length;c--;)a.splice(l[c],1);c=0;for(d=a.length;c<d;c++)(e=a[c]).on("all",this._onModelEvent,this),this._byCid[e.cid]=e,null!=e.id&&(this._byId[e.id]=e);this.length+=d,A.apply(this.models,[null!=b.at?b.at:this.models.length,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;c=0;for(d=this.models.length;c<d;c++)j[(e=this.models[c]).cid]&&(b.index=c,e.trigger("add",e,this,b));return this},remove:function(a,b){var c,d,e,g;b||(b={}),a=f.isArray(a)?a.slice():[a],c=0;for(d=a.length;c<d;c++)if(g=this.getByCid(a[c])||this.get(a[c]))delete this._byId[g.id],delete this._byCid[g.cid],e=this.indexOf(g),this.models.splice(e,1),this.length--,b.silent||(b.index=e,g.trigger("remove",g,this,b)),this._removeReference(g);return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,b),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,f.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return f.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");var b=f.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return f.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);return this._reset(),this.add(a,f.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?f.clone(a):{},void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;return a.success=function(d,e,f){b[a.add?"add":"reset"](b.parse(d,f),a),c&&c(b,d)},a.error=g.wrapError(a.error,b,a),(this.sync||g.sync).call(this,"read",this,a)},create:function(a,b){var c=this,b=b?f.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||c.add(a,b);var d=b.success;return b.success=function(e,f){b.wait&&c.add(e,b),d?d(e,f):e.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a){return a},chain:function(){return f(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){return b||(b={}),a instanceof o?a.collection||(a.collection=this):(b.collection=this,a=new this.model(a,b),a._validate(a.attributes,b)||(a=!1)),a},_removeReference:function(a){this==a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"==a||"remove"==a)&&c!=this||("destroy"==a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments))}}),f.each("forEach,each,map,reduce,reduceRight,find,detect,filter,select,reject,every,all,some,any,include,contains,invoke,max,min,sortBy,sortedIndex,toArray,size,first,initial,rest,last,without,indexOf,shuffle,lastIndexOf,isEmpty,groupBy".split(","),function(a){r.prototype[a]=function(){return f[a].apply(f,[this.models].concat(f.toArray(arguments)))}});var u=g.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},B=/:\w+/g,C=/\*\w+/g,D=/[-[\]{}()+?.,\\^$|#\s]/g;f.extend(u.prototype,k,{initialize:function(){},route:function(a,b,c){return g.history||(g.history=new m),f.isRegExp(a)||(a=this._routeToRegExp(a)),c||(c=this[b]),g.history.route(a,f.bind(function(d){d=this._extractParameters(a,d),c&&c.apply(this,d),this.trigger.apply(this,["route:"+b].concat(d)),g.history.trigger("route",this,b,d)},this)),this},navigate:function(a,b){g.history.navigate(a,b)},_bindRoutes:function(){if(this.routes){var a=[],b;for(b in this.routes)a.unshift([b,this.routes[b]]);b=0;for(var c=a.length;b<c;b++)this.route(a[b][0],a[b][1],this[a[b][1]])}},_routeToRegExp:function(a){return a=a.replace(D,"\\$&").replace(B,"([^/]+)").replace(C,"(.*?)"),RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var m=g.History=function(){this.handlers=[],f.bindAll(this,"checkUrl")},s=/^[#\/]/,E=/msie [\w.]+/;m.started=!1,f.extend(m.prototype,k,{interval:50,getHash:function(a){return(a=(a?a.location:window.location).href.match(/#(.*)$/))?a[1]:""},getFragment:function(a,b){if(null==a)if(this._hasPushState||b){var a=window.location.pathname,c=window.location.search;c&&(a+=c)}else a=this.getHash();return a.indexOf(this.options.root)||(a=a.substr(this.options.root.length)),a.replace(s,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0,this.options=f.extend({},{root:"/"},this.options,a),this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState);var a=this.getFragment(),b=document.documentMode;if(b=E.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b))this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a);this._hasPushState?i(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!b?i(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=a,a=window.location,b=a.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&b&&a.hash&&(this.fragment=this.getHash().replace(s,""),window.history.replaceState({},document.title,a.protocol+"//"+a.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){i(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a==this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a==this.fragment)return!1;this.iframe&&this.navigate(a),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return f.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};var c=(a||"").replace(s,"");this.fragment!=c&&(this._hasPushState?(0!=c.indexOf(this.options.root)&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a))},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var v=g.View=function(a){this.cid=f.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},F=/^(\S+)\s*(.*)$/,w="model,collection,el,id,attributes,className,tagName".split(",");f.extend(v.prototype,k,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,b,c){return a=document.createElement(a),b&&i(a).attr(b),c&&i(a).html(c),a},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof i?a:i(a),this.el=this.$el[0],!1!==b&&this.delegateEvents(),this},delegateEvents:function(a){if(a||(a=n(this,"events"))){this.undelegateEvents();for(var b in a){var c=a[b];f.isFunction(c)||(c=this[a[b]]);if(!c)throw Error('Method "'+a[b]+'" does not exist');var d=b.match(F),e=d[1],d=d[2],c=f.bind(c,this),e=e+(".delegateEvents"+this.cid);""===d?this.$el.bind(e,c):this.$el.delegate(d,e,c)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=f.extend({},this.options,a));for(var b=0,c=w.length;b<c;b++){var d=w[b];a[d]&&(this[d]=a[d])}this.options=a},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var a=n(this,"attributes")||{};this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}}}),o.extend=r.extend=u.extend=v.extend=function(a,b){var c=G(this,a,b);return c.extend=this.extend,c};var H={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};g.sync=function(a,b,c){var d=H[a];c||(c={});var e={type:d,dataType:"json"};return c.url||(e.url=n(b,"url")||t()),!c.data&&b&&("create"==a||"update"==a)&&(e.contentType="application/json",e.data=JSON.stringify(b.toJSON())),g.emulateJSON&&(e.contentType="application/x-www-form-urlencoded",e.data=e.data?{model:e.data}:{}),g.emulateHTTP&&("PUT"===d||"DELETE"===d)&&(g.emulateJSON&&(e.data._method=d),e.type="POST",e.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d)}),"GET"!==e.type&&!g.emulateJSON&&(e.processData=!1),i.ajax(f.extend(e,c))},g.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d,a?a(b,e,c):b.trigger("error",b,e,c)}};var x=function(){},G=function(a,b,c){var d;return d=b&&b.hasOwnProperty("constructor")?b.constructor:function(){a.apply(this,arguments)},f.extend(d,a),x.prototype=a.prototype,d.prototype=new x,b&&f.extend(d.prototype,b),c&&f.extend(d,c),d.prototype.constructor=d,d.__super__=a.prototype,d},n=function(a,b){return!a||!a[b]?null:f.isFunction(a[b])?a[b]():a[b]},t=function(){throw Error('A "url" property or function must be specified')}}.call(this),define("backbone",function(){}),function(c){var d={},a=/^(([a-z][\-a-z0-9+\.]*):)?(\/\/([^\/?#]+))?([^?#]*)?(\?([^#]*))?(#(.*))?$/i,g,b=function(j){var h=j.match(a);if(h===null)throw"Malformed URI: "+j;return{scheme:h[1]?h[2].toLowerCase():undefined,authority:h[3]?h[4]:undefined,path:h[5]||"",query:h[6]?h[7]:undefined,fragment:h[8]?h[9]:undefined}},f=function(j){var k="",h=[];if(/\./.test(j)){while(j!==undefined&&j!=="")j==="."||j===".."?j="":/^\.\.\//.test(j)?j=j.substring(3):/^\.\//.test(j)?j=j.substring(2):/^\/\.(\/|$)/.test(j)?j="/"+j.substring(3):/^\/\.\.(\/|$)/.test(j)?(j="/"+j.substring(4),k=k.replace(/\/?[^\/]+$/,"")):(h=j.match(/^(\/?[^\/]*)(\/.*)?$/),j=h[2],k+=h[1]);return k}return j},e=function(h,j){return h.authority===""||h.path!==undefined&&h.path!==""?h.path.replace(/[^\/]+$/,"")+j:"/"+j};c.uri=function(k,j){var h;return k=k||"",d[k]?d[k]:(j=j||c.uri.base(),typeof j=="string"&&(j=c.uri.absolute(j)),h=new c.uri.fn.init(k,j),d[h]?d[h]:(d[h]=h,h))},c.uri.fn=c.uri.prototype={scheme:undefined,authority:undefined,path:undefined,query:undefined,fragment:undefined,init:function(k,j){var h={};j=j||{},c.extend(this,b(k)),this.scheme===undefined&&(this.scheme=j.scheme,this.authority!==undefined?this.path=f(this.path):(this.authority=j.authority,this.path===""?(this.path=j.path,this.query===undefined&&(this.query=j.query)):(/^\//.test(this.path)||(this.path=e(j,this.path)),this.path=f(this.path))));if(this.scheme===undefined)throw"Malformed URI: URI is not an absolute URI and no base supplied: "+k;return this},resolve:function(h){return c.uri(h,this)},relative:function(q){var n,o,m=0,k,l=[],h="";typeof q=="string"&&(q=c.uri(q,{}));if(q.scheme!==this.scheme||q.authority!==this.authority)return q.toString();if(q.path!==this.path){n=q.path.split("/"),o=this.path.split("/");if(n[1]!==o[1])h=q.path;else{while(n[m]===o[m])m+=1;k=m;for(;m<o.length-1;m+=1)l.push("..");for(;k<n.length;k+=1)l.push(n[k]);h=l.join("/")}return h=q.query===undefined?h:h+"?"+q.query,h=q.fragment===undefined?h:h+"#"+q.fragment,h}return q.query!==undefined&&q.query!==this.query?"?"+q.query+(q.fragment===undefined?"":"#"+q.fragment):q.fragment!==undefined&&q.fragment!==this.fragment?"#"+q.fragment:""},toString:function(){var h="";return this._string?this._string:(h=this.scheme===undefined?h:h+this.scheme+":",h=this.authority===undefined?h:h+"//"+this.authority,h+=this.path,h=this.query===undefined?h:h+"?"+this.query,h=this.fragment===undefined?h:h+"#"+this.fragment,this._string=h,h)}},c.uri.fn.init.prototype=c.uri.fn,c.uri.absolute=function(h){return c.uri(h,{})},c.uri.resolve=function(j,h){return c.uri(j,h)},c.uri.relative=function(j,h){return c.uri(h,{}).relative(j)},c.uri.base=function(){return c(document).base()},c.fn.base=function(){var h=c(this).parents().andSelf().find("base").attr("href"),j=c(this)[0].ownerDocument||document,k=c.uri.absolute(j.location===null?document.location.href:j.location.href);return h===undefined?k:c.uri(h,k)}}(jQuery),function(e){var a="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",c=/\sxmlns(?::([^ =]+))?\s*=\s*(?:"([^"]*)"|'([^']*)')/g,f="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",b="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",d=new RegExp("^"+b+f+"*$");e.fn.xmlns=function(m,j,n){var k=this.eq(0),r=k.data("xmlns"),o=k[0],s,h,l,q=m?"xmlns:"+m:"xmlns",t,w,u=!1;if(j===undefined){if(m===undefined){if(!r){r={};if(o.attributes&&o.attributes.getNamedItemNS)for(l=0;l<o.attributes.length;l+=1){s=o.attributes[l];if(/^xmlns(:(.+))?$/.test(s.nodeName)){m=/^xmlns(:(.+))?$/.exec(s.nodeName)[2]||"",t=s.nodeValue;if(m===""||t!==""&&t!==a&&t!==g&&d.test(m)&&m!=="xml"&&m!=="xmlns")r[m]=e.uri(s.nodeValue),u=!0}}else{w=/<[^>]+>/.exec(o.outerHTML),s=c.exec(w);while(s!==null){m=s[1]||"",t=s[2]||s[3];if(m===""||t!==""&&t!==a&&t!==g&&d.test(m)&&m!=="xml"&&m!=="xmlns")r[m]=e.uri(s[2]||s[3]),u=!0;s=c.exec(w)}c.lastIndex=0}n=n||(o.parentNode.nodeType===1?k.parent().xmlns():{}),r=u?e.extend({},n,r):n,k.data("xmlns",r)}return r}if(typeof m=="object"){for(h in m)typeof m[h]=="string"&&d.test(h)&&this.xmlns(h,m[h]);return this.find("*").andSelf().removeData("xmlns"),this}return r||(r=k.xmlns()),r[m]}return this.find("*").andSelf().removeData("xmlns"),this.attr(q,j)},e.fn.removeXmlns=function(k){var h,l,j;if(typeof k=="object")if(k.length===undefined)for(l in k)typeof k[l]=="string"&&this.removeXmlns(l);else for(j=0;j<k.length;j+=1)this.removeXmlns(k[j]);else h=k?"xmlns:"+k:"xmlns",this.removeAttr(h);return this.find("*").andSelf().removeData("xmlns"),this},e.fn.qname=function(j){var h,l,k;j===undefined&&(this[0].outerHTML===undefined?j=this[0].nodeName.toLowerCase():j=/<([^ >]+)/.exec(this[0].outerHTML)[1].toLowerCase());if(j==="?xml:namespace")throw"XMLinHTML: Unable to get the prefix to resolve the name of this element";h=/^(([^:]+):)?([^:]+)$/.exec(j),l=h[2]||"",k=this.xmlns(l);if(k===undefined&&l!=="")throw"MalformedQName: The prefix "+l+" is not declared";return{namespace:k,localPart:h[3],prefix:l,name:j}}}(jQuery),function(b){var a=function(c){return c.replace(/[ \t\n\r]+/," ").replace(/^ +/,"").replace(/ +$/,"")};b.typedValue=function(d,c){return b.typedValue.fn.init(d,c)},b.typedValue.fn=b.typedValue.prototype={representation:undefined,value:undefined,datatype:undefined,init:function(e,c){var f=b.typedValue.types[c];return this.representation=e,this.datatype=c,this.value=f===undefined?a(e):f.value(f.strip?a(e):e),this}},b.typedValue.fn.init.prototype=b.typedValue.fn,b.typedValue.types={},b.typedValue.types["http://www.w3.org/2001/XMLSchema#string"]={regex:/^.*$/,strip:!1,value:function(c){return c}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#token"]={regex:/^.*$/,strip:!0,value:function(c){return a(c)}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#NCName"]={regex:/^[a-z_][-\.a-z0-9]+$/i,strip:!0,value:function(c){return a(c)}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#boolean"]={regex:/^(?:true|false|1|0)$/,strip:!0,value:function(c){return c==="true"||c==="1"}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#decimal"]={regex:/^[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)$/,strip:!0,value:function(c){return c=c.replace(/^0+/,"").replace(/0+$/,""),c===""&&(c="0.0"),c.substring(0,1)==="."&&(c="0"+c),/\.$/.test(c)?c+="0":/\./.test(c)||(c+=".0"),c}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#integer"]={regex:/^[\-\+]?[0-9]+$/,strip:!0,value:function(c){return parseInt(c,10)}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#int"]={regex:/^[\-\+]?[0-9]+$/,strip:!0,value:function(c){return parseInt(c,10)}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#float"]={regex:/^(?:[\-\+]?(?:[0-9]+\.[0-9]*|\.[0-9]+|[0-9]+)(?:[eE][\-\+]?[0-9]+)?|[\-\+]?INF|NaN)$/,strip:!0,value:function(c){return c==="-INF"?-1/0:c==="INF"||c==="+INF"?1/0:parseFloat(c)}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#double"]={regex:b.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].regex,strip:!0,value:b.typedValue.types["http://www.w3.org/2001/XMLSchema#float"].value},b.typedValue.types["http://www.w3.org/2001/XMLSchema#duration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?(?:([0-9]+)D)?(?:T(?:([0-9]+)H)?(?:([0-9]+)M)?(?:([0-9]+(?:\.[0-9]+)?)?S)?)$/,validate:function(d){var c=this.regex.exec(d);return c[2]||c[3]||c[4]||c[5]||c[6]||c[7]},strip:!0,value:function(c){return c}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#yearMonthDuration"]={regex:/^([\-\+])?P(?:([0-9]+)Y)?(?:([0-9]+)M)?$/,validate:function(d){var c=this.regex.exec(d);return c[2]||c[3]},strip:!0,value:function(e){var d=this.regex.exec(e),f=d[2]||0,c=d[3]||0;return c+=f*12,d[1]==="-"?-1*c:c}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#dateTime"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):(([0-9]{2})(\.([0-9]+))?)((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(d){var c=this.regex.exec(d),g=parseInt(c[1],10),j=c[10]===undefined||c[10]==="Z"?"+0000":c[10].replace(/:/,""),f;if(g===0||parseInt(j,10)<-1400||parseInt(j,10)>1400)return!1;try{g=g<100?Math.abs(g)+1e3:g,month=parseInt(c[2],10),day=parseInt(c[3],10);if(day>31)return!1;if(day>30&&month!==1&&month!==3&&month!==5&&month!==7&&month!==8&&month!==10&&month!==12)return!1;if(month===2){if(day>29)return!1;if(day===29&&(g%4!==0||g%100===0&&g%400!==0))return!1}return f=""+g+"/"+c[2]+"/"+c[3]+" "+c[4]+":"+c[5]+":"+c[7]+" "+j,f=new Date(f),!0}catch(h){return!1}},strip:!0,value:function(c){return c}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#date"]={regex:/^(-?[0-9]{4,})-([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var c=this.regex.exec(e),f=parseInt(c[1],10),g=parseInt(c[2],10),d=parseInt(c[3],10),h=c[10]===undefined||c[10]==="Z"?"+0000":c[10].replace(/:/,"");return f===0||g>12||d>31||parseInt(h,10)<-1400||parseInt(h,10)>1400?!1:!0},strip:!0,value:function(c){return c}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#gYear"]={regex:/^-?([0-9]{4,})$/,validate:function(c){var d=parseInt(c,10);return d!==0},strip:!0,value:function(c){return parseInt(c,10)}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#gMonthDay"]={regex:/^--([0-9]{2})-([0-9]{2})((?:[\-\+]([0-9]{2}):([0-9]{2}))|Z)?$/,validate:function(e){var c=this.regex.exec(e),f=parseInt(c[1],10),d=parseInt(c[2],10),g=c[3]===undefined||c[3]==="Z"?"+0000":c[3].replace(/:/,"");return f>12||d>31||parseInt(g,10)<-1400||parseInt(g,10)>1400?!1:f===2&&d>29?!1:(f===4||f===6||f===9||f===11)&&d>30?!1:!0},strip:!0,value:function(c){return c}},b.typedValue.types["http://www.w3.org/2001/XMLSchema#anyURI"]={regex:/^.*$/,strip:!0,value:function(c,d){var e=b.extend({},b.typedValue.defaults,d);return b.uri.resolve(c,e.base)}},b.typedValue.defaults={base:b.uri.base(),namespaces:{}},b.typedValue.valid=function(e,c){var f=b.typedValue.types[c];return f===undefined?!0:(e=f.strip?a(e):e,f.regex.test(e)?f.validate===undefined?!0:f.validate(e):!1)}}(jQuery),function(a){a.curie=function(f,c){var g=a.extend({},a.curie.defaults,c||{}),b=/^(([^:]*):)?(.+)$/.exec(f),h=b[2],d=b[3],e=g.namespaces[h];if(/^:.+/.test(f)){if(g.reservedNamespace===undefined||g.reservedNamespace===null)throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+f;e=g.reservedNamespace}else if(h){if(e===undefined)throw"Malformed CURIE: No namespace binding for "+h+" in CURIE "+f}else{g.charcase==="lower"?f=f.toLowerCase():g.charcase==="upper"&&(f=f.toUpperCase());if(g.reserved.length&&a.inArray(f,g.reserved)>=0)e=g.reservedNamespace,d=f;else{if(g.defaultNamespace===undefined||g.defaultNamespace===null)throw"Malformed CURIE: No prefix and no default namespace for unprefixed CURIE "+f;e=g.defaultNamespace}}return a.uri(e+d)},a.curie.defaults={namespaces:{},reserved:[],reservedNamespace:undefined,defaultNamespace:undefined,charcase:"preserve"},a.safeCurie=function(d,c){var b=/^\[([^\]]+)\]$/.exec(d);return b?a.curie(b[1],c):a.uri(d)},a.createCurie=function(f,b){var e=a.extend({},a.curie.defaults,b||{}),d=e.namespaces,c;f=a.uri(f).toString(),e.reservedNamespace!==undefined&&f.substring(0,e.reservedNamespace.toString().length)===e.reservedNamespace.toString()?(c=f.substring(e.reservedNamespace.toString().length),a.inArray(c,e.reserved)===-1&&(c=":"+c)):a.each(d,function(h,g){if(f.substring(0,g.toString().length)===g.toString())return c=h+":"+f.substring(g.toString().length),null});if(c===undefined)throw"No Namespace Binding: There's no appropriate namespace binding for generating a CURIE from "+f;return c},a.fn.curie=function(c,b){var d=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},b||{});return a.curie(c,d)},a.fn.safeCurie=function(d,b){var c=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},b||{});return a.safeCurie(d,c)},a.fn.createCurie=function(d,b){var c=a.extend({},a.fn.curie.defaults,{namespaces:this.xmlns()},b||{});return a.createCurie(d,c)},a.fn.curie.defaults={reserved:["alternate","appendix","bookmark","cite","chapter","contents","copyright","first","glossary","help","icon","index","last","license","meta","next","p3pv1","prev","role","section","stylesheet","subsection","start","top","up"],reservedNamespace:"http://www.w3.org/1999/xhtml/vocab#",defaultNamespace:undefined,charcase:"lower"}}(jQuery),function(E){var f={},c={},t={},D={},r={},h="http://www.w3.org/2001/XMLSchema#",w="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u="http://www.w3.org/2000/01/rdf-schema#",z=/^<(([^>]|\\>)*)>$/,O=/^("""((\\"|[^"])*)"""|"((\\"|[^"])*)")(@([a-z]+(-[a-z0-9]+)*)|\^\^(.+))?$/,g=/(("""((\\"|[^"])*)""")|("(\\"|[^"]|)*")|(<(\\>|[^>])*>)|\S)+/g,x=databankSeed=(new Date).getTime()%1e3,j=function(){return x+=1,"b"+x.toString(16)},H=function(){return databankSeed+=1,"data"+databankSeed.toString(16)},I={},N={},k=function(R,S){if(typeof R!="string")return R;try{return E.rdf.resource(R,S)}catch(U){try{return E.rdf.blank(R,S)}catch(T){throw"Bad Triple: Subject "+R+" is not a resource: "+T}}},M=function(S,R){if(S==="a")return E.rdf.type;if(typeof S!="string")return S;try{return E.rdf.resource(S,R)}catch(T){throw"Bad Triple: Property "+S+" is not a resource: "+T}},J=function(R,T){if(typeof R!="string")return R;try{return E.rdf.resource(R,T)}catch(V){try{return E.rdf.blank(R,T)}catch(U){try{return E.rdf.literal(R,T)}catch(S){throw"Bad Triple: Object "+R+" is not a resource or a literal "+S}}}},a=function(U,S,T){var R;return typeof S=="string"?(R=S.substring(1),T[R]&&T[R]!==U?null:(T[R]=U,T)):S===U?T:null},P=function(R,S){if(R.union===undefined){if(S.subject.type!==undefined)return R.subjectIndex[S.subject]===undefined?[]:E.map(R.subjectIndex[S.subject],function(T){var U=S.exec(T);return U===null?null:{bindings:U,triples:[T]}});if(S.object.type==="uri"||S.object.type==="bnode")return R.objectIndex[S.object]===undefined?[]:E.map(R.objectIndex[S.object],function(T){var U=S.exec(T);return U===null?null:{bindings:U,triples:[T]}});if(S.property.type!==undefined)return R.propertyIndex[S.property]===undefined?[]:E.map(R.propertyIndex[S.property],function(T){var U=S.exec(T);return U===null?null:{bindings:U,triples:[T]}})}return E.map(R.triples(),function(T){var U=S.exec(T);return U===null?null:{bindings:U,triples:[T]}})},q=function(R,T,S){return E.map(R,function(W,U){var V=E.map(T,function(Z){var Y,X,aa=!0;for(Y in Z.bindings){X=Z.bindings[Y];if(W.bindings[Y]!==undefined&&W.bindings[Y]!==X){aa=!1;break}}return aa?Z:null});return V.length>0?E.map(V,function(X){return{bindings:E.extend({},W.bindings,X.bindings),triples:b(W.triples.concat(X.triples))}}):S?W:null})},Q=function(R,T){var S,U,V;T.filterExp!==undefined&&!E.isFunction(T.filterExp)&&(R.union===undefined?(S=typeof T.filterExp.subject=="string"?"":T.filterExp.subject,U=typeof T.filterExp.property=="string"?"":T.filterExp.property,V=typeof T.filterExp.object=="string"?"":T.filterExp.object,R.queries[S]===undefined&&(R.queries[S]={}),R.queries[S][U]===undefined&&(R.queries[S][U]={}),R.queries[S][U][V]===undefined&&(R.queries[S][U][V]=[]),R.queries[S][U][V].push(T)):E.each(R.union,function(X,W){Q(W,T)}))},A=function(R){R.length=0,R.matches=[],E.each(R.children,function(S,T){A(T)}),E.each(R.partOf,function(S,T){A(T)})},F=function(S,R){R.length>0&&(E.each(S.children,function(T,U){G(U,R)}),E.each(S.partOf,function(T,U){F(U,R)}),E.each(R,function(U,T){S.matches.push(T),Array.prototype.push.call(S,T.bindings)}))},n=function(aa,ad){var Y,S,ae,X,W,V,ac,R=ad.length,U,Z={},T={},af={},ab=[];for(Y=0;Y<aa.length;Y+=1){S=aa[Y].bindings,ae=aa[Y].triples,T=af;for(X=0;X<R;X+=1){V=ad[X],ac=S[V];if(X===R-1)if(T[ac]===undefined){Z={bindings:{},triples:ae};for(W=0;W<R;W+=1)Z.bindings[ad[W]]=S[ad[W]];T[ac]=Z,ab.push(Z)}else Z=T[ac],Z.triples=Z.triples.concat(ae);else T[ac]===undefined&&(T[ac]={}),T=T[ac]}}return ab},K=function(X,R){var V,S,U,W={},T=[];for(V=0;V<X.length;V+=1)S=X[V],W[S.bindings[R]]===undefined?(U={bindings:{node:S.bindings[R]},triples:S.triples},T.push(U),W[S.bindings[R]]=U):(U=W[S.bindings[R]],U.triples=U.triples.concat(S.triples));return T},G=function(T,S){var R;T.union===undefined?T.top||T.parent.top?R=T.alphaMemory:(S=S||T.parent.matches,E.isFunction(T.filterExp)?R=E.map(S,function(U,V){return T.filterExp.call(U.bindings,V,U.bindings,U.triples)?U:null}):T.filterExp!==undefined?R=q(S,T.alphaMemory,T.filterExp.optional):R=S):R=E.map(T.union,function(U){return U.matches}),T.selections!==undefined?R=n(R,T.selections):T.navigate!==undefined&&(R=K(R,T.navigate)),F(T,R)},o=function(T,S){var R;T.filterExp.optional?(A(T),G(T)):(T.top||T.parent.top?R=[S]:R=q(T.parent.matches,[S],!1),F(T,R))},L=function(S,T){var R,U=S.filterExp.exec(T);U!==null&&(R={triples:[T],bindings:U},S.alphaMemory.push(R),o(S,R))},d=function(R,S){R.alphaMemory.splice(E.inArray(S,R.alphaMemory),1),A(R),G(R)},C=function(R,S){E.each(R,function(T,U){L(U,S)})},m=function(R,S){E.each(R,function(T,U){d(U,S)})},e=function(R,V){var S=V.subject,T=V.property,U=V.object;R.union===undefined?(R.queries[S]!==undefined&&(R.queries[S][T]!==undefined&&(R.queries[S][T][U]!==undefined&&C(R.queries[S][T][U],V),R.queries[S][T][""]!==undefined&&C(R.queries[S][T][""],V)),R.queries[S][""]!==undefined&&(R.queries[S][""][U]!==undefined&&C(R.queries[S][""][U],V),R.queries[S][""][""]!==undefined&&C(R.queries[S][""][""],V))),R.queries[""]!==undefined&&(R.queries[""][T]!==undefined&&(R.queries[""][T][U]!==undefined&&C(R.queries[""][T][U],V),R.queries[""][T][""]!==undefined&&C(R.queries[""][T][""],V)),R.queries[""][""]!==undefined&&(R.queries[""][""][U]!==undefined&&C(R.queries[""][""][U],V),R.queries[""][""][""]!==undefined&&C(R.queries[""][""][""],V)))):E.each(R.union,function(X,W){e(W,V)})},s=function(R,V){var S=V.subject,T=V.property,U=V.object;R.union===undefined?(R.queries[S]!==undefined&&(R.queries[S][T]!==undefined&&(R.queries[S][T][U]!==undefined&&m(R.queries[S][T][U],V),R.queries[S][T][""]!==undefined&&m(R.queries[S][T][""],V)),R.queries[S][""]!==undefined&&(R.queries[S][""][U]!==undefined&&m(R.queries[S][""][U],V),R.queries[S][""][""]!==undefined&&m(R.queries[S][""][""],V))),R.queries[""]!==undefined&&(R.queries[""][T]!==undefined&&(R.queries[""][T][U]!==undefined&&m(R.queries[""][T][U],V),R.queries[""][T][""]!==undefined&&m(R.queries[""][T][""],V)),R.queries[""][""]!==undefined&&(R.queries[""][""][U]!==undefined&&m(R.queries[""][""][U],V),R.queries[""][""][""]!==undefined&&m(R.queries[""][""][""],V)))):E.each(R.union,function(X,W){s(W,V)})},y=function(Y,X,V){var R=X[0],U={},T=[],S,W;V=V||{};if(X.length===0){for(S=0;S<Y.length;S+=1)for(v in Y[S])V[v]===undefined&&(V[v]=[]),E.isArray(V[v])&&V[v].push(Y[S][v]);return[V]}for(S=0;S<Y.length;S+=1)key=Y[S][R],U[key]===undefined&&(U[key]=[]),U[key].push(Y[S]);X=X.splice(1,1);for(v in U)W=E.extend({},V),W[R]=U[v][0][R],T=T.concat(y(U[v],X,W));return T},l=function(R,S,T){return N[R.id]===undefined&&(N[R.id]={}),N[R.id][S]===undefined?(N[R.id][S]=T,!1):!0},B=function(S,U,R,T){var V=N[S.id][U];E.isFunction(V[R])&&V[R].call(S,T),N[S.id][U]=undefined},b=function(R){var T=[],S=R.length;for(var V=0;V<S;V++){for(var U=V+1;U<S;U++)R[V]===R[U]&&(U=++V);T.push(R[V])}return T};E.typedValue.types["http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"]={regex:/^.*$/m,strip:!1,value:function(R){return R}},E.rdf=function(R){return new E.rdf.fn.init(R)},E.rdf.fn=E.rdf.prototype={rdfquery:"1.1",init:function(R){var T,S;R=R||{},this.parent=R.parent,this.union=R.union,this.top=this.parent===undefined&&this.union===undefined,this.union===undefined?R.databank===undefined?this.databank=this.parent===undefined?E.rdf.databank(R.triples,R):this.parent.databank:this.databank=R.databank:(T=E.map(this.union,function(U){return U.databank}),T=b(T),T[1]!==undefined?this.databank=E.rdf.databank(undefined,{union:T}):this.databank=T[0]),this.children=[],this.partOf=[],this.filterExp=R.filter,this.selections=R.distinct,this.navigate=R.navigate,this.alphaMemory=[],this.matches=[],this.length=0;if(this.filterExp!==undefined)E.isFunction(this.filterExp)||(Q(this.databank,this),this.alphaMemory=P(this.databank,this.filterExp));else if(R.nodes!==undefined){this.alphaMemory=[];for(S=0;S<R.nodes.length;S+=1)this.alphaMemory.push({bindings:{node:R.nodes[S]},triples:[]})}return G(this),this},base:function(R){return R===undefined?this.databank.base():(this.databank.base(R),this)},prefix:function(S,R){return R===undefined?this.databank.prefix(S):(this.databank.prefix(S,R),this)},add:function(U,S){var T,R;if(U.rdfquery!==undefined){if(U.top)return R=this.databank.add(U.databank),T=E.rdf({parent:this.parent,databank:R}),T;if(this.top)return R=U.databank.add(this.databank),T=E.rdf({parent:U.parent,databank:R}),T;if(this.union===undefined)return T=E.rdf({union:[this,U]}),this.partOf.push(T),U.partOf.push(T),T;this.union.push(U),U.partOf.push(this)}else typeof U=="string"&&(S=E.extend({},{base:this.base(),namespaces:this.prefix(),source:U},S),U=E.rdf.pattern(U,S)),U.isFixed()?this.databank.add(U.triple(),S):(T=this,this.each(function(W,X){var V=U.triple(X);V!==null&&T.databank.add(V,S)}));return this},remove:function(S,R){return typeof S=="string"&&(R=E.extend({},{base:this.base(),namespaces:this.prefix()},R),S=E.rdf.pattern(S,R)),S.isFixed()?this.databank.remove(S.triple(),R):(query=this,this.each(function(U,V){var T=S.triple(V);T!==null&&query.databank.remove(T,R)})),this},load:function(T,R){var S=this,R=R||{},U=R.success;return U!==undefined&&(R.success=function(){U.call(S)}),this.databank.load(T,R),this},except:function(R){return E.rdf({databank:this.databank.except(R.databank)})},where:function(T,S){var W,V,U,R;return S=S||{},typeof T=="string"&&(V=S.base||this.base(),U=E.extend({},this.prefix(),S.namespaces||{}),R=S.optional||!1,T=E.rdf.pattern(T,{namespaces:U,base:V,optional:R})),W=E.rdf(E.extend({},S,{parent:this,filter:T})),this.children.push(W),W},optional:function(S,R){return this.where(S,E.extend({},R||{},{optional:!0}))},about:function(S,R){return this.where(S+" ?property ?value",R)},filter:function(T,U){var R,S;return typeof T=="string"?U.constructor===RegExp?R=function(){return U.test(this[T].value)}:R=function(){return this[T].type==="literal"?this[T].value===U:this[T]===U}:R=T,S=E.rdf({parent:this,filter:R}),this.children.push(S),S},node:function(T){var R,S;return T.toString().substring(0,1)==="?"?(R=T.toString().substring(1),S=E.rdf({parent:this,navigate:R})):(typeof T=="string"&&(T=J(T,{namespaces:this.prefix(),base:this.base()})),S=E.rdf({parent:this,nodes:[T]})),this.children.push(S),S},find:function(R){return this.where("?node "+R+" ?object",{navigate:"object"})},back:function(R){return this.where("?subject "+R+" ?node",{navigate:"subject"})},group:function(W){var V={},U=[],T,S,R;return E.isArray(W)||(W=[W]),E(y(this,W))},select:function(U){var T=[],S,R;for(S=0;S<this.length;S+=1)if(U===undefined)T[S]=this[S];else{T[S]={};for(R=0;R<U.length;R+=1)T[S][U[R]]=this[S][U[R]]}return T},describe:function(V){var S,R,U,T=[];for(S=0;S<V.length;S+=1){U=V[S];if(U.substring(0,1)==="?"){U=U.substring(1);for(R=0;R<this.length;R+=1)T.push(this[R][U])}else T.push(U)}return this.databank.describe(T)},eq:function(R){return this.filter(function(S){return S===R})},reset:function(){var R=this;while(R.parent!==undefined)R=R.parent;return R},end:function(){return this.parent},size:function(){return this.length},sources:function(){return E(E.map(this.matches,function(R){return[R.triples]}))},dump:function(R){var S=E.map(this.matches,function(T){return T.triples});return R=E.extend({namespaces:this.databank.namespaces,base:this.databank.base},R||{}),E.rdf.dump(S,R)},get:function(R){return R===undefined?E.makeArray(this):this[R]},each:function(R){return E.each(this.matches,function(T,S){R.call(S.bindings,T,S.bindings,S.triples)}),this},map:function(R){return E(E.map(this.matches,function(S,T){return R.call(S.bindings,T,S.bindings,S.triples)}))},jquery:function(){return E(this)}},E.rdf.fn.init.prototype=E.rdf.fn,E.rdf.gleaners=[],E.rdf.parsers={},E.rdf.dump=function(Y,R){var U=E.extend({},E.rdf.dump.defaults,R||{}),W=U.format,T=U.serialize,V,X,S;X=E.rdf.parsers[W];if(X===undefined){S=[];for(p in E.rdf.parsers)S.push(p);throw"Unrecognised dump format: "+W+". Expected one of "+S.join(", ")}return V=X.dump(Y,U),T?X.serialize(V):V},E.rdf.dump.defaults={format:"application/json",serialize:!1,indent:!1,namespaces:{}},E.fn.rdf=function(S){var R=[],S=S||function(){return this};return E(this)[0]&&E(this)[0].nodeType===9?E(this).children("*").rdf(S):E(this).length>0?(R=E(this).map(function(T,U){return E.map(E.rdf.gleaners,function(V){return V.call(E(U),{callback:S})})}),E.rdf({triples:R,namespaces:E(this).xmlns()})):E.rdf()},E.extend(E.expr[":"],{about:function(S,U,R){var T=E(S),W=R[3]?T.safeCurie(R[3]):null,V=!1;return E.each(E.rdf.gleaners,function(X,Y){V=Y.call(T,{about:W});if(V)return null}),V},type:function(S,U,R){var T=E(S),V=R[3]?T.curie(R[3]):null,W=!1;return E.each(E.rdf.gleaners,function(X,Y){if(Y.call(T,{type:V}))return W=!0,null}),W}}),E.rdf.databank=function(S,R){return new E.rdf.databank.fn.init(S,R)},E.rdf.databank.fn=E.rdf.databank.prototype={init:function(T,R){var S;T=T||[],R=R||{},this.id=H(),I[this.id]=this;if(R.union===undefined){this.queries={},this.tripleStore=[],this.subjectIndex={},this.propertyIndex={},this.objectIndex={},this.baseURI=R.base||E.uri.base(),this.namespaces=E.extend({},R.namespaces||{});for(S=0;S<T.length;S+=1)this.add(T[S])}else this.union=R.union;return this},base:function(R){return this.union===undefined?R===undefined?this.baseURI:(this.baseURI=R,this):R===undefined?this.union[0].base():(E.each(this.union,function(T,S){S.base(R)}),this)},prefix:function(T,R){var S={};return this.union===undefined?T===undefined?this.namespaces:R===undefined?this.namespaces[T]:(this.namespaces[T]=R,this):R===undefined?(E.each(this.union,function(V,U){E.extend(S,U.prefix())}),T===undefined?S:S[T]):(E.each(this.union,function(V,U){U.prefix(T,R)}),this)},add:function(X,S){var V=S&&S.base||this.base(),U=E.extend({},this.prefix(),S&&S.namespaces||{}),W=S&&S.depth||E.rdf.databank.defaults.depth,T=S&&S.proxy||E.rdf.databank.defaults.proxy,R;if(X===this)return this;if(X.subjectIndex!==undefined)return this.union===undefined?(R=E.rdf.databank(undefined,{union:[this,X]}),R):(this.union.push(X),this);typeof X=="string"&&(X=E.rdf.triple(X,{namespaces:U,base:V,source:X}));if(this.union===undefined){this.subjectIndex[X.subject]===undefined&&(this.subjectIndex[X.subject]=[],W>0&&X.subject.type==="uri"&&this.load(X.subject.value,{depth:W-1,proxy:T})),this.propertyIndex[X.property]===undefined&&(this.propertyIndex[X.property]=[],W>0&&this.load(X.property.value,{depth:W-1,proxy:T}));if(E.inArray(X,this.subjectIndex[X.subject])===-1){this.tripleStore.push(X),this.subjectIndex[X.subject].push(X),this.propertyIndex[X.property].push(X);if(X.object.type==="uri"||X.object.type==="bnode")this.objectIndex[X.object]===undefined&&(this.objectIndex[X.object]=[],W>0&&X.object.type==="uri"&&this.load(X.object.value,{depth:W-1,proxy:T})),this.objectIndex[X.object].push(X);e(this,X)}}else E.each(this.union,function(Z,Y){Y.add(X)});return this},remove:function(X,U){var W=U&&U.base||this.base(),V=E.extend({},this.prefix(),U&&U.namespaces||{}),Y,S,R,T;typeof X=="string"&&(X=E.rdf.triple(X,{namespaces:V,base:W,source:X})),this.tripleStore.splice(E.inArray(X,this.tripleStore),1),Y=this.subjectIndex[X.subject],Y!==undefined&&(Y.splice(E.inArray(X,Y),1),E(Y).size()===0&&delete this.subjectIndex[X.subject]),S=this.propertyIndex[X.property],S!==undefined&&(S.splice(E.inArray(X,S),1),E(S).size()===0&&delete this.propertyIndex[X.property]);if(X.object.type==="uri"||X.object.type==="bnode")R=this.objectIndex[X.object],R!==undefined&&(R.splice(E.inArray(X,R),1),E(R).size()===0&&delete this.objectIndex[X.object]);return s(this,X),this},except:function(S){var R=S.subjectIndex,T=[];return E.each(this.subjectIndex,function(V,W){var U=R[V];U===undefined?T=T.concat(W):E.each(W,function(Y,X){E.inArray(X,U)===-1&&T.push(X)})}),E.rdf.databank(T)},triples:function(){var R,S=[];return this.union===undefined?S=this.tripleStore:(E.each(this.union,function(U,T){S=S.concat(T.triples().get())}),S=b(S)),E(S)},size:function(){return this.triples().length},describe:function(U){var S,T,R,W={},V=[];while(U.length>0){T=U.pop();if(W[T]===undefined){T.value===undefined&&(T=E.rdf.resource(T));if(this.subjectIndex[T]!==undefined)for(S=0;S<this.subjectIndex[T].length;S+=1)R=this.subjectIndex[T][S],V.push(R),R.object.type==="bnode"&&U.push(R.object);if(this.objectIndex[T]!==undefined)for(S=0;S<this.objectIndex[T].length;S+=1)R=this.objectIndex[T][S],V.push(R),R.subject.type==="bnode"&&U.push(R.subject);W[T]=!0}}return b(V)},dump:function(R){return R=E.extend({namespaces:this.namespaces,base:this.base},R||{}),E.rdf.dump(this.triples(),R)},load:function(X,R){var Y,ae,T,ab,S,U,ac=R&&R.format,V=R&&R.async||E.rdf.databank.defaults.async,ad=R&&R.success||E.rdf.databank.defaults.success,aa=R&&R.error||E.rdf.databank.defaults.error,Z=R&&R.proxy||E.rdf.databank.defaults.proxy,W=R&&R.depth||E.rdf.databank.defaults.depth;T=typeof X=="string"&&X.substring(1,7)==="http://"?E.uri(X):X;if(T.scheme)return l(this,T,{success:ad,error:aa})||(ab='<script type="text/javascript" src="'+Z+"?id="+this.id+"&amp;depth="+W+"&amp;url="+encodeURIComponent(T.resolve("").toString())+'"></script>',V?setTimeout("$('head').append('"+ab+"')",0):E("head").append(ab)),this;ac===undefined&&(typeof X=="string"?X.substring(0,1)==="{"?ac="application/json":X.substring(0,14)==="<!DOCTYPE html"||X.substring(0,5)==="<html"?ac="application/xhtml+xml":X.substring(0,5)==="<?xml"||X.substring(0,8)==="<rdf:RDF"?ac="application/rdf+xml":ac="text/turtle":X.documentElement||X.ownerDocument?(U=X.documentElement?X.documentElement:X.ownerDocument.documentElement,U.nodeName==="html"?ac="application/xhtml+xml":ac="application/rdf+xml"):ac="application/json"),S=E.rdf.parsers[ac],typeof X=="string"&&(X=S.parse(X)),ae=S.triples.call(this,X);for(Y=0;Y<ae.length;Y+=1)this.add(ae[Y],R);return this},toString:function(){return"[Databank with "+this.size()+" triples]"}},E.rdf.databank.fn.init.prototype=E.rdf.databank.fn,E.rdf.databank.defaults={parse:!1,async:!0,success:null,error:null,depth:0,proxy:"http://www.jenitennison.com/rdfquery/proxy.php"},E.rdf.databank.load=function(U,R,T,S){T!==undefined&&I[U].load(T,S),B(I[U],R,T===undefined?"error":"success",S)},E.rdf.pattern=function(V,X,U,T){var W,R,S;if(U===undefined){T=X||{},R=E.trim(V).match(g);if(R.length!==3&&(R.length!==4||R[3]!=="."))throw"Bad Pattern: Couldn't parse string "+V;V=R[0],X=R[1],U=R[2],S=T.optional===undefined?E.rdf.pattern.defaults.optional:T.optional}return r[V]&&r[V][X]&&r[V][X][U]&&r[V][X][U][S]?r[V][X][U][S]:(W=new E.rdf.pattern.fn.init(V,X,U,T),r[W.subject]&&r[W.subject][W.property]&&r[W.subject][W.property][W.object]&&r[W.subject][W.property][W.object][W.optional]?r[W.subject][W.property][W.object][W.optional]:(r[W.subject]===undefined&&(r[W.subject]={}),r[W.subject][W.property]===undefined&&(r[W.subject][W.property]={}),r[W.subject][W.property][W.object]===undefined&&(r[W.subject][W.property][W.object]={}),r[W.subject][W.property][W.object][W.optional]=W,W))},E.rdf.pattern.fn=E.rdf.pattern.prototype={init:function(S,U,V,R){var T=E.extend({},E.rdf.pattern.defaults,R);return this.subject=S.toString().substring(0,1)==="?"?S:k(S,T),this.property=U.toString().substring(0,1)==="?"?U:M(U,T),this.object=V.toString().substring(0,1)==="?"?V:J(V,T),this.optional=T.optional,this},fill:function(U){var R=this.subject,S=this.property,T=this.object;return typeof R=="string"&&U[R.substring(1)]&&(R=U[R.substring(1)]),typeof S=="string"&&U[S.substring(1)]&&(S=U[S.substring(1)]),typeof T=="string"&&U[T.substring(1)]&&(T=U[T.substring(1)]),E.rdf.pattern(R,S,T,{optional:this.optional})},exec:function(S){var R={};return R=a(S.subject,this.subject,R),R===null?null:(R=a(S.property,this.property,R),R===null?null:(R=a(S.object,this.object,R),R))},isFixed:function(){return typeof this.subject!="string"&&typeof this.property!="string"&&typeof this.object!="string"},triple:function(S){var R=this;return this.isFixed()||(R=this.fill(S)),R.isFixed()?E.rdf.triple(R.subject,R.property,R.object,{source:this.toString()}):null},toString:function(){return this.subject+" "+this.property+" "+this.object}},E.rdf.pattern.fn.init.prototype=E.rdf.pattern.fn,E.rdf.pattern.defaults={base:E.uri.base(),namespaces:{},optional:!1},E.rdf.triple=function(U,W,T,S){var X,V,R;if(T===undefined){S=W,R=E.trim(U).match(g);if(R.length!==3&&(R.length!==4||R[3]!=="."))throw"Bad Triple: Couldn't parse string "+U;U=R[0],W=R[1],T=R[2]}return V=S&&S.graph||"",D[V]&&D[V][U]&&D[V][U][W]&&D[V][U][W][T]?D[V][U][W][T]:(X=new E.rdf.triple.fn.init(U,W,T,S),V=X.graph||"",D[V]&&D[V][X.subject]&&D[V][X.subject][X.property]&&D[V][X.subject][X.property][X.object]?D[V][X.subject][X.property][X.object]:(D[V]===undefined&&(D[V]={}),D[V][X.subject]===undefined&&(D[V][X.subject]={}),D[V][X.subject][X.property]===undefined&&(D[V][X.subject][X.property]={}),D[V][X.subject][X.property][X.object]=X,X))},E.rdf.triple.fn=E.rdf.triple.prototype={init:function(S,U,V,R){var T;return T=E.extend({},E.rdf.triple.defaults,R),this.subject=k(S,T),this.property=M(U,T),this.object=J(V,T),this.graph=T.graph===undefined?undefined:k(T.graph,T),this.source=T.source,this},isFixed:function(){return!0},triple:function(R){return this},dump:function(){var T={},R=this.subject.value.toString(),S=this.property.value.toString();return T[R]={},T[R][S]=this.object.dump(),T},toString:function(){return this.subject+" "+this.property+" "+this.object+" ."}},E.rdf.triple.fn.init.prototype=E.rdf.triple.fn,E.rdf.triple.defaults={base:E.uri.base(),source:[document],namespaces:{}},E.rdf.resource=function(T,R){var S;return f[T]?f[T]:(S=new E.rdf.resource.fn.init(T,R),f[S]?f[S]:(f[S]=S,S))},E.rdf.resource.fn=E.rdf.resource.prototype={type:"uri",value:undefined,init:function(W,S){var R,V,U,T;if(typeof W=="string"){R=z.exec(W),T=E.extend({},E.rdf.resource.defaults,S);if(R!==null)this.value=E.uri.resolve(R[1].replace(/\\>/g,">"),T.base);else if(W.substring(0,1)===":"){U=T.namespaces[""];if(U===undefined)throw"Malformed Resource: No namespace binding for default namespace in "+W;this.value=E.uri.resolve(U+W.substring(1))}else if(W.substring(W.length-1)===":"){V=W.substring(0,W.length-1),U=T.namespaces[V];if(U===undefined)throw"Malformed Resource: No namespace binding for prefix "+V+" in "+W;this.value=E.uri.resolve(U)}else try{this.value=E.curie(W,{namespaces:T.namespaces})}catch(X){throw"Malformed Resource: Bad format for resource "+X}}else this.value=W;return this},dump:function(){return{type:"uri",value:this.value.toString()}},toString:function(){return"<"+this.value+">"}},E.rdf.resource.fn.init.prototype=E.rdf.resource.fn,E.rdf.resource.defaults={base:E.uri.base(),namespaces:{}},E.rdf.type=E.rdf.resource("<"+w+"type>"),E.rdf.label=E.rdf.resource("<"+u+"label>"),E.rdf.first=E.rdf.resource("<"+w+"first>"),E.rdf.rest=E.rdf.resource("<"+w+"rest>"),E.rdf.nil=E.rdf.resource("<"+w+"nil>"),E.rdf.subject=E.rdf.resource("<"+w+"subject>"),E.rdf.property=E.rdf.resource("<"+w+"property>"),E.rdf.object=E.rdf.resource("<"+w+"object>"),E.rdf.blank=function(R){var S;return c[R]?c[R]:(S=new E.rdf.blank.fn.init(R),c[S]?c[S]:(c[S]=S,S))},E.rdf.blank.fn=E.rdf.blank.prototype={type:"bnode",value:undefined,id:undefined,init:function(R){if(R==="[]")this.id=j(),this.value="_:"+this.id;else{if(R.substring(0,2)!=="_:")throw"Malformed Blank Node: "+R+" is not a legal format for a blank node";this.id=R.substring(2),this.value=R}return this},dump:function(){return{type:"bnode",value:this.value}},toString:function(){return this.value}},E.rdf.blank.fn.init.prototype=E.rdf.blank.fn,E.rdf.literal=function(T,R){var S;return t[T]?t[T]:(S=new E.rdf.literal.fn.init(T,R),t[S]?t[S]:(t[S]=S,S))},E.rdf.literal.fn=E.rdf.literal.prototype={type:"literal",value:undefined,lang:undefined,datatype:undefined,init:function(V,S){var R,T,U=E.extend({},E.rdf.literal.defaults,S);T=E.safeCurie(U.datatype,{namespaces:U.namespaces});if(U.lang!==undefined&&U.datatype!==undefined&&T.toString()!==w+"XMLLiteral")throw"Malformed Literal: Cannot define both a language and a datatype for a literal ("+V+")";if(U.datatype!==undefined)T=E.safeCurie(U.datatype,{namespaces:U.namespaces}),E.extend(this,E.typedValue(V.toString(),T)),T.toString()===w+"XMLLiteral"&&(this.lang=U.lang);else if(U.lang!==undefined)this.value=V.toString(),this.lang=U.lang;else if(typeof V=="boolean")E.extend(this,E.typedValue(V.toString(),h+"boolean"));else if(typeof V=="number")E.extend(this,E.typedValue(V.toString(),h+"double"));else if(V==="true"||V==="false")E.extend(this,E.typedValue(V,h+"boolean"));else if(E.typedValue.valid(V,h+"integer"))E.extend(this,E.typedValue(V,h+"integer"));else if(E.typedValue.valid(V,h+"decimal"))E.extend(this,E.typedValue(V,h+"decimal"));else if(E.typedValue.valid(V,h+"double")&&!/^\s*([\-\+]?INF|NaN)\s*$/.test(V))E.extend(this,E.typedValue(V,h+"double"));else{R=O.exec(V);if(R===null)throw"Malformed Literal: Couldn't recognise the value "+V;this.value=(R[2]||R[4]).replace(/\\"/g,'"').replace(/\\n/g,"\n").replace(/\\t/g,"	").replace(/\\r/g,"\r"),R[9]?(T=E.rdf.resource(R[9],U),E.extend(this,E.typedValue(this.value,T.value))):R[7]&&(this.lang=R[7])}return this},dump:function(){var R={type:"literal",value:this.value.toString()};return this.lang!==undefined?R.lang=this.lang:this.datatype!==undefined&&(R.datatype=this.datatype.toString()),R},toString:function(){var R='"'+this.value+'"';return this.lang!==undefined?R+="@"+this.lang:this.datatype!==undefined&&(R+="^^<"+this.datatype+">"),R}},E.rdf.literal.fn.init.prototype=E.rdf.literal.fn,E.rdf.literal.defaults={base:E.uri.base(),namespaces:{},datatype:undefined,lang:undefined}}(jQuery),function(a){a.rdf.parsers["application/json"]={parse:a.secureEvalJSON,serialize:a.toJSON,triples:function(f){var m,h,c,j,d,e,g,b,k=[];for(m in f){h=m.substring(0,2)==="_:"?a.rdf.blank(m):a.rdf.resource("<"+m+">",{base:this.baseURI});for(c in f[m]){j=a.rdf.resource("<"+c+">",{base:this.baseURI});for(g=0;g<f[m][c].length;g+=1){d=f[m][c][g];if(d.type==="uri")e=a.rdf.resource("<"+d.value+">",{base:this.baseURI});else if(d.type==="bnode")e=a.rdf.blank(d.value);else if(d.datatype!==undefined)e=a.rdf.literal(d.value,{datatype:d.datatype,base:this.baseURI});else{b={},d.lang!==undefined&&(b.lang=d.lang);var l=typeof d.value=="string"?d.value.replace(/\"/g,'\\"'):d.value;b.base=this.baseURI,e=a.rdf.literal('"'+l+'"',b)}k.push(a.rdf.triple(h,j,e))}}}return k},dump:function(h){var g={},c,b,d,f;for(c=0;c<h.length;c+=1)b=h[c],d=b.subject.value.toString(),f=b.property.value.toString(),g[d]===undefined&&(g[d]={}),g[d][f]===undefined&&(g[d][f]=[]),g[d][f].push(b.object.dump());return g}}}(jQuery),function(e){var b="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o=function(w,u,t,x){var y=w.ownerDocument,s;return u!==undefined&&u!==null?y.createAttributeNS?(s=y.createAttributeNS(u,t),s.nodeValue=x,w.attributes.setNamedItemNS(s)):(s=y.createNode(2,t,u),s.nodeValue=x,w.attributes.setNamedItem(s)):(s=y.createAttribute(t),s.nodeValue=x,w.attributes.setNamedItem(s)),w},q=function(t,s,u){return s!=="http://www.w3.org/XML/1998/namespace"&&s!=="http://www.w3.org/2000/xmlns/"&&(u?o(t,"http://www.w3.org/2000/xmlns/","xmlns:"+u,s):o(t,undefined,"xmlns",s)),t},h=function(u,s){var x,y="",w,t=!1;return u!==undefined&&u!==null&&(/:/.test(s)&&(w=/([^:]+):/.exec(s)[1]),t=!0),document.implementation&&document.implementation.createDocument?(x=document.implementation.createDocument(u,s,null),t&&q(x.documentElement,u,w),x):(x=new ActiveXObject("Microsoft.XMLDOM"),x.async="false",w===undefined?y=' xmlns="'+u+'"':y=" xmlns:"+w+'="'+u+'"',x.loadXML("<"+s+y+"/>"),x)},r=function(w,u,t,s){var y=w.ownerDocument,x;return u!==undefined&&u!==null?x=y.createElementNS?y.createElementNS(u,t):y.createNode(1,t,u):x=y.createElement(t),s!==-1&&(d(w,"\n"),s===0?d(w,"\n"):d(w,"  ")),w.appendChild(x),x},d=function(u,x){var w=u.ownerDocument,s;return s=w.createTextNode(x),u.appendChild(s),u},n=function(u,s){var z,x,t,y;try{x=new ActiveXObject("Microsoft.XMLDOM"),x.async="false",x.loadXML("<temp>"+s+"</temp>")}catch(w){z=new DOMParser,x=z.parseFromString("<temp>"+s+"</temp>","text/xml")}for(t=0;t<x.documentElement.childNodes.length;t+=1)u.appendChild(x.documentElement.childNodes[t].cloneNode(!0));return u},g=function(I,K){var G=h(b,"rdf:RDF"),B=e.rdf.parsers["application/json"].dump(I),u=K.namespaces||{},x=K.indent||!1,w,J,C,t,D,z,H,y,F,E,A;for(w in u)q(G.documentElement,u[w],w);for(J in B){if(B[J][e.rdf.type.value]!==undefined){y=/(.+[#\/])([^#\/]+)/.exec(B[J][e.rdf.type.value][0].value),E=y[1],F=y[2];for(w in u)if(u[w].toString()===E){A=w;break}C=r(G.documentElement,E,A+":"+F,x?0:-1)}else C=r(G.documentElement,b,"rdf:Description",x?0:-1);/^_:/.test(J)?o(C,b,"rdf:nodeID",J.substring(2)):o(C,b,"rdf:about",J);for(t in B[J])if(t!==e.rdf.type.value.toString()||B[J][t].length>1){y=/(.+[#\/])([^#\/]+)/.exec(t),E=y[1],F=y[2];for(w in u)if(u[w].toString()===E){A=w;break}for(z=t===e.rdf.type.value.toString()?1:0;z<B[J][t].length;z+=1)H=B[J][t][z],D=r(C,E,A+":"+F,x?1:-1),H.type==="uri"?o(D,b,"rdf:resource",H.value):H.type==="literal"?H.datatype!==undefined?H.datatype==="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"?(o(D,b,"rdf:parseType","Literal"),x&&d(D,"\n    "),n(D,H.value),x&&d(D,"\n  ")):(o(D,b,"rdf:datatype",H.datatype),d(D,H.value)):H.lang!==undefined?(o(D,"http://www.w3.org/XML/1998/namespace","xml:lang",H.lang),d(D,H.value)):d(D,H.value):o(D,b,"rdf:nodeID",H.value.substring(2));x&&d(C,"\n")}}return x&&d(G.documentElement,"\n\n"),G},a=function(s){switch(s){case"http://www.w3.org/1999/02/22-rdf-syntax-ns":return"rdf";case"http://www.w3.org/XML/1998/namespace":return"xml";case"http://www.w3.org/2000/xmlns/":return"xmlns";default:throw"No default prefix mapped for namespace "+s}},l=function(u,t,s){var x;if(u.hasAttributeNS)return u.hasAttributeNS(t,s);try{return x=/:/.test(s)?/:(.+)$/.exec(s)[1]:s,u.attributes.getQualifiedItem(x,t)!==null}catch(w){return u.getAttribute(a(t)+":"+s)!==null}},k=function(u,t,s){var x;if(u.getAttributeNS)return u.getAttributeNS(t,s);try{return x=/:/.test(s)?/:(.+)$/.exec(s)[1]:s,u.attributes.getQualifiedItem(x,t).nodeValue}catch(w){return u.getAttribute(a(t)+":"+s)}},m=function(s){return s.localName||s.baseName},j=function(w,x){var u,t;return l(w,b,"about")?(u=k(w,b,"about"),t=e.rdf.resource("<"+u+">",{base:x})):l(w,b,"ID")?(u=k(w,b,"ID"),t=e.rdf.resource("<#"+u+">",{base:x})):l(w,b,"nodeID")?(u=k(w,b,"nodeID"),t=e.rdf.blank("_:"+u)):t=e.rdf.blank("[]"),t},f=function(M,u,w,Q){var y,B,z,C,N,H,Q,G,F,A=1,P,O,J,s=[],x,L,I={},t,D=[];Q=k(M,"http://www.w3.org/XML/1998/namespace","lang")||Q,w=k(M,"http://www.w3.org/XML/1998/namespace","base")||w,Q!==null&&Q!==undefined&&Q!==""&&(I={lang:Q}),y=j(M,w),u&&(M.namespaceURI!==b||m(M)!=="Description")&&(z=e.rdf.type,N=e.rdf.resource("<"+M.namespaceURI+m(M)+">"),D.push(e.rdf.triple(y,z,N)));for(G=0;G<M.attributes.length;G+=1)B=M.attributes.item(G),B.namespaceURI!==undefined&&B.namespaceURI!=="http://www.w3.org/2000/xmlns/"&&B.namespaceURI!=="http://www.w3.org/XML/1998/namespace"&&B.prefix!=="xmlns"&&B.prefix!=="xml"&&(B.namespaceURI!==b?(z=e.rdf.resource("<"+B.namespaceURI+m(B)+">"),N=e.rdf.literal(I.lang?B.nodeValue:'"'+B.nodeValue.replace(/"/g,'\\"')+'"',I),D.push(e.rdf.triple(y,z,N))):m(B)==="type"&&(z=e.rdf.type,N=e.rdf.resource("<"+B.nodeValue+">",{base:w}),D.push(e.rdf.triple(y,z,N))));var E=Q;for(G=0;G<M.childNodes.length;G+=1){B=M.childNodes[G];if(B.nodeType===1){B.namespaceURI===b&&m(B)==="li"?(z=e.rdf.resource("<"+b+"_"+A+">"),A+=1):z=e.rdf.resource("<"+B.namespaceURI+m(B)+">"),Q=k(B,"http://www.w3.org/XML/1998/namespace","lang")||E,Q!==null&&Q!==undefined&&Q!==""?I={lang:Q}:I={};if(l(B,b,"resource"))C=k(B,b,"resource"),N=e.rdf.resource("<"+C+">",{base:w});else if(l(B,b,"nodeID"))C=k(B,b,"nodeID"),N=e.rdf.blank("_:"+C);else if(l(B,b,"parseType")){x=k(B,b,"parseType");if(x==="Literal"){try{L=new XMLSerializer,C=L.serializeToString(B.getElementsByTagName("*")[0])}catch(K){C="";for(F=0;F<B.childNodes.length;F+=1)C+=B.childNodes[F].xml}N=e.rdf.literal(C,{datatype:b+"XMLLiteral"})}else if(x==="Resource")t=f(B,!1,w,Q),t.length>0?(N=t[t.length-1].subject,D=D.concat(t)):N=e.rdf.blank("[]");else if(x==="Collection")if(B.getElementsByTagName("*").length>0){for(F=0;F<B.childNodes.length;F+=1)C=B.childNodes[F],C.nodeType===1&&s.push(C);P=e.rdf.blank("[]"),N=P;for(F=0;F<s.length;F+=1)C=s[F],t=f(C,!0,w,Q),t.length>0?(J=t[t.length-1].subject,D=D.concat(t)):J=j(C),D.push(e.rdf.triple(P,e.rdf.first,J)),F===s.length-1?D.push(e.rdf.triple(P,e.rdf.rest,e.rdf.nil)):(O=e.rdf.blank("[]"),D.push(e.rdf.triple(P,e.rdf.rest,O)),P=O)}else N=e.rdf.nil}else if(l(B,b,"datatype"))C=B.childNodes[0].nodeValue?B.childNodes[0].nodeValue:"",N=e.rdf.literal(C,{datatype:k(B,b,"datatype")});else if(B.getElementsByTagName("*").length>0)for(F=0;F<B.childNodes.length;F+=1)C=B.childNodes[F],C.nodeType===1&&(t=f(C,!0,w,Q),t.length>0?(N=t[t.length-1].subject,D=D.concat(t)):N=j(C));else B.childNodes.length>0?(C=B.childNodes[0].nodeValue,N=e.rdf.literal(I.lang?C:'"'+C.replace(/"/g,'\\"')+'"',I)):(t=f(B,!1,w,Q),t.length>0?(N=t[t.length-1].subject,D=D.concat(t)):N=e.rdf.blank("[]"));D.push(e.rdf.triple(y,z,N)),l(B,b,"ID")&&(H=e.rdf.resource("<#"+k(B,b,"ID")+">",{base:w}),D.push(e.rdf.triple(H,e.rdf.subject,y)),D.push(e.rdf.triple(H,e.rdf.property,z)),D.push(e.rdf.triple(H,e.rdf.object,N)))}}return D},c=function(t){var s,w,u,x=[];return t.documentElement.namespaceURI===b&&m(t.documentElement)==="RDF"?(w=k(t.documentElement,"http://www.w3.org/XML/1998/namespace","lang"),base=k(t.documentElement,"http://www.w3.org/XML/1998/namespace","base")||e.uri.base(),x=e.map(t.documentElement.childNodes,function(y){return y.nodeType===1?f(y,!0,base,w):null})):x=f(t.documentElement,!0),x};e.rdf.parsers["application/rdf+xml"]={parse:function(s){var u;try{u=new ActiveXObject("Microsoft.XMLDOM"),u.async="false",u.loadXML(s)}catch(t){var w=new DOMParser;u=w.parseFromString(s,"text/xml")}return u},serialize:function(s){return s.xml?s.xml.replace(/\s+$/,""):(serializer=new XMLSerializer,serializer.serializeToString(s))},triples:c,dump:g}}(jQuery),function(j){var J={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",xsd:"http://www.w3.org/2001/XMLSchema#",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},G=J.rdf+"XMLLiteral",m=j.fn.curie.defaults,I=["alternate","appendix","bookmark","cite","chapter","contents","copyright","first","glossary","help","icon","index","last","license","meta","next","p3pv1","prev","role","section","stylesheet","subsection","start","top","up"],A=/\s([^ =]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|([^ >]+))/g,x="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",f="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",l=new RegExp("^"+f+x+"*$"),q=j.rdf.resource("<>"),E=function(N){var L="",K,M;if(!/&/.test(N))return N;while(N.length>0){K=/([^&]*)(&([^;]+);)(.*)/g.exec(N);if(K===null){L+=N;break}L+=K[1],M=K[3],N=K[4];if(M.charAt(0)==="#")M.charAt(1)==="x"?L+=String.fromCharCode(parseInt(M.substring(2),16)):L+=String.fromCharCode(parseInt(M.substring(1),10));else switch(M){case"amp":L+="&";break;case"nbsp":L+=String.fromCharCode(160);break;case"quot":L+='"';break;case"apos":L+="'";break;default:L+="&"+M+";"}}return L},z=function(L){var M,R,S,U,K,T,Q,N,P={},O={};R=L[0],O[":length"]=0;if(R.attributes&&R.attributes.getNamedItemNS){Q=R.attributes;for(M=0;M<Q.length;M+=1)S=Q[M],/^xmlns(:(.+))?$/.test(S.nodeName)&&S.nodeValue!==""?(N=/^xmlns(:(.+))?$/.exec(S.nodeName)[2]||"",l.test(N)&&(N!=="xml"||S.nodeValue===J.xml)&&(S.nodeValue!==J.xml||N==="xml")&&N!=="xmlns"&&S.nodeValue!==J.xmlns&&(O[N]=j.uri(S.nodeValue),O[":length"]+=1)):/rel|rev|lang|xml:lang|about|href|src|resource|property|typeof|content|datatype/.test(S.nodeName)&&(P[S.nodeName]=S.nodeValue===null?undefined:S.nodeValue)}else{U=/<[^>]+>/.exec(R.outerHTML),S=A.exec(U);while(S!==null)K=S[1],T=S[2]||S[3]||S[4],/^xmlns/.test(K)&&K!=="xmlns:"&&T!==""?(N=/^xmlns(:(.+))?$/.exec(K)[2]||"",l.test(N)&&(N!=="xml"||S.nodeValue===J.xml)&&(S.nodeValue!==J.xml||N==="xml")&&N!=="xmlns"&&S.nodeValue!==J.xmlns&&(O[N]=j.uri(T),O[":length"]+=1)):/about|href|src|resource|property|typeof|content|datatype|rel|rev|lang|xml:lang/.test(K)&&(P[K]=E(T)),S=A.exec(U);A.lastIndex=0}return{atts:P,namespaces:O}},D=function(L,K){var M=L[0].getAttribute(K);return M===null?undefined:M},e=function(K){return j.rdf.resource(K)},d=function(M,N,L,K){if(M.substring(0,2)==="_:")return L?undefined:j.rdf.blank(M);try{return e(j.curie(M,K))}catch(O){return undefined}},h=function(O,M,L){var K=/^\[(.*)\]$/.exec(O),N=L.base||M.base();return K?d(K[1],M,!1,L):e(j.uri(O,N))},r=function(O,N,M,K){var L,P,Q=[];O=O&&O.split?O.split(/[ \t\n\r\x0C]+/g):[];for(L=0;L<O.length;L+=1)O[L]!==""&&(P=d(O[L],N,M,K),P!==undefined&&Q.push(P));return Q},g=function(N,P,K){var L,M,O=[];P=P.type==="uri"?P:j.rdf.resource(P,K),N=N&&N.split?N.split(/\s+/):[];for(L=0;L<N.length;L+=1)N[L]!==""&&(M=d(N[L],null,!1,K),M!==P&&O.push(N[L]));return O.reverse().join(" ")},C=function(O,L,N){var M,P,Q,K;return L=L||{},Q=L.atts||z(O).atts,M=N===undefined?Q.rel!==undefined||Q.rev!==undefined:N,P=Q.resource,P=P===undefined?Q.href:P,P===undefined?P=M?j.rdf.blank("[]"):P:(K=L.curieOptions||j.extend({},m,{namespaces:O.xmlns()}),P=h(P,O,K)),P},w=function(Q,M,P){var O,R,K,L,N=!1;return M=M||{},R=M.atts||z(Q).atts,K=M.curieOptions||j.extend({},m,{namespaces:Q.xmlns(),base:Q.base()}),O=P===undefined?R.rel!==undefined||R.rev!==undefined:P,R.about!==undefined&&(L=h(R.about,Q,K)),L===undefined&&R.src!==undefined&&(L=h(R.src,Q,K)),!O&&L===undefined&&R.resource!==undefined&&(L=h(R.resource,Q,K)),!O&&L===undefined&&R.href!==undefined&&(L=h(R.href,Q,K)),L===undefined&&(/^(head|body)$/i.test(Q[0].nodeName)?L=q:R["typeof"]!==undefined?L=j.rdf.blank("[]"):Q[0].parentNode.nodeType===1?(L=M.object||C(Q.parent())||w(Q.parent()).subject,N=!O&&R.property===undefined):L=q),{subject:L,skip:N}},u=function(L,K){var N;K=K||{};if(K.atts)N=K.atts.lang,N=N||K.atts["xml:lang"];else{N=L[0].getAttribute("lang");try{N=N===null||N===""?L[0].getAttribute("xml:lang"):N}catch(M){}N=N===null||N===""?undefined:N}return N===undefined&&(K.lang?N=K.lang:L[0].parentNode.nodeType===1&&(N=u(L.parent()))),N},s=function(K){switch(K){case"<":return"&lt;";case'"':return"&quot;";case"&":return"&amp;"}},B=function(L,M){var N,O="",P,R,K,Q,S;return L.contents().each(function(){var T=j(this),U=T[0];if(U.nodeType===1){K=U.nodeName.toLowerCase(),O+="<"+K;if(U.outerHTML){S=/<[^>]+>/.exec(U.outerHTML),R=A.exec(S);while(R!==null)/^jQuery/.test(R[1])||(O+=" "+R[1]+"=",O+=R[2]?R[3]:'"'+R[1]+'"'),R=A.exec(S);A.lastIndex=0}else{P=U.attributes;for(N=0;N<P.length;N+=1)R=P.item(N),O+=" "+R.nodeName+'="',O+=R.nodeValue.replace(/[<"&]/g,s),O+='"'}M||(Q=T.xmlns(""),Q!==undefined&&T.attr("xmlns")===undefined&&(O+=' xmlns="'+Q+'"')),O+=">",O+=B(T,!0),O+="</"+K+">"}else U.nodeType===8?(O+="<!--",O+=U.nodeValue,O+="-->"):O+=U.nodeValue}),O},H=function(M){var ad,Q,K,ai,X,ac,Y,W,ag,ae,U,R,N,Z,V,S,ab=[],P,af,L,aa,T,ah,O=this.children();M=M||{},V=M.forward||[],S=M.backward||[],P=M.callback||function(){return this},L=z(this),aa=L.atts,M.atts=aa,T=M.namespaces||this.xmlns();if(L.namespaces[":length"]>0){T=j.extend({},T);for(ah in L.namespaces)ah!==":length"&&(T[ah]=L.namespaces[ah])}M.curieOptions=j.extend({},m,{reserved:[],namespaces:T,base:this.base()}),af=j.extend({},M.curieOptions,{reserved:I}),Q=w(this,M),ai=u(this,M);if(Q.skip)N=M.forward,Z=M.backward,Q=M.subject,K=M.object;else{Q=Q.subject;if(V.length>0||S.length>0){U=M.subject||w(this.parent()).subject;for(ad=0;ad<V.length;ad+=1)ae=j.rdf.triple(U,V[ad],Q,{source:this[0]}),ae=P.call(ae,this.get(0),ae),ae!==undefined&&ae!==null&&(ab=ab.concat(ae));for(ad=0;ad<S.length;ad+=1)ae=j.rdf.triple(Q,S[ad],U,{source:this[0]}),ae=P.call(ae,this.get(0),ae),ae!==undefined&&ae!==null&&(ab=ab.concat(ae))}K=C(this,M),W=r(aa["typeof"],this,!1,M.curieOptions);for(ad=0;ad<W.length;ad+=1)ae=j.rdf.triple(Q,j.rdf.type,W[ad],{source:this[0]}),ae=P.call(ae,this.get(0),ae),ae!==undefined&&ae!==null&&(ab=ab.concat(ae));R=r(aa.property,this,!0,M.curieOptions);if(R.length>0){X=aa.datatype,ac=aa.content,Y=this.text().replace(/"/g,'\\"'),X!==undefined&&X!==""?(X=j.curie(X,M.curieOptions),X.toString()===G?ag=j.rdf.literal(B(this),{datatype:G}):ac!==undefined?ag=j.rdf.literal(ac,{datatype:X}):ag=j.rdf.literal(Y,{datatype:X})):ac!==undefined?ai===undefined?ag=j.rdf.literal('"'+ac+'"'):ag=j.rdf.literal(ac,{lang:ai}):O.length===0||X===""?(ai=u(this,M),ai===undefined?ag=j.rdf.literal('"'+Y+'"'):ag=j.rdf.literal(Y,{lang:ai})):ag=j.rdf.literal(B(this),{datatype:G});for(ad=0;ad<R.length;ad+=1)ae=j.rdf.triple(Q,R[ad],ag,{source:this[0]}),ae=P.call(ae,this.get(0),ae),ae!==undefined&&ae!==null&&(ab=ab.concat(ae))}N=r(aa.rel,this,!0,af),Z=r(aa.rev,this,!0,af);if(aa.resource!==undefined||aa.href!==undefined){if(N!==undefined)for(ad=0;ad<N.length;ad+=1)ae=j.rdf.triple(Q,N[ad],K,{source:this[0]}),ae=P.call(ae,this.get(0),ae),ae!==undefined&&ae!==null&&(ab=ab.concat(ae));N=[];if(Z!==undefined)for(ad=0;ad<Z.length;ad+=1)ae=j.rdf.triple(K,Z[ad],Q,{source:this[0]}),ae=P.call(ae,this.get(0),ae),ae!==undefined&&ae!==null&&(ab=ab.concat(ae));Z=[]}}return O.each(function(){ab=ab.concat(H.call(j(this),{forward:N,backward:Z,subject:Q,object:K||Q,lang:ai,namespaces:T,callback:P}))}),ab},y=function(K){var L,M;return K&&K.about!==undefined?(M=z(this).atts,K.about===null?M.property!==undefined||M.rel!==undefined||M.rev!==undefined||M["typeof"]!==undefined:w(this,{atts:M}).subject.value===K.about):K&&K.type!==undefined?(L=D(this,"typeof"),L!==undefined?K.type===null?!0:this.curie(L)===K.type:!1):H.call(this,K)},F=1,t=function(O,L,N){var K,M,P;try{M=O.createCurie(N)}catch(Q){N.toString()===G?(O.attr("xmlns:rdf",J.rdf),M="rdf:XMLLiteral"):(K=/^(.+[\/#])([^#]+)$/.exec(N),O.attr("xmlns:ns"+F,K[1]),M="ns"+F+":"+K[2],F+=1)}P=D(O,L),P!==undefined?j.inArray(M,P.split(/\s+/))===-1&&O.attr(L,P+" "+M):O.attr(L,M)},o=function(M,K,N){var L;N.type==="bnode"?L="[_:"+N.id+"]":L=j(M).base().relative(N.value),M.attr(K,L)},b=function(M,K){var L=w(M).subject;K!==L&&o(M,"about",K),M.removeData("rdfa.subject")},c=function(L,K){var M=C(L);K!==M&&o(L,"resource",K),L.removeData("rdfa.objectResource")},a=function(K,L){return K.wrapInner("<span></span>").children("span").attr("lang",L),K},k=function(V){var P,S,L,O,Y,W,M,Q,K,N,U,R,T,X=this.xmlns();Y=this,T=z(this).atts;if(typeof V=="string")V=j.rdf.triple(V,{namespaces:X,base:this.base()});else{if(V.rdfquery)return k.call(this,V.sources().get(0)),this;if(V.length){for(R=0;R<V.length;R+=1)k.call(this,V[R]);return this}}S=T.rel!==undefined||T.rev!==undefined,L=S||T.property!==undefined||T["typeof"]!==undefined;if(V.object.type!=="literal")W=w(this,{atts:T},!0).subject,Q=C(this,{atts:T},!0),O=!L&&T.resource===undefined,M=W===V.subject,K=Q===V.object,V.property===j.rdf.type?M?t(this,"typeof",V.object.value):L?(Y=this.wrapInner("<span />").children("span"),t(Y,"typeof",V.object.value),Q!==V.subject&&b(Y,V.subject)):(t(this,"typeof",V.object.value),b(this,V.subject)):M?K?t(this,"rel",V.property.value):O||!L?(t(this,"rel",V.property.value),c(this,V.object)):(Y=this.wrap("<span />").parent(),t(Y,"rev",V.property.value),b(Y,V.object)):W===V.object?Q===V.subject?t(this,"rev",V.property.value):O||!L?(t(this,"rev",V.property.value),c(this,V.subject)):(Y=this.wrap("<span />").parent(),t(Y,"rel",V.property.value),b(Y,V.subject)):K?L?(Y=this.wrapInner("<span />").children("span"),t(Y,"rev",V.property.value),c(Y,V.subject),Y=Y.wrapInner("<span />").children("span"),b(Y,V.object),Y=this):(b(this,V.subject),t(this,"rel",V.property.value)):Q===V.subject?L?(Y=this.wrapInner("<span />").children("span"),t(Y,"rel",this.property.value),c(Y,V.object),Y=Y.wrapInner("<span />").children("span"),b(Y,Q),Y=this):(b(this,V.object),t(this,"rev",V.property.value)):L?(Y=this.wrapInner("<span />").children("span"),t(Y,"rel",V.property.value),b(Y,V.subject),c(Y,V.object),Y.children("*").length>0&&(Y=this.wrapInner("<span />").children("span"),b(Y,W)),Y=this):(t(Y,"rel",V.property.value),b(this,V.subject),c(this,V.object),this.children("*").length>0&&(Y=this.wrapInner("<span />").children("span"),b(Y,W),Y=this));else{W=w(this,{atts:T}).subject,Q=C(this,{atts:T}),M=W===V.subject,P=this.text()!==V.object.value;if(T.property!==undefined){U=T.content,K=U!==undefined?U===V.object.value:!P;if(!M||!K)return Y=this.wrapInner("<span />").children("span"),k.call(Y,V);t(this,"property",V.property.value)}else{if(Q===V.subject)return Y=this.wrapInner("<span />").children("span"),k.call(Y,V);t(this,"property",V.property.value),b(this,V.subject),P&&(V.object.datatype&&V.object.datatype.toString()===G?this.html(V.object.value):this.attr("content",V.object.value)),N=u(this),V.object.lang?N!==V.object.lang&&(this.attr("lang",V.object.lang),P&&a(this,N)):V.object.datatype?t(this,"datatype",V.object.datatype):(P||this.attr("datatype",""),N!==undefined&&(this.attr("lang",""),P&&a(this,N)))}}return this.parents().andSelf().trigger("rdfChange"),Y},n=function(Q){var O,R,P,K,L,N,M=this.xmlns();R=z(this).atts;if(Q.length){for(i=0;i<Q.length;i+=1)n.call(this,Q[i]);return this}hasRelation=R.rel!==undefined||R.rev!==undefined,hasRDFa=hasRelation||R.property!==undefined||R["typeof"]!==undefined;if(hasRDFa){Q.property!==undefined&&(R.property!==undefined&&(P=g(R.property,Q.property,{namespaces:M}),P===""?this.removeAttr("property"):this.attr("property",P)),R.rel!==undefined&&(K=g(R.rel,Q.property,{namespaces:M}),K===""?this.removeAttr("rel"):this.attr("rel",K)),R.rev!==undefined&&(L=g(R.rev,Q.property,{namespaces:M}),L===""?this.removeAttr("rev"):this.attr("rev",L))),Q.type!==undefined&&R["typeof"]!==undefined&&(N=g(R["typeof"],Q.type,{namespaces:M}),N===""?this.removeAttr("typeof"):this.attr("typeof",N));if(R.property===this.attr("property")&&R.rel===this.attr("rel")&&R.rev===this.attr("rev")&&R["typeof"]===this.attr("typeof"))return n.call(this.parent(),Q)}return this.parents().andSelf().trigger("rdfChange"),this};j.fn.rdfa=function(K){if(K===undefined){var L=j.map(j(this),function(M){return H.call(j(M))});return j.rdf({triples:L})}return j(this).each(function(){k.call(j(this),K)}),this},j.fn.removeRdfa=function(K){return j(this).each(function(){n.call(j(this),K)}),this},j.rdf.gleaners.push(y)}(jQuery),function(b){var a=1;b.rdf.ruleset=function(d,c){return new b.rdf.ruleset.fn.init(d,c)},b.rdf.ruleset.fn=b.rdf.ruleset.prototype={init:function(f,c){var d,e=b.extend({},b.rdf.ruleset.defaults,c);f=f||[],this.baseURI=e.base,this.namespaces=b.extend({},e.namespaces),this.rules=[];for(d=0;d<f.length;d+=1)this.add.apply(this,f[d]);return this},base:function(c){return c===undefined?this.baseURI:(this.baseURI=c,this)},prefix:function(d,c){return d===undefined?this.namespaces:c===undefined?this.namespaces[d]:(this.namespaces[d]=c,this)},size:function(){return this.rules.length},add:function(c,e){var d;return e===undefined&&c.rules?this.rules=this.rules.concat(c.rules):(e===undefined&&c.lhs?d=c:d=b.rdf.rule(c,e,{namespaces:this.prefix(),base:this.base()}),b.inArray(d,this.rules)===-1&&this.rules.push(d)),this},run:function(j,e){var f,h,d,g=b.extend({limit:50},e),c=g.limit;do{d=j.size();for(f=0;f<this.rules.length;f+=1)h=this.rules[f],h.run(j);c-=1}while(j.size()>d&&c>0);return this}},b.rdf.ruleset.fn.init.prototype=b.rdf.ruleset.fn,b.rdf.ruleset.defaults={base:b.uri.base(),namespaces:{}},b.rdf.rule=function(c,e,d){return new b.rdf.rule.fn.init(c,e,d)},b.rdf.rule.fn=b.rdf.rule.prototype={init:function(c,h,e){var f=b.extend({},b.rdf.rule.defaults,e),g=[],d=!1;return typeof c=="string"&&(c=[c]),typeof h=="string"&&(h=[h]),this.lhs=b.map(c,function(j){return b.isArray(j)?[j]:b.isFunction(j)?j:(j=b.rdf.pattern(j,f),typeof j.subject=="string"&&g.push(j.subject),typeof j.property=="string"&&g.push(j.property),typeof j.object=="string"&&g.push(j.object),j)}),g=b.unique(g),b.isFunction(h)?this.rhs=h:this.rhs=b.map(h,function(j){j=b.rdf.pattern(j,f);if(typeof j.subject=="string"&&b.inArray(j.subject,g)===-1||typeof j.property=="string"&&b.inArray(j.property,g)===-1||typeof j.object=="string"&&b.inArray(j.object,g)===-1)throw"Bad Rule: Right-hand side of the rule contains a reference to an unbound wildcard";if(j.subject.type==="bnode"||j.property.type==="bnode"||j.object.type==="bnode")d=!0;return j}),this.rhsBlanks=d,this.cache={},this},run:function(E,e){var f=b.rdf({databank:E}),A,h=b.extend({limit:50},e),C=h.limit,d,z,y,B,k,r,u,n,D=this.rhsBlanks,l,c,x,m;this.cache[E.id]===undefined&&(this.cache[E.id]={});for(z=0;z<this.lhs.length;z+=1)A=this.lhs[z],b.isArray(A)?f=f.filter.apply(f,A):b.isFunction(A)?f=f.filter.call(f,A):f=f.where(this.lhs[z]);do{d=f.length,c=f.sources();for(z=0;z<d;z+=1){x=c[z],m=!0,l=this.cache[E.id];for(y=0;y<x.length;y+=1)l[x[y]]===undefined?l[x[y]]={}:y===x.length-1&&(m=!1),l=l[x[y]];if(m){n=f.eq(z);if(D){for(y=0;y<this.rhs.length;y+=1)B=this.rhs[y],k=B.subject,r=B.property,u=B.object,k.type==="bnode"&&(k=b.rdf.blank(""+k+a)),r.type==="bnode"&&(r=b.rdf.blank(""+r+a)),u.type==="bnode"&&(u=b.rdf.blank(""+u+a)),B=b.rdf.pattern(k,r,u),n.add(B);a+=1}else if(b.isFunction(this.rhs)){var w=n.map(this.rhs);for(var g=0;g<w.length;g++)w[g]instanceof b.rdf.triple&&f.add(w[g])}else for(y=0;y<this.rhs.length;y+=1)n.add(this.rhs[y])}}C-=1}while(f.length>d&&C>0);return this}},b.rdf.rule.fn.init.prototype=b.rdf.rule.fn,b.rdf.rule.defaults={base:b.uri.base(),namespaces:{}},b.extend(b.rdf.databank.fn,{reason:function(d,c){return d.run(this,c),this}}),b.extend(b.rdf.fn,{reason:function(d,c){return d.run(this.databank,c),this}})}(jQuery),define("Library/vie/lib/rdfquery/latest/jquery.rdfquery.min",function(){}),function(){var root=this,jQuery=root.jQuery,Backbone=root.Backbone,_=root._,VIE=root.VIE=function(config){this.config=config?config:{},this.services={},this.jQuery=jQuery,this.entities=new this.Collection([],{vie:this}),this.Entity.prototype.entities=this.entities,this.Entity.prototype.entityCollection=this.Collection,this.Entity.prototype.vie=this,this.Namespaces.prototype.vie=this,this.namespaces=new this.Namespaces(this.config.baseNamespace?this.config.baseNamespace:"http://viejs.org/ns/",{owl:"http://www.w3.org/2002/07/owl#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",schema:"http://schema.org/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",skos:"http://www.w3.org/2004/02/skos/core#",xsd:"http://www.w3.org/2001/XMLSchema#",sioc:"http://rdfs.org/sioc/ns#",dcterms:"http://purl.org/dc/terms/"}),this.Type.prototype.vie=this,this.Types.prototype.vie=this,this.Attribute.prototype.vie=this,this.Attributes.prototype.vie=this,this.types=new this.Types,this.types.add("owl:Thing"),this.config.classic===!0&&(this.RDFa=new this.ClassicRDFa(this),this.RDFaEntities=new this.ClassicRDFaEntities(this),this.EntityManager=new this.ClassicEntityManager(this),this.cleanup=function(){this.entities.reset()})};VIE.prototype.use=function(service,name){if(!name&&!service.name)throw new Error("Please provide a name for the service!");return service.vie=this,service.name=name?name:service.name,service.init&&service.init(),this.services[service.name]=service,this},VIE.prototype.service=function(name){if(!this.hasService(name))throw"Undefined service "+name;return this.services[name]},VIE.prototype.hasService=function(name){return this.services[name]?!0:!1},VIE.prototype.getServicesArray=function(){return _.map(this.services,function(v){return v})},VIE.prototype.load=function(options){return options||(options={}),options.vie=this,new this.Loadable(options)},VIE.prototype.save=function(options){return options||(options={}),options.vie=this,new this.Savable(options)},VIE.prototype.remove=function(options){return options||(options={}),options.vie=this,new this.Removable(options)},VIE.prototype.analyze=function(options){return options||(options={}),options.vie=this,new this.Analyzable(options)},VIE.prototype.find=function(options){return options||(options={}),options.vie=this,new this.Findable(options)},VIE.prototype.loadSchema=function(url,options){options=options?options:{};if(!url)throw new Error("Please provide a proper URL");var vie=this;return jQuery.getJSON(url).success(function(data){try{VIE.Util.loadSchemaOrg(vie,data,options.baseNS),options.success&&options.success.call(vie)}catch(e){options.error.call(vie,e);return}}).error(function(data,textStatus,jqXHR){options.error&&(console.warn(data,textStatus,jqXHR),options.error.call(vie,"Could not load schema from URL ("+url+")"))}),this},VIE.prototype.getTypedEntityClass=function(type){var typeType=this.types.get(type);if(!typeType)throw new Error("Unknown type "+type);var TypedEntityClass=function(attrs,opts){attrs||(attrs={}),attrs["@type"]=type,this.set(attrs,opts)};return TypedEntityClass.prototype=new this.Entity,TypedEntityClass.prototype.schema=function(){return VIE.Util.getFormSchemaForType(typeType)},TypedEntityClass},typeof exports=="object"&&(exports.VIE=VIE,jQuery||(jQuery=require("jquery")),Backbone||(Backbone=require("backbone"),Backbone.setDomLibrary(jQuery)),_||(_=require("underscore")._)),VIE.prototype.Able=function(){this.init=function(options,methodName){return this.options=options,this.services=options.from||options.using||options.to||[],this.vie=options.vie,this.methodName=methodName,this.deferred=jQuery.Deferred(),this.resolve=this.deferred.resolve,this.resolveWith=this.deferred.resolveWith,this.reject=this.deferred.reject,this.rejectWith=this.deferred.rejectWith,this.success=this.done=this.deferred.done,this.fail=this.deferred.fail,this.then=this.deferred.then,this.always=this.deferred.always,this.from=this.using,this.to=this.using,this},this.using=function(services){var self=this;return services=_.isArray(services)?services:[services],_.each(services,function(s){var obj=typeof s=="string"?self.vie.service(s):s;self.services.push(obj)}),this},this.execute=function(){var able=this;return _(this.services).each(function(service){service[able.methodName](able)}),this}},VIE.prototype.Loadable=function(options){this.init(options,"load")},VIE.prototype.Loadable.prototype=new VIE.prototype.Able,VIE.prototype.Savable=function(options){this.init(options,"save")},VIE.prototype.Savable.prototype=new VIE.prototype.Able,VIE.prototype.Removable=function(options){this.init(options,"remove")},VIE.prototype.Removable.prototype=new VIE.prototype.Able,VIE.prototype.Analyzable=function(options){this.init(options,"analyze")},VIE.prototype.Analyzable.prototype=new VIE.prototype.Able,VIE.prototype.Findable=function(options){this.init(options,"find")},VIE.prototype.Findable.prototype=new VIE.prototype.Able,VIE.Util={toCurie:function(uri,safe,namespaces){if(VIE.Util.isCurie(uri,namespaces))return uri;var delim=":";for(var k in namespaces.toObj())if(uri.indexOf(namespaces.get(k))===1){var pattern=new RegExp("^<?"+namespaces.get(k));return k===""&&(delim=""),(safe?"[":"")+uri.replace(pattern,k+delim).replace(/>$/,"")+(safe?"]":"")}throw new Error("No prefix found for URI '"+uri+"'!")},isCurie:function(curie,namespaces){if(VIE.Util.isUri(curie))return!1;try{return VIE.Util.toUri(curie,namespaces),!0}catch(e){return!1}},toUri:function(curie,namespaces){if(VIE.Util.isUri(curie))return curie;var delim=":";for(var prefix in namespaces.toObj())if(prefix!==""&&(curie.indexOf(prefix+":")===0||curie.indexOf("["+prefix+":")===0)){var pattern=new RegExp("^\\[{0,1}"+prefix+delim);return"<"+curie.replace(pattern,namespaces.get(prefix)).replace(/\]{0,1}$/,"")+">"}if(curie.indexOf(delim)===-1)return"<"+namespaces.base()+curie+">";throw new Error("No prefix found for CURIE '"+curie+"'!")},isUri:function(something){return typeof something=="string"&&something.search(/^<.+>$/)===0},mapAttributeNS:function(attr,ns){var a=attr;return!ns.isUri(attr)&&attr.indexOf("@")!==0&&(ns.isCurie(attr)?a=ns.uri(attr):ns.isUri(attr)||(attr.indexOf(":")===-1?a="<"+ns.base()+attr+">":a="<"+attr+">")),a},rdf2Entities:function(service,results){if(typeof jQuery.rdf!="function")return VIE.Util._rdf2EntitiesNoRdfQuery(service,results);try{var rdf=results instanceof jQuery.rdf?results.base(service.vie.namespaces.base()):jQuery.rdf().base(service.vie.namespaces.base()).load(results,{});if(service.rules){var rules=jQuery.rdf.ruleset();for(var prefix in service.vie.namespaces.toObj())prefix!==""&&rules.prefix(prefix,service.vie.namespaces.get(prefix));for(var i=0;i<service.rules.length;i++)if(service.rules.hasOwnProperty(i)){var rule=service.rules[i];rules.add(rule.left,rule.right)}rdf=rdf.reason(rules,10)}var entities={};rdf.where("?subject ?property ?object").each(function(){function getValue(rdfQueryLiteral){if(typeof rdfQueryLiteral.value=="string"){if(rdfQueryLiteral.lang){var literal={toString:function(){return this["@value"]},"@value":rdfQueryLiteral.value.replace(/^"|"$/g,""),"@language":rdfQueryLiteral.lang};return literal}return rdfQueryLiteral.value}return rdfQueryLiteral.type==="uri"?rdfQueryLiteral.toString():rdfQueryLiteral.value}var subject=this.subject.toString();entities[subject]||(entities[subject]={"@subject":subject,"@context":service.vie.namespaces.toObj(!0),"@type":[]});var propertyUri=this.property.toString(),propertyCurie;try{propertyCurie=service.vie.namespaces.curie(propertyUri)}catch(e){propertyCurie=propertyUri}entities[subject][propertyCurie]=entities[subject][propertyCurie]||[],entities[subject][propertyCurie].push(getValue(this.object))}),_(entities).each(function(ent){ent["@type"]=ent["@type"].concat(ent["rdf:type"]),delete ent["rdf:type"],_(ent).each(function(value,property){value.length===1&&(ent[property]=value[0])})});var vieEntities=[];return jQuery.each(entities,function(){var entityInstance=new service.vie.Entity(this);entityInstance=service.vie.entities.addOrUpdate(entityInstance),vieEntities.push(entityInstance)}),vieEntities}catch(e){return console.warn("Something went wrong while parsing the returned results!",e),[]}},getPreferredLangForPreferredProperty:function(entity,preferredFields,preferredLanguages){var l,labelArr,lang,p,property,resArr,valueArr,_len,_len2,_this=this;return resArr=[],_.each(preferredLanguages,function(lang){_.each(preferredFields,function(property){labelArr=null,typeof property=="string"&&entity.get(property)?(labelArr=_.flatten([entity.get(property)]),_(labelArr).each(function(label){var labelLang,score,value;return score=p,labelLang=label["@language"],typeof label=="string"&&(label.indexOf("@")===label.length-3||label.indexOf("@")===label.length-5)&&(labelLang=label.replace(/(^\"*|\"*@)..(..)?$/g,"")),labelLang?labelLang===lang?score+=l:score+=20:score+=10,value=label.toString(),value=value.replace(/(^\"*|\"*@..$)/g,""),resArr.push({score:score,value:value})})):typeof property=="object"&&entity.get(property.property)&&(valueArr=_.flatten([entity.get(property.property)]),valueArr=_(valueArr).map(function(termUri){return termUri.isEntity?termUri.getSubject():termUri}),resArr.push({score:p,value:property.makeLabel(valueArr)}))})}),resArr=_(resArr).sortBy(function(a){return a.score}),resArr.length?resArr[0].value:"n/a"},_rdf2EntitiesNoRdfQuery:function(service,results){var jsonLD=[];return _.forEach(results,function(value,key){var entity={};entity["@subject"]="<"+key+">",_.forEach(value,function(triples,predicate){predicate="<"+predicate+">",_.forEach(triples,function(triple){triple.type==="uri"&&(triple.value="<"+triple.value+">"),entity[predicate]&&!_.isArray(entity[predicate])&&(entity[predicate]=[entity[predicate]]);if(_.isArray(entity[predicate])){entity[predicate].push(triple.value);return}entity[predicate]=triple.value})}),jsonLD.push(entity)}),jsonLD},loadSchemaOrg:function(vie,SchemaOrg,baseNS){if(!SchemaOrg)throw new Error("Please load the schema.json file.");vie.types.remove("<http://schema.org/Thing>");var baseNSBefore=baseNS?baseNS:vie.namespaces.base();vie.namespaces.base(baseNS);var datatypeMapping={DataType:"xsd:anyType",Boolean:"xsd:boolean",Date:"xsd:date",DateTime:"xsd:dateTime",Time:"xsd:time",Float:"xsd:float",Integer:"xsd:integer",Number:"xsd:anySimpleType",Text:"xsd:string",URL:"xsd:anyURI"},dataTypeHelper=function(ancestors,id){var type=vie.types.add(id,[{id:"value",range:datatypeMapping[id]}]);for(var i=0;i<ancestors.length;i++){var supertype=vie.types.get(ancestors[i])?vie.types.get(ancestors[i]):dataTypeHelper.call(vie,SchemaOrg.datatypes[ancestors[i]].supertypes,ancestors[i]);type.inherit(supertype)}return type};for(var dt in SchemaOrg.datatypes)if(!vie.types.get(dt)){var ancestors=SchemaOrg.datatypes[dt].supertypes;dataTypeHelper.call(vie,ancestors,dt)}var metadataHelper=function(definition){var metadata={};return definition.label&&(metadata.label=definition.label),definition.url&&(metadata.url=definition.url),definition.comment&&(metadata.comment=definition.comment),definition.metadata&&(metadata=_.extend(metadata,definition.metadata)),metadata},typeProps=function(id){var props=[];return _.each(SchemaOrg.types[id].specific_properties,function(pId){var property=SchemaOrg.properties[pId];props.push({id:property.id,range:property.ranges,min:property.min,max:property.max,metadata:metadataHelper(property)})}),props},typeHelper=function(ancestors,id,props,metadata){var type=vie.types.add(id,props,metadata);for(var i=0;i<ancestors.length;i++){var supertype=vie.types.get(ancestors[i])?vie.types.get(ancestors[i]):typeHelper.call(vie,SchemaOrg.types[ancestors[i]].supertypes,ancestors[i],typeProps.call(vie,ancestors[i]));type.inherit(supertype)}return id==="Thing"&&!type.isof("owl:Thing")&&type.inherit("owl:Thing"),type};_.each(SchemaOrg.types,function(typeDef){if(vie.types.get(typeDef.id))return;var ancestors=typeDef.supertypes,metadata=metadataHelper(typeDef);typeHelper.call(vie,ancestors,typeDef.id,typeProps.call(vie,typeDef.id),metadata)}),vie.namespaces.base(baseNSBefore)},getEntityTypeUnion:function(entity){var vie=entity.vie;return(new vie.Type("Union")).inherit(entity.get("@type"))},getFormSchemaForType:function(type,allowNested){var schema={};return _.each(type.attributes.toArray(),function(attribute){var key=VIE.Util.toCurie(attribute.id,!1,attribute.vie.namespaces);schema[key]=VIE.Util.getFormSchemaForAttribute(attribute)}),_.each(schema,function(field,id){field.type||delete schema[id],field.type==="URL"&&(field.type="Text",field.dataType="url"),field.type==="List"&&!field.listType&&delete schema[id],allowNested||(field.type==="NestedModel"||field.listType==="NestedModel")&&delete schema[id]}),schema},getFormSchemaForAttribute:function(attribute){var primaryType=attribute.range[0],schema={},getWidgetForType=function(type){switch(type){case"xsd:anySimpleType":case"xsd:float":case"xsd:integer":return"Number";case"xsd:string":return"Text";case"xsd:date":return"Date";case"xsd:dateTime":return"DateTime";case"xsd:boolean":return"Checkbox";case"xsd:anyURI":return"URL";default:var typeType=attribute.vie.types.get(type);if(!typeType)return null;if(typeType.attributes.get("value"))return getWidgetForType(typeType.attributes.get("value").range[0]);return"NestedModel"}};return schema.title=VIE.Util.toCurie(attribute.id,!1,attribute.vie.namespaces),attribute.min>0&&(schema.validators=["required"]),attribute.max>1?(schema.type="List",schema.listType=getWidgetForType(primaryType),schema.listType==="NestedModel"&&(schema.nestedModelType=primaryType),schema):(schema.type=getWidgetForType(primaryType),schema.type==="NestedModel"&&(schema.nestedModelType=primaryType),schema)},getFormSchema:function(entity){if(!entity||!entity.isEntity)return{};var unionType=VIE.Util.getEntityTypeUnion(entity),schema=VIE.Util.getFormSchemaForType(unionType,!0);return _.each(schema,function(property,id){if(property.type!=="NestedModel"&&property.listType!=="NestedModel")return;schema[id].model=entity.vie.getTypedEntityClass(property.nestedModelType)}),schema},xsdDateTime:function(date){function pad(n){var s=n.toString();return s.length<2?"0"+s:s}var yyyy=date.getFullYear(),mm1=pad(date.getMonth()+1),dd=pad(date.getDate()),hh=pad(date.getHours()),mm2=pad(date.getMinutes()),ss=pad(date.getSeconds());return yyyy+"-"+mm1+"-"+dd+"T"+hh+":"+mm2+":"+ss},extractLanguageString:function(entity,attrs,langs){var p,attr,name,i,n;if(entity&&typeof entity!="string"){attrs=_.isArray(attrs)?attrs:[attrs],langs=_.isArray(langs)?langs:[langs];for(p=0;p<attrs.length;p++)for(var l=0;l<langs.length;l++){var lang=langs[l];attr=attrs[p];if(entity.has(attr)){name=entity.get(attr),name=_.isArray(name)?name:[name];for(i=0;i<name.length;i++){n=name[i],n.isEntity?n=VIE.Util.extractLanguageString(n,attrs,lang):typeof n=="string"?n=n:n="";if(n&&n.indexOf("@"+lang)>-1)return n.replace(/"/g,"").replace(/@[a-z]+/,"").trim()}}}for(p=0;p<attrs.length;p++){attr=attrs[p];if(entity.has(attr)){name=entity.get(attr),name=_.isArray(name)?name:[name];for(i=0;i<name.length;i++){n=name[i],n.isEntity&&(n=VIE.Util.extractLanguageString(n,attrs,[]));if(n&&typeof n=="string"&&n.indexOf("@")===-1)return n.replace(/"/g,"").replace(/@[a-z]+/,"").trim()}}}}return undefined},transformationRules:function(service){var res=[{left:["?subject a dbpedia:Person","?subject rdfs:label ?label"],right:function(ns){return function(){return[jQuery.rdf.triple(this.subject.toString(),"a","<"+ns.base()+"Person>",{namespaces:ns.toObj()}),jQuery.rdf.triple(this.subject.toString(),"<"+ns.base()+"name>",this.label,{namespaces:ns.toObj()})]}}(service.vie.namespaces)},{left:["?subject a foaf:Person","?subject rdfs:label ?label"],right:function(ns){return function(){return[jQuery.rdf.triple(this.subject.toString(),"a","<"+ns.base()+"Person>",{namespaces:ns.toObj()}),jQuery.rdf.triple(this.subject.toString(),"<"+ns.base()+"name>",this.label,{namespaces:ns.toObj()})]}}(service.vie.namespaces)},{left:["?subject a dbpedia:Place","?subject rdfs:label ?label"],right:function(ns){return function(){return[jQuery.rdf.triple(this.subject.toString(),"a","<"+ns.base()+"Place>",{namespaces:ns.toObj()}),jQuery.rdf.triple(this.subject.toString(),"<"+ns.base()+"name>",this.label.toString(),{namespaces:ns.toObj()})]}}(service.vie.namespaces)},{left:["?subject a dbpedia:City","?subject rdfs:label ?label","?subject dbpedia:abstract ?abs","?subject dbpedia:country ?country"],right:function(ns){return function(){return[jQuery.rdf.triple(this.subject.toString(),"a","<"+ns.base()+"City>",{namespaces:ns.toObj()}),jQuery.rdf.triple(this.subject.toString(),"<"+ns.base()+"name>",this.label.toString(),{namespaces:ns.toObj()}),jQuery.rdf.triple(this.subject.toString(),"<"+ns.base()+"description>",this.abs.toString(),{namespaces:ns.toObj()}),jQuery.rdf.triple(this.subject.toString(),"<"+ns.base()+"containedIn>",this.country.toString(),{namespaces:ns.toObj()})]}}(service.vie.namespaces)}];return res},getAdditionalRules:function(service){var mapping={Work:"CreativeWork",Film:"Movie",TelevisionEpisode:"TVEpisode",TelevisionShow:"TVSeries",Website:"WebPage",Painting:"Painting",Sculpture:"Sculpture",Event:"Event",SportsEvent:"SportsEvent",MusicFestival:"Festival",FilmFestival:"Festival",Place:"Place",Continent:"Continent",Country:"Country",City:"City",Airport:"Airport",Station:"TrainStation",Hospital:"GovernmentBuilding",Mountain:"Mountain",BodyOfWater:"BodyOfWater",Company:"Organization",Person:"Person"},additionalRules=[];return _.each(mapping,function(map,key){var tripple={left:["?subject a dbpedia:"+key,"?subject rdfs:label ?label"],right:function(ns){return function(){return[jQuery.rdf.triple(this.subject.toString(),"a","<"+ns.base()+map+">",{namespaces:ns.toObj()}),jQuery.rdf.triple(this.subject.toString(),"<"+ns.base()+"name>",this.label.toString(),{namespaces:ns.toObj()})]}}(service.vie.namespaces)};additionalRules.push(tripple)}),additionalRules}},VIE.prototype.Entity=function(attrs,opts){attrs=attrs?attrs:{},opts=opts?opts:{};var self=this;attrs["@type"]!==undefined?(attrs["@type"]=_.isArray(attrs["@type"])?attrs["@type"]:[attrs["@type"]],attrs["@type"]=_.map(attrs["@type"],function(val){return self.vie.types.get(val)||self.vie.types.add(val).inherit("owl:Thing"),self.vie.types.get(val).id}),attrs["@type"]=attrs["@type"].length===1?attrs["@type"][0]:attrs["@type"]):attrs["@type"]=self.vie.types.get("owl:Thing").id,_.each(attrs,function(value,key){var newKey=VIE.Util.mapAttributeNS(key,this.namespaces);key!==newKey&&(delete attrs[key],attrs[newKey]=value)},self.vie);var Model=Backbone.Model.extend({idAttribute:"@subject",initialize:function(attributes,options){return attributes["@subject"]?this.id=this["@subject"]=this.toReference(attributes["@subject"]):this.id=this["@subject"]=attributes["@subject"]=this.cid.replace("c","_:bnode"),this},schema:function(){return VIE.Util.getFormSchema(this)},get:function(attr){attr=VIE.Util.mapAttributeNS(attr,self.vie.namespaces);var value=Backbone.Model.prototype.get.call(this,attr);return value=_.isArray(value)?value:[value],value=_.map(value,function(v){return v!==undefined&&attr==="@type"&&self.vie.types.get(v)?self.vie.types.get(v):v!==undefined&&self.vie.entities.get(v)?self.vie.entities.get(v):v},this),value.length===0?undefined:(value=value.length===1?value[0]:value,value)},has:function(attr){return attr=VIE.Util.mapAttributeNS(attr,self.vie.namespaces),Backbone.Model.prototype.has.call(this,attr)},set:function(attrs,options,opts){if(!attrs)return this;attrs["@subject"]&&(attrs["@subject"]=this.toReference(attrs["@subject"]));if(typeof attrs=="string"){var obj={};return obj[attrs]=options,this.set(obj,opts)}attrs.attributes&&(attrs=attrs.attributes);var self=this,coll;return _.each(attrs,function(value,key){var newKey=VIE.Util.mapAttributeNS(key,self.vie.namespaces);key!==newKey&&(delete attrs[key],attrs[newKey]=value)},this),_.each(attrs,function(value,key){if(!value)return;if(key.indexOf("@")===-1)if(value.isCollection)value.each(function(child){self.vie.entities.addOrUpdate(child)});else if(value.isEntity)self.vie.entities.addOrUpdate(value),coll=new self.vie.Collection(value,{vie:self.vie,predicate:key}),attrs[key]=coll;else if(_.isArray(value)){if(this.attributes[key]&&this.attributes[key].isCollection){var newEntities=this.attributes[key].addOrUpdate(value);attrs[key]=this.attributes[key],attrs[key].reset(newEntities)}}else if(!value["@value"]&&_.isObject(value)&&!_.isDate(value)){var child=new self.vie.Entity(value,options);self.vie.entities.addOrUpdate(child),coll=new self.vie.Collection(value,{vie:self.vie,predicate:key}),attrs[key]=coll}},this),Backbone.Model.prototype.set.call(this,attrs,options)},unset:function(attr,opts){return attr=VIE.Util.mapAttributeNS(attr,self.vie.namespaces),Backbone.Model.prototype.unset.call(this,attr,opts)},validate:function(attrs,opts){if(opts&&opts.validate===!1)return;var types=this.get("@type");if(_.isArray(types)){var results=[];_.each(types,function(type){var res=this.validateByType(type,attrs,opts);res&&results.push(res)},this);if(_.isEmpty(results))return;return _.flatten(results)}return this.validateByType(types,attrs,opts)},validateByType:function(type,attrs,opts){var messages={max:"<%= property %> cannot contain more than <%= num %> items",min:"<%= property %> must contain at least <%= num %> items",required:"<%= property %> is required"};if(!type.attributes)return;var toError=function(definition,constraint,messageValues){return{property:definition.id,constraint:constraint,message:_.template(messages[constraint],_.extend({property:definition.id},messageValues))}},checkMin=function(definition,attrs){if(!attrs[definition.id]||_.isEmpty(attrs[definition.id]))return toError(definition,"required",{})},checkMax=function(definition,attrs){if(!attrs[definition.id])return;if(!attrs[definition.id].isCollection&&!_.isArray(attrs[definition.id]))return;if(attrs[definition.id].length>definition.max)return toError(definition,"max",{num:definition.max})},results=[];_.each(type.attributes.list(),function(definition){var res;definition.max&&definition.max!=-1&&(res=checkMax(definition,attrs),res&&results.push(res)),definition.min&&definition.min>0&&(res=checkMin(definition,attrs),res&&results.push(res))});if(_.isEmpty(results))return;return results},isNew:function(){return this.getSubjectUri().substr(0,7)==="_:bnode"?!0:!1},hasChanged:function(attr){return this.markedChanged?!0:Backbone.Model.prototype.hasChanged.call(this,attr)},forceChanged:function(changed){this.markedChanged=changed?!0:!1},getSubject:function(){return typeof this.id=="undefined"&&(this.id=this.attributes[this.idAttribute]),typeof this.id=="string"?this.id.substr(0,7)==="http://"||this.id.substr(0,4)==="urn:"?this.toReference(this.id):this.id:this.cid.replace("c","_:bnode")},getSubjectUri:function(){return this.fromReference(this.getSubject())},isReference:function(uri){var matcher=new RegExp("^\\<([^\\>]*)\\>$");return matcher.exec(uri)?!0:!1},toReference:function(uri){if(_.isArray(uri)){var self=this;return _.map(uri,function(part){return self.toReference(part)})}var ns=this.vie.namespaces,ret=uri;return uri.substring(0,2)==="_:"?ret=uri:ns.isCurie(uri)?(ret=ns.uri(uri),ret==="<"+ns.base()+uri+">"&&(ret="<"+uri+">")):ns.isUri(uri)||(ret="<"+uri+">"),ret},fromReference:function(uri){var ns=this.vie.namespaces;return ns.isUri(uri)?uri.substring(1,uri.length-1):uri},as:function(encoding){if(encoding==="JSON")return this.toJSON();if(encoding==="JSONLD")return this.toJSONLD();throw new Error("Unknown encoding "+encoding)},toJSONLD:function(){var instanceLD={},instance=this;return _.each(instance.attributes,function(value,name){var entityValue=value;value instanceof instance.vie.Collection&&(entityValue=value.map(function(instance){return instance.getSubject()})),instanceLD[name]=entityValue}),instanceLD["@subject"]=instance.getSubject(),instanceLD},setOrAdd:function(arg1,arg2,option){var entity=this;return typeof arg1=="string"&&arg2?entity._setOrAddOne(arg1,arg2,option):typeof arg1=="object"&&_(arg1).each(function(val,key){entity._setOrAddOne(key,val,arg2)}),this},_setOrAddOne:function(attr,value,options){if(!attr||!value)return;options=options?options:{};var v;attr=VIE.Util.mapAttributeNS(attr,self.vie.namespaces);if(_.isArray(value)){for(v=0;v<value.length;v++)this._setOrAddOne(attr,value[v],options);return}attr==="@type"&&value instanceof self.vie.Type&&(value=value.id);var obj={},existing=Backbone.Model.prototype.get.call(this,attr);if(!existing)obj[attr]=value,this.set(obj,options);else if(existing.isCollection){if(value.isCollection)value.each(function(model){existing.add(model)});else if(value.isEntity)existing.add(value);else{if(typeof value!="object")throw new Error("you cannot add a literal to a collection of entities!");value=new this.vie.Entity(value),existing.add(value)}this.trigger("change:"+attr,this,value,{}),this.change({})}else{if(!_.isArray(existing)){var arr=[existing];return arr.push(value),obj[attr]=arr,this.set(obj,options)}if(value.isCollection)for(v=0;v<value.size();v++)this._setOrAddOne(attr,value.at(v).getSubject(),options);else value.isEntity?this._setOrAddOne(attr,value.getSubject(),options):typeof value=="object"?(value=new this.vie.Entity(value),this._setOrAddOne(attr,value,options)):(existing.push(value),obj[attr]=existing,this.set(obj))}},hasType:function(type){return type=self.vie.types.get(type),this.hasPropertyValue("@type",type)},hasPropertyValue:function(property,value){var t=this.get(property);return value instanceof Object||(value=self.vie.entities.get(value)),t instanceof Array?t.indexOf(value)!==-1:t===value},isof:function(type){var types=this.get("@type");if(types===undefined)return!1;types=_.isArray(types)?types:[types],type=self.vie.types.get(type)?self.vie.types.get(type):new self.vie.Type(type);for(var t=0;t<types.length;t++)if(self.vie.types.get(types[t])){if(self.vie.types.get(types[t]).isof(type))return!0}else{var typeTmp=new self.vie.Type(types[t]);if(typeTmp.id===type.id)return!0}return!1},addTo:function(collection,update){var self=this;if(collection instanceof self.vie.Collection)return update?collection.addOrUpdate(self):collection.add(self),this;throw new Error("Please provide a proper collection of type VIE.Collection as argument!")},isEntity:!0,vie:self.vie});return new Model(attrs,opts)},VIE.prototype.Collection=Backbone.Collection.extend({model:VIE.prototype.Entity,initialize:function(models,options){if(!options||!options.vie)throw new Error("Each collection needs a VIE reference");this.vie=options.vie,this.predicate=options.predicate},canAdd:function(type){return!0},get:function(id){return id===null?null:(id=id.getSubject?id.getSubject():id,typeof id=="string"&&id.indexOf("_:")===0?id.indexOf("bnode")===2?(id=id.replace("_:bnode","c"),this._byCid[id]):this._byId["<"+id+">"]:(id=this.toReference(id),this._byId[id]))},addOrUpdate:function(model,options){options=options||{};var collection=this,existing;if(_.isArray(model)){var entities=[];return _.each(model,function(item){entities.push(collection.addOrUpdate(item,options))}),entities}if(model===undefined)throw new Error("No model given");_.isString(model)&&(model={"@subject":model,id:model}),model.isEntity||(model=new this.model(model)),model.id&&this.get(model.id)&&(existing=this.get(model.id)),this.getByCid(model.cid)&&(existing=this.getByCid(model.cid));if(existing){var newAttribs={};return _.each(model.attributes,function(value,attribute){if(!existing.has(attribute))return newAttribs[attribute]=value,!0;if(attribute==="@subject"&&model.isNew()&&!existing.isNew())return!0;if(existing.get(attribute)===value)return!0;var oldVals=existing.attributes[attribute],newVals=value;if(oldVals instanceof collection.vie.Collection)return!0;if(options.overrideAttributes)return newAttribs[attribute]=value,!0;attribute==="@context"?newAttribs[attribute]=jQuery.extend(!0,{},oldVals,newVals):(oldVals=jQuery.isArray(oldVals)?oldVals:[oldVals],newVals=jQuery.isArray(newVals)?newVals:[newVals],newAttribs[attribute]=_.uniq(oldVals.concat(newVals)),newAttribs[attribute]=newAttribs[attribute].length===1?newAttribs[attribute][0]:newAttribs[attribute])}),_.isEmpty(newAttribs)||existing.set(newAttribs,options.updateOptions),existing}return this.add(model,options.addOptions),model},isReference:function(uri){var matcher=new RegExp("^\\<([^\\>]*)\\>$");return matcher.exec(uri)?!0:!1},toReference:function(uri){return this.isReference(uri)?uri:"<"+uri+">"},fromReference:function(uri){return this.isReference(uri)?uri.substring(1,uri.length-1):uri},isCollection:!0});if(VIE.prototype.Type)throw new Error("ERROR: VIE.Type is already defined. Please check your installation!");if(VIE.prototype.Types)throw new Error("ERROR: VIE.Types is already defined. Please check your installation!");VIE.prototype.Type=function(id,attrs,metadata){if(id===undefined||typeof id!="string")throw"The type constructor needs an 'id' of type string! E.g., 'Person'";this.id=this.vie.namespaces.isUri(id)?id:this.vie.namespaces.uri(id);if(this.vie.types.get(this.id))throw new Error("The type "+this.id+" is already defined!");this.supertypes=new this.vie.Types,this.subtypes=new this.vie.Types,this.attributes=new this.vie.Attributes(this,attrs?attrs:[]),this.metadata=metadata?metadata:{},this.isof=function(type){type=this.vie.types.get(type);if(type)return type.subsumes(this.id);throw new Error("No valid type given")},this.subsumes=function(type){type=this.vie.types.get(type);if(type){if(this.id===type.id)return!0;var subtypes=this.subtypes.list();for(var c=0;c<subtypes.length;c++){var childObj=subtypes[c];if(childObj)if(childObj.id===type.id||childObj.subsumes(type))return!0}return!1}throw new Error("No valid type given")},this.inherit=function(supertype){if(typeof supertype=="string")this.inherit(this.vie.types.get(supertype));else if(supertype instanceof this.vie.Type){supertype.subtypes.addOrOverwrite(this),this.supertypes.addOrOverwrite(supertype);try{this.attributes.list()}catch(e){throw supertype.subtypes.remove(this),this.supertypes.remove(supertype),e}}else{if(!jQuery.isArray(supertype))throw new Error("Wrong argument in VIE.Type.inherit()");for(var i=0,slen=supertype.length;i<slen;i++)this.inherit(supertype[i])}return this},this.hierarchy=function(){var obj={id:this.id,subtypes:[]},list=this.subtypes.list();for(var c=0,llen=list.length;c<llen;c++){var childObj=this.vie.types.get(list[c]);obj.subtypes.push(childObj.hierarchy())}return obj},this.instance=function(attrs,opts){attrs=attrs?attrs:{},opts=opts?opts:{};if(opts.typeChecking!==!1)for(var a in attrs)if(a.indexOf("@")!==0&&!this.attributes.get(a))throw new Error("Cannot create an instance of "+this.id+" as the type does not allow an attribute '"+a+"'!");return attrs["@type"]?attrs["@type"].push(this.id):attrs["@type"]=this.id,new this.vie.Entity(attrs,opts)},this.toString=function(){return this.id}},VIE.prototype.Types=function(){this._types={},this.add=function(id,attrs,metadata){if(_.isArray(id))return _.each(id,function(type){this.add(type)},this),this;if(this.get(id))throw new Error("Type '"+id+"' already registered.");if(typeof id=="string"){var t=new this.vie.Type(id,attrs,metadata);return this._types[t.id]=t,t}if(id instanceof this.vie.Type)return this._types[id.id]=id,id;throw new Error("Wrong argument to VIE.Types.add()!")},this.addOrOverwrite=function(id,attrs){return this.get(id)&&this.remove(id),this.add(id,attrs)},this.get=function(id){if(!id)return undefined;if(typeof id=="string"){var lid=this.vie.namespaces.isUri(id)?id:this.vie.namespaces.uri(id);return this._types[lid]}return id instanceof this.vie.Type?this.get(id.id):undefined},this.remove=function(id){var t=this.get(id);if(!t)return this;if(!t||t.subsumes("owl:Thing"))return console.warn("You are not allowed to remove 'owl:Thing'."),this;delete this._types[t.id];var subtypes=t.subtypes.list();for(var c=0;c<subtypes.length;c++){var childObj=subtypes[c];childObj.supertypes.list().length===1?this.remove(childObj):childObj.supertypes.remove(t.id)}return t},this.toArray=this.list=function(){var ret=[];for(var i in this._types)ret.push(this._types[i]);return ret},this.sort=function(types,desc){var self=this;types=jQuery.isArray(types)?types:[types],desc=desc?!0:!1;if(types.length===0)return[];var copy=[types[0]],x,tlen;for(x=1,tlen=types.length;x<tlen;x++){var insert=types[x],insType=self.get(insert);if(insType)for(var y=0;y<copy.length;y++){if(insType.subsumes(copy[y])){copy.splice(y,0,insert);break}y===copy.length-1&&copy.push(insert)}}for(x=0;x<copy.length;x++)copy.lastIndexOf(copy[x])!==x&&(copy.splice(x,1),x--);return desc||copy.reverse(),copy}};if(VIE.prototype.Attribute)throw new Error("ERROR: VIE.Attribute is already defined. Please check your VIE installation!");if(VIE.prototype.Attributes)throw new Error("ERROR: VIE.Attributes is already defined. Please check your VIE installation!");VIE.prototype.Attribute=function(id,range,domain,minCount,maxCount,metadata){if(id===undefined||typeof id!="string")throw new Error("The attribute constructor needs an 'id' of type string! E.g., 'Person'");if(range===undefined)throw new Error("The attribute constructor of "+id+" needs 'range'.");if(domain===undefined)throw new Error("The attribute constructor of "+id+" needs a 'domain'.");this._domain=domain,this.id=this.vie.namespaces.isUri(id)?id:this.vie.namespaces.uri(id),this.range=_.isArray(range)?range:[range],minCount=minCount?minCount:0,this.min=minCount>0?minCount:0,maxCount=maxCount?maxCount:1,maxCount===-1&&(maxCount=Number.MAX_VALUE),this.max=maxCount>=this.min?maxCount:this.min,this.metadata=metadata?metadata:{},this.applies=function(range){this.vie.types.get(range)&&(range=this.vie.types.get(range));for(var r=0,len=this.range.length;r<len;r++){var x=this.vie.types.get(this.range[r]);if(x===undefined&&typeof range=="string"){if(range===this.range[r])return!0}else if(range.isof(this.range[r]))return!0}return!1}},VIE.prototype.Attributes=function(domain,attrs){this._local={},this._attributes={},this.domain=domain,this.add=function(id,range,min,max,metadata){if(_.isArray(id))return _.each(id,function(attribute){this.add(attribute)},this),this;if(this.get(id))throw new Error("Attribute '"+id+"' already registered for domain "+this.domain.id+"!");if(typeof id=="string"){var a=new this.vie.Attribute(id,range,this.domain,min,max,metadata);return this._local[a.id]=a,a}if(id instanceof this.vie.Attribute)return id.domain=this.domain,id.vie=this.vie,this._local[id.id]=id,id;throw new Error("Wrong argument to VIE.Types.add()!")},this.remove=function(id){var a=this.get(id);if(a.id in this._local)return delete this._local[a.id],a;throw new Error("The attribute "+id+" is inherited and cannot be removed from the domain "+this.domain.id+"!")},this.get=function(id){if(typeof id=="string"){var lid=this.vie.namespaces.isUri(id)?id:this.vie.namespaces.uri(id);return this._inherit()._attributes[lid]}if(id instanceof this.vie.Attribute)return this.get(id.id);throw new Error("Wrong argument in VIE.Attributes.get()")},this._inherit=function(){var a,x,id,attributes=jQuery.extend(!0,{},this._local),inherited=_.map(this.domain.supertypes.list(),function(x){return x.attributes}),add={},merge={},ilen,alen;for(a=0,ilen=inherited.length;a<ilen;a++){var attrs=inherited[a].list();for(x=0,alen=attrs.length;x<alen;x++)id=attrs[x].id,id in attributes||(id in add||id in merge?(merge[id]||(merge[id]={range:[],mins:[],maxs:[],metadatas:[]}),id in add&&(merge[id].range=jQuery.merge(merge[id].range,add[id].range),merge[id].mins=jQuery.merge(merge[id].mins,[add[id].min]),merge[id].maxs=jQuery.merge(merge[id].maxs,[add[id].max]),merge[id].metadatas=jQuery.merge(merge[id].metadatas,[add[id].metadata]),delete add[id]),merge[id].range=jQuery.merge(merge[id].range,attrs[x].range),merge[id].mins=jQuery.merge(merge[id].mins,[attrs[x].min]),merge[id].maxs=jQuery.merge(merge[id].maxs,[attrs[x].max]),merge[id].metadatas=jQuery.merge(merge[id].metadatas,[attrs[x].metadata]),merge[id].range=_.uniq(merge[id].range),merge[id].mins=_.uniq(merge[id].mins),merge[id].maxs=_.uniq(merge[id].maxs),merge[id].metadatas=_.uniq(merge[id].metadatas)):add[id]=attrs[x])}jQuery.extend(attributes,add);for(id in merge){var mranges=merge[id].range,mins=merge[id].mins,maxs=merge[id].maxs,metadatas=merge[id].metadatas,ranges=[];for(var r=0,mlen=mranges.length;r<mlen;r++){var p=this.vie.types.get(mranges[r]),isAncestorOf=!1;if(p)for(x=0;x<mlen;x++){if(x===r)continue;var c=this.vie.types.get(mranges[x]);if(c&&c.isof(p)){isAncestorOf=!0;break}}isAncestorOf||ranges.push(mranges[r])}var maxMin=_.max(mins),minMax=_.min(maxs);if(!(maxMin<=minMax&&minMax>=0&&maxMin>=0))throw new Error("This inheritance is not allowed because of an invalid minCount/maxCount pair!");attributes[id]=new this.vie.Attribute(id,ranges,this,maxMin,minMax,metadatas[0])}return this._attributes=attributes,this},this.toArray=this.list=function(range){var ret=[],attributes=this._inherit()._attributes;for(var a in attributes)(!range||attributes[a].applies(range))&&ret.push(attributes[a]);return ret},attrs=_.isArray(attrs)?attrs:[attrs],_.each(attrs,function(attr){this.add(attr.id,attr.range,attr.min,attr.max,attr.metadata)},this)};if(VIE.prototype.Namespaces)throw new Error("ERROR: VIE.Namespaces is already defined. Please check your VIE installation!");VIE.prototype.Namespaces=function(base,namespaces){if(!base)throw new Error("Please provide a base namespace!");this._base=base,this._namespaces=namespaces?namespaces:{};if(typeof this._namespaces!="object"||_.isArray(this._namespaces))throw new Error("If you want to initialise VIE namespace prefixes, please provide a proper object!")},VIE.prototype.Namespaces.prototype.base=function(ns){if(!ns)return this._base;if(typeof ns=="string")return this.removeNamespace(ns),this._base=ns,this._base;throw new Error("Please provide a valid namespace!")},VIE.prototype.Namespaces.prototype.add=function(prefix,namespace){if(typeof prefix=="object"){for(var k1 in prefix)this.add(k1,prefix[k1]);return this}if(prefix==="")return this.base(namespace),this;if(this.contains(prefix)&&namespace!==this._namespaces[prefix])throw new Error("ERROR: Trying to register namespace prefix mapping ("+prefix+","+namespace+")!"+"There is already a mapping existing: '("+prefix+","+this.get(prefix)+")'!");return jQuery.each(this._namespaces,function(k1,v1){if(v1===namespace&&k1!==prefix)throw new Error("ERROR: Trying to register namespace prefix mapping ("+prefix+","+namespace+")!"+"There is already a mapping existing: '("+k1+","+namespace+")'!")}),this._namespaces[prefix]=namespace,this},VIE.prototype.Namespaces.prototype.addOrReplace=function(prefix,namespace){if(typeof prefix=="object"){for(var k1 in prefix)this.addOrReplace(k1,prefix[k1]);return this}return this.remove(prefix),this.removeNamespace(namespace),this.add(prefix,namespace)},VIE.prototype.Namespaces.prototype.get=function(prefix){return prefix===""?this.base():this._namespaces[prefix]},VIE.prototype.Namespaces.prototype.getPrefix=function(namespace){var prefix;return namespace.indexOf("<")===0&&(namespace=namespace.substring(1,namespace.length-1)),jQuery.each(this._namespaces,function(k1,v1){namespace.indexOf(v1)===0&&(prefix=k1),namespace.indexOf(k1+":")===0&&(prefix=k1)}),prefix},VIE.prototype.Namespaces.prototype.contains=function(prefix){return prefix in this._namespaces},VIE.prototype.Namespaces.prototype.containsNamespace=function(namespace){return this.getPrefix(namespace)!==undefined},VIE.prototype.Namespaces.prototype.update=function(prefix,namespace){return this.remove(prefix),this.add(prefix,namespace)},VIE.prototype.Namespaces.prototype.updateNamespace=function(prefix,namespace){return this.removeNamespace(prefix),this.add(prefix,namespace)},VIE.prototype.Namespaces.prototype.remove=function(prefix){return prefix&&delete this._namespaces[prefix],this},VIE.prototype.Namespaces.prototype.removeNamespace=function(namespace){var prefix=this.getPrefix(namespace);return prefix&&delete this._namespaces[prefix],this},VIE.prototype.Namespaces.prototype.toObj=function(omitBase){return omitBase?jQuery.extend({},this._namespaces):jQuery.extend({"":this._base},this._namespaces)},VIE.prototype.Namespaces.prototype.curie=function(uri,safe){return VIE.Util.toCurie(uri,safe,this)},VIE.prototype.Namespaces.prototype.isCurie=function(something){return VIE.Util.isCurie(something,this)},VIE.prototype.Namespaces.prototype.uri=function(curie){return VIE.Util.toUri(curie,this)},VIE.prototype.Namespaces.prototype.isUri=VIE.Util.isUri,VIE.prototype.ClassicRDFa=function(vie){this.vie=vie},VIE.prototype.ClassicRDFa.prototype={readEntities:function(selector){var jsonEntities=[],entities=this.vie.RDFaEntities.getInstances(selector);return _.each(entities,function(entity){jsonEntities.push(entity.toJSONLD())}),jsonEntities},findPredicateElements:function(subject,element,allowNestedPredicates){return this.vie.services.rdfa.findPredicateElements(subject,element,allowNestedPredicates)},getPredicate:function(element){return this.vie.services.rdfa.getElementPredicate(element)},getSubject:function(element){return this.vie.services.rdfa.getElementSubject(element)}},VIE.prototype.ClassicRDFaEntities=function(vie){this.vie=vie},VIE.prototype.ClassicRDFaEntities.prototype={getInstances:function(selector){this.vie.services.rdfa||this.vie.use(new this.vie.RdfaService);var foundEntities=null,loaded=!1;this.vie.load({element:selector}).from("rdfa").execute().done(function(entities){foundEntities=entities,loaded=!0});while(!loaded);return foundEntities},getInstance:function(selector){var instances=this.getInstances(selector);return instances&&instances.length?instances.pop():null}},VIE.prototype.ClassicEntityManager=function(vie){this.vie=vie,this.entities=this.vie.entities},VIE.prototype.ClassicEntityManager.prototype={getBySubject:function(subject){return this.vie.entities.get(subject)},getByJSONLD:function(json){if(typeof json=="string")try{json=jQuery.parseJSON(json)}catch(e){return null}return this.vie.entities.addOrUpdate(json)},initializeCollection:function(){return}},function(){VIE.prototype.DBPediaService=function(options){var defaults={name:"dbpedia",namespaces:{owl:"http://www.w3.org/2002/07/owl#",yago:"http://dbpedia.org/class/yago/",foaf:"http://xmlns.com/foaf/0.1/",georss:"http://www.georss.org/georss/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",dcelements:"http://purl.org/dc/elements/1.1/"},rules:[]};this.options=jQuery.extend(!0,defaults,options?options:{}),this.vie=null,this.name=this.options.name,jQuery.ajaxSetup({converters:{"text application/rdf+json":function(s){return JSON.parse(s)}},timeout:6e4})},VIE.prototype.DBPediaService.prototype={init:function(){for(var key in this.options.namespaces){var val=this.options.namespaces[key];this.vie.namespaces.add(key,val)}return this.rules=jQuery.extend([],VIE.Util.transformationRules(this)),this.rules=jQuery.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.DBPediaConnector(this.options),this},load:function(loadable){var service=this,correct=loadable instanceof this.vie.Loadable;if(!correct)throw new Error("Invalid Loadable passed");var success=function(results){results=typeof results=="string"?JSON.parse(results):results,_.defer(function(){try{var entities=VIE.Util.rdf2Entities(service,results);entities=_.isArray(entities)?entities:[entities],_.each(entities,function(entity){entity.set("DBPediaServiceLoad",VIE.Util.xsdDateTime(new Date))}),entities=entities.length===1?entities[0]:entities,loadable.resolve(entities)}catch(e){loadable.reject(e)}})},error=function(e){loadable.reject(e)},entities=loadable.options.entity?loadable.options.entity:loadable.options.entities;if(!entities)loadable.reject([]);else{entities=_.isArray(entities)?entities:[entities];var tmpEntities=[];for(var e=0;e<entities.length;e++){var tmpEnt=typeof entities[e]=="string"?entities[e]:entities[e].id;tmpEntities.push(tmpEnt)}this.connector.load(tmpEntities,success,error)}return this}},VIE.prototype.DBPediaConnector=function(options){this.options=options,this.baseUrl="http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&timeout=0"},VIE.prototype.DBPediaConnector.prototype={load:function(uri,success,error,options){options||(options={});var url=this.baseUrl+"&format="+encodeURIComponent("application/rdf+json")+"&query=";if(_.isArray(uri)){var construct="",where="";for(var u=0;u<uri.length;u++){var subject=/^<.+>$/.test(uri[u])?uri[u]:"<"+uri[u]+">";u>0&&(construct+=" .",where+=" UNION "),construct+=" "+subject+" ?prop"+u+" ?val"+u,where+=" { "+subject+" ?prop"+u+" ?val"+u+" }"}url+=encodeURIComponent("CONSTRUCT {"+construct+" } WHERE {"+where+" }")}else uri=/^<.+>$/.test(uri)?uri:"<"+uri+">",url+=encodeURIComponent("CONSTRUCT { "+uri+" ?prop ?val } WHERE { "+uri+" ?prop ?val }");var format=options.format||"application/rdf+json";return typeof exports!="undefined"&&typeof process!="undefined"?this._loadNode(url,success,error,options,format):(jQuery.ajax({success:function(response){success(response)},error:error,type:"GET",url:url,accepts:{"application/rdf+json":"application/rdf+json"}}),this)},_loadNode:function(uri,success,error,options,format){var request=require("request"),r=request({method:"GET",uri:uri,headers:{Accept:format}},function(err,response,body){if(response.statusCode!==200)return error(body);success(JSON.parse(body))});return r.end(),this}}}(),function(){VIE.prototype.OpenCalaisService=function(options){var defaults={name:"opencalais",url:["http://api.opencalais.com/enlighten/rest/"],timeout:6e4,namespaces:{opencalaisc:"http://s.opencalais.com/1/pred/",opencalaiscr:"http://s.opencalais.com/1/type/er/",opencalaiscm:"http://s.opencalais.com/1/type/em/e/"},rules:[]};this.options=jQuery.extend(!0,defaults,options?options:{}),this.vie=null,this.name=this.options.name,jQuery.ajaxSetup({converters:{"text application/rdf+json":function(s){return JSON.parse(s)}},timeout:this.options.timeout})},VIE.prototype.OpenCalaisService.prototype={init:function(){for(var key in this.options.namespaces){var val=this.options.namespaces[key];this.vie.namespaces.add(key,val)}this.rules=jQuery.extend([],VIE.Util.transformationRules(this)),this.rules=jQuery.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.OpenCalaisConnector(this.options)},analyze:function(analyzable){var service=this,correct=analyzable instanceof this.vie.Analyzable;if(!correct)throw"Invalid Analyzable passed";var element=analyzable.options.element?analyzable.options.element:jQuery("body"),text=service._extractText(element);if(text.length>0){var success=function(results){_.defer(function(){var entities=VIE.Util.rdf2Entities(service,results);analyzable.resolve(entities)})},error=function(e){analyzable.reject(e)};this.connector.analyze(text,success,error)}else console.warn("No text found in element."),analyzable.resolve([])},_extractText:function(element){if(element.get(0)&&element.get(0).tagName&&(element.get(0).tagName=="TEXTAREA"||element.get(0).tagName=="INPUT"&&element.attr("type","text")))return element.get(0).val();var res=element.text().replace(/\s+/g," ").replace(/\0\b\n\r\f\t/g,"");return jQuery.trim(res)}},VIE.prototype.OpenCalaisConnector=function(options){this.options=options,this.baseUrl=_.isArray(options.url)?options.url:[options.url],this.enhancerUrlPrefix="/"},VIE.prototype.OpenCalaisConnector.prototype={analyze:function(text,success,error,options){options||(options={urlIndex:0});if(options.urlIndex>=this.baseUrl.length){error("Could not connect to the given OpenCalais endpoints! Please check for their setup!");return}var enhancerUrl=this.baseUrl[options.urlIndex].replace(/\/$/,"");enhancerUrl+=this.enhancerUrlPrefix;var format=options.format||"application/rdf+json",retryErrorCb=function(c,t,s,e,o){return function(){console.error("OpenCalais connection error",arguments),c.analyze(t,s,e,_.extend(o,{urlIndex:o.urlIndex+1}))}}(this,text,success,error,options),data=this._prepareData(text);if(typeof exports!="undefined"&&typeof process!="undefined")return this._analyzeNode(enhancerUrl,data,success,retryErrorCb,options,format);jQuery.ajax({success:function(a,b,c){var responseData=c.responseText.replace(/<!--[\s\S]*?-->/g,"");success(responseData)},error:retryErrorCb,type:"POST",url:enhancerUrl,data:data,accept:"text/plain"})},_analyzeNode:function(url,text,success,errorCB,options,format){var request=require("request"),r=request({method:"POST",uri:url,body:text,headers:{Accept:format}},function(error,response,body){try{success({results:JSON.parse(body)})}catch(e){errorCB(e)}});r.end()},_prepareData:function(text){return{licenseID:this.options.api_key,calculareRelevanceScore:"true",enableMetadataType:"GenericRelations,SocialTags",contentType:"text/html",content:text}}}}(),function(){VIE.prototype.RdfaRdfQueryService=function(options){var defaults={name:"rdfardfquery",namespaces:{},rules:[]};this.options=jQuery.extend(!0,defaults,options?options:{}),this.views=[],this.vie=null,this.name=this.options.name},VIE.prototype.RdfaRdfQueryService.prototype={init:function(){for(var key in this.options.namespaces){var val=this.options.namespaces[key];this.vie.namespaces.add(key,val)}this.rules=jQuery.extend([],VIE.Util.transformationRules(this)),this.rules=jQuery.merge(this.rules,this.options.rules?this.options.rules:[])},analyze:function(analyzable){return this.load(analyzable)},load:function(loadable){var service=this,correct=loadable instanceof this.vie.Loadable||loadable instanceof this.vie.Analyzable;if(!correct)throw new Error("Invalid Loadable/Analyzable passed");var element=loadable.options.element?loadable.options.element:jQuery(document);try{var rdf=jQuery(element).find("[about],[typeof]").rdfa();jQuery.each(jQuery(element).xmlns(),function(prefix,ns){service.vie.namespaces.addOrReplace(prefix,ns.toString())});var entities=VIE.Util.rdf2Entities(this,rdf);loadable.resolve(entities)}catch(e){loadable.reject(e)}},save:function(savable){var correct=savable instanceof this.vie.Savable;correct||savable.reject("Invalid Savable passed"),savable.options.element||savable.reject("Unable to write entity to RDFa, no element given"),savable.options.entity||savable.reject("Unable to write to RDFa, no entity given"),jQuery.rdf||savable.reject("No rdfQuery found.");var entity=savable.options.entity,triples=[],type=entity.get("@type");type=jQuery.isArray(type)?type[0]:type,type=type.id,triples.push(entity.getSubject()+" a "+type),jQuery(savable.options.element).rdfa(triples),savable.resolve()}}}(),function(){VIE.prototype.RdfaService=function(options){var defaults={name:"rdfa",namespaces:{},subjectSelector:"[about],[typeof],[src],html",predicateSelector:"[property],[rel]",rules:[]};this.options=jQuery.extend(!0,defaults,options?options:{}),this.views=[],this.templates={},this.datatypeReaders={"<http://www.w3.org/2001/XMLSchema#boolean>":function(value){return value==="true"||value===1||value===!0?!0:!1},"<http://www.w3.org/2001/XMLSchema#dateTime>":function(value){return new Date(value)},"<http://www.w3.org/2001/XMLSchema#integer>":function(value){return parseInt(value,10)}},this.datatypeWriters={"<http://www.w3.org/2001/XMLSchema#dateTime>":function(value){return _.isDate(value)?value.toISOString():value}},this.vie=null,this.name=this.options.name},VIE.prototype.RdfaService.prototype={init:function(){for(var key in this.options.namespaces){var val=this.options.namespaces[key];this.vie.namespaces.add(key,val)}this.rules=jQuery.merge([],VIE.Util.transformationRules(this)),this.rules=jQuery.merge(this.rules,this.options.rules?this.options.rules:[])},analyze:function(analyzable){return this.load(analyzable)},load:function(loadable){var service=this,correct=loadable instanceof this.vie.Loadable||loadable instanceof this.vie.Analyzable;if(!correct)throw new Error("Invalid Loadable/Analyzable passed");var element;if(!loadable.options.element){if(typeof document=="undefined")return loadable.resolve([]);element=jQuery(document)}else element=loadable.options.element;var entities=this.readEntities(element);loadable.resolve(entities)},save:function(savable){var correct=savable instanceof this.vie.Savable;if(!correct)throw"Invalid Savable passed";if(!savable.options.element)throw"Unable to write entity to RDFa, no element given";if(!savable.options.entity)throw"Unable to write to RDFa, no entity given";this._writeEntity(savable.options.entity,savable.options.element),savable.resolve()},readEntities:function(element){var service=this,ns=this.xmlns(element);for(var prefix in ns)this.vie.namespaces.addOrReplace(prefix,ns[prefix]);var entities=[],entityElements=jQuery(this.options.subjectSelector,element).add(jQuery(element).filter(this.options.subjectSelector)).each(function(){var entity=service._readEntity(jQuery(this));entity&&entities.push(entity)});return entities},_readEntity:function(element){var subject=this.getElementSubject(element),type=this._getElementType(element),entity=this._readEntityPredicates(subject,element,!1);if(jQuery.isEmptyObject(entity))return null;var vie=this.vie;_.each(entity,function(value,predicate){if(!_.isArray(value))return;var valueCollection=new this.vie.Collection([],{vie:vie,predicate:predicate});_.each(value,function(valueItem){var linkedEntity=vie.entities.addOrUpdate({"@subject":valueItem});valueCollection.addOrUpdate(linkedEntity)}),entity[predicate]=valueCollection},this),entity["@subject"]=subject,type&&(entity["@type"]=type);var entityInstance=new this.vie.Entity(entity);return entityInstance=this.vie.entities.addOrUpdate(entityInstance,{updateOptions:{silent:!0}}),this._registerEntityView(entityInstance,element),entityInstance},_writeEntity:function(entity,element){var service=this;return this.findPredicateElements(this.getElementSubject(element),element,!0).each(function(){var predicateElement=jQuery(this),predicate=service.getElementPredicate(predicateElement);if(!entity.has(predicate))return!0;var value=entity.get(predicate);if(value&&value.isCollection)return!0;if(value===service.readElementValue(predicate,predicateElement))return!0;service.writeElementValue(predicate,predicateElement,value)}),!0},_getViewForElement:function(element,collectionView){var viewInstance;return jQuery.each(this.views,function(){if(jQuery(this.el).get(0)===element.get(0))return collectionView&&!this.template?!0:(viewInstance=this,!1)}),viewInstance},_registerEntityView:function(entity,element,isNew){if(!element.length)return;var service=this,viewInstance=this._getViewForElement(element);return viewInstance?viewInstance:(viewInstance=new this.vie.view.Entity({model:entity,el:element,tagName:element.get(0).nodeName,vie:this.vie,service:this.name}),this.views.push(viewInstance),isNew&&jQuery(element).find(this.options.predicateSelector).add(jQuery(element).filter(this.options.predicateSelector)).each(function(){var predicate=jQuery(this).attr("rel");if(!predicate)return;entity.set(predicate,new service.vie.Collection([],{vie:service.vie,predicate:predicate}))}),_.each(entity.attributes,function(value,predicate){var attributeValue=entity.fromReference(entity.get(predicate));attributeValue&&attributeValue.isCollection&&jQuery.each(service.getElementByPredicate(predicate,element),function(){service._registerCollectionView(attributeValue,jQuery(this),entity)})}),viewInstance)},setTemplate:function(type,predicate,template){var templateFunc;template||(template=predicate,predicate="default"),type=this.vie.namespaces.isUri(type)?type:this.vie.namespaces.uri(type),_.isFunction(template)?templateFunc=template:templateFunc=this.getElementTemplate(template),this.templates[type]||(this.templates[type]={}),this.templates[type][predicate]=templateFunc,_.each(this.views,function(view){if(!(view instanceof this.vie.view.Collection))return;if(view.collection.predicate!==predicate)return;view.templates[type]=templateFunc},this)},getTemplate:function(type,predicate){predicate||(predicate="default"),type=this.vie.namespaces.isUri(type)?type:this.vie.namespaces.uri(type);if(!this.templates[type])return;return this.templates[type][predicate]},_getElementTemplates:function(element,entity,predicate){var templates={},type=entity.get("@type");if(type&&type.attributes&&type.attributes.get(predicate)){var attribute=type.attributes.get(predicate);_.each(attribute.range,function(childType){var template=this.getTemplate(childType,predicate);if(template){var vieChildType=this.vie.types.get(childType);templates[vieChildType.id]=template}},this);if(!_.isEmpty(templates))return templates}var self=this;jQuery("[typeof]",element).each(function(){var templateElement=jQuery(this),childType=templateElement.attr("typeof");childType=self.vie.namespaces.isUri(childType)?childType:self.vie.namespaces.uri(childType);if(templates[childType])return;var templateFunc=self.getElementTemplate(templateElement);templates[childType]=templateFunc,templates["<http://www.w3.org/2002/07/owl#Thing>"]=templateFunc});if(_.isEmpty(templates)){var defaultTemplate=element.children(":first-child");defaultTemplate.length&&(templates["<http://www.w3.org/2002/07/owl#Thing>"]=self.getElementTemplate(defaultTemplate))}return templates},getElementTemplate:function(element){var service=this;return function(entity,callback){var newElement=jQuery(element).clone(!1);newElement.attr("about")!==undefined&&newElement.attr("about",""),newElement.find("[about]").attr("about","");var subject=service.findPredicateElements(subject,newElement,!1).each(function(){var predicateElement=jQuery(this),predicate=service.getElementPredicate(predicateElement);if(entity.has(predicate)&&entity.get(predicate).isCollection)return!0;service.writeElementValue(null,predicateElement,"")});callback(newElement)}},_registerCollectionView:function(collection,element,entity){var viewInstance=this._getViewForElement(element,!0);return viewInstance?viewInstance:(viewInstance=new this.vie.view.Collection({owner:entity,collection:collection,model:collection.model,el:element,templates:this._getElementTemplates(element,entity,collection.predicate),service:this}),this.views.push(viewInstance),viewInstance)},_getElementType:function(element){var type;return jQuery(element).attr("typeof")!==this.options.attributeExistenceComparator?(type=jQuery(element).attr("typeof"),type.indexOf("://")!==-1?"<"+type+">":type):null},getElementSubject:function(element){var service=this;if(typeof document!="undefined"&&element===document)return document.baseURI;var subject,matched=null;return jQuery(element).closest(this.options.subjectSelector).each(function(){matched=this;if(jQuery(this).attr("about")!==service.options.attributeExistenceComparator)return subject=jQuery(this).attr("about"),!0;if(jQuery(this).attr("src")!==service.options.attributeExistenceComparator)return subject=jQuery(this).attr("src"),!0;if(jQuery(this).attr("typeof")!==service.options.attributeExistenceComparator)return!0;jQuery(this).get(0).nodeName==="HTML"&&jQuery("base",this).each(function(){subject=jQuery(this).attr("href")})}),subject?typeof subject=="object"?subject:subject.indexOf("_:")===0?subject:subject.indexOf("<")===0?subject:"<"+subject+">":matched===element?service.getElementSubject(jQuery(element).parent()):undefined},setElementSubject:function(subject,element){return jQuery(element).attr("src")?jQuery(element).attr("src",subject):jQuery(element).attr("about",subject)},getElementPredicate:function(element){var predicate;return element=jQuery(element),predicate=element.attr("property"),predicate||(predicate=element.attr("rel")),predicate},getElementBySubject:function(subject,element){var service=this;return jQuery(element).find(this.options.subjectSelector).add(jQuery(element).filter(this.options.subjectSelector)).filter(function(){return service.getElementSubject(jQuery(this))!==subject?!1:!0})},getElementByPredicate:function(predicate,element){var service=this,subject=this.getElementSubject(element);return jQuery(element).find(this.options.predicateSelector).add(jQuery(element).filter(this.options.predicateSelector)).filter(function(){var foundPredicate=service.getElementPredicate(jQuery(this));return service.vie.namespaces.curie(foundPredicate)!==service.vie.namespaces.curie(predicate)?!1:service.getElementSubject(this)!==subject?!1:!0})},_readEntityPredicates:function(subject,element,emptyValues){var service=this,entityPredicates={};return this.findPredicateElements(subject,element,!0).each(function(){var predicateElement=jQuery(this),predicate=service.getElementPredicate(predicateElement);if(predicate==="")return;var value=service.readElementValue(predicate,predicateElement);if(value===null&&!emptyValues)return;entityPredicates[predicate]=value}),jQuery(element).get(0).tagName!=="HTML"&&jQuery(element).parent("[rev]").each(function(){var relation=jQuery(this).attr("rev");if(!relation)return;entityPredicates[jQuery(this).attr("rev")]=service.getElementSubject(this)}),entityPredicates},findPredicateElements:function(subject,element,allowNestedPredicates){var service=this;return jQuery(element).find(this.options.predicateSelector).add(jQuery(element).filter(this.options.predicateSelector)).filter(function(){return service.getElementSubject(this)!==subject?!1:allowNestedPredicates?!0:jQuery(this).parents("[property]").length?!1:!0})},parseElementValue:function(value,element){if(!element.attr("datatype"))return value;var datatype=this.vie.namespaces.uri(element.attr("datatype"));return this.datatypeReaders[datatype]?this.datatypeReaders[datatype](value):value},generateElementValue:function(value,element){if(!element.attr("datatype"))return value;var datatype=this.vie.namespaces.uri(element.attr("datatype"));return this.datatypeWriters[datatype]?this.datatypeWriters[datatype](value):value},readElementValue:function(predicate,element){var content=element.attr("content");if(content)return this.parseElementValue(content,element);var resource=element.attr("resource");if(resource)return["<"+resource+">"];var href=element.attr("href");if(href&&element.attr("rel")===predicate)return["<"+href+">"];if(element.attr("rel")){var value=[],service=this;return jQuery(element).children(this.options.subjectSelector).each(function(){value.push(service.getElementSubject(this))}),value}return this.parseElementValue(element.html(),element)},writeElementValue:function(predicate,element,value){value=this.generateElementValue(value,element),_.isArray(value)&&value.length>0&&(value=value[0]);var content=element.attr("content");if(content){element.attr("content",value);return}var resource=element.attr("resource");resource&&element.attr("resource",value),element.html(value)},xmlns:function(elem){var $elem;if(!elem){if(typeof document=="undefined")return{};$elem=jQuery(document)}else $elem=jQuery(elem);$elem=$elem.add($elem.parents());var obj={};return $elem.each(function(i,e){if(e.attributes)for(i=0;i<e.attributes.length;i+=1){var attr=e.attributes[i];if(/^xmlns(:(.+))?$/.test(attr.nodeName)){var prefix=/^xmlns(:(.+))?$/.exec(attr.nodeName)[2]||"",value=attr.nodeValue;if(prefix===""||value!=="")obj[prefix]=attr.nodeValue}}}),obj}}}(),function(){VIE.prototype.StanbolService=function(options){var defaults={name:"stanbol",url:["http://dev.iks-project.eu/stanbolfull"],timeout:2e4,namespaces:{semdeski:"http://www.semanticdesktop.org/ontologies/2007/01/19/nie#",semdeskf:"http://www.semanticdesktop.org/ontologies/2007/03/22/nfo#",skos:"http://www.w3.org/2004/02/skos/core#",foaf:"http://xmlns.com/foaf/0.1/",opengis:"http://www.opengis.net/gml/",dbpedia:"http://dbpedia.org/ontology/",dbprop:"http://dbpedia.org/property/",owl:"http://www.w3.org/2002/07/owl#",geonames:"http://www.geonames.org/ontology#",enhancer:"http://fise.iks-project.eu/ontology/",entityhub:"http://www.iks-project.eu/ontology/rick/model/",entityhub2:"http://www.iks-project.eu/ontology/rick/query/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",dcterms:"http://purl.org/dc/terms/",schema:"http://schema.org/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#"},rules:[{left:["?subject a <http://fise.iks-project.eu/ontology/EntityAnnotation>","?subject enhancer:entity-type ?type","?subject enhancer:confidence ?confidence","?subject enhancer:entity-reference ?entity","?subject dcterms:relation ?relation","?relation a <http://fise.iks-project.eu/ontology/TextAnnotation>","?relation enhancer:selected-text ?selected-text","?relation enhancer:selection-context ?selection-context","?relation enhancer:start ?start","?relation enhancer:end ?end"],right:["?entity a ?type","?entity enhancer:hasTextAnnotation ?relation","?entity enhancer:hasEntityAnnotation ?subject"]}],enhancer:{chain:"default"},entityhub:{site:undefined}};this.options=jQuery.extend(!0,defaults,options?options:{}),this.vie=null,this.name=this.options.name},VIE.prototype.StanbolService.prototype={init:function(){for(var key in this.options.namespaces){var val=this.options.namespaces[key];this.vie.namespaces.add(key,val)}this.rules=jQuery.extend([],VIE.Util.transformationRules(this)),this.rules=jQuery.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.StanbolConnector(this.options),this.vie.types.addOrOverwrite("enhancer:EntityAnnotation",[]).inherit("owl:Thing"),this.vie.types.addOrOverwrite("enhancer:TextAnnotation",[]).inherit("owl:Thing"),this.vie.types.addOrOverwrite("enhancer:Enhancement",[]).inherit("owl:Thing")},analyze:function(analyzable){var service=this,correct=analyzable instanceof this.vie.Analyzable;if(!correct)throw"Invalid Analyzable passed";var element=analyzable.options.element?analyzable.options.element:jQuery("body"),text=service._extractText(element);if(text.length>0){var success=function(results){_.defer(function(){var entities=VIE.Util.rdf2Entities(service,results);analyzable.resolve(entities)})},error=function(e){analyzable.reject(e)},options={chain:analyzable.options.chain?analyzable.options.chain:service.options.enhancer.chain};this.connector.analyze(text,success,error,options)}else console.warn("No text found in element."),analyzable.resolve([])},find:function(findable){var correct=findable instanceof this.vie.Findable;if(!correct)throw"Invalid Findable passed";var service=this;findable.options.term||(console.info("StanbolConnector: No term to look for!"),findable.reject([]));var term=escape(findable.options.term),limit=typeof findable.options.limit=="undefined"?20:findable.options.limit,offset=typeof findable.options.offset=="undefined"?0:findable.options.offset,success=function(results){_.defer(function(){var entities=VIE.Util.rdf2Entities(service,results);findable.resolve(entities)})},error=function(e){findable.reject(e)};findable.options.site=findable.options.site?findable.options.site:service.options.entityhub.site;var vie=this.vie;if(findable.options.properties){var properties=findable.options.properties;findable.options.ldPath=_(properties).map(function(property){return vie.namespaces.isCurie(property)?vie.namespaces.uri(property)+";":property}).join("")}if(findable.options.field&&vie.namespaces.isCurie(field)){var field=findable.options.field;findable.options.field=vie.namespaces.uri(field)}this.connector.find(term,limit,offset,success,error,findable.options)},load:function(loadable){var correct=loadable instanceof this.vie.Loadable;if(!correct)throw"Invalid Loadable passed";var service=this,entity=loadable.options.entity;entity||(console.warn("StanbolConnector: No entity to look for!"),loadable.resolve([]));var success=function(results){_.defer(function(){var entities=VIE.Util.rdf2Entities(service,results);loadable.resolve(entities)})},error=function(e){loadable.reject(e)},options={site:loadable.options.site?loadable.options.site:service.options.entityhub.site,local:loadable.options.local};this.connector.load(entity,success,error,options)},save:function(savable){var correct=savable instanceof this.vie.Savable;if(!correct)throw"Invalid Savable passed";var service=this,entity=savable.options.entity;entity||(console.warn("StanbolConnector: No entity to save!"),savable.reject("StanbolConnector: No entity to save!"));var success=function(results){_.defer(function(){var entities=VIE.Util.rdf2Entities(service,results);savable.resolve(entities)})},error=function(e){savable.reject(e)},options={site:savable.options.site?savable.options.site:service.options.entityhub.site,local:savable.options.local};this.connector.save(entity,success,error,options)},_extractText:function(element){if(element.get(0)&&element.get(0).tagName&&(element.get(0).tagName=="TEXTAREA"||element.get(0).tagName=="INPUT"&&element.attr("type","text")))return element.get(0).val();var res=element.text().replace(/\s+/g," ").replace(/\0\b\n\r\f\t/g,"");return jQuery.trim(res)}},VIE.prototype.StanbolConnector=function(options){var defaults={url:["http://dev.iks-project.eu/stanbolfull"],timeout:2e4,enhancer:{urlPostfix:"/enhancer",chain:"default"},entityhub:{site:undefined,urlPostfix:"/entityhub",local:!1},sparql:{urlPostfix:"/sparql"},contenthub:{urlPostfix:"/contenthub",index:"contenthub"},ontonet:{urlPostfix:"/ontonet"},factstore:{urlPostfix:"/factstore"},rules:{urlPostfix:"/rules"},cmsadapter:{urlPostfix:"/cmsadapter"}};this.options=jQuery.extend(!0,defaults,options?options:{}),this.options.url=_.isArray(this.options.url)?this.options.url:[this.options.url],this._init(),this.baseUrl=_.isArray(options.url)?options.url:[options.url]},VIE.prototype.StanbolConnector.prototype={_init:function(){var connector=this;return jQuery.ajaxSetup({converters:{"text application/rdf+json":function(s){return JSON.parse(s)}},timeout:connector.options.timeout}),this},_iterate:function(params){if(!params)return;if(params.urlIndex>=this.options.url.length){params.error.call(this,"Could not connect to the given Stanbol endpoints! Please check for their setup!");return}var retryErrorCb=function(c,p){return function(){console.log("Stanbol connection error",arguments),p.urlIndex=p.urlIndex+1,c._iterate(p)}}(this,params);return typeof exports!="undefined"&&typeof process!="undefined"?params.methodNode.call(this,params.url.call(this,params.urlIndex,params.args.options),params.args,params.success,retryErrorCb):params.method.call(this,params.url.call(this,params.urlIndex,params.args.options),params.args,params.success,retryErrorCb)},analyze:function(text,success,error,options){options=options?options:{};var connector=this;connector._iterate({method:connector._analyze,methodNode:connector._analyzeNode,url:function(idx,opts){var chain=opts.chain?opts.chain:this.options.enhancer.chain,u=this.options.url[idx].replace(/\/$/,"");return u+=this.options.enhancer.urlPostfix+"/chain/"+chain.replace(/\/$/,""),u},args:{text:text,format:options.format||"application/rdf+json",options:options},success:success,error:error,urlIndex:0})},_analyze:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"POST",data:args.text,dataType:args.format,contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_analyzeNode:function(url,args,success,error){var request=require("request"),r=request({method:"POST",uri:url,body:args.text,headers:{Accept:args.format,"Content-Type":"text/plain"}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},load:function(uri,success,error,options){var connector=this;options=options?options:{},options.uri=uri.replace(/^</,"").replace(/>$/,""),connector._iterate({method:connector._load,methodNode:connector._loadNode,success:success,error:error,url:function(idx,opts){var site=opts.site?opts.site:this.options.entityhub.site;site=site?"/"+site:"s";var isLocal=opts.local,u=this.options.url[idx].replace(/\/$/,"")+this.options.entityhub.urlPostfix;return isLocal?u+="/entity?id="+escape(opts.uri):u+="/site"+site+"/entity?id="+escape(opts.uri),u},args:{format:options.format||"application/rdf+json",options:options},urlIndex:0})},_load:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"GET",dataType:args.format,contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_loadNode:function(url,args,success,error){var request=require("request"),r=request({method:"GET",uri:url,body:args.text,headers:{Accept:args.format}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},find:function(term,limit,offset,success,error,options){options=options?options:{};var connector=this;if(!term||term===""){error("No term given!");return}offset=offset?offset:0,limit=limit?limit:10,connector._iterate({method:connector._find,methodNode:connector._findNode,success:success,error:error,url:function(idx,opts){var site=opts.site?opts.site:this.options.entityhub.site;site=site?"/"+site:"s";var isLocal=opts.local,u=this.options.url[idx].replace(/\/$/,"")+this.options.entityhub.urlPostfix;return isLocal?u+="/sites/find":u+="/site"+site+"/find",u},args:{term:term,offset:offset,limit:limit,format:options.format||"application/rdf+json",options:options},urlIndex:0})},_find:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"POST",data:"name="+args.term+"&limit="+args.limit+"&offset="+args.offset,dataType:args.format,contentType:"application/x-www-form-urlencoded",accepts:{"application/rdf+json":"application/rdf+json"}})},_findNode:function(url,args,success,error){var request=require("request"),r=request({method:"POST",uri:url,body:"name="+args.term+"&limit="+args.limit+"&offset="+args.offset,headers:{Accept:args.format}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},lookup:function(uri,success,error,options){options=options?options:{};var connector=this;uri=uri.replace(/^</,"").replace(/>$/,""),options.uri=uri,options.create=options.create?options.create:!1,connector._iterate({method:connector._lookup,methodNode:connector._lookupNode,success:success,error:error,url:function(idx,opts){var u=this.options.url[idx].replace(/\/$/,"")+this.options.entityhub.urlPostfix;return u+="/lookup?id="+escape(opts.uri)+"&create="+opts.create,u},args:{format:options.format||"application/rdf+json",options:options},urlIndex:0})},_lookup:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"GET",dataType:args.format,contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_lookupNode:function(url,args,success,error){var request=require("request"),r=request({method:"GET",uri:url,body:args.text,headers:{Accept:args.format}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},referenced:function(success,error,options){options=options?options:{};var connector=this,successCB=function(sites){_.isArray(sites)||(sites=JSON.parse(sites));var sitesStripped=[];for(var s=0,l=sites.length;s<l;s++)sitesStripped.push(sites[s].replace(/.+\/(.+?)\/?$/,"$1"));return success(sitesStripped)};connector._iterate({method:connector._referenced,methodNode:connector._referencedNode,success:successCB,error:error,url:function(idx,opts){var u=this.options.url[idx].replace(/\/$/,"");return u+=this.options.entityhub.urlPostfix+"/sites/referenced",u},args:{options:options},urlIndex:0})},_referenced:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"GET",accepts:{"application/rdf+json":"application/rdf+json"}})},_referencedNode:function(url,args,success,error){var request=require("request"),r=request({method:"GET",uri:url,headers:{Accept:args.format}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},sparql:function(query,success,error,options){options=options?options:{};var connector=this;connector._iterate({method:connector._sparql,methodNode:connector._sparqlNode,success:success,error:error,url:function(idx,opts){var u=this.options.url[idx].replace(/\/$/,"");return u+=this.options.sparql.urlPostfix.replace(/\/$/,""),u},args:{query:query,options:options},urlIndex:0})},_sparql:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"POST",data:"query="+args.query,contentType:"application/x-www-form-urlencoded"})},_sparqlNode:function(url,args,success,error){var request=require("request"),r=request({method:"POST",uri:url,body:JSON.stringify({query:args.query}),headers:{Accept:args.format}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},ldpath:function(ldpath,context,success,error,options){options=options?options:{};var connector=this;context=_.isArray(context)?context:[context];var contextStr="";for(var c=0;c<context.length;c++)contextStr+="&context="+context[c];connector._iterate({method:connector._ldpath,methodNode:connector._ldpathNode,success:success,error:error,url:function(idx,opts){var site=opts.site?opts.site:this.options.entityhub.site;site=site?"/"+site:"s";var isLocal=opts.local,u=this.options.url[idx].replace(/\/$/,"")+this.options.entityhub.urlPostfix;return isLocal||(u+="/site"+site),u+="/ldpath",u},args:{ldpath:ldpath,context:contextStr,format:options.format||"application/rdf+json",options:options},urlIndex:0})},_ldpath:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"POST",data:"ldpath="+args.ldpath+args.context,contentType:"application/x-www-form-urlencoded",dataType:args.format,accepts:{"application/rdf+json":"application/rdf+json"}})},_ldpathNode:function(url,args,success,error){var request=require("request"),r=request({method:"POST",uri:url,body:"ldpath="+args.ldpath+args.context,headers:{Accept:args.format}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},uploadContent:function(content,success,error,options){options=options?options:{};var connector=this;connector._iterate({method:connector._uploadContent,methodNode:connector._uploadContentNode,success:success,error:error,url:function(idx,opts){var u=this.options.url[idx].replace(/\/$/,"");u+=this.options.contenthub.urlPostfix.replace(/\/$/,"");var index=opts.index?opts.index:this.options.contenthub.index;return u+="/"+index.replace(/\/$/,""),u+="/store",u},args:{content:content,options:options},urlIndex:0})},_uploadContent:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"POST",data:args.content,contentType:"text/plain"})},_uploadContentNode:function(url,args,success,error){var request=require("request"),r=request({method:"POST",uri:url,body:args.content,headers:{Accept:"application/rdf+xml","Content-Type":"text/plain"}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},createFactSchema:function(url,schema,success,error,options){options=options?options:{};var connector=this;options.url=url,connector._iterate({method:connector._createFactSchema,methodNode:connector._createFactSchemaNode,success:success,error:error,url:function(idx,opts){var u=this.options.url[idx].replace(/\/$/,"");return u+=this.options.factstore.urlPostfix.replace(/\/$/,""),u+="/facts/"+escape(opts.url),u},args:{url:url,schema:schema,options:options},urlIndex:0})},_createFactSchema:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"PUT",data:args.schema,contentType:"application/json",dataType:"application/json"})},_createFactSchemaNode:function(url,args,success,error){var request=require("request"),r=request({method:"PUT",uri:url,body:args.schema,headers:{Accept:"application/json","Content-Type":"application/json"}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},createFact:function(fact,success,error,options){options=options?options:{};var connector=this;connector._iterate({method:connector._createFact,methodNode:connector._createFactNode,success:success,error:error,url:function(idx,opts){var u=this.options.url[idx].replace(/\/$/,"");return u+=this.options.factstore.urlPostfix.replace(/\/$/,""),u+="/facts",u},args:{fact:fact,options:options},urlIndex:0})},_createFact:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"POST",data:args.fact,contentType:"application/json",dataType:"application/json"})},_createFactNode:function(url,args,success,error){var request=require("request"),r=request({method:"POST",uri:url,body:args.fact,headers:{Accept:"application/json","Content-Type":"application/json"}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()},queryFact:function(query,success,error,options){options=options?options:{};var connector=this;connector._iterate({method:connector._queryFact,methodNode:connector._queryFactNode,success:success,error:error,url:function(idx,opts){var u=this.options.url[idx].replace(/\/$/,"");return u+=this.options.factstore.urlPostfix.replace(/\/$/,""),u+="/query",u},args:{query:query,options:options},urlIndex:0})},_queryFact:function(url,args,success,error){jQuery.ajax({success:success,error:error,url:url,type:"POST",data:args.query,contentType:"application/json",dataType:"application/json"})},_queryFactNode:function(url,args,success,error){var request=require("request"),r=request({method:"POST",uri:url,body:args.query,headers:{Accept:"application/json","Content-Type":"application/json"}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()}}}(),function(){VIE.prototype.ZemantaService=function(options){var defaults={name:"zemanta",url:["http://api.zemanta.com/services/rest/0.0/"],timeout:2e4,namespaces:{zemanta:"http://s.zemanta.com/ns#"},rules:[{left:["?subject a zemanta:Recognition","?subject zemanta:object ?object","?object owl:sameAs ?entity"],right:["?entity zemanta:hasEntityAnnotation ?subject"]}],api_key:undefined};this.options=jQuery.extend(!0,defaults,options?options:{}),this.vie=null,this.name=this.options.name,jQuery.ajaxSetup({converters:{"text application/rdf+json":function(s){return JSON.parse(s)}},timeout:this.options.timeout})},VIE.prototype.ZemantaService.prototype={init:function(){for(var key in this.options.namespaces){var val=this.options.namespaces[key];this.vie.namespaces.add(key,val)}this.rules=jQuery.extend([],VIE.Util.transformationRules(this)),this.rules=jQuery.merge(this.rules,this.options.rules?this.options.rules:[]),this.connector=new this.vie.ZemantaConnector(this.options),this.vie.types.addOrOverwrite("zemanta:Recognition",[]).inherit("owl:Thing")},analyze:function(analyzable){var service=this,correct=analyzable instanceof this.vie.Analyzable;if(!correct)throw"Invalid Analyzable passed";var element=analyzable.options.element?analyzable.options.element:jQuery("body"),text=service._extractText(element);if(text.length>0){var success=function(results){_.defer(function(){var entities=VIE.Util.rdf2Entities(service,results);analyzable.resolve(entities)})},error=function(e){analyzable.reject(e)},options={};this.connector.analyze(text,success,error,options)}else console.warn("No text found in element."),analyzable.resolve([])},_extractText:function(element){return jQuery(element).wrap("<div>").parent().html()}},VIE.prototype.ZemantaConnector=function(options){var defaults={url:["http://api.zemanta.com/services/rest/0.0/"],timeout:2e4,api_key:undefined};this.options=jQuery.extend(!0,defaults,options?options:{}),this.options.url=_.isArray(this.options.url)?this.options.url:[this.options.url],this._init(),this.baseUrl=_.isArray(options.url)?options.url:[options.url]},VIE.prototype.ZemantaConnector.prototype={_init:function(){var connector=this;return jQuery.ajaxSetup({converters:{"text application/rdf+json":function(s){return JSON.parse(s)}},timeout:connector.options.timeout}),this},_iterate:function(params){if(!params)return;if(params.urlIndex>=this.options.url.length){params.error.call(this,"Could not connect to the given Zemanta endpoints! Please check for their setup!");return}var retryErrorCb=function(c,p){return function(){console.log("Zemanta connection error",arguments),p.urlIndex=p.urlIndex+1,c._iterate(p)}}(this,params);return typeof exports!="undefined"&&typeof process!="undefined"?params.methodNode.call(this,params.url.call(this,params.urlIndex,params.args.options),params.args,params.success,retryErrorCb):params.method.call(this,params.url.call(this,params.urlIndex,params.args.options),params.args,params.success,retryErrorCb)},analyze:function(text,success,error,options){options=options?options:{};var connector=this;connector._iterate({method:connector._analyze,methodNode:connector._analyzeNode,success:success,error:error,url:function(idx,opts){var u=this.options.url[idx].replace(/\/$/,"");return u},args:{text:text,format:options.format||"rdfxml",options:options},urlIndex:0})},_analyze:function(url,args,success,error){jQuery.ajax({success:function(a,b,c){var responseData=c.responseText.replace(/<z:signature>.*?<\/z:signature>/,"");success(responseData)},error:error,url:url,type:"POST",dataType:"xml",data:{method:"zemanta.suggest",text:args.text,format:args.format,api_key:this.options.api_key,return_rdf_links:args.options.return_rdf_links},contentType:"text/plain",accepts:{"application/rdf+json":"application/rdf+json"}})},_analyzeNode:function(url,args,success,error){var request=require("request"),r=request({method:"POST",uri:url,body:args.text,headers:{Accept:args.format,"Content-Type":"text/plain"}},function(err,response,body){try{success({results:JSON.parse(body)})}catch(e){error(e)}});r.end()}}}(),VIE.prototype.view||(VIE.prototype.view={}),VIE.prototype.view.Collection=Backbone.View.extend({initialize:function(){this.templates=this.options.templates,this.service=this.options.service;if(!this.service)throw"No RDFa service provided to the Collection View";this.owner=this.options.owner,this.definition=this.options.definition,this.entityViews={},_.bindAll(this,"addItem","removeItem","refreshItems"),this.collection.bind("add",this.addItem),this.collection.bind("remove",this.removeItem),this.collection.bind("reset",this.refreshItems);var view=this;this.collection.forEach(function(entity){view.registerItem(entity,view.collection)})},canAdd:function(type){return _.isEmpty(this.templates)?!1:type&&!this.templates[type]?!1:this.collection.canAdd(type)},addItem:function(entity,collection){if(collection!==this.collection)return;var childType=entity.get("@type"),childTypeName;_.isArray(childType)?_.each(childType,function(type){this.canAdd(type.id)&&(childTypeName=type.id)},this):this.canAdd(childType.id)&&(childTypeName=childType.id);if(!childTypeName)return;var self=this;this.templates[childTypeName](entity,function(template){var entityView=self.service._registerEntityView(entity,template,!0),entityElement=entityView.render().$el;entity.id&&self.service.setElementSubject(entity.getSubjectUri(),entityElement);var entityIndex=collection.indexOf(entity);if(entityIndex===0)self.$el.prepend(entityElement);else{var previousEntity=collection.at(entityIndex-1),previousView=self.entityViews[previousEntity.cid];previousView?previousView.$el.after(entityElement):self.$el.append(entityElement)}self.findReverseRelations(entity,entityElement),self.trigger("add",entityView),self.entityViews[entity.cid]=entityView,entityElement.show()},this)},findReverseRelations:function(entity,element){var service=this.service;element.parent("[rev]").each(function(){var predicate=jQuery(this).attr("rev"),relations={};relations[predicate]=new service.vie.Collection([],{vie:service.vie,predicate:predicate});var model=service.vie.entities.get(service.getElementSubject(this));model&&relations[predicate].addOrUpdate(model),entity.set(relations)})},registerItem:function(entity,collection){var element=this.service.getElementBySubject(entity.id,this.el);if(!element)return;var entityView=this.service._registerEntityView(entity,element);this.entityViews[entity.cid]=entityView},removeItem:function(entity){if(!this.entityViews[entity.cid])return;this.trigger("remove",this.entityViews[entity.cid]),jQuery(this.entityViews[entity.cid].el).remove(),delete this.entityViews[entity.cid]},refreshItems:function(collection){_.each(this.entityViews,function(view,cid){jQuery(view.el).remove()}),this.entityViews={},collection.forEach(function(entity){this.addItem(entity,collection)},this)}}),VIE.prototype.view||(VIE.prototype.view={}),VIE.prototype.view.Entity=Backbone.View.extend({initialize:function(options){this.service=options.service?options.service:"rdfa",this.vie=options.vie,_.bindAll(this,"render","renderAbout"),this.model.bind("change",this.render),this.model.bind("change:@subject",this.renderAbout)},render:function(){return this.vie.save({element:this.el,entity:this.model}).to(this.service).execute(),this},renderAbout:function(){this.vie.service(this.service).setElementSubject(this.model.getSubjectUri(),this.el)}});var root=this;(function(jQuery){root.XDomainRequest&&jQuery.ajaxTransport(function(s){if(s.crossDomain&&s.async){s.timeout&&(s.xdrTimeout=s.timeout,delete s.timeout);var xdr;return{send:function(_,complete){function callback(status,statusText,responses,responseHeaders){xdr.onload=xdr.onerror=xdr.ontimeout=jQuery.noop,xdr=undefined,complete(status,statusText,responses,responseHeaders)}xdr=new XDomainRequest;if(s.dataType){var headerThroughUriParameters="header_Accept="+encodeURIComponent(s.dataType);s.url=s.url+(s.url.indexOf("?")===-1?"?":"&")+headerThroughUriParameters}xdr.open(s.type,s.url),xdr.onload=function(e1,e2){callback(200,"OK",{text:xdr.responseText},"Content-Type: "+xdr.contentType)},xdr.onerror=function(e){console.error(JSON.stringify(e)),callback(404,"Not Found")},s.xdrTimeout&&(xdr.ontimeout=function(){callback(0,"timeout")},xdr.timeout=s.xdrTimeout),xdr.send(s.hasContent&&s.data||null)},abort:function(){xdr&&(xdr.onerror=jQuery.noop(),xdr.abort())}}}})})(jQuery)}(),define("Library/vie/vie-latest.debug",function(){}),define("vie",["jquery","jquery-ui","underscorejs","backbone","Library/vie/lib/rdfquery/latest/jquery.rdfquery.min","Library/vie/vie-latest.debug"],function(){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("vie")}),function(){(function(jQuery){return jQuery.widget("IKS.hallo",{toolbar:null,bound:!1,originalContent:"",previousContent:"",uuid:"",selection:null,_keepActivated:!1,originalHref:null,options:{editable:!0,plugins:{},toolbar:"halloToolbarContextual",parentElement:"body",buttonCssClass:null,toolbarCssClass:null,placeholder:"",forceStructured:!0,checkTouch:!0,touchScreen:null},_create:function(){var options,plugin,_ref,_this=this;this.id=this._generateUUID(),this.options.checkTouch&&this.options.touchScreen===null&&this.checkTouch(),_ref=this.options.plugins;for(plugin in _ref)options=_ref[plugin],jQuery.isPlainObject(options)||(options={}),jQuery.extend(options,{editable:this,uuid:this.id,buttonCssClass:this.options.buttonCssClass}),jQuery(this.element)[plugin](options);return this.element.one("halloactivated",function(){return _this._prepareToolbar()}),this.originalContent=this.getContents()},_init:function(){return this.options.editable?this.enable():this.disable()},disable:function(){var _this=this;return this.element.attr("contentEditable",!1),this.element.unbind("focus",this._activated),this.element.unbind("blur",this._deactivated),this.element.unbind("keyup paste change",this._checkModified),this.element.unbind("keyup",this._keys),this.element.unbind("keyup mouseup",this._checkSelection),this.bound=!1,jQuery(this.element).removeClass("isModified"),this.element.parents("a").andSelf().each(function(idx,elem){var element;element=jQuery(elem);if(!element.is("a"))return;if(!_this.originalHref)return;return element.attr("href",_this.originalHref)}),this._trigger("disabled",null)},enable:function(){var _this=this;return this.element.parents("a[href]").andSelf().each(function(idx,elem){var element;element=jQuery(elem);if(!element.is("a[href]"))return;return _this.originalHref=element.attr("href"),element.removeAttr("href")}),this.element.attr("contentEditable",!0),this.element.html()||(this.element.html(this.options.placeholder),this.element.css({"min-width":this.element.innerWidth(),"min-height":this.element.innerHeight()})),this.bound||(this.element.bind("focus",this,this._activated),this.element.bind("blur",this,this._deactivated),this.element.bind("keyup paste change",this,this._checkModified),this.element.bind("keyup",this,this._keys),this.element.bind("keyup mouseup",this,this._checkSelection),this.bound=!0),this.options.forceStructured&&this._forceStructured(),this._trigger("enabled",null)},activate:function(){return this.element.focus()},containsSelection:function(){var range;return range=this.getSelection(),this.element.has(range.startContainer).length>0},getSelection:function(){var range,sel;return sel=rangy.getSelection(),range=null,sel.rangeCount>0?range=sel.getRangeAt(0):range=rangy.createRange(),range},restoreSelection:function(range){var sel;return sel=rangy.getSelection(),sel.setSingleRange(range)},replaceSelection:function(cb){var newTextNode,r,range,sel,t;return jQuery.browser.msie?(t=document.selection.createRange().text,r=document.selection.createRange(),r.pasteHTML(cb(t))):(sel=window.getSelection(),range=sel.getRangeAt(0),newTextNode=document.createTextNode(cb(range.extractContents())),range.insertNode(newTextNode),range.setStartAfter(newTextNode),sel.removeAllRanges(),sel.addRange(range))},removeAllSelections:function(){return jQuery.browser.msie?range.empty():window.getSelection().removeAllRanges()},getContents:function(){var cleanup,contentClone,plugin;contentClone=this.element.clone();for(plugin in this.options.plugins){cleanup=jQuery(this.element).data(plugin).cleanupContentClone;if(!jQuery.isFunction(cleanup))continue;jQuery(this.element)[plugin]("cleanupContentClone",contentClone)}return contentClone.html()},setContents:function(contents){return this.element.html(contents)},isModified:function(){return this.previousContent||(this.previousContent=this.originalContent),this.previousContent!==this.getContents()},setUnmodified:function(){return this.previousContent=this.getContents()},setModified:function(){return jQuery(this.element).addClass("isModified"),this._trigger("modified",null,{editable:this,content:this.getContents()})},restoreOriginalContent:function(){return this.element.html(this.originalContent)},execute:function(command,value){if(document.execCommand(command,!1,value))return this.element.trigger("change")},protectFocusFrom:function(el){var _this=this;return el.bind("mousedown",function(event){return event.preventDefault(),_this._protectToolbarFocus=!0,setTimeout(function(){return _this._protectToolbarFocus=!1},300)})},keepActivated:function(_keepActivated){this._keepActivated=_keepActivated},_generateUUID:function(){var S4;return S4=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},""+S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()},_prepareToolbar:function(){var plugin,populate;this.toolbar=jQuery('<div class="hallotoolbar"></div>').hide(),this.options.toolbarCssClass&&this.toolbar.addClass(this.options.toolbarCssClass),this.element[this.options.toolbar]({editable:this,parentElement:this.options.parentElement,toolbar:this.toolbar});for(plugin in this.options.plugins){populate=jQuery(this.element).data(plugin).populateToolbar;if(!jQuery.isFunction(populate))continue;this.element[plugin]("populateToolbar",this.toolbar)}return this.element[this.options.toolbar]("setPosition"),this.protectFocusFrom(this.toolbar)},changeToolbar:function(element,toolbar,hide){var originalToolbar;hide==null&&(hide=!1),originalToolbar=this.options.toolbar,this.options.parentElement=element,toolbar&&(this.options.toolbar=toolbar);if(!this.toolbar)return;this.element[originalToolbar]("destroy"),this.toolbar.remove(),this._prepareToolbar();if(hide)return this.toolbar.hide()},_checkModified:function(event){var widget;widget=event.data;if(widget.isModified())return widget.setModified()},_keys:function(event){var old,widget;widget=event.data;if(event.keyCode===27)return old=widget.getContents(),widget.restoreOriginalContent(event),widget._trigger("restored",null,{editable:widget,content:widget.getContents(),thrown:old}),widget.turnOff()},_rangesEqual:function(r1,r2){return r1.startContainer!==r2.startContainer?!1:r1.startOffset!==r2.startOffset?!1:r1.endContainer!==r2.endContainer?!1:r1.endOffset!==r2.endOffset?!1:!0},_checkSelection:function(event){var widget;if(event.keyCode===27)return;return widget=event.data,setTimeout(function(){var sel;sel=widget.getSelection();if(widget._isEmptySelection(sel)||widget._isEmptyRange(sel))if(widget.selection){widget.selection=null,widget._trigger("unselected",null,{editable:widget,originalEvent:event});return}if(!widget.selection||!widget._rangesEqual(sel,widget.selection))return widget.selection=sel.cloneRange(),widget._trigger("selected",null,{editable:widget,selection:widget.selection,ranges:[widget.selection],originalEvent:event})},0)},_isEmptySelection:function(selection){return selection.type==="Caret"?!0:!1},_isEmptyRange:function(range){return range.collapsed?!0:range.isCollapsed?typeof range.isCollapsed=="function"?range.isCollapsed():range.isCollapsed:!1},turnOn:function(){return this.getContents()===this.options.placeholder&&this.setContents(""),jQuery(this.element).addClass("inEditMode"),this._trigger("activated",this)},turnOff:function(){jQuery(this.element).removeClass("inEditMode"),this._trigger("deactivated",this);if(!this.getContents())return this.setContents(this.options.placeholder)},_activated:function(event){return event.data.turnOn()},_deactivated:function(event){if(event.data._keepActivated)return;return event.data._protectToolbarFocus!==!0?event.data.turnOff():setTimeout(function(){return jQuery(event.data.element).focus()},300)},_forceStructured:function(event){try{return document.execCommand("styleWithCSS",0,!1)}catch(e){try{return document.execCommand("useCSS",0,!0)}catch(e){try{return document.execCommand("styleWithCSS",!1,!1)}catch(e){}}}},checkTouch:function(){return this.options.touchScreen="createTouch"in document}})})(jQuery),function(jQuery){var z;return z=null,this.VIE!==void 0&&(z=new VIE,z.use(new z.StanbolService({proxyDisabled:!0,url:"http://dev.iks-project.eu:8081"}))),jQuery.widget("IKS.halloannotate",{options:{vie:z,editable:null,toolbar:null,uuid:"",select:function(){},decline:function(){},remove:function(){},buttonCssClass:null},_create:function(){var editableElement,turnOffAnnotate,widget;widget=this;if(this.options.vie===void 0)throw new Error("The halloannotate plugin requires VIE");if(typeof this.element.annotate!="function")throw new Error("The halloannotate plugin requires annotate.js");return this.state="off",this.instantiate(),turnOffAnnotate=function(){var editable;return editable=this,jQuery(editable).halloannotate("turnOff")},editableElement=this.options.editable.element,editableElement.bind("hallodisabled",turnOffAnnotate)},populateToolbar:function(toolbar){var buttonHolder,_this=this;return buttonHolder=jQuery('<span class="'+this.widgetName+'"></span>'),this.button=buttonHolder.hallobutton({label:"Annotate",icon:"icon-tags",editable:this.options.editable,command:null,uuid:this.options.uuid,cssClass:this.options.buttonCssClass,queryState:!1}),buttonHolder.bind("change",function(event){if(_this.state==="pending")return;return _this.state==="off"?_this.turnOn():_this.turnOff()}),buttonHolder.buttonset(),toolbar.append(this.button)},cleanupContentClone:function(el){if(this.state==="on")return el.find(".entity:not([about])").each(function(){return jQuery(this).replaceWith(jQuery(this).html())})},instantiate:function(){var widget;return widget=this,this.options.editable.element.annotate({vie:this.options.vie,debug:!1,showTooltip:!0,select:this.options.select,remove:this.options.remove,success:this.options.success,error:this.options.error}).bind("annotateselect",function(event,data){return widget.options.editable.setModified()}).bind("annotateremove",function(){return jQuery.noop()})},turnPending:function(){return this.state="pending",this.button.hallobutton("checked",!1),this.button.hallobutton("disable")},turnOn:function(){var widget,_this=this;this.turnPending(),widget=this;try{return this.options.editable.element.annotate("enable",function(success){if(!success)return;return _this.state="on",_this.button.hallobutton("checked",!0),_this.button.hallobutton("enable")})}catch(e){return alert(e)}},turnOff:function(){this.options.editable.element.annotate("disable"),this.state="off";if(!this.button)return;return this.button.attr("checked",!1),this.button.find("label").removeClass("ui-state-clicked"),this.button.button("refresh")}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloblacklist",{options:{tags:[]},_init:function(){if(this.options.tags.indexOf("br")!==-1)return this.element.bind("keydown",function(event){if(event.originalEvent.keyCode===13)return event.preventDefault()})},cleanupContentClone:function(el){var tag,_i,_len,_ref,_results;_ref=this.options.tags,_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++)tag=_ref[_i],_results.push(jQuery(tag,el).remove());return _results}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloblock",{options:{editable:null,toolbar:null,uuid:"",elements:["h1","h2","h3","p","pre","blockquote"],buttonCssClass:null},populateToolbar:function(toolbar){var buttonset,contentId,target;return buttonset=jQuery('<span class="'+this.widgetName+'"></span>'),contentId=""+this.options.uuid+"-"+this.widgetName+"-data",target=this._prepareDropdown(contentId),toolbar.append(buttonset),buttonset.hallobuttonset(),buttonset.append(target),buttonset.append(this._prepareButton(target))},_prepareDropdown:function(contentId){var addElement,containingElement,contentArea,element,_i,_len,_ref,_this=this;contentArea=jQuery('<div id="'+contentId+'"></div>'),containingElement=this.options.editable.element.get(0).tagName.toLowerCase(),addElement=function(element){var el,events,queryState;return el=jQuery("<button class='blockselector'>          <"+element+' class="menu-item">'+element+"</"+element+">        </button>"),containingElement===element&&el.addClass("selected"),containingElement!=="div"&&el.addClass("disabled"),el.bind("click",function(){var tagName;tagName=element.toUpperCase();if(el.hasClass("disabled"))return;if(jQuery.browser.msie){_this.options.editable.execute("FormatBlock","<"+tagName+">");return}return _this.options.editable.execute("formatBlock",tagName)}),queryState=function(event){var block;block=document.queryCommandValue("formatBlock");if(block.toLowerCase()===element){el.addClass("selected");return}return el.removeClass("selected")},events="keyup paste change mouseup",_this.options.editable.element.bind(events,queryState),_this.options.editable.element.bind("halloenabled",function(){return _this.options.editable.element.bind(events,queryState)}),_this.options.editable.element.bind("hallodisabled",function(){return _this.options.editable.element.unbind(events,queryState)}),el},_ref=this.options.elements;for(_i=0,_len=_ref.length;_i<_len;_i++)element=_ref[_i],contentArea.append(addElement(element));return contentArea},_prepareButton:function(target){var buttonElement;return buttonElement=jQuery("<span></span>"),buttonElement.hallodropdownbutton({uuid:this.options.uuid,editable:this.options.editable,label:"block",icon:"icon-text-height",target:target,cssClass:this.options.buttonCssClass}),buttonElement}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloformat",{options:{editable:null,uuid:"",formattings:{bold:!0,italic:!0,strikeThrough:!1,underline:!1},buttonCssClass:null},populateToolbar:function(toolbar){var buttonize,buttonset,enabled,format,widget,_ref,_this=this;widget=this,buttonset=jQuery('<span class="'+widget.widgetName+'"></span>'),buttonize=function(format){var buttonHolder;return buttonHolder=jQuery("<span></span>"),buttonHolder.hallobutton({label:format,editable:_this.options.editable,command:format,uuid:_this.options.uuid,cssClass:_this.options.buttonCssClass}),buttonset.append(buttonHolder)},_ref=this.options.formattings;for(format in _ref){enabled=_ref[format];if(!enabled)continue;buttonize(format)}return buttonset.hallobuttonset(),toolbar.append(buttonset)}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloheadings",{options:{editable:null,toolbar:null,uuid:"",headers:[1,2,3]},populateToolbar:function(toolbar){var button,buttonize,buttonset,header,id,label,markup,widget,_i,_len,_ref,_this=this;widget=this,buttonset=jQuery('<span class="'+widget.widgetName+'"></span>'),id=""+this.options.uuid+"-paragraph",label="P",markup='<input id="'+id+'" type="radio"        name="'+widget.options.uuid+'-headings"/>        <label for="'+id+'" class="p_button">'+label+"</label>",buttonset.append(jQuery(markup).button()),button=jQuery("#"+id,buttonset),button.attr("hallo-command","formatBlock"),button.bind("change",function(event){var cmd;return cmd=jQuery(this).attr("hallo-command"),widget.options.editable.execute(cmd,"P")}),buttonize=function(headerSize){var buttonMarkup;return label="H"+headerSize,id=""+_this.options.uuid+"-"+headerSize,buttonMarkup='<input id="'+id+'" type="radio"          name="'+widget.options.uuid+'-headings"/>          <label for="'+id+'" class="h'+headerSize+'_button">'+label+"</label>",buttonset.append(jQuery(buttonMarkup).button()),button=jQuery("#"+id,buttonset),button.attr("hallo-size","H"+headerSize),button.bind("change",function(event){var size;return size=jQuery(this).attr("hallo-size"),widget.options.editable.execute("formatBlock",size)})},_ref=this.options.headers;for(_i=0,_len=_ref.length;_i<_len;_i++)header=_ref[_i],buttonize(header);return buttonset.buttonset(),this.element.bind("keyup paste change mouseup",function(event){var format,formatNumber,labelParent,matches,selectedButton;try{format=document.queryCommandValue("formatBlock").toUpperCase()}catch(e){format=""}if(format==="P")selectedButton=jQuery("#"+widget.options.uuid+"-paragraph");else if(matches=format.match(/\d/))formatNumber=matches[0],selectedButton=jQuery("#"+widget.options.uuid+"-"+formatNumber);labelParent=jQuery(buttonset),labelParent.children("input").attr("checked",!1),labelParent.children("label").removeClass("ui-state-clicked"),labelParent.children("input").button("widget").button("refresh");if(selectedButton)return selectedButton.attr("checked",!0),selectedButton.next("label").addClass("ui-state-clicked"),selectedButton.button("refresh")}),toolbar.append(buttonset)}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloimagecurrent",{options:{imageWidget:null,startPlace:"",draggables:[],maxWidth:400,maxHeight:200},_create:function(){return this.element.html('<div>        <div class="activeImageContainer">          <div class="rotationWrapper">            <div class="hintArrow"></div>              <img src="" class="activeImage" />            </div>            <img src="" class="activeImage activeImageBg" />          </div>          <div class="metadata" style="display: none;">            <input type="text" class="caption" name="caption" />          </div>        </div>'),this.element.hide(),this._prepareDnD()},_init:function(){var editable,widget;return editable=jQuery(this.options.editable.element),widget=this,jQuery("img",editable).each(function(index,elem){return elem.contentEditable=!1,widget._initDraggable(elem,editable)}),jQuery("p",editable).each(function(index,elem){if(jQuery(elem).data("jquery_droppable_initialized"))return;return jQuery(elem).droppable({tolerance:"pointer",drop:function(event,ui){return widget._handleDropEvent(event,ui)},over:function(event,ui){return widget._handleOverEvent(event,ui)},out:function(event,ui){return widget._handleLeaveEvent(event,ui)}}),jQuery(elem).data("jquery_droppable_initialized",!0)})},_prepareDnD:function(){var editable,overlayMiddleConfig,widget;return widget=this,editable=jQuery(this.options.editable.element),this.options.offset=editable.offset(),this.options.third=parseFloat(editable.width()/3),overlayMiddleConfig={width:this.options.third,height:editable.height()},this.overlay={big:jQuery("<div/>").addClass("bigOverlay").css({width:this.options.third*2,height:editable.height()}),left:jQuery("<div/>").addClass("smallOverlay smallOverlayLeft"),right:jQuery("<div/>").addClass("smallOverlay smallOverlayRight")},this.overlay.left.css(overlayMiddleConfig),this.overlay.right.css(overlayMiddleConfig).css("left",this.options.third*2),editable.bind("halloactivated",function(){return widget._enableDragging()}),editable.bind("hallodeactivated",function(){return widget._disableDragging()})},setImage:function(image){if(!image)return;return this.element.show(),jQuery(".activeImage",this.element).attr("src",image.url),image.label&&(jQuery("input",this.element).val(image.label),jQuery(".metadata",this.element).show()),this._initImage(jQuery(this.options.editable.element))},_delayAction:function(functionToCall,delay){var timer;timer=clearTimeout(timer);if(!timer)return timer=setTimeout(functionToCall,delay)},_calcDropPosition:function(offset,event){var position,rightTreshold;position=offset.left+this.options.third,rightTreshold=offset.left+this.options.third*2;if(event.pageX>=position&&event.pageX<=rightTreshold)return"middle";if(event.pageX<position)return"left";if(event.pageX>rightTreshold)return"right"},_createInsertElement:function(image,tmp){var imageInsert,maxHeight,maxWidth,tmpImg;return imageInsert=jQuery("<img>"),tmpImg=new Image,maxWidth=this.options.maxWidth,maxHeight=this.options.maxHeight,jQuery(tmpImg).bind("load",function(){var height,ratio,width;width=tmpImg.width,height=tmpImg.height;if(width>maxWidth||height>maxHeight)width>height?ratio=(tmpImg.width/maxWidth).toFixed():ratio=(tmpImg.height/maxHeight).toFixed(),width=(tmpImg.width/ratio).toFixed(),height=(tmpImg.height/ratio).toFixed();return imageInsert.attr({width:width,height:height})}),tmpImg.src=image.src,imageInsert.attr({src:tmpImg.src,alt:tmp?void 0:jQuery(image).attr("alt"),"class":tmp?"halloTmp":""}),imageInsert.show(),imageInsert},_createLineFeedbackElement:function(){return jQuery("<div/>").addClass("halloTmpLine")},_removeFeedbackElements:function(){return jQuery(".halloTmp, .halloTmpLine",this.options.editable.element).remove()},_removeCustomHelper:function(){return jQuery(".customHelper").remove()},_showOverlay:function(position){var eHeight,editable;editable=jQuery(this.options.editable.element),eHeight=editable.height(),eHeight+=parseFloat(editable.css("paddingTop")),eHeight+=parseFloat(editable.css("paddingBottom")),this.overlay.big.css({height:eHeight}),this.overlay.left.css({height:eHeight}),this.overlay.right.css({height:eHeight});switch(position){case"left":return this.overlay.big.addClass("bigOverlayLeft"),this.overlay.big.removeClass("bigOverlayRight"),this.overlay.big.css({left:this.options.third}),this.overlay.big.show(),this.overlay.left.hide(),this.overlay.right.hide();case"middle":return this.overlay.big.removeClass("bigOverlayLeft bigOverlayRight"),this.overlay.big.hide(),this.overlay.left.show(),this.overlay.right.show();case"right":return this.overlay.big.addClass("bigOverlayRight"),this.overlay.big.removeClass("bigOverlayLeft"),this.overlay.big.css({left:0}),this.overlay.big.show(),this.overlay.left.hide(),this.overlay.right.hide()}},_checkOrigin:function(event){return jQuery(event.target).parents("[contenteditable]").length!==0?!0:!1},_createFeedback:function(image,position){var el;return position==="middle"?this._createLineFeedbackElement():(el=this._createInsertElement(image,!0),el.addClass("inlineImage-"+position))},_handleOverEvent:function(event,ui){var editable,postPone,widget;return widget=this,editable=jQuery(this.options.editable),postPone=function(){var position,target;return window.waitWithTrash=clearTimeout(window.waitWithTrash),position=widget._calcDropPosition(widget.options.offset,event),jQuery(".trashcan",ui.helper).remove(),editable.append(widget.overlay.big),editable.append(widget.overlay.left),editable.append(widget.overlay.right),widget._removeFeedbackElements(),target=jQuery(event.target),target.prepend(widget._createFeedback(ui.draggable[0],position)),position==="middle"?(target.prepend(widget._createFeedback(ui.draggable[0],"right")),jQuery(".halloTmp",event.target).hide()):(target.prepend(widget._createFeedback(ui.draggable[0],"middle")),jQuery(".halloTmpLine",event.target).hide()),widget._showOverlay(position)},setTimeout(postPone,5)},_handleDragEvent:function(event,ui){var position,tmpFeedbackLR,tmpFeedbackMiddle;position=this._calcDropPosition(this.options.offset,event);if(position===this._lastPositionDrag)return;return this._lastPositionDrag=position,tmpFeedbackLR=jQuery(".halloTmp",this.options.editable.element),tmpFeedbackMiddle=jQuery(".halloTmpLine",this.options.editable.element),position==="middle"?(tmpFeedbackMiddle.show(),tmpFeedbackLR.hide()):(tmpFeedbackMiddle.hide(),tmpFeedbackLR.removeClass("inlineImage-left inlineImage-right"),tmpFeedbackLR.addClass("inlineImage-"+position),tmpFeedbackLR.show()),this._showOverlay(position)},_handleLeaveEvent:function(event,ui){var func;return func=function(){if(!jQuery("div.trashcan",ui.helper).length)return jQuery(ui.helper).append(jQuery('<div class="trashcan"></div>')),jQuery(".bigOverlay, .smallOverlay").remove()},window.waitWithTrash=setTimeout(func,200),this._removeFeedbackElements()},_handleStartEvent:function(event,ui){var internalDrop;return internalDrop=this._checkOrigin(event),internalDrop&&jQuery(event.target).remove(),jQuery(document).trigger("startPreventSave"),this.options.startPlace=jQuery(event.target)},_handleStopEvent:function(event,ui){var internalDrop;return internalDrop=this._checkOrigin(event),internalDrop?jQuery(event.target).remove():jQuery(this.options.editable.element).trigger("change"),this.overlay.big.hide(),this.overlay.left.hide(),this.overlay.right.hide(),jQuery(document).trigger("stopPreventSave")},_handleDropEvent:function(event,ui){var classes,editable,imageInsert,internalDrop,left,position;return editable=jQuery(this.options.editable.element),internalDrop=this._checkOrigin(event),position=this._calcDropPosition(this.options.offset,event),this._removeFeedbackElements(),this._removeCustomHelper(),imageInsert=this._createInsertElement(ui.draggable[0],!1),classes="inlineImage-middle inlineImage-left inlineImage-right",position==="middle"?(imageInsert.show(),imageInsert.removeClass(classes),left=editable.width(),left+=parseFloat(editable.css("paddingLeft")),left+=parseFloat(editable.css("paddingRight")),left-=imageInsert.attr("width"),imageInsert.addClass("inlineImage-"+position).css({position:"relative",left:left/2}),imageInsert.insertBefore(jQuery(event.target))):(imageInsert.removeClass(classes),imageInsert.addClass("inlineImage-"+position),imageInsert.css("display","block"),jQuery(event.target).prepend(imageInsert)),this.overlay.big.hide(),this.overlay.left.hide(),this.overlay.right.hide(),editable.trigger("change"),this._initImage(editable)},_createHelper:function(event){return jQuery("<div>").css({backgroundImage:"url("+jQuery(event.currentTarget).attr("src")+")"}).addClass("customHelper").appendTo("body")},_initDraggable:function(elem,editable){var widget;return widget=this,elem.jquery_draggable_initialized||(elem.jquery_draggable_initialized=!0,jQuery(elem).draggable({cursor:"move",helper:function(event){return widget._createHelper(event)},drag:function(event,ui){return widget._handleDragEvent(event,ui)},start:function(event,ui){return widget._handleStartEvent(event,ui)},stop:function(event,ui){return widget._handleStopEvent(event,ui)},disabled:!editable.hasClass("inEditMode"),cursorAt:{top:50,left:50}})),widget.options.draggables.push(elem)},_initImage:function(editable){var widget;return widget=this,jQuery(".rotationWrapper img",this.options.dialog).each(function(index,elem){return widget._initDraggable(elem,editable)})},_enableDragging:function(){return jQuery.each(this.options.draggables,function(index,d){return jQuery(d).draggable("option","disabled",!1)})},_disableDragging:function(){return jQuery.each(this.options.draggables,function(index,d){return jQuery(d).draggable("option","disabled",!0)})}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloimagesearch",{options:{imageWidget:null,searchCallback:null,searchUrl:null,limit:5},_create:function(){return this.element.html('<div>        <form method="get">          <input type="text" class="searchInput" />          <input type="submit" class="btn searchButton" value="OK" />        </form>        <div class="searchResults imageThumbnailContainer">          <div class="activitySpinner">Loading images...</div>          <ul></ul>        </div>      </div>')},_init:function(){var _this=this;return this.options.searchUrl&&!this.options.searchCallback&&(this.options.searchCallback=this._ajaxSearch),jQuery(".activitySpinner",this.element).hide(),jQuery("form",this.element).submit(function(event){var query;return event.preventDefault(),jQuery(".activitySpinner",_this.element).show(),query=jQuery(".searchInput",_this.element.element).val(),_this.options.searchCallback(query,_this.options.limit,0,function(results){return _this._showResults(results)})})},_showResult:function(image){var html,_this=this;return image.label||(image.label=image.alt),html=jQuery('<li>        <img src="'+image.url+'" class="imageThumbnail"          title="'+image.label+'"></li>'),html.bind("click",function(){return _this.options.imageWidget.setCurrent(image)}),jQuery("img",html).bind("mousedown",function(event){return event.preventDefault(),_this.options.imageWidget.setCurrent(image)}),jQuery(".imageThumbnailContainer ul",this.element).append(html)},_showNextPrev:function(results){var container,_this=this;return container=jQuery("imageThumbnailContainer ul",this.element),container.prepend(jQuery('<div class="pager-prev" style="display:none" />')),container.append(jQuery('<div class="pager-next" style="display:none" />')),results.offset>0&&jQuery(".pager-prev",container).show(),results.offset<results.total&&jQuery(".pager-next",container).show(),jQuery(".pager-prev",container).click(function(event){var offset;return offset=results.offset-_this.options.limit,_this.options.searchCallback(query,_this.options.limit,offset,function(results){return _this._showResults(results)})}),jQuery(".pager-next",container).click(function(event){var offset;return offset=results.offset+_this.options.limit,_this.options.searchCallback(query,_this.options.limit,offset,function(results){return _this._showResults(results)})})},_showResults:function(results){var image,_i,_len,_ref;jQuery(".activitySpinner",this.element).hide(),jQuery(".imageThumbnailContainer ul",this.element).empty(),jQuery(".imageThumbnailContainer ul",this.element).show(),_ref=results.assets;for(_i=0,_len=_ref.length;_i<_len;_i++)image=_ref[_i],this._showResult(image);return this.options.imageWidget.setCurrent(results.assets.shift()),this._showNextPrev(results)},_ajaxSearch:function(query,limit,offset,success){var searchUrl;return searchUrl=this.searchUrl+"?"+jQuery.param({q:query,limit:limit,offset:offset}),jQuery.getJSON(searchUrl,success)}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloimagesuggestions",{loaded:!1,options:{entity:null,vie:null,dbPediaUrl:null,getSuggestions:null,thumbnailUri:"<http://dbpedia.org/ontology/thumbnail>"},_create:function(){return this.element.html('      <div id="'+this.options.uuid+'-tab-suggestions">        <div class="imageThumbnailContainer">          <div class="activitySpinner">Loading images...</div>          <ul></ul>        </div>      </div>')},_init:function(){return jQuery(".activitySpinner",this.element).hide()},_normalizeRelated:function(related){return _.isString(related)?related:_.isArray(related)?related.join(","):related.pluck("@subject").join(",")},_prepareVIE:function(){this.options.vie||(this.options.vie=new VIE);if(this.options.vie.services.dbpedia)return;if(!this.options.dbPediaUrl)return;return this.options.vie.use(new vie.DBPediaService({url:this.options.dbPediaUrl,proxyDisabled:!0}))},_getSuggestions:function(){var limit,normalizedTags,tags;if(this.loaded)return;if(!this.options.entity)return;jQuery(".activitySpinner",this.element).show(),tags=this.options.entity.get("skos:related");if(tags.length===0){jQuery("#activitySpinner").html("No images found.");return}return jQuery(".imageThumbnailContainer ul",this.element).empty(),normalizedTags=this._normalizeRelated(tags),limit=this.options.limit,this.options.getSuggestions&&this.options.getSuggestions(normalizedTags,limit,0,this._showSuggestions),this._prepareVIE(),this.options.vie.services.dbpedia&&this._getSuggestionsDbPedia(tags),this.loaded=!0},_getSuggestionsDbPedia:function(tags){var thumbId,widget;return widget=this,thumbId=1,_.each(tags,function(tag){return vie.load({entity:tag}).using("dbpedia").execute().done(function(entities){return jQuery(".activitySpinner",this.element).hide(),_.each(entities,function(entity){var img,thumbnail;thumbnail=entity.attributes[widget.options.thumbnailUri];if(!thumbnail)return;return _.isObject(thumbnail)&&(img=thumbnail[0].value),_.isString(thumbnail)&&(img=widget.options.entity.fromReference(thumbnail)),widget._showSuggestion({url:img,label:tag})})})})},_showSuggestion:function(image){var html,_this=this;return html=jQuery('<li>        <img src="'+image.url+'" class="imageThumbnail"          title="'+image.label+'">        </li>'),html.bind("click",function(){return _this.options.imageWidget.setCurrent(image)}),jQuery(".imageThumbnailContainer ul",this.element).append(html)},_showSuggestions:function(suggestions){var _this=this;return jQuery(".activitySpinner",this.element).hide(),_.each(suggestions,function(image){return _this._showSuggestion(image)})}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloimageupload",{options:{uploadCallback:null,uploadUrl:null,imageWidget:null,entity:null},_create:function(){return this.element.html('        <form class="upload">          <input type="file" class="file" name="userfile" accept="image/*" />          <input type="hidden" name="tags" value="" />          <button class="uploadSubmit">Upload</button>        </form>      ')},_init:function(){var widget;return widget=this,widget.options.uploadUrl&&!widget.options.uploadCallback&&(widget.options.uploadCallback=widget._iframeUpload),jQuery(".uploadSubmit",this.element).bind("click",function(event){return event.preventDefault(),event.stopPropagation(),widget.options.uploadCallback({widget:widget,success:function(url){return widget.options.imageWidget.setCurrent({url:url,label:""})}})})},_prepareIframe:function(widget){var iframe,iframeName;return iframeName=""+widget.widgetName+"_postframe_"+widget.options.uuid,iframeName=iframeName.replace(/-/g,"_"),iframe=jQuery("#"+iframeName),iframe.length?iframe:(iframe=jQuery('<iframe name="'+iframeName+'" id="'+iframeName+'"        class="hidden" style="display:none" />'),this.element.append(iframe),iframe.get(0).name=iframeName,iframe)},_iframeUpload:function(data){var iframe,uploadForm,uploadUrl,widget;return widget=data.widget,iframe=widget._prepareIframe(widget),uploadForm=jQuery("form.upload",widget.element),typeof widget.options.uploadUrl=="function"?uploadUrl=widget.options.uploadUrl(widget.options.entity):uploadUrl=widget.options.uploadUrl,iframe.bind("load",function(){var imageUrl;return imageUrl=iframe.get(0).contentWindow.location.href,widget.element.hide(),data.success(imageUrl)}),uploadForm.attr("action",uploadUrl),uploadForm.attr("method","post"),uploadForm.attr("target",iframe.get(0).name),uploadForm.attr("enctype","multipart/form-data"),uploadForm.attr("encoding","multipart/form-data"),uploadForm.submit()}})}(jQuery),function(jQuery){return jQuery.widget("Liip.halloimage",{options:{editable:null,toolbar:null,uuid:"",limit:8,search:null,searchUrl:null,suggestions:null,loaded:null,upload:null,uploadUrl:null,dialogOpts:{autoOpen:!1,width:270,height:"auto",title:"Insert Images",modal:!1,resizable:!1,draggable:!0,dialogClass:"halloimage-dialog"},dialog:null,buttonCssClass:null,entity:null,vie:null,dbPediaUrl:"http://dev.iks-project.eu/stanbolfull",maxWidth:250,maxHeight:250},populateToolbar:function(toolbar){var buttonHolder,buttonset,dialogId,id,tabContent,tabs,widget;return this.options.toolbar=toolbar,widget=this,dialogId=""+this.options.uuid+"-image-dialog",this.options.dialog=jQuery('<div id="'+dialogId+'">        <div class="nav">          <ul class="tabs">          </ul>          <div id="'+this.options.uuid+'-tab-activeIndicator"            class="tab-activeIndicator" />        </div>        <div class="dialogcontent">        </div>'),tabs=jQuery(".tabs",this.options.dialog),tabContent=jQuery(".dialogcontent",this.options.dialog),widget.options.suggestions&&this._addGuiTabSuggestions(tabs,tabContent),(widget.options.search||widget.options.searchUrl)&&this._addGuiTabSearch(tabs,tabContent),(widget.options.upload||widget.options.uploadUrl)&&this._addGuiTabUpload(tabs,tabContent),this.current=jQuery('<div class="currentImage"></div>').halloimagecurrent({uuid:this.options.uuid,imageWidget:this,editable:this.options.editable,dialog:this.options.dialog,maxWidth:this.options.maxWidth,maxHeight:this.options.maxHeight}),jQuery(".dialogcontent",this.options.dialog).append(this.current),buttonset=jQuery('<span class="'+widget.widgetName+'"></span>'),id=""+this.options.uuid+"-image",buttonHolder=jQuery("<span></span>"),buttonHolder.hallobutton({label:"Images",icon:"icon-picture",editable:this.options.editable,command:null,queryState:!1,uuid:this.options.uuid,cssClass:this.options.buttonCssClass}),buttonset.append(buttonHolder),this.button=buttonHolder,this.button.bind("click",function(event){return widget.options.dialog.dialog("isOpen")?widget._closeDialog():widget._openDialog(),!1}),this.options.editable.element.bind("hallodeactivated",function(event){return widget._closeDialog()}),jQuery(this.options.editable.element).delegate("img","click",function(event){return widget._openDialog()}),buttonset.buttonset(),toolbar.append(buttonset),this.options.dialog.dialog(this.options.dialogOpts),this._handleTabs()},setCurrent:function(image){return this.current.halloimagecurrent("setImage",image)},_handleTabs:function(){var widget;return widget=this,jQuery(".nav li",this.options.dialog).bind("click",function(){var id,left;return jQuery("."+widget.widgetName+"-tab").hide(),id=jQuery(this).attr("id"),jQuery("#"+id+"-content").show(),left=jQuery(this).position().left+jQuery(this).width()/2,jQuery("#"+widget.options.uuid+"-tab-activeIndicator").css({"margin-left":left})}),jQuery(".nav li",this.options.dialog).first().click()},_openDialog:function(){var cleanUp,editableEl,getActive,suggestionSelector,toolbarEl,widget,xposition,yposition,_this=this;return widget=this,cleanUp=function(){return window.setTimeout(function(){var thumbnails;return thumbnails=jQuery(".imageThumbnail"),jQuery(thumbnails).each(function(){var size;size=jQuery("#"+this.id).width();if(size<=20)return jQuery("#"+this.id).parent("li").remove()})},15e3)},suggestionSelector="#"+this.options.uuid+"-tab-suggestions-content",getActive=function(){return jQuery(".imageThumbnailActive",suggestionSelector).first().attr("src")},jQuery("#"+this.options.uuid+"-sugg-activeImage").attr("src",getActive()),jQuery("#"+this.options.uuid+"-sugg-activeImageBg").attr("src",getActive()),this.lastSelection=this.options.editable.getSelection(),editableEl=jQuery(this.options.editable.element),toolbarEl=jQuery(this.options.toolbar),xposition=editableEl.offset().left+editableEl.outerWidth()-3,yposition=toolbarEl.offset().top-jQuery(document).scrollTop()-29,this.options.dialog.dialog("option","position",[xposition,yposition]),cleanUp(),widget.options.loaded=1,this.options.editable.keepActivated(!0),this.options.dialog.dialog("open"),this.options.dialog.bind("dialogclose",function(){return jQuery("label",_this.button).removeClass("ui-state-active"),_this.options.editable.element.focus(),_this.options.editable.keepActivated(!1)})},_closeDialog:function(){return this.options.dialog.dialog("close")},_addGuiTabSuggestions:function(tabs,element){var tab;return tabs.append(jQuery('<li id="'+this.options.uuid+'-tab-suggestions"        class="'+this.widgetName+"-tabselector "+this.widgetName+'-tab-suggestions">          <span>Suggestions</span>        </li>')),tab=jQuery('<div id="'+this.options.uuid+'-tab-suggestions-content"        class="'+this.widgetName+'-tab tab-suggestions"></div>'),element.append(tab),tab.halloimagesuggestions({uuid:this.options.uuid,imageWidget:this,entity:this.options.entity})},_addGuiTabSearch:function(tabs,element){var dialogId,tab,widget;return widget=this,dialogId=""+this.options.uuid+"-image-dialog",tabs.append(jQuery('<li id="'+this.options.uuid+'-tab-search"        class="'+this.widgetName+"-tabselector "+this.widgetName+'-tab-search">          <span>Search</span>        </li>')),tab=jQuery('<div id="'+this.options.uuid+'-tab-search-content"        class="'+widget.widgetName+'-tab tab-search"></div>'),element.append(tab),tab.halloimagesearch({uuid:this.options.uuid,imageWidget:this,searchCallback:this.options.search,searchUrl:this.options.searchUrl,limit:this.options.limit,entity:this.options.entity})},_addGuiTabUpload:function(tabs,element){var tab;return tabs.append(jQuery('<li id="'+this.options.uuid+'-tab-upload"        class="'+this.widgetName+"-tabselector "+this.widgetName+'-tab-upload">          <span>Upload</span>        </li>')),tab=jQuery('<div id="'+this.options.uuid+'-tab-upload-content"        class="'+this.widgetName+'-tab tab-upload"></div>'),element.append(tab),tab.halloimageupload({uuid:this.options.uuid,uploadCallback:this.options.upload,uploadUrl:this.options.uploadUrl,imageWidget:this,entity:this.options.entity})}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloindicator",{options:{editable:null,className:"halloEditIndicator"},_create:function(){var _this=this;return this.element.bind("halloenabled",function(){return _this.buildIndicator()})},populateToolbar:function(){},buildIndicator:function(){var editButton;return editButton=jQuery('<div><i class="icon-edit"></i> Edit</div>'),editButton.addClass(this.options.className),editButton.hide(),this.element.before(editButton),this.bindIndicator(editButton),this.setIndicatorPosition(editButton)},bindIndicator:function(indicator){var _this=this;return indicator.bind("click",function(){return _this.options.editable.element.focus()}),this.element.bind("halloactivated",function(){return indicator.hide()}),this.element.bind("hallodisabled",function(){return indicator.remove()}),this.options.editable.element.hover(function(){if(jQuery(this).hasClass("inEditMode"))return;return indicator.show()},function(data){if(jQuery(this).hasClass("inEditMode"))return;if(data.relatedTarget===indicator.get(0))return;return indicator.hide()})},setIndicatorPosition:function(indicator){var offset;return indicator.css("position","absolute"),offset=this.element.position(),indicator.css("top",offset.top+2),indicator.css("left",offset.left+2)}})}(jQuery),function(jQuery){return jQuery.widget("IKS.hallojustify",{options:{editable:null,toolbar:null,uuid:"",buttonCssClass:null},populateToolbar:function(toolbar){var buttonize,buttonset,_this=this;return buttonset=jQuery('<span class="'+this.widgetName+'"></span>'),buttonize=function(alignment){var buttonElement;return buttonElement=jQuery("<span></span>"),buttonElement.hallobutton({uuid:_this.options.uuid,editable:_this.options.editable,label:alignment,command:"justify"+alignment,icon:"icon-align-"+alignment.toLowerCase(),cssClass:_this.options.buttonCssClass}),buttonset.append(buttonElement)},buttonize("Left"),buttonize("Center"),buttonize("Right"),buttonset.hallobuttonset(),toolbar.append(buttonset)}})}(jQuery),function(jQuery){return jQuery.widget("IKS.hallolink",{options:{editable:null,uuid:"",link:!0,image:!0,defaultUrl:"http://",dialogOpts:{autoOpen:!1,width:540,height:95,title:"Enter Link",modal:!0,resizable:!1,draggable:!1,dialogClass:"hallolink-dialog"},buttonCssClass:null},populateToolbar:function(toolbar){var buttonize,buttonset,dialog,dialogId,dialogSubmitCb,isEmptyLink,urlInput,widget,_this=this;widget=this,dialogId=""+this.options.uuid+"-dialog",dialog=jQuery('<div id="'+dialogId+'">        <form action="#" method="post" class="linkForm">          <input class="url" type="text" name="url"            value="'+this.options.defaultUrl+'" />          <input type="submit" id="addlinkButton" value="Insert" />        </form></div>'),urlInput=jQuery("input[name=url]",dialog).focus(function(e){return this.select()}),isEmptyLink=function(link){return(new RegExp(/^\s*$/)).test(link)?!0:link===widget.options.defaultUrl?!0:!1},dialogSubmitCb=function(event){var link,selectionStart;return event.preventDefault(),link=urlInput.val(),widget.options.editable.restoreSelection(widget.lastSelection),isEmptyLink(link)?(selectionStart=widget.lastSelection.startContainer,widget.lastSelection.collapsed&&(widget.lastSelection.setStartBefore(selectionStart),widget.lastSelection.setEndAfter(selectionStart),window.getSelection().addRange(widget.lastSelection)),document.execCommand("unlink",null,"")):((new RegExp(/:\/\//)).test(link)||(link="http://"+link),widget.lastSelection.startContainer.parentNode.href===void 0?document.execCommand("createLink",null,link):widget.lastSelection.startContainer.parentNode.href=link),widget.options.editable.element.trigger("change"),widget.options.editable.removeAllSelections(),dialog.dialog("close"),!1},dialog.find("form").submit(dialogSubmitCb),buttonset=jQuery('<span class="'+widget.widgetName+'"></span>'),buttonize=function(type){var button,buttonHolder,id;return id=""+_this.options.uuid+"-"+type,buttonHolder=jQuery("<span></span>"),buttonHolder.hallobutton({label:"Link",icon:"icon-link",editable:_this.options.editable,command:null,queryState:!1,uuid:_this.options.uuid,cssClass:_this.options.buttonCssClass}),buttonset.append(buttonHolder),button=buttonHolder,button.bind("click",function(event){var selectionParent;return widget.lastSelection=widget.options.editable.getSelection(),urlInput=jQuery("input[name=url]",dialog),selectionParent=widget.lastSelection.startContainer.parentNode,selectionParent.href?(urlInput.val(jQuery(selectionParent).attr("href")),jQuery(urlInput[0].form).find("input[type=submit]").val("update")):urlInput.val(widget.options.defaultUrl),widget.options.editable.keepActivated(!0),dialog.dialog("open"),dialog.bind("dialogclose",function(){return jQuery("label",buttonHolder).removeClass("ui-state-active"),widget.options.editable.element.focus(),widget.options.editable.keepActivated(!1)}),!1}),_this.element.bind("keyup paste change mouseup",function(event){var nodeName,start;start=jQuery(widget.options.editable.getSelection().startContainer),start.prop("nodeName")?nodeName=start.prop("nodeName"):nodeName=start.parent().prop("nodeName");if(nodeName&&nodeName.toUpperCase()==="A"){jQuery("label",button).addClass("ui-state-active");return}return jQuery("label",button).removeClass("ui-state-active")})},this.options.link&&buttonize("A");if(this.options.link)return toolbar.append(buttonset),buttonset.hallobuttonset(),dialog.dialog(this.options.dialogOpts)}})}(jQuery),function(jQuery){return jQuery.widget("IKS.hallolists",{options:{editable:null,toolbar:null,uuid:"",lists:{ordered:!0,unordered:!0},buttonCssClass:null},populateToolbar:function(toolbar){var buttonize,buttonset,_this=this;return buttonset=jQuery('<span class="'+this.widgetName+'"></span>'),buttonize=function(type,label){var buttonElement;return buttonElement=jQuery("<span></span>"),buttonElement.hallobutton({uuid:_this.options.uuid,editable:_this.options.editable,label:label,command:"insert"+type+"List",icon:"icon-list-"+label.toLowerCase(),cssClass:_this.options.buttonCssClass}),buttonset.append(buttonElement)},this.options.lists.ordered&&buttonize("Ordered","OL"),this.options.lists.unordered&&buttonize("Unordered","UL"),buttonset.hallobuttonset(),toolbar.append(buttonset)}})}(jQuery),function(jQuery){return jQuery.widget("Liip.hallooverlay",{options:{editable:null,toolbar:null,uuid:"",overlay:null,padding:10,background:null},_create:function(){var widget;widget=this;if(!this.options.bound)return this.options.bound=!0,this.options.editable.element.bind("halloactivated",function(event,data){widget.options.currentEditable=jQuery(event.target);if(!widget.options.visible)return widget.showOverlay()}),this.options.editable.element.bind("hallomodified",function(event,data){widget.options.currentEditable=jQuery(event.target);if(widget.options.visible)return widget.resizeOverlay()}),this.options.editable.element.bind("hallodeactivated",function(event,data){widget.options.currentEditable=jQuery(event.target);if(widget.options.visible)return widget.hideOverlay()})},showOverlay:function(){return this.options.visible=!0,this.options.overlay===null&&(jQuery("#halloOverlay").length>0?this.options.overlay=jQuery("#halloOverlay"):(this.options.overlay=jQuery('<div id="halloOverlay"            class="halloOverlay">'),jQuery(document.body).append(this.options.overlay)),this.options.overlay.bind("click",jQuery.proxy(this.options.editable.turnOff,this.options.editable))),this.options.overlay.show(),this.options.background===null&&(jQuery("#halloBackground").length>0?this.options.background=jQuery("#halloBackground"):(this.options.background=jQuery('<div id="halloBackground"            class="halloBackground">'),jQuery(document.body).append(this.options.background))),this.resizeOverlay(),this.options.background.show(),this.options.originalZIndex||(this.options.originalZIndex=this.options.currentEditable.css("z-index")),this.options.currentEditable.css("z-index","350")},resizeOverlay:function(){var offset;return offset=this.options.currentEditable.offset(),this.options.background.css({top:offset.top-this.options.padding,left:offset.left-this.options.padding,width:this.options.currentEditable.width()+2*this.options.padding,height:this.options.currentEditable.height()+2*this.options.padding})},hideOverlay:function(){return this.options.visible=!1,this.options.overlay.hide(),this.options.background.hide(),this.options.currentEditable.css("z-index",this.options.originalZIndex)},_findBackgroundColor:function(jQueryfield){var color;return color=jQueryfield.css("background-color"),color!=="rgba(0, 0, 0, 0)"&&color!=="transparent"?color:jQueryfield.is("body")?"white":this._findBackgroundColor(jQueryfield.parent())}})}(jQuery),function(jQuery){return jQuery.widget("IKS.halloreundo",{options:{editable:null,toolbar:null,uuid:"",buttonCssClass:null},populateToolbar:function(toolbar){var buttonize,buttonset,_this=this;return buttonset=jQuery('<span class="'+this.widgetName+'"></span>'),buttonize=function(cmd,label){var buttonElement;return buttonElement=jQuery("<span></span>"),buttonElement.hallobutton({uuid:_this.options.uuid,editable:_this.options.editable,label:label,icon:cmd==="undo"?"icon-undo":"icon-repeat",command:cmd,queryState:!1,cssClass:_this.options.buttonCssClass}),buttonset.append(buttonElement)},buttonize("undo","Undo"),buttonize("redo","Redo"),buttonset.hallobuttonset(),toolbar.append(buttonset)}})}(jQuery),function(jQuery){return jQuery.widget("Liip.hallotoolbarlinebreak",{options:{editable:null,uuid:"",breakAfter:[]},populateToolbar:function(toolbar){var buttonRow,buttonset,buttonsets,queuedButtonsets,row,rowcounter,_i,_j,_len,_len1,_ref;buttonsets=jQuery(".ui-buttonset",toolbar),queuedButtonsets=jQuery(),rowcounter=0,_ref=this.options.breakAfter;for(_i=0,_len=_ref.length;_i<_len;_i++){row=_ref[_i],rowcounter++,buttonRow='<div          class="halloButtonrow halloButtonrow-'+rowcounter+'" />';for(_j=0,_len1=buttonsets.length;_j<_len1;_j++){buttonset=buttonsets[_j],queuedButtonsets=jQuery(queuedButtonsets).add(jQuery(buttonset));if(jQuery(buttonset).hasClass(row)){queuedButtonsets.wrapAll(buttonRow),buttonsets=buttonsets.not(queuedButtonsets),queuedButtonsets=jQuery();break}}}if(buttonsets.length>0)return rowcounter++,buttonRow='<div          class="halloButtonrow halloButtonrow-'+rowcounter+'" />',buttonsets.wrapAll(buttonRow)}})}(jQuery),function(jQuery){return jQuery.widget("Hallo.halloToolbarContextual",{toolbar:null,options:{parentElement:"body",editable:null,toolbar:null},_create:function(){var _this=this;return this.toolbar=this.options.toolbar,jQuery(this.options.parentElement).append(this.toolbar),this._bindEvents(),jQuery(window).resize(function(event){return _this._updatePosition(_this._getPosition(event))})},_getPosition:function(event,selection){var eventType,position;if(!event)return;eventType=event.type;switch(eventType){case"keydown":case"keyup":case"keypress":return this._getCaretPosition(selection);case"click":case"mousedown":case"mouseup":return position={top:event.pageY,left:event.pageX}}},_getCaretPosition:function(range){var newRange,position,tmpSpan;return tmpSpan=jQuery("<span/>"),newRange=rangy.createRange(),newRange.setStart(range.endContainer,range.endOffset),newRange.insertNode(tmpSpan.get(0)),position={top:tmpSpan.offset().top,left:tmpSpan.offset().left},tmpSpan.remove(),position},setPosition:function(){return this.options.parentElement!=="body"&&(this.options.parentElement="body",jQuery(this.options.parentElement).append(this.toolbar)),this.toolbar.css("position","absolute"),this.toolbar.css("top",this.element.offset().top-20),this.toolbar.css("left",this.element.offset().left)},_updatePosition:function(position){if(!position)return;if(!position.top||!position.left)return;return this.toolbar.css("top",position.top),this.toolbar.css("left",position.left)},_bindEvents:function(){var _this=this;return this.element.bind("halloselected",function(event,data){var position;position=_this._getPosition(data.originalEvent,data.selection);if(!position)return;return _this._updatePosition(position),_this.toolbar.show()}),this.element.bind("hallounselected",function(event,data){return _this.toolbar.hide()}),this.element.bind("hallodeactivated",function(event,data){return _this.toolbar.hide()})}})}(jQuery),function(jQuery){return jQuery.widget("Hallo.halloToolbarFixed",{toolbar:null,options:{parentElement:"body",editable:null,toolbar:null},_create:function(){var el,widthToAdd,_this=this;this.toolbar=this.options.toolbar,this.toolbar.show(),jQuery(this.options.parentElement).append(this.toolbar),this._bindEvents(),jQuery(window).resize(function(event){return _this._updatePosition(_this._getPosition(event))});if(this.options.parentElement==="body"&&!this.options.floating)return el=jQuery(this.element),widthToAdd=parseFloat(el.css("padding-left")),widthToAdd+=parseFloat(el.css("padding-right")),widthToAdd+=parseFloat(el.css("border-left-width")),widthToAdd+=parseFloat(el.css("border-right-width")),widthToAdd+=parseFloat(el.css("outline-width"))*2,widthToAdd+=parseFloat(el.css("outline-offset"))*2,jQuery(this.toolbar).css("width",el.width()+widthToAdd)},_getPosition:function(event,selection){var offset,position,width;if(!event)return;return width=parseFloat(this.element.css("outline-width")),offset=width+parseFloat(this.element.css("outline-offset")),position={top:this.element.offset().top-this.toolbar.outerHeight()-offset,left:this.element.offset().left-offset}},_getCaretPosition:function(range){var newRange,position,tmpSpan;return tmpSpan=jQuery("<span/>"),newRange=rangy.createRange(),newRange.setStart(range.endContainer,range.endOffset),newRange.insertNode(tmpSpan.get(0)),position={top:tmpSpan.offset().top,left:tmpSpan.offset().left},tmpSpan.remove(),position},setPosition:function(){if(this.options.parentElement!=="body")return;return this.toolbar.css("position","absolute"),this.toolbar.css("top",this.element.offset().top-this.toolbar.outerHeight()),this.toolbar.css("left",this.element.offset().left)},_updatePosition:function(position){},_bindEvents:function(){var _this=this;return this.element.bind("halloactivated",function(event,data){return _this._updatePosition(_this._getPosition(event)),_this.toolbar.show()}),this.element.bind("hallodeactivated",function(event,data){return _this.toolbar.hide()})}})}(jQuery),function(jQuery){return jQuery.widget("IKS.hallobutton",{button:null,isChecked:!1,options:{uuid:"",label:null,icon:null,editable:null,command:null,queryState:!0,cssClass:null},_create:function(){var hoverclass,id,opts,_base,_ref,_this=this;return(_ref=(_base=this.options).icon)==null&&(_base.icon="icon-"+this.options.label.toLowerCase()),id=""+this.options.uuid+"-"+this.options.label,opts=this.options,this.button=this._createButton(id,opts.command,opts.label,opts.icon),this.element.append(this.button),this.options.cssClass&&this.button.addClass(this.options.cssClass),this.options.editable.options.touchScreen&&this.button.addClass("btn-large"),this.button.data("hallo-command",this.options.command),hoverclass="ui-state-hover",this.button.bind("mouseenter",function(event){if(_this.isEnabled())return _this.button.addClass(hoverclass)}),this.button.bind("mouseleave",function(event){return _this.button.removeClass(hoverclass)})},_init:function(){var editableElement,events,queryState,_this=this;this.button||(this.button=this._prepareButton()),this.element.append(this.button),queryState=function(event){if(!_this.options.command)return;try{return _this.checked(document.queryCommandState(_this.options.command))}catch(e){}},this.options.command&&this.button.bind("click",function(event){return _this.options.editable.execute(_this.options.command),queryState,!1});if(!this.options.queryState)return;return editableElement=this.options.editable.element,events="keyup paste change mouseup hallomodified",editableElement.bind(events,queryState),editableElement.bind("halloenabled",function(){return editableElement.bind(events,queryState)}),editableElement.bind("hallodisabled",function(){return editableElement.unbind(events,queryState)})},enable:function(){return this.button.removeAttr("disabled")},disable:function(){return this.button.attr("disabled","true")},isEnabled:function(){return this.button.attr("disabled")!=="true"},refresh:function(){return this.isChecked?this.button.addClass("ui-state-active"):this.button.removeClass("ui-state-active")},checked:function(checked){return this.isChecked=checked,this.refresh()},_createButton:function(id,command,label,icon){var classes;return classes=["ui-button","ui-widget","ui-state-default","ui-corner-all","ui-button-text-only",""+command+"_button"],jQuery('<button id="'+id+'"        class="'+classes.join(" ")+'" title="'+label+'">          <span class="ui-button-text">            <i class="'+icon+'"></i>          </span>        </button>')}}),jQuery.widget("IKS.hallobuttonset",{buttons:null,_create:function(){return this.element.addClass("ui-buttonset")},_init:function(){return this.refresh()},refresh:function(){var rtl;return rtl=this.element.css("direction")==="rtl",this.buttons=this.element.find(".ui-button"),this.buttons.removeClass("ui-corner-all ui-corner-left ui-corner-right"),rtl?(this.buttons.filter(":first").addClass("ui-corner-right"),this.buttons.filter(":last").addClass("ui-corner-left")):(this.buttons.filter(":first").addClass("ui-corner-left"),this.buttons.filter(":last").addClass("ui-corner-right"))}})}(jQuery),function(jQuery){return jQuery.widget("IKS.hallodropdownbutton",{button:null,options:{uuid:"",label:null,icon:null,editable:null,target:"",cssClass:null},_create:function(){var _base,_ref;return(_ref=(_base=this.options).icon)!=null?_ref:_base.icon="icon-"+this.options.label.toLowerCase()},_init:function(){var target,_this=this;return target=jQuery(this.options.target),target.css("position","absolute"),target.addClass("dropdown-menu"),target.hide(),this.button||(this.button=this._prepareButton()),this.button.bind("click",function(){if(target.hasClass("open")){_this._hideTarget();return}return _this._showTarget()}),target.bind("click",function(){return _this._hideTarget()}),this.options.editable.element.bind("hallodeactivated",function(){return _this._hideTarget()}),this.element.append(this.button)},_showTarget:function(){var target;return target=jQuery(this.options.target),this._updateTargetPosition(),target.addClass("open"),target.show()},_hideTarget:function(){var target;return target=jQuery(this.options.target),target.removeClass("open"),target.hide()},_updateTargetPosition:function(){var left,target,top,_ref;return target=jQuery(this.options.target),_ref=this.button.position(),top=_ref.top,left=_ref.left,top+=this.button.outerHeight(),target.css("top",top),target.css("left",left-20)},_prepareButton:function(){var buttonEl,classes,id;return id=""+this.options.uuid+"-"+this.options.label,classes=["ui-button","ui-widget","ui-state-default","ui-corner-all","ui-button-text-only"],buttonEl=jQuery('<button id="'+id+'"        class="'+classes.join(" ")+'" title="'+this.options.label+'">         <i class="'+this.options.icon+'"></i>       </button>'),this.options.cssClass&&buttonEl.addClass(this.options.cssClass),buttonEl.button()}})}(jQuery)}.call(this),define("hallo",function(){}),define("vie/instance",["vie","hallo"],function(){var vieInstance=new VIE;return vieInstance.namespaces.get("typo3")||vieInstance.namespaces.add("typo3","http://www.typo3.org/ns/2012/Flow/Packages/TYPO3/Content/"),vieInstance.namespaces.get("xsd")||vieInstance.namespaces.add("xsd","http://www.w3.org/2001/XMLSchema#"),vieInstance.use(new vieInstance.RdfaService),vieInstance}),define("aloha",["jquery","jquery-ui"],function(jQuery,jQueryUi){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("aloha");var Aloha=window.Aloha=window.Aloha||{};Aloha.settings={logLevels:{error:!0,warn:!0,info:!1,debug:!1},errorhandling:!1,sidebar:{disabled:!0},plugins:{load:["common/ui","common/format","common/paste","common/block","common/table","common/link"].join(","),block:{sidebarAttributeEditor:!1},format:{config:["b","i","p","h1","h2","h3","pre","removeFormat"]}},smartContentChange:{idle:500,delay:150},bundles:{phoenixAloha:"/_Resources/Static/Packages/TYPO3.TYPO3/JavaScript/alohaplugins/"},baseUrl:alohaBaseUrl,jQuery:jQuery,predefinedModules:{jqueryui:jQueryUi}},(window.T3Configuration&&window.T3Configuration.enableAloha||window.T3&&window.T3.Configuration&&window.T3.Configuration.enableAloha)&&require({context:"aloha",baseUrl:alohaBaseUrl},["aloha"],function(Aloha){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("aloha (inner require)")})}),define("text",["module"],function(module){var progIds=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],xmlRegExp=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,bodyRegExp=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,hasLocation=typeof location!="undefined"&&location.href,defaultProtocol=hasLocation&&location.protocol&&location.protocol.replace(/\:/,""),defaultHostName=hasLocation&&location.hostname,defaultPort=hasLocation&&(location.port||undefined),buildMap=[],masterConfig=module.config(),text,fs;return text={version:"2.0.0",strip:function(content){if(content){content=content.replace(xmlRegExp,"");var matches=content.match(bodyRegExp);matches&&(content=matches[1])}else content="";return content},jsEscape:function(content){return content.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")},createXhr:function(){var xhr,i,progId;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(i=0;i<3;i++){progId=progIds[i];try{xhr=new ActiveXObject(progId)}catch(e){}if(xhr){progIds=[progId];break}}return xhr},parseName:function(name){var strip=!1,index=name.indexOf("."),modName=name.substring(0,index),ext=name.substring(index+1,name.length);return index=ext.indexOf("!"),index!==-1&&(strip=ext.substring(index+1,ext.length),strip=strip==="strip",ext=ext.substring(0,index)),{moduleName:modName,ext:ext,strip:strip}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(url,protocol,hostname,port){var match=text.xdRegExp.exec(url),uProtocol,uHostName,uPort;return match?(uProtocol=match[2],uHostName=match[3],uHostName=uHostName.split(":"),uPort=uHostName[1],uHostName=uHostName[0],(!uProtocol||uProtocol===protocol)&&(!uHostName||uHostName===hostname)&&(!uPort&&!uHostName||uPort===port)):!0},finishLoad:function(name,strip,content,onLoad){content=strip?text.strip(content):content,masterConfig.isBuild&&(buildMap[name]=content),onLoad(content)},load:function(name,req,onLoad,config){if(config.isBuild&&!config.inlineText){onLoad();return}masterConfig.isBuild=config.isBuild;var parsed=text.parseName(name),nonStripName=parsed.moduleName+"."+parsed.ext,url=req.toUrl(nonStripName),useXhr=masterConfig.useXhr||text.useXhr;!hasLocation||useXhr(url,defaultProtocol,defaultHostName,defaultPort)?text.get(url,function(content){text.finishLoad(name,parsed.strip,content,onLoad)},function(err){onLoad.error&&onLoad.error(err)}):req([nonStripName],function(content){text.finishLoad(parsed.moduleName+"."+parsed.ext,parsed.strip,content,onLoad)})},write:function(pluginName,moduleName,write,config){if(buildMap.hasOwnProperty(moduleName)){var content=text.jsEscape(buildMap[moduleName]);write.asModule(pluginName+"!"+moduleName,"define(function () { return '"+content+"';});\n")}},writeFile:function(pluginName,moduleName,req,write,config){var parsed=text.parseName(moduleName),nonStripName=parsed.moduleName+"."+parsed.ext,fileName=req.toUrl(parsed.moduleName+"."+parsed.ext)+".js";text.load(nonStripName,req,function(value){var textWrite=function(contents){return write(fileName,contents)};textWrite.asModule=function(moduleName,contents){return write.asModule(moduleName,fileName,contents)},text.write(pluginName,nonStripName,textWrite,config)},config)}},typeof process!="undefined"&&process.versions&&!!process.versions.node?(fs=require.nodeRequire("fs"),text.get=function(url,callback){var file=fs.readFileSync(url,"utf8");file.indexOf("﻿")===0&&(file=file.substring(1)),callback(file)}):text.createXhr()?text.get=function(url,callback,errback){var xhr=text.createXhr();xhr.open("GET",url,!0),masterConfig.onXhr&&masterConfig.onXhr(xhr,url),xhr.onreadystatechange=function(evt){var status,err;xhr.readyState===4&&(status=xhr.status,status>399&&status<600?(err=new Error(url+" HTTP status: "+status),err.xhr=xhr,errback(err)):callback(xhr.responseText))},xhr.send(null)}:typeof Packages!="undefined"&&(text.get=function(url,callback){var encoding="utf-8",file=new java.io.File(url),lineSeparator=java.lang.System.getProperty("line.separator"),input=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(file),encoding)),stringBuffer,line,content="";try{stringBuffer=new java.lang.StringBuffer,line=input.readLine(),line&&line.length()&&line.charAt(0)===65279&&(line=line.substring(1)),stringBuffer.append(line);while((line=input.readLine())!==null)stringBuffer.append(lineSeparator),stringBuffer.append(line);content=String(stringBuffer.toString())}finally{input.close()}callback(content)}),text}),define("text!phoenix/templates/halloplugins/linkplugin.html",[],function(){return'{{view Ember.TextField class="t3-link-inputfield" valueBinding="url" }}\n{{view T3.Content.UI.Button classNames="btn-success" labelBinding="label" target="parentView" action="insert" }}\n{{view T3.Content.UI.Button label="cancel" target="parentView" action="cancel" }}'}),define("halloplugins/linkplugin",["jquery","emberjs","text!phoenix/templates/halloplugins/linkplugin.html","jquery-ui"],function($,Ember,linkPluginTemplate){(function($){return $.widget("typo3.hallo-linkplugin",{view:null,options:{editable:null,uuid:"",link:!0,defaultUrl:"http://",dialogOpts:{autoOpen:!1,width:540,height:95,title:"Enter Link",modal:!0,resizable:!1,draggable:!1,dialogClass:"hallolink-dialog aloha-block-do-not-deactivate"},butonCssClass:null},populateToolbar:function(toolbar){var buttonize,buttonset,dialog,dialogId,widget,_this=this;widget=this,dialogId=""+this.options.uuid+"-dialog",dialog=$("<div />",{id:dialogId}),widget.view=Ember.View.create({classNames:["t3-ui"],template:Ember.Handlebars.compile(linkPluginTemplate),url:widget.options.defaultUrl,label:"Insert",didInsertElement:function(){var that=this;this.$(".t3-link-inputfield").focus(),this.$(".t3-link-inputfield").autocomplete({source:function(request,response){TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.searchPage(request.term,function(result){result.searchResult?response($.map(result.searchResult,function(node){return{label:node.name,value:node.url}})):response([])})},minLength:2,select:function(event,ui){that.set("url",ui.item.value)}}),this.get("url")!==widget.options.defaultUrl&&this.set("label","Update")},insert:function(){var link=this.get("url");return widget.options.editable.restoreSelection(widget.lastSelection),(new RegExp(/^\s*$/)).test(link)||link===widget.options.defaultUrl?(widget.lastSelection.collapsed&&(widget.lastSelection.setStartBefore(widget.lastSelection.startContainer),widget.lastSelection.setEndAfter(widget.lastSelection.startContainer),window.getSelection().addRange(widget.lastSelection)),document.execCommand("unlink",null,"")):widget.lastSelection.startContainer.parentNode.href===void 0?document.execCommand("createLink",null,link):widget.lastSelection.startContainer.parentNode.href=link,widget.options.editable.element.trigger("change"),widget.options.editable.removeAllSelections(),dialog.dialog("close"),!1},cancel:function(){return dialog.dialog("close"),!1}}).appendTo(dialog),buttonset=$('<span class="'+widget.widgetName+'"></span>'),buttonize=function(type){var button,buttonHolder;return buttonHolder=$("<span />"),buttonHolder.hallobutton({label:"Link",icon:"icon-link",editable:_this.options.editable,command:null,queryState:!1,uuid:_this.options.uuid,cssClass:_this.options.buttonCssClass}),buttonset.append(buttonHolder),button=buttonHolder,button.bind("click",function(){return widget.lastSelection=widget.options.editable.getSelection(),widget.options.editable.keepActivated(!0),dialog.dialog("open"),dialog.bind("dialogclose",function(){return $("label",buttonHolder).removeClass("ui-state-active"),widget.options.editable.element.focus(),widget.options.editable.keepActivated(!1)}),widget.lastSelection.startContainer.parentNode.href?(widget.view.set("url",$(widget.lastSelection.startContainer.parentNode).attr("href")),widget.view.set("label","Update")):(widget.view.set("url",widget.options.defaultUrl),widget.view.set("label","Insert")),!1}),_this.element.bind("keyup paste change mouseup",function(event){var nodeName,start;start=$(widget.options.editable.getSelection().startContainer),nodeName=start.prop("nodeName")?start.prop("nodeName"):start.parent().prop("nodeName");if(nodeName&&nodeName.toUpperCase()==="A"){$("label",button).addClass("ui-state-active");return}return $("label",button).removeClass("ui-state-active")})};if(this.options.link)return buttonize("A"),toolbar.append(buttonset),buttonset.hallobuttonset(),dialog.dialog(this.options.dialogOpts)},_init:function(){}})})($)}),function(a){var b=new Array,c=new Array;a.fn.doAutosize=function(b){var c=a(this).data("minwidth"),d=a(this).data("maxwidth"),e="",f=a(this),g=a("#"+a(this).data("tester_id"));if(e===(e=f.val()))return;var h=e.replace(/&/g,"&").replace(/\s/g," ").replace(/</g,"<").replace(/>/g,">");g.html(h);var i=g.width(),j=i+b.comfortZone>=c?i+b.comfortZone:c,k=f.width(),l=j<k&&j>=c||j>c&&j<d;l&&f.width(j)},a.fn.resetAutosize=function(b){var c=a(this).data("minwidth")||b.minInputWidth||a(this).width(),d=a(this).data("maxwidth")||b.maxInputWidth||a(this).closest(".tagsinput").width()-b.inputPadding,e="",f=a(this),g=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:f.css("fontSize"),fontFamily:f.css("fontFamily"),fontWeight:f.css("fontWeight"),letterSpacing:f.css("letterSpacing"),whiteSpace:"nowrap"}),h=a(this).attr("id")+"_autosize_tester";!a("#"+h).length>0&&(g.attr("id",h),g.appendTo("body")),f.data("minwidth",c),f.data("maxwidth",d),f.data("tester_id",h),f.css("width",c)},a.fn.addTag=function(d,e){return e=jQuery.extend({focus:!1,callback:!0},e),this.each(function(){var f=a(this).attr("id"),g=a(this).val().split(b[f]);g[0]==""&&(g=new Array),d=jQuery.trim(d);if(e.unique){var h=a(g).tagExist(d);h==1&&a("#"+f+"_tag").addClass("not_valid")}else var h=!1;if(d!=""&&h!=1){a("<span>").addClass("tag").append(a("<span>").text(d).append("  "),a("<a>",{href:"#",title:"Removing tag",text:"x"}).click(function(){return a("#"+f).removeTag(escape(d))})).insertBefore("#"+f+"_addTag"),g.push(d),a("#"+f+"_tag").val(""),e.focus?a("#"+f+"_tag").focus():a("#"+f+"_tag").blur(),a.fn.tagsInput.updateTagsField(this,g);if(e.callback&&c[f]&&c[f].onAddTag){var i=c[f].onAddTag;i.call(this,d)}if(c[f]&&c[f].onChange){var j=g.length,i=c[f].onChange;i.call(this,a(this),g[j-1])}}}),!1},a.fn.removeTag=function(d){return d=unescape(d),this.each(function(){var e=a(this).attr("id"),f=a(this).val().split(b[e]);a("#"+e+"_tagsinput .tag").remove(),str="";for(i=0;i<f.length;i++)f[i]!=d&&(str=str+b[e]+f[i]);a.fn.tagsInput.importTags(this,str);if(c[e]&&c[e].onRemoveTag){var g=c[e].onRemoveTag;g.call(this,d)}}),!1},a.fn.tagExist=function(b){return jQuery.inArray(b,a(this))>=0},a.fn.importTags=function(b){id=a(this).attr("id"),a("#"+id+"_tagsinput .tag").remove(),a.fn.tagsInput.importTags(this,b)},a.fn.tagsInput=function(d){var e=jQuery.extend({interactive:!0,defaultText:"add a tag",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:!1},hide:!0,delimiter:",",unique:!0,removeWithBackspace:!0,placeholderColor:"#666666",autosize:!0,comfortZone:20,inputPadding:12},d);return this.each(function(){e.hide&&a(this).hide();var d=a(this).attr("id"),f=jQuery.extend({pid:d,real_input:"#"+d,holder:"#"+d+"_tagsinput",input_wrapper:"#"+d+"_addTag",fake_input:"#"+d+"_tag"},e);b[d]=f.delimiter;if(e.onAddTag||e.onRemoveTag||e.onChange)c[d]=new Array,c[d].onAddTag=e.onAddTag,c[d].onRemoveTag=e.onRemoveTag,c[d].onChange=e.onChange;var g='<div id="'+d+'_tagsinput" class="tagsinput"><div id="'+d+'_addTag">';e.interactive&&(g=g+'<input id="'+d+'_tag" value="" data-default="'+e.defaultText+'" />'),g+='</div><div class="tags_clear"></div></div>',a(g).insertAfter(this),a(f.holder).css("width",e.width),a(f.holder).css("height",e.height),a(f.real_input).val()!=""&&a.fn.tagsInput.importTags(a(f.real_input),a(f.real_input).val());if(e.interactive){a(f.fake_input).val(a(f.fake_input).attr("data-default")),a(f.fake_input).css("color",e.placeholderColor),a(f.fake_input).resetAutosize(e),a(f.holder).bind("click",f,function(b){a(b.data.fake_input).focus()}),a(f.fake_input).bind("focus",f,function(b){a(b.data.fake_input).val()==a(b.data.fake_input).attr("data-default")&&a(b.data.fake_input).val(""),a(b.data.fake_input).css("color","#000000")});if(e.autocomplete_url!=undefined){autocomplete_options={source:e.autocomplete_url};for(attrname in e.autocomplete)autocomplete_options[attrname]=e.autocomplete[attrname];jQuery.Autocompleter!==undefined?(a(f.fake_input).autocomplete(e.autocomplete_url,e.autocomplete),a(f.fake_input).bind("result",f,function(b,c,f){c&&a("#"+d).addTag(c[0]+"",{focus:!0,unique:e.unique})})):jQuery.ui.autocomplete!==undefined&&(a(f.fake_input).autocomplete(autocomplete_options),a(f.fake_input).bind("autocompleteselect",f,function(b,c){return a(b.data.real_input).addTag(c.item.value,{focus:!0,unique:e.unique}),!1}))}else a(f.fake_input).bind("blur",f,function(b){var c=a(this).attr("data-default");return a(b.data.fake_input).val()!=""&&a(b.data.fake_input).val()!=c?b.data.minChars<=a(b.data.fake_input).val().length&&(!b.data.maxChars||b.data.maxChars>=a(b.data.fake_input).val().length)&&a(b.data.real_input).addTag(a(b.data.fake_input).val(),{focus:!0,unique:e.unique}):(a(b.data.fake_input).val(a(b.data.fake_input).attr("data-default")),a(b.data.fake_input).css("color",e.placeholderColor)),!1});a(f.fake_input).bind("keypress",f,function(b){if(b.which==b.data.delimiter.charCodeAt(0)||b.which==13)return b.preventDefault(),b.data.minChars<=a(b.data.fake_input).val().length&&(!b.data.maxChars||b.data.maxChars>=a(b.data.fake_input).val().length)&&a(b.data.real_input).addTag(a(b.data.fake_input).val(),{focus:!0,unique:e.unique}),a(b.data.fake_input).resetAutosize(e),!1;b.data.autosize&&a(b.data.fake_input).doAutosize(e)}),f.removeWithBackspace&&a(f.fake_input).bind("keydown",function(b){if(b.keyCode==8&&a(this).val()==""){b.preventDefault();var c=a(this).closest(".tagsinput").find(".tag:last").text(),d=a(this).attr("id").replace(/_tag$/,"");c=c.replace(/[\s]+x$/,""),a("#"+d).removeTag(escape(c)),a(this).trigger("focus")}}),a(f.fake_input).blur(),f.unique&&a(f.fake_input).keydown(function(b){(b.keyCode==8||String.fromCharCode(b.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/))&&a(this).removeClass("not_valid")})}return!1}),this},a.fn.tagsInput.updateTagsField=function(c,d){var e=a(c).attr("id");a(c).val(d.join(b[e]))},a.fn.tagsInput.importTags=function(d,e){a(d).val("");var f=a(d).attr("id"),g=e.split(b[f]);for(i=0;i<g.length;i++)a(d).addTag(g[i],{focus:!1,callback:!1});if(c[f]&&c[f].onChange){var h=c[f].onChange;h.call(d,d,g[i])}}}(jQuery),define("Library/createjs/deps/jquery.tagsinput.min",function(){}),window.rangy=function(){function l(p,u){var w=typeof p[u];return w=="function"||w=="object"&&!!p[u]||w=="unknown"}function K(p,u){return typeof p[u]=="object"&&!!p[u]}function H(p,u){return typeof p[u]!="undefined"}function I(p){return function(u,w){for(var B=w.length;B--;)if(!p(u,w[B]))return!1;return!0}}function z(p){return p&&A(p,x)&&v(p,t)}function C(p){window.alert("Rangy not supported in your browser. Reason: "+p),c.initialized=!0,c.supported=!1}function N(){if(!c.initialized){var p,u=!1,w=!1;l(document,"createRange")&&(p=document.createRange(),A(p,n)&&v(p,i)&&(u=!0),p.detach()),(p=K(document,"body")?document.body:document.getElementsByTagName("body")[0])&&l(p,"createTextRange")&&(p=p.createTextRange(),z(p)&&(w=!0)),!u&&!w&&C("Neither Range nor TextRange are implemented"),c.initialized=!0,c.features={implementsDomRange:u,implementsTextRange:w},u=k.concat(f),w=0;for(p=u.length;w<p;++w)try{u[w](c)}catch(B){K(window,"console")&&l(window.console,"log")&&window.console.log("Init listener threw an exception. Continuing.",B)}}}function O(p){this.name=p,this.supported=this.initialized=!1}var i=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"],n=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],t=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],x=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"],A=I(l),q=I(K),v=I(H),c={version:"1.2.3",initialized:!1,supported:!0,util:{isHostMethod:l,isHostObject:K,isHostProperty:H,areHostMethods:A,areHostObjects:q,areHostProperties:v,isTextRange:z},features:{},modules:{},config:{alertOnWarn:!1,preferTextRange:!1}};c.fail=C,c.warn=function(p){p="Rangy warning: "+p,c.config.alertOnWarn?window.alert(p):typeof window.console!="undefined"&&typeof window.console.log!="undefined"&&window.console.log(p)},{}.hasOwnProperty?c.util.extend=function(p,u){for(var w in u)u.hasOwnProperty(w)&&(p[w]=u[w])}:C("hasOwnProperty not supported");var f=[],k=[];c.init=N,c.addInitListener=function(p){c.initialized?p(c):f.push(p)};var r=[];c.addCreateMissingNativeApiListener=function(p){r.push(p)},c.createMissingNativeApi=function(p){p=p||window,N();for(var u=0,w=r.length;u<w;++u)r[u](p)},O.prototype.fail=function(p){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+p)},O.prototype.warn=function(p){c.warn("Module "+this.name+": "+p)},O.prototype.createError=function(p){return Error("Error in Rangy "+this.name+" module: "+p)},c.createModule=function(p,u){var w=new O(p);c.modules[p]=w,k.push(function(B){u(B,w),w.initialized=!0,w.supported=!0})},c.requireModules=function(p){for(var u=0,w=p.length,B,V;u<w;++u){V=p[u],B=c.modules[V];if(!B||!(B instanceof O))throw Error("Module '"+V+"' not found");if(!B.supported)throw Error("Module '"+V+"' not supported")}};var L=!1;q=function(){L||(L=!0,c.initialized||N())};if(typeof window=="undefined")C("No window found");else{if(typeof document!="undefined")return l(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",q,!1),l(window,"addEventListener")?window.addEventListener("load",q,!1):l(window,"attachEvent")?window.attachEvent("onload",q):C("Window does not have required addEventListener or attachEvent method"),c;C("No document found")}}(),rangy.createModule("DomUtil",function(l,K){function H(c){for(var f=0;c=c.previousSibling;)f++;return f}function I(c,f){var k=[],r;for(r=c;r;r=r.parentNode)k.push(r);for(r=f;r;r=r.parentNode)if(v(k,r))return r;return null}function z(c,f,k){for(k=k?c:c.parentNode;k;){c=k.parentNode;if(c===f)return k;k=c}return null}function C(c){return c=c.nodeType,c==3||c==4||c==8}function N(c,f){var k=f.nextSibling,r=f.parentNode;return k?r.insertBefore(c,k):r.appendChild(c),c}function O(c){if(c.nodeType==9)return c;if(typeof c.ownerDocument!="undefined")return c.ownerDocument;if(typeof c.document!="undefined")return c.document;if(c.parentNode)return O(c.parentNode);throw Error("getDocument: no document found for node")}function i(c){return c?C(c)?'"'+c.data+'"':c.nodeType==1?"<"+c.nodeName+(c.id?' id="'+c.id+'"':"")+">["+c.childNodes.length+"]":c.nodeName:"[No node]"}function n(c){this._next=this.root=c}function t(c,f){this.node=c,this.offset=f}function x(c){this.code=this[c],this.codeName=c,this.message="DOMException: "+this.codeName}var A=l.util;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||K.fail("document missing a Node creation method"),A.isHostMethod(document,"getElementsByTagName")||K.fail("document missing getElementsByTagName method");var q=document.createElement("div");A.areHostMethods(q,["insertBefore","appendChild","cloneNode"])||K.fail("Incomplete Element implementation"),A.isHostProperty(q,"innerHTML")||K.fail("Element is missing innerHTML property"),q=document.createTextNode("test"),A.areHostMethods(q,["splitText","deleteData","insertData","appendData","cloneNode"])||K.fail("Incomplete Text Node implementation");var v=function(c,f){for(var k=c.length;k--;)if(c[k]===f)return!0;return!1};n.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var c=this._current=this._next,f;if(this._current)if(f=c.firstChild)this._next=f;else{for(f=null;c!==this.root&&!(f=c.nextSibling);)c=c.parentNode;this._next=f}return this._current},detach:function(){this._current=this._next=this.root=null}},t.prototype={equals:function(c){return this.node===c.node&this.offset==c.offset},inspect:function(){return"[DomPosition("+i(this.node)+":"+this.offset+")]"}},x.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11},x.prototype.toString=function(){return this.message},l.dom={arrayContains:v,isHtmlNamespace:function(c){var f;return typeof c.namespaceURI=="undefined"||(f=c.namespaceURI)===null||f=="http://www.w3.org/1999/xhtml"},parentElement:function(c){return c=c.parentNode,c.nodeType==1?c:null},getNodeIndex:H,getNodeLength:function(c){var f;return C(c)?c.length:(f=c.childNodes)?f.length:0},getCommonAncestor:I,isAncestorOf:function(c,f,k){for(f=k?f:f.parentNode;f;){if(f===c)return!0;f=f.parentNode}return!1},getClosestAncestorIn:z,isCharacterDataNode:C,insertAfter:N,splitDataNode:function(c,f){var k=c.cloneNode(!1);return k.deleteData(0,f),c.deleteData(f,c.length-f),N(k,c),k},getDocument:O,getWindow:function(c){c=O(c);if(typeof c.defaultView!="undefined")return c.defaultView;if(typeof c.parentWindow!="undefined")return c.parentWindow;throw Error("Cannot get a window object for node")},getIframeWindow:function(c){if(typeof c.contentWindow!="undefined")return c.contentWindow;if(typeof c.contentDocument!="undefined")return c.contentDocument.defaultView;throw Error("getIframeWindow: No Window object found for iframe element")},getIframeDocument:function(c){if(typeof c.contentDocument!="undefined")return c.contentDocument;if(typeof c.contentWindow!="undefined")return c.contentWindow.document;throw Error("getIframeWindow: No Document object found for iframe element")},getBody:function(c){return A.isHostObject(c,"body")?c.body:c.getElementsByTagName("body")[0]},getRootContainer:function(c){for(var f;f=c.parentNode;)c=f;return c},comparePoints:function(c,f,k,r){var L;if(c==k)return f===r?0:f<r?-1:1;if(L=z(k,c,!0))return f<=H(L)?-1:1;if(L=z(c,k,!0))return H(L)<r?-1:1;f=I(c,k),c=c===f?f:z(c,f,!0),k=k===f?f:z(k,f,!0);if(c===k)throw Error("comparePoints got to case 4 and childA and childB are the same!");for(f=f.firstChild;f;){if(f===c)return-1;if(f===k)return 1;f=f.nextSibling}throw Error("Should not be here!")},inspectNode:i,fragmentFromNodeChildren:function(c){for(var f=O(c).createDocumentFragment(),k;k=c.firstChild;)f.appendChild(k);return f},createIterator:function(c){return new n(c)},DomPosition:t},l.DOMException=x}),rangy.createModule("DomRange",function(l){function K(a,e){return a.nodeType!=3&&(g.isAncestorOf(a,e.startContainer,!0)||g.isAncestorOf(a,e.endContainer,!0))}function H(a){return g.getDocument(a.startContainer)}function I(a,e,j){if(e=a._listeners[e])for(var o=0,E=e.length;o<E;++o)e[o].call(a,{target:a,args:j})}function z(a){return new Z(a.parentNode,g.getNodeIndex(a))}function C(a){return new Z(a.parentNode,g.getNodeIndex(a)+1)}function N(a,e,j){var o=a.nodeType==11?a.firstChild:a;return g.isCharacterDataNode(e)?j==e.length?g.insertAfter(a,e):e.parentNode.insertBefore(a,j==0?e:g.splitDataNode(e,j)):j>=e.childNodes.length?e.appendChild(a):e.insertBefore(a,e.childNodes[j]),o}function O(a){for(var e,j,o=H(a.range).createDocumentFragment();j=a.next();){e=a.isPartiallySelectedSubtree(),j=j.cloneNode(!e),e&&(e=a.getSubtreeIterator(),j.appendChild(O(e)),e.detach(!0));if(j.nodeType==10)throw new S("HIERARCHY_REQUEST_ERR");o.appendChild(j)}return o}function i(a,e,j){var o,E;for(j=j||{stop:!1};o=a.next();)if(a.isPartiallySelectedSubtree()){if(e(o)===!1){j.stop=!0;return}o=a.getSubtreeIterator(),i(o,e,j),o.detach(!0);if(j.stop)return}else for(o=g.createIterator(o);E=o.next();)if(e(E)===!1){j.stop=!0;return}}function n(a){for(var e;a.next();)a.isPartiallySelectedSubtree()?(e=a.getSubtreeIterator(),n(e),e.detach(!0)):a.remove()}function t(a){for(var e,j=H(a.range).createDocumentFragment(),o;e=a.next();){a.isPartiallySelectedSubtree()?(e=e.cloneNode(!1),o=a.getSubtreeIterator(),e.appendChild(t(o)),o.detach(!0)):a.remove();if(e.nodeType==10)throw new S("HIERARCHY_REQUEST_ERR");j.appendChild(e)}return j}function x(a,e,j){var o=!!e&&!!e.length,E,T=!!j;o&&(E=RegExp("^("+e.join("|")+")$"));var m=[];return i(new q(a,!1),function(s){(!o||E.test(s.nodeType))&&(!T||j(s))&&m.push(s)}),m}function A(a){return"["+(typeof a.getName=="undefined"?"Range":a.getName())+"("+g.inspectNode(a.startContainer)+":"+a.startOffset+", "+g.inspectNode(a.endContainer)+":"+a.endOffset+")]"}function q(a,e){this.range=a,this.clonePartiallySelectedTextNodes=e;if(!a.collapsed){this.sc=a.startContainer,this.so=a.startOffset,this.ec=a.endContainer,this.eo=a.endOffset;var j=a.commonAncestorContainer;this.sc===this.ec&&g.isCharacterDataNode(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===j&&!g.isCharacterDataNode(this.sc)?this.sc.childNodes[this.so]:g.getClosestAncestorIn(this.sc,j,!0),this._last=this.ec===j&&!g.isCharacterDataNode(this.ec)?this.ec.childNodes[this.eo-1]:g.getClosestAncestorIn(this.ec,j,!0))}}function v(a){this.code=this[a],this.codeName=a,this.message="RangeException: "+this.codeName}function c(a,e,j){this.nodes=x(a,e,j),this._next=this.nodes[0],this._position=0}function f(a){return function(e,j){for(var o,E=j?e:e.parentNode;E;){o=E.nodeType;if(g.arrayContains(a,o))return E;E=E.parentNode}return null}}function k(a,e){if(G(a,e))throw new v("INVALID_NODE_TYPE_ERR")}function r(a){if(!a.startContainer)throw new S("INVALID_STATE_ERR")}function L(a,e){if(!g.arrayContains(e,a.nodeType))throw new v("INVALID_NODE_TYPE_ERR")}function p(a,e){if(e<0||e>(g.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new S("INDEX_SIZE_ERR")}function u(a,e){if(h(a,!0)!==h(e,!0))throw new S("WRONG_DOCUMENT_ERR")}function w(a){if(D(a,!0))throw new S("NO_MODIFICATION_ALLOWED_ERR")}function B(a,e){if(!a)throw new S(e)}function V(a){return!!a.startContainer&&!!a.endContainer&&(!!g.arrayContains(ba,a.startContainer.nodeType)||!!h(a.startContainer,!0))&&(!!g.arrayContains(ba,a.endContainer.nodeType)||!!h(a.endContainer,!0))&&a.startOffset<=(g.isCharacterDataNode(a.startContainer)?a.startContainer.length:a.startContainer.childNodes.length)&&a.endOffset<=(g.isCharacterDataNode(a.endContainer)?a.endContainer.length:a.endContainer.childNodes.length)}function J(a){r(a);if(!V(a))throw Error("Range error: Range is no longer valid after DOM mutation ("+a.inspect()+")")}function ca(){}function Y(a){a.START_TO_START=ia,a.START_TO_END=la,a.END_TO_END=ra,a.END_TO_START=ma,a.NODE_BEFORE=na,a.NODE_AFTER=oa,a.NODE_BEFORE_AND_AFTER=pa,a.NODE_INSIDE=ja}function W(a){Y(a),Y(a.prototype)}function da(a,e){return function(){J(this);var j=this.startContainer,o=this.startOffset,E=this.commonAncestorContainer,T=new q(this,!0);return j!==E&&(j=g.getClosestAncestorIn(j,E,!0),o=C(j),j=o.node,o=o.offset),i(T,w),T.reset(),E=a(T),T.detach(),e(this,j,o,j,o),E}}function fa(a,e,j){function o(m,s){return function(y){r(this),L(y,$),L(d(y),ba),y=(m?z:C)(y),(s?E:T)(this,y.node,y.offset)}}function E(m,s,y){var F=m.endContainer,Q=m.endOffset;if(s!==m.startContainer||y!==m.startOffset){if(d(s)!=d(F)||g.comparePoints(s,y,F,Q)==1)F=s,Q=y;e(m,s,y,F,Q)}}function T(m,s,y){var F=m.startContainer,Q=m.startOffset;if(s!==m.endContainer||y!==m.endOffset){if(d(s)!=d(F)||g.comparePoints(s,y,F,Q)==-1)F=s,Q=y;e(m,F,Q,s,y)}}a.prototype=new ca,l.util.extend(a.prototype,{setStart:function(m,s){r(this),k(m,!0),p(m,s),E(this,m,s)},setEnd:function(m,s){r(this),k(m,!0),p(m,s),T(this,m,s)},setStartBefore:o(!0,!0),setStartAfter:o(!1,!0),setEndBefore:o(!0,!1),setEndAfter:o(!1,!1),collapse:function(m){J(this),m?e(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):e(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(m){r(this),k(m,!0),e(this,m,0,m,g.getNodeLength(m))},selectNode:function(m){r(this),k(m,!1),L(m,$);var s=z(m);m=C(m),e(this,s.node,s.offset,m.node,m.offset)},extractContents:da(t,e),deleteContents:da(n,e),canSurroundContents:function(){J(this),w(this.startContainer),w(this.endContainer);var m=new q(this,!0),s=m._first&&K(m._first,this)||m._last&&K(m._last,this);return m.detach(),!s},detach:function(){j(this)},splitBoundaries:function(){J(this);var m=this.startContainer,s=this.startOffset,y=this.endContainer,F=this.endOffset,Q=m===y;g.isCharacterDataNode(y)&&F>0&&F<y.length&&g.splitDataNode(y,F),g.isCharacterDataNode(m)&&s>0&&s<m.length&&(m=g.splitDataNode(m,s),Q?(F-=s,y=m):y==m.parentNode&&F>=g.getNodeIndex(m)&&F++,s=0),e(this,m,s,y,F)},normalizeBoundaries:function(){J(this);var m=this.startContainer,s=this.startOffset,y=this.endContainer,F=this.endOffset,Q=function(U){var R=U.nextSibling;R&&R.nodeType==U.nodeType&&(y=U,F=U.length,U.appendData(R.data),R.parentNode.removeChild(R))},qa=function(U){var R=U.previousSibling;if(R&&R.nodeType==U.nodeType){m=U;var sa=U.length;s=R.length,U.insertData(0,R.data),R.parentNode.removeChild(R),m==y?(F+=s,y=m):y==U.parentNode&&(R=g.getNodeIndex(U),F==R?(y=U,F=sa):F>R&&F--)}},ga=!0;g.isCharacterDataNode(y)?y.length==F&&Q(y):(F>0&&(ga=y.childNodes[F-1])&&g.isCharacterDataNode(ga)&&Q(ga),ga=!this.collapsed),ga?g.isCharacterDataNode(m)?s==0&&qa(m):s<m.childNodes.length&&(Q=m.childNodes[s])&&g.isCharacterDataNode(Q)&&qa(Q):(m=y,s=F),e(this,m,s,y,F)},collapseToPoint:function(m,s){r(this),k(m,!0),p(m,s),(m!==this.startContainer||s!==this.startOffset||m!==this.endContainer||s!==this.endOffset)&&e(this,m,s,m,s)}}),W(a)}function ea(a){a.collapsed=a.startContainer===a.endContainer&&a.startOffset===a.endOffset,a.commonAncestorContainer=a.collapsed?a.startContainer:g.getCommonAncestor(a.startContainer,a.endContainer)}function ha(a,e,j,o,E){var T=a.startContainer!==e||a.startOffset!==j,m=a.endContainer!==o||a.endOffset!==E;a.startContainer=e,a.startOffset=j,a.endContainer=o,a.endOffset=E,ea(a),I(a,"boundarychange",{startMoved:T,endMoved:m})}function M(a){this.startContainer=a,this.startOffset=0,this.endContainer=a,this.endOffset=0,this._listeners={boundarychange:[],detach:[]},ea(this)}l.requireModules(["DomUtil"]);var g=l.dom,Z=g.DomPosition,S=l.DOMException;q.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var a=this._current=this._next;return a&&(this._next=a!==this._last?a.nextSibling:null,g.isCharacterDataNode(a)&&this.clonePartiallySelectedTextNodes&&(a===this.ec&&(a=a.cloneNode(!0)).deleteData(this.eo,a.length-this.eo),this._current===this.sc&&(a=a.cloneNode(!0)).deleteData(0,this.so))),a},remove:function(){var a=this._current,e,j;!g.isCharacterDataNode(a)||a!==this.sc&&a!==this.ec?a.parentNode&&a.parentNode.removeChild(a):(e=a===this.sc?this.so:0,j=a===this.ec?this.eo:a.length,e!=j&&a.deleteData(e,j-e))},isPartiallySelectedSubtree:function(){return K(this._current,this.range)},getSubtreeIterator:function(){var a;if(this.isSingleCharacterDataNode)a=this.range.cloneRange(),a.collapse();else{a=new M(H(this.range));var e=this._current,j=e,o=0,E=e,T=g.getNodeLength(e);g.isAncestorOf(e,this.sc,!0)&&(j=this.sc,o=this.so),g.isAncestorOf(e,this.ec,!0)&&(E=this.ec,T=this.eo),ha(a,j,o,E,T)}return new q(a,this.clonePartiallySelectedTextNodes)},detach:function(a){a&&this.range.detach(),this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},v.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2},v.prototype.toString=function(){return this.message},c.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){return this._current=this._next,this._next=this.nodes[++this._position],this._current},detach:function(){this._current=this._next=this.nodes=null}};var $=[1,3,4,5,7,8,10],ba=[2,9,11],aa=[1,3,4,5,7,8,10,11],b=[1,3,4,5,7,8],d=g.getRootContainer,h=f([9,11]),D=f([5,6,10,12]),G=f([6,10,12]),P=document.createElement("style"),X=!1;try{P.innerHTML="<b>x</b>",X=P.firstChild.nodeType==3}catch(ta){}l.features.htmlParsingConforms=X;var ka=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ia=0,la=1,ra=2,ma=3,na=0,oa=1,pa=2,ja=3;ca.prototype={attachListener:function(a,e){this._listeners[a].push(e)},compareBoundaryPoints:function(a,e){J(this),u(this.startContainer,e.startContainer);var j=a==ma||a==ia?"start":"end",o=a==la||a==ia?"start":"end";return g.comparePoints(this[j+"Container"],this[j+"Offset"],e[o+"Container"],e[o+"Offset"])},insertNode:function(a){J(this),L(a,aa),w(this.startContainer);if(g.isAncestorOf(a,this.startContainer,!0))throw new S("HIERARCHY_REQUEST_ERR");this.setStartBefore(N(a,this.startContainer,this.startOffset))},cloneContents:function(){J(this);var a,e;return this.collapsed?H(this).createDocumentFragment():this.startContainer===this.endContainer&&g.isCharacterDataNode(this.startContainer)?(a=this.startContainer.cloneNode(!0),a.data=a.data.slice(this.startOffset,this.endOffset),e=H(this).createDocumentFragment(),e.appendChild(a),e):(e=new q(this,!0),a=O(e),e.detach(),a)},canSurroundContents:function(){J(this),w(this.startContainer),w(this.endContainer);var a=new q(this,!0),e=a._first&&K(a._first,this)||a._last&&K(a._last,this);return a.detach(),!e},surroundContents:function(a){L(a,b);if(!this.canSurroundContents())throw new v("BAD_BOUNDARYPOINTS_ERR");var e=this.extractContents();if(a.hasChildNodes())for(;a.lastChild;)a.removeChild(a.lastChild);N(a,this.startContainer,this.startOffset),a.appendChild(e),this.selectNode(a)},cloneRange:function(){J(this);for(var a=new M(H(this)),e=ka.length,j;e--;)j=ka[e],a[j]=this[j];return a},toString:function(){J(this);var a=this.startContainer;if(a===this.endContainer&&g.isCharacterDataNode(a))return a.nodeType==3||a.nodeType==4?a.data.slice(this.startOffset,this.endOffset):"";var e=[];return a=new q(this,!0),i(a,function(j){(j.nodeType==3||j.nodeType==4)&&e.push(j.data)}),a.detach(),e.join("")},compareNode:function(a){J(this);var e=a.parentNode,j=g.getNodeIndex(a);if(!e)throw new S("NOT_FOUND_ERR");return a=this.comparePoint(e,j),e=this.comparePoint(e,j+1),a<0?e>0?pa:na:e>0?oa:ja},comparePoint:function(a,e){return J(this),B(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),g.comparePoints(a,e,this.startContainer,this.startOffset)<0?-1:g.comparePoints(a,e,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:X?function(a){var e=this.startContainer,j=g.getDocument(e);if(!e)throw new S("INVALID_STATE_ERR");var o=null;return e.nodeType==1?o=e:g.isCharacterDataNode(e)&&(o=g.parentElement(e)),o=o===null||o.nodeName=="HTML"&&g.isHtmlNamespace(g.getDocument(o).documentElement)&&g.isHtmlNamespace(o)?j.createElement("body"):o.cloneNode(!1),o.innerHTML=a,g.fragmentFromNodeChildren(o)}:function(a){r(this);var e=H(this).createElement("body");return e.innerHTML=a,g.fragmentFromNodeChildren(e)},toHtml:function(){J(this);var a=H(this).createElement("div");return a.appendChild(this.cloneContents()),a.innerHTML},intersectsNode:function(a,e){J(this),B(a,"NOT_FOUND_ERR");if(g.getDocument(a)!==H(this))return!1;var j=a.parentNode,o=g.getNodeIndex(a);B(j,"NOT_FOUND_ERR");var E=g.comparePoints(j,o,this.endContainer,this.endOffset);return j=g.comparePoints(j,o+1,this.startContainer,this.startOffset),e?E<=0&&j>=0:E<0&&j>0},isPointInRange:function(a,e){return J(this),B(a,"HIERARCHY_REQUEST_ERR"),u(a,this.startContainer),g.comparePoints(a,e,this.startContainer,this.startOffset)>=0&&g.comparePoints(a,e,this.endContainer,this.endOffset)<=0},intersectsRange:function(a,e){J(this);if(H(a)!=H(this))throw new S("WRONG_DOCUMENT_ERR");var j=g.comparePoints(this.startContainer,this.startOffset,a.endContainer,a.endOffset),o=g.comparePoints(this.endContainer,this.endOffset,a.startContainer,a.startOffset);return e?j<=0&&o>=0:j<0&&o>0},intersection:function(a){if(this.intersectsRange(a)){var e=g.comparePoints(this.startContainer,this.startOffset,a.startContainer,a.startOffset),j=g.comparePoints(this.endContainer,this.endOffset,a.endContainer,a.endOffset),o=this.cloneRange();return e==-1&&o.setStart(a.startContainer,a.startOffset),j==1&&o.setEnd(a.endContainer,a.endOffset),o}return null},union:function(a){if(this.intersectsRange(a,!0)){var e=this.cloneRange();return g.comparePoints(a.startContainer,a.startOffset,this.startContainer,this.startOffset)==-1&&e.setStart(a.startContainer,a.startOffset),g.comparePoints(a.endContainer,a.endOffset,this.endContainer,this.endOffset)==1&&e.setEnd(a.endContainer,a.endOffset),e}throw new v("Ranges do not intersect")},containsNode:function(a,e){return e?this.intersectsNode(a,!1):this.compareNode(a)==ja},containsNodeContents:function(a){return this.comparePoint(a,0)>=0&&this.comparePoint(a,g.getNodeLength(a))<=0},containsRange:function(a){return this.intersection(a).equals(a)},containsNodeText:function(a){var e=this.cloneRange();e.selectNode(a);var j=e.getNodes([3]);return j.length>0?(e.setStart(j[0],0),a=j.pop(),e.setEnd(a,a.length),a=this.containsRange(e),e.detach(),a):this.containsNodeContents(a)},createNodeIterator:function(a,e){return J(this),new c(this,a,e)},getNodes:function(a,e){return J(this),x(this,a,e)},getDocument:function(){return H(this)},collapseBefore:function(a){r(this),this.setEndBefore(a),this.collapse(!1)},collapseAfter:function(a){r(this),this.setStartAfter(a),this.collapse(!0)},getName:function(){return"DomRange"},equals:function(a){return M.rangesEqual(this,a)},isValid:function(){return V(this)},inspect:function(){return A(this)}},fa(M,ha,function(a){r(a),a.startContainer=a.startOffset=a.endContainer=a.endOffset=null,a.collapsed=a.commonAncestorContainer=null,I(a,"detach",null),a._listeners=null}),l.rangePrototype=ca.prototype,M.rangeProperties=ka,M.RangeIterator=q,M.copyComparisonConstants=W,M.createPrototypeRange=fa,M.inspect=A,M.getRangeDocument=H,M.rangesEqual=function(a,e){return a.startContainer===e.startContainer&&a.startOffset===e.startOffset&&a.endContainer===e.endContainer&&a.endOffset===e.endOffset},l.DomRange=M,l.RangeException=v}),rangy.createModule("WrappedRange",function(l){function K(i,n,t,x){var A=i.duplicate();A.collapse(t);var q=A.parentElement();z.isAncestorOf(n,q,!0)||(q=n);if(!q.canHaveHTML)return new C(q.parentNode,z.getNodeIndex(q));n=z.getDocument(q).createElement("span");var v,c=t?"StartToStart":"StartToEnd";do q.insertBefore(n,n.previousSibling),A.moveToElementText(n);while((v=A.compareEndPoints(c,i))>0&&n.previousSibling);c=n.nextSibling;if(v==-1&&c&&z.isCharacterDataNode(c)){A.setEndPoint(t?"EndToStart":"EndToEnd",i);if(/[\r\n]/.test(c.data)){q=A.duplicate(),t=q.text.replace(/\r\n/g,"\r").length;for(t=q.moveStart("character",t);q.compareEndPoints("StartToEnd",q)==-1;)t++,q.moveStart("character",1)}else t=A.text.length;q=new C(c,t)}else c=(x||!t)&&n.previousSibling,q=(t=(x||t)&&n.nextSibling)&&z.isCharacterDataNode(t)?new C(t,0):c&&z.isCharacterDataNode(c)?new C(c,c.length):new C(q,z.getNodeIndex(n));return n.parentNode.removeChild(n),q}function H(i,n){var t,x,A=i.offset,q=z.getDocument(i.node),v=q.body.createTextRange(),c=z.isCharacterDataNode(i.node);return c?(t=i.node,x=t.parentNode):(t=i.node.childNodes,t=A<t.length?t[A]:null,x=i.node),q=q.createElement("span"),q.innerHTML="&#feff;",t?x.insertBefore(q,t):x.appendChild(q),v.moveToElementText(q),v.collapse(!n),x.removeChild(q),c&&v[n?"moveStart":"moveEnd"]("character",A),v}l.requireModules(["DomUtil","DomRange"]);var I,z=l.dom,C=z.DomPosition,N=l.DomRange;if(l.features.implementsDomRange&&(!l.features.implementsTextRange||!l.config.preferTextRange))(function(){function i(f){for(var k=t.length,r;k--;)r=t[k],f[r]=f.nativeRange[r]}var n,t=N.rangeProperties,x,A;I=function(f){if(!f)throw Error("Range must be specified");this.nativeRange=f,i(this)},N.createPrototypeRange(I,function(f,k,r,L,p){var u=f.endContainer!==L||f.endOffset!=p;if(f.startContainer!==k||f.startOffset!=r||u)f.setEnd(L,p),f.setStart(k,r)},function(f){f.nativeRange.detach(),f.detached=!0;for(var k=t.length,r;k--;)r=t[k],f[r]=null}),n=I.prototype,n.selectNode=function(f){this.nativeRange.selectNode(f),i(this)},n.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},n.extractContents=function(){var f=this.nativeRange.extractContents();return i(this),f},n.cloneContents=function(){return this.nativeRange.cloneContents()},n.surroundContents=function(f){this.nativeRange.surroundContents(f),i(this)},n.collapse=function(f){this.nativeRange.collapse(f),i(this)},n.cloneRange=function(){return new I(this.nativeRange.cloneRange())},n.refresh=function(){i(this)},n.toString=function(){return this.nativeRange.toString()};var q=document.createTextNode("test");z.getBody(document).appendChild(q);var v=document.createRange();v.setStart(q,0),v.setEnd(q,0);try{v.setStart(q,1),x=!0,n.setStart=function(f,k){this.nativeRange.setStart(f,k),i(this)},n.setEnd=function(f,k){this.nativeRange.setEnd(f,k),i(this)},A=function(f){return function(k){this.nativeRange[f](k),i(this)}}}catch(c){x=!1,n.setStart=function(f,k){try{this.nativeRange.setStart(f,k)}catch(r){this.nativeRange.setEnd(f,k),this.nativeRange.setStart(f,k)}i(this)},n.setEnd=function(f,k){try{this.nativeRange.setEnd(f,k)}catch(r){this.nativeRange.setStart(f,k),this.nativeRange.setEnd(f,k)}i(this)},A=function(f,k){return function(r){try{this.nativeRange[f](r)}catch(L){this.nativeRange[k](r),this.nativeRange[f](r)}i(this)}}}n.setStartBefore=A("setStartBefore","setEndBefore"),n.setStartAfter=A("setStartAfter","setEndAfter"),n.setEndBefore=A("setEndBefore","setStartBefore"),n.setEndAfter=A("setEndAfter","setStartAfter"),v.selectNodeContents(q),n.selectNodeContents=v.startContainer==q&&v.endContainer==q&&v.startOffset==0&&v.endOffset==q.length?function(f){this.nativeRange.selectNodeContents(f),i(this)}:function(f){this.setStart(f,0),this.setEnd(f,N.getEndOffset(f))},v.selectNodeContents(q),v.setEnd(q,3),x=document.createRange(),x.selectNodeContents(q),x.setEnd(q,4),x.setStart(q,2),n.compareBoundaryPoints=v.compareBoundaryPoints(v.START_TO_END,x)==-1&v.compareBoundaryPoints(v.END_TO_START,x)==1?function(f,k){return k=k.nativeRange||k,f==k.START_TO_END?f=k.END_TO_START:f==k.END_TO_START&&(f=k.START_TO_END),this.nativeRange.compareBoundaryPoints(f,k)}:function(f,k){return this.nativeRange.compareBoundaryPoints(f,k.nativeRange||k)},l.util.isHostMethod(v,"createContextualFragment")&&(n.createContextualFragment=function(f){return this.nativeRange.createContextualFragment(f)}),z.getBody(document).removeChild(q),v.detach(),x.detach()})(),l.createNativeRange=function(i){return i=i||document,i.createRange()};else if(l.features.implementsTextRange){I=function(i){this.textRange=i,this.refresh()},I.prototype=new N(document),I.prototype.refresh=function(){var i,n,t=this.textRange;i=t.parentElement();var x=t.duplicate();x.collapse(!0),n=x.parentElement(),x=t.duplicate(),x.collapse(!1),t=x.parentElement(),n=n==t?n:z.getCommonAncestor(n,t),n=n==i?n:z.getCommonAncestor(i,n),this.textRange.compareEndPoints("StartToEnd",this.textRange)==0?n=i=K(this.textRange,n,!0,!0):(i=K(this.textRange,n,!0,!1),n=K(this.textRange,n,!1,!1)),this.setStart(i.node,i.offset),this.setEnd(n.node,n.offset)},N.copyComparisonConstants(I);var O=function(){return this}();typeof O.Range=="undefined"&&(O.Range=I),l.createNativeRange=function(i){return i=i||document,i.body.createTextRange()}}l.features.implementsTextRange&&(I.rangeToTextRange=function(i){if(i.collapsed)return H(new C(i.startContainer,i.startOffset),!0);var n=H(new C(i.startContainer,i.startOffset),!0),t=H(new C(i.endContainer,i.endOffset),!1);return i=z.getDocument(i.startContainer).body.createTextRange(),i.setEndPoint("StartToStart",n),i.setEndPoint("EndToEnd",t),i}),I.prototype.getName=function(){return"WrappedRange"},l.WrappedRange=I,l.createRange=function(i){return i=i||document,new I(l.createNativeRange(i))},l.createRangyRange=function(i){return i=i||document,new N(i)},l.createIframeRange=function(i){return l.createRange(z.getIframeDocument(i))},l.createIframeRangyRange=function(i){return l.createRangyRange(z.getIframeDocument(i))},l.addCreateMissingNativeApiListener(function(i){i=i.document,typeof i.createRange=="undefined"&&(i.createRange=function(){return l.createRange(this)}),i=i=null})}),rangy.createModule("WrappedSelection",function(l,K){function H(b){return(b||window).getSelection()}function I(b){return(b||window).document.selection}function z(b,d,h){var D=h?"end":"start";h=h?"start":"end",b.anchorNode=d[D+"Container"],b.anchorOffset=d[D+"Offset"],b.focusNode=d[h+"Container"],b.focusOffset=d[h+"Offset"]}function C(b){b.anchorNode=b.focusNode=null,b.anchorOffset=b.focusOffset=0,b.rangeCount=0,b.isCollapsed=!0,b._ranges.length=0}function N(b){var d;return b instanceof k?(d=b._selectionNativeRange,d||(d=l.createNativeRange(c.getDocument(b.startContainer)),d.setEnd(b.endContainer,b.endOffset),d.setStart(b.startContainer,b.startOffset),b._selectionNativeRange=d,b.attachListener("detach",function(){this._selectionNativeRange=null}))):b instanceof r?d=b.nativeRange:l.features.implementsDomRange&&b instanceof c.getWindow(b.startContainer).Range&&(d=b),d}function O(b){var d=b.getNodes(),h;e:if(!d.length||d[0].nodeType!=1)h=!1;else{h=1;for(var D=d.length;h<D;++h)if(!c.isAncestorOf(d[0],d[h])){h=!1;break e}h=!0}if(!h)throw Error("getSingleElementFromRange: range "+b.inspect()+" did not consist of a single element");return d[0]}function i(b,d){var h=new r(d);b._ranges=[h],z(b,h,!1),b.rangeCount=1,b.isCollapsed=h.collapsed}function n(b){b._ranges.length=0;if(b.docSelection.type=="None")C(b);else{var d=b.docSelection.createRange();if(d&&typeof d.text!="undefined")i(b,d);else{b.rangeCount=d.length;for(var h,D=c.getDocument(d.item(0)),G=0;G<b.rangeCount;++G)h=l.createRange(D),h.selectNode(d.item(G)),b._ranges.push(h);b.isCollapsed=b.rangeCount==1&&b._ranges[0].collapsed,z(b,b._ranges[b.rangeCount-1],!1)}}}function t(b,d){var h=b.docSelection.createRange(),D=O(d),G=c.getDocument(h.item(0));G=c.getBody(G).createControlRange();for(var P=0,X=h.length;P<X;++P)G.add(h.item(P));try{G.add(D)}catch(ta){throw Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}G.select(),n(b)}function x(b,d,h){this.nativeSelection=b,this.docSelection=d,this._ranges=[],this.win=h,this.refresh()}function A(b,d){var h=c.getDocument(d[0].startContainer);h=c.getBody(h).createControlRange();for(var D=0,G;D<rangeCount;++D){G=O(d[D]);try{h.add(G)}catch(P){throw Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}h.select(),n(b)}function q(b,d){if(b.anchorNode&&c.getDocument(b.anchorNode)!==c.getDocument(d))throw new L("WRONG_DOCUMENT_ERR")}function v(b){var d=[],h=new p(b.anchorNode,b.anchorOffset),D=new p(b.focusNode,b.focusOffset),G=typeof b.getName=="function"?b.getName():"Selection";if(typeof b.rangeCount!="undefined")for(var P=0,X=b.rangeCount;P<X;++P)d[P]=k.inspect(b.getRangeAt(P));return"["+G+"(Ranges: "+d.join(", ")+")(anchor: "+h.inspect()+", focus: "+D.inspect()+"]"}l.requireModules(["DomUtil","DomRange","WrappedRange"]),l.config.checkSelectionRanges=!0;var c=l.dom,f=l.util,k=l.DomRange,r=l.WrappedRange,L=l.DOMException,p=c.DomPosition,u,w,B=l.util.isHostMethod(window,"getSelection"),V=l.util.isHostObject(document,"selection"),J=V&&(!B||l.config.preferTextRange);J?(u=I,l.isSelectionValid=function(b){b=(b||window).document;var d=b.selection;return d.type!="None"||c.getDocument(d.createRange().parentElement())==b}):B?(u=H,l.isSelectionValid=function(){return!0}):K.fail("Neither document.selection or window.getSelection() detected."),l.getNativeSelection=u,B=u();var ca=l.createNativeRange(document),Y=c.getBody(document),W=f.areHostObjects(B,f.areHostProperties(B,["anchorOffset","focusOffset"]));l.features.selectionHasAnchorAndFocus=W;var da=f.isHostMethod(B,"extend");l.features.selectionHasExtend=da;var fa=typeof B.rangeCount=="number";l.features.selectionHasRangeCount=fa;var ea=!1,ha=!0;f.areHostMethods(B,["addRange","getRangeAt","removeAllRanges"])&&typeof B.rangeCount=="number"&&l.features.implementsDomRange&&function(){var b=document.createElement("iframe");b.frameBorder=0,b.style.position="absolute",b.style.left="-10000px",Y.appendChild(b);var d=c.getIframeDocument(b);d.open(),d.write("<html><head></head><body>12</body></html>"),d.close();var h=c.getIframeWindow(b).getSelection(),D=d.documentElement.lastChild.firstChild;d=d.createRange(),d.setStart(D,1),d.collapse(!0),h.addRange(d),ha=h.rangeCount==1,h.removeAllRanges();var G=d.cloneRange();d.setStart(D,0),G.setEnd(D,2),h.addRange(d),h.addRange(G),ea=h.rangeCount==2,d.detach(),G.detach(),Y.removeChild(b)}(),l.features.selectionSupportsMultipleRanges=ea,l.features.collapsedNonEditableSelectionsSupported=ha;var M=!1,g;Y&&f.isHostMethod(Y,"createControlRange")&&(g=Y.createControlRange(),f.areHostProperties(g,["item","add"])&&(M=!0)),l.features.implementsControlRange=M,w=W?function(b){return b.anchorNode===b.focusNode&&b.anchorOffset===b.focusOffset}:function(b){return b.rangeCount?b.getRangeAt(b.rangeCount-1).collapsed:!1};var Z;f.isHostMethod(B,"getRangeAt")?Z=function(b,d){try{return b.getRangeAt(d)}catch(h){return null}}:W&&(Z=function(b){var d=c.getDocument(b.anchorNode);return d=l.createRange(d),d.setStart(b.anchorNode,b.anchorOffset),d.setEnd(b.focusNode,b.focusOffset),d.collapsed!==this.isCollapsed&&(d.setStart(b.focusNode,b.focusOffset),d.setEnd(b.anchorNode,b.anchorOffset)),d}),l.getSelection=function(b){b=b||window;var d=b._rangySelection,h=u(b),D=V?I(b):null;return d?(d.nativeSelection=h,d.docSelection=D,d.refresh(b)):(d=new x(h,D,b),b._rangySelection=d),d},l.getIframeSelection=function(b){return l.getSelection(c.getIframeWindow(b))},g=x.prototype;if(!J&&W&&f.areHostMethods(B,["removeAllRanges","addRange"])){g.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),C(this)};var S=function(b,d){var h=k.getRangeDocument(d);h=l.createRange(h),h.collapseToPoint(d.endContainer,d.endOffset),b.nativeSelection.addRange(N(h)),b.nativeSelection.extend(d.startContainer,d.startOffset),b.refresh()};g.addRange=fa?function(b,d){if(M&&V&&this.docSelection.type=="Control")t(this,b);else if(d&&da)S(this,b);else{var h;ea?h=this.rangeCount:(this.removeAllRanges(),h=0),this.nativeSelection.addRange(N(b)),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==h+1?(l.config.checkSelectionRanges&&(h=Z(this.nativeSelection,this.rangeCount-1))&&!k.rangesEqual(h,b)&&(b=new r(h)),this._ranges[this.rangeCount-1]=b,z(this,b,aa(this.nativeSelection)),this.isCollapsed=w(this)):this.refresh()}}:function(b,d){d&&da?S(this,b):(this.nativeSelection.addRange(N(b)),this.refresh())},g.setRanges=function(b){if(M&&b.length>1)A(this,b);else{this.removeAllRanges();for(var d=0,h=b.length;d<h;++d)this.addRange(b[d])}}}else{if(!(f.isHostMethod(B,"empty")&&f.isHostMethod(ca,"select")&&M&&J))return K.fail("No means of selecting a Range or TextRange was found"),!1;g.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var b;if(this.anchorNode)b=c.getDocument(this.anchorNode);else if(this.docSelection.type=="Control"){var d=this.docSelection.createRange();d.length&&(b=c.getDocument(d.item(0)).body.createTextRange())}b&&(b.body.createTextRange().select(),this.docSelection.empty())}}catch(h){}C(this)},g.addRange=function(b){this.docSelection.type=="Control"?t(this,b):(r.rangeToTextRange(b).select(),this._ranges[0]=b,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,z(this,b,!1))},g.setRanges=function(b){this.removeAllRanges();var d=b.length;d>1?A(this,b):d&&this.addRange(b[0])}}g.getRangeAt=function(b){if(b<0||b>=this.rangeCount)throw new L("INDEX_SIZE_ERR");return this._ranges[b]};var $;if(J)$=function(b){var d;l.isSelectionValid(b.win)?d=b.docSelection.createRange():(d=c.getBody(b.win.document).createTextRange(),d.collapse(!0)),b.docSelection.type=="Control"?n(b):d&&typeof d.text!="undefined"?i(b,d):C(b)};else if(f.isHostMethod(B,"getRangeAt")&&typeof B.rangeCount=="number")$=function(b){if(M&&V&&b.docSelection.type=="Control")n(b);else{b._ranges.length=b.rangeCount=b.nativeSelection.rangeCount;if(b.rangeCount){for(var d=0,h=b.rangeCount;d<h;++d)b._ranges[d]=new l.WrappedRange(b.nativeSelection.getRangeAt(d));z(b,b._ranges[b.rangeCount-1],aa(b.nativeSelection)),b.isCollapsed=w(b)}else C(b)}};else{if(!W||typeof B.isCollapsed!="boolean"||typeof ca.collapsed!="boolean"||!l.features.implementsDomRange)return K.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;$=function(b){var d;d=b.nativeSelection,d.anchorNode?(d=Z(d,0),b._ranges=[d],b.rangeCount=1,d=b.nativeSelection,b.anchorNode=d.anchorNode,b.anchorOffset=d.anchorOffset,b.focusNode=d.focusNode,b.focusOffset=d.focusOffset,b.isCollapsed=w(b)):C(b)}}g.refresh=function(b){var d=b?this._ranges.slice(0):null;$(this);if(b){b=d.length;if(b!=this._ranges.length)return!1;for(;b--;)if(!k.rangesEqual(d[b],this._ranges[b]))return!1;return!0}};var ba=function(b,d){var h=b.getAllRanges(),D=!1;b.removeAllRanges();for(var G=0,P=h.length;G<P;++G)D||d!==h[G]?b.addRange(h[G]):D=!0;b.rangeCount||C(b)};g.removeRange=M?function(b){if(this.docSelection.type=="Control"){var d=this.docSelection.createRange();b=O(b);var h=c.getDocument(d.item(0));h=c.getBody(h).createControlRange();for(var D,G=!1,P=0,X=d.length;P<X;++P)D=d.item(P),D!==b||G?h.add(d.item(P)):G=!0;h.select(),n(this)}else ba(this,b)}:function(b){ba(this,b)};var aa;!J&&W&&l.features.implementsDomRange?(aa=function(b){var d=!1;return b.anchorNode&&(d=c.comparePoints(b.anchorNode,b.anchorOffset,b.focusNode,b.focusOffset)==1),d},g.isBackwards=function(){return aa(this)}):aa=g.isBackwards=function(){return!1},g.toString=function(){for(var b=[],d=0,h=this.rangeCount;d<h;++d)b[d]=""+this._ranges[d];return b.join("")},g.collapse=function(b,d){q(this,b);var h=l.createRange(c.getDocument(b));h.collapseToPoint(b,d),this.removeAllRanges(),this.addRange(h),this.isCollapsed=!0},g.collapseToStart=function(){if(!this.rangeCount)throw new L("INVALID_STATE_ERR");var b=this._ranges[0];this.collapse(b.startContainer,b.startOffset)},g.collapseToEnd=function(){if(!this.rangeCount)throw new L("INVALID_STATE_ERR");var b=this._ranges[this.rangeCount-1];this.collapse(b.endContainer,b.endOffset)},g.selectAllChildren=function(b){q(this,b);var d=l.createRange(c.getDocument(b));d.selectNodeContents(b),this.removeAllRanges(),this.addRange(d)},g.deleteFromDocument=function(){if(M&&V&&this.docSelection.type=="Control"){for(var b=this.docSelection.createRange(),d;b.length;)d=b.item(0),b.remove(d),d.parentNode.removeChild(d);this.refresh()}else if(this.rangeCount){b=this.getAllRanges(),this.removeAllRanges(),d=0;for(var h=b.length;d<h;++d)b[d].deleteContents();this.addRange(b[h-1])}},g.getAllRanges=function(){return this._ranges.slice(0)},g.setSingleRange=function(b){this.setRanges([b])},g.containsNode=function(b,d){for(var h=0,D=this._ranges.length;h<D;++h)if(this._ranges[h].containsNode(b,d))return!0;return!1},g.toHtml=function(){var b="";if(this.rangeCount){b=k.getRangeDocument(this._ranges[0]).createElement("div");for(var d=0,h=this._ranges.length;d<h;++d)b.appendChild(this._ranges[d].cloneContents());b=b.innerHTML}return b},g.getName=function(){return"WrappedSelection"},g.inspect=function(){return v(this)},g.detach=function(){this.win=this.anchorNode=this.focusNode=this.win._rangySelection=null},x.inspect=v,l.Selection=x,l.selectionPrototype=g,l.addCreateMissingNativeApiListener(function(b){typeof b.getSelection=="undefined"&&(b.getSelection=function(){return l.getSelection(this)}),b=null})}),define("Library/createjs/deps/rangy-core-1.2.3",function(){}),function(jQuery,undefined){jQuery.widget("Midgard.midgardCreate",{options:{toolbar:"full",saveButton:null,state:"browse",highlight:!0,highlightColor:"#67cc08",editorWidgets:{"default":"hallo"},editorOptions:{hallo:{widget:"halloWidget"}},collectionWidgets:{"default":"midgardCollectionAdd"},url:function(){},storagePrefix:"node",workflows:{url:null},notifications:{},vie:null,stanbolUrl:null,dbPediaUrl:null,tags:!1,buttonContainer:".create-ui-toolbar-statustoolarea .create-ui-statustools",templates:{buttonContent:'<%= label %> <i class="icon-<%= icon %>"></i>',button:'<li id="<%= id %>"><a class="create-ui-btn"><%= buttonContent %></a></li>'},localize:function(id,language){return window.midgardCreate.localize(id,language)},language:null},_create:function(){this.vie=this._setupVIE(this.options);var widget=this;window.setTimeout(function(){widget._checkSession()},10),this.options.language||(this.options.language=jQuery("html").attr("lang")),this._enableToolbar(),this._saveButton(),this._editButton(),this._prepareStorage(),this.element.midgardWorkflows&&this.element.midgardWorkflows(this.options.workflows),this.element.midgardNotifications&&this.element.midgardNotifications(this.options.notifications)},destroy:function(){this.element.midgardStorage("destroy"),this.element.midgardToolbar("destroy"),jQuery("[about]",this.element).each(function(){jQuery(this).midgardEditable("destroy")}),this.element.midgardWorkflows&&this.element.midgardWorkflows("destroy"),this.element.midgardNotifications&&this.element.midgardNotifications("destroy"),this.options.tags&&this.element.midgardTags("destroy"),jQuery.Widget.prototype.destroy.call(this)},_setupVIE:function(options){var vie;return options.vie?vie=options.vie:vie=new VIE,vie.hasService("rdfa")||vie.use(new vie.RdfaService),!vie.hasService("stanbol")&&options.stanbolUrl&&vie.use(new vie.StanbolService({proxyDisabled:!0,url:options.stanbolUrl})),!vie.hasService("dbpedia")&&options.dbPediaUrl&&vie.use(new vie.DBPediaService({proxyDisabled:!0,url:options.dbPediaUrl})),vie},_prepareStorage:function(){this.element.midgardStorage({vie:this.vie,url:this.options.url,localize:this.options.localize,language:this.options.language});var widget=this;this.element.bind("midgardstoragesave",function(){jQuery("#midgardcreate-save a").html(_.template(widget.options.templates.buttonContent,{label:widget.options.localize("Saving",widget.options.language),icon:"upload"}))}),this.element.bind("midgardstoragesaved midgardstorageerror",function(){jQuery("#midgardcreate-save a").html(_.template(widget.options.templates.buttonContent,{label:widget.options.localize("Save",widget.options.language),icon:"ok"}))})},_init:function(){this.setState(this.options.state)},setState:function(state){this._setOption("state",state),state==="edit"?this._enableEdit():this._disableEdit(),this._setEditButtonState(state)},setToolbar:function(state){this.options.toolbar=state,this.element.midgardToolbar("setDisplay",state)},showNotification:function(options){if(this.element.midgardNotifications)return this.element.midgardNotifications("create",options)},configureEditor:function(name,widget,options){this.options.editorOptions[name]={widget:widget,options:options}},setEditorForContentType:function(type,editor){if(this.options.editorOptions[editor]===undefined&&editor!==null)throw new Error("No editor "+editor+" configured");this.options.editorWidgets[type]=editor},setEditorForProperty:function(property,editor){if(this.options.editorOptions[editor]===undefined&&editor!==null)throw new Error("No editor "+editor+" configured");this.options.editorWidgets[property]=editor},_checkSession:function(){if(!window.sessionStorage)return;var toolbarID=this.options.storagePrefix+"Midgard.create.toolbar";window.sessionStorage.getItem(toolbarID)&&this.setToolbar(window.sessionStorage.getItem(toolbarID));var stateID=this.options.storagePrefix+"Midgard.create.state";window.sessionStorage.getItem(stateID)&&this.setState(window.sessionStorage.getItem(stateID)),this.element.bind("midgardcreatestatechange",function(event,options){window.sessionStorage.setItem(stateID,options.state)})},_saveButton:function(){if(this.options.saveButton)return this.options.saveButton;var widget=this;return jQuery(this.options.buttonContainer,this.element).append(jQuery(_.template(this.options.templates.button,{id:"midgardcreate-save",buttonContent:_.template(this.options.templates.buttonContent,{label:widget.options.localize("Save",widget.options.language),icon:"ok"})}))),this.options.saveButton=jQuery("#midgardcreate-save",this.element),this.options.saveButton.hide(),this.options.saveButton},_editButton:function(){var widget=this;jQuery(this.options.buttonContainer,this.element).append(jQuery(_.template(this.options.templates.button,{id:"midgardcreate-edit",buttonContent:""}))),jQuery("#midgardcreate-edit",this.element).bind("click",function(){if(widget.options.state==="edit"){widget.setState("browse");return}widget.setState("edit")})},_setEditButtonState:function(state){var widget=this,buttonContents={edit:_.template(this.options.templates.buttonContent,{label:widget.options.localize("Cancel",widget.options.language),icon:"remove"}),browse:_.template(this.options.templates.buttonContent,{label:widget.options.localize("Edit",widget.options.language),icon:"edit"})},editButton=jQuery("#midgardcreate-edit a",this.element);if(!editButton)return;state==="edit"&&editButton.addClass("selected"),editButton.html(buttonContents[state])},_enableToolbar:function(){var widget=this;this.element.bind("midgardtoolbarstatechange",function(event,options){widget.setToolbar(options.display),window.sessionStorage&&window.sessionStorage.setItem(widget.options.storagePrefix+"Midgard.create.toolbar",options.display)}),this.element.midgardToolbar({display:this.options.toolbar,vie:this.vie})},_enableEdit:function(){this._setOption("state","edit");var widget=this,editableOptions={toolbarState:widget.options.toolbar,disabled:!1,vie:widget.vie,widgets:widget.options.editorWidgets,editors:widget.options.editorOptions,collectionWidgets:widget.options.collectionWidgets,localize:widget.options.localize,language:widget.options.language};widget.options.enableEditor&&(editableOptions.enableEditor=widget.options.enableEditor),widget.options.disableEditor&&(editableOptions.disableEditor=widget.options.disableEditor),jQuery("[about]",this.element).each(function(){var element=this;if(widget.options.highlight){var highlightEditable=function(event,options){if(!jQuery(options.element).is(":visible"))return;if(options.entityElement.get(0)!==element)return;options.element.stop(!0,!0),options.element.effect("highlight",{color:widget.options.highlightColor},3e3)};jQuery(this).bind("midgardeditableenableproperty",highlightEditable)}jQuery(this).bind("midgardeditabledisable",function(){jQuery(this).unbind("midgardeditableenableproperty",highlightEditable)}),widget.options.tags&&jQuery(this).bind("midgardeditableenable",function(event,options){if(event.target!==element)return;jQuery(this).midgardTags({vie:widget.vie,entityElement:options.entityElement,entity:options.instance,localize:widget.options.localize,language:widget.options.language})}),jQuery(this).midgardEditable(editableOptions)}),this._trigger("statechange",null,{state:"edit"})},_disableEdit:function(){var widget=this,editableOptions={disabled:!0,vie:widget.vie,editorOptions:widget.options.editorOptions,localize:widget.options.localize,language:widget.options.language};jQuery("[about]",this.element).each(function(){jQuery(this).midgardEditable(editableOptions),jQuery(this).removeClass("ui-state-disabled")}),this._setOption("state","browse"),this._trigger("statechange",null,{state:"browse"})}})}(jQuery),function(jQuery,undefined){jQuery.widget("Midgard.midgardCollectionAdd",{options:{editingWidgets:null,collection:null,model:null,definition:null,view:null,disabled:!1,vie:null,editableOptions:null,templates:{button:'<button class="btn"><i class="icon-<%= icon %>"></i> <%= label %></button>'}},_create:function(){this.addButtons=[];var widget=this;if(!widget.options.collection.localStorage)try{widget.options.collection.url=widget.options.model.url()}catch(e){window.console&&console.log(e)}widget.options.collection.bind("add",function(model){model.primaryCollection=widget.options.collection,widget.options.vie.entities.add(model),model.collection=widget.options.collection}),widget.options.collection.bind("add remove reset",widget.checkCollectionConstraints,widget),widget._bindCollectionView(widget.options.view)},_bindCollectionView:function(view){var widget=this;view.bind("add",function(itemView){itemView.$el.effect("slide",function(){widget._makeEditable(itemView)})})},_makeEditable:function(itemView){this.options.editableOptions.disabled=this.options.disabled,this.options.editableOptions.model=itemView.model,itemView.$el.midgardEditable(this.options.editableOptions)},_init:function(){if(this.options.disabled){this.disable();return}this.enable()},hideButtons:function(){_.each(this.addButtons,function(button){button.hide()})},showButtons:function(){_.each(this.addButtons,function(button){button.show()})},checkCollectionConstraints:function(){if(this.options.disabled)return;if(!this.options.view.canAdd()){this.hideButtons();return}if(!this.options.definition){this.showButtons();return}if(!this.options.definition.max||this.options.definition.max===-1){this.showButtons();return}if(this.options.collection.length<this.options.definition.max){this.showButtons();return}this.hideButtons()},enable:function(){var widget=this,addButton=jQuery(_.template(this.options.templates.button,{icon:"plus",label:this.options.editableOptions.localize("Add",this.options.editableOptions.language)})).button();addButton.addClass("midgard-create-add"),addButton.click(function(){widget.addItem(addButton)}),jQuery(widget.options.view.el).after(addButton),widget.addButtons.push(addButton),widget.checkCollectionConstraints()},disable:function(){_.each(this.addButtons,function(button){button.remove()}),this.addButtons=[]},_getTypeActions:function(options){var widget=this,actions=[];return _.each(this.options.definition.range,function(type){var nsType=widget.options.collection.vie.namespaces.uri(type);if(!widget.options.view.canAdd(nsType))return;actions.push({name:type,label:type,cb:function(){widget.options.collection.add({"@type":type},options)},className:"create-ui-btn"})}),actions},addItem:function(button,options){options===undefined&&(options={});var addOptions=_.extend({},options,{validate:!1}),itemData={};if(this.options.definition&&this.options.definition.range){if(this.options.definition.range.length!==1){jQuery("body").midgardNotifications("create",{bindTo:button,gravity:"L",body:this.options.editableOptions.localize("Choose type to add",this.options.editableOptions.language),timeout:0,actions:this._getTypeActions(addOptions)});return}itemData["@type"]=this.options.definition.range[0]}this.options.collection.add(itemData,addOptions)}})}(jQuery),function(jQuery,undefined){jQuery.widget("Midgard.midgardCollectionAddBetween",jQuery.Midgard.midgardCollectionAdd,{_bindCollectionView:function(view){var widget=this;view.bind("add",function(itemView){widget._makeEditable(itemView),widget._refreshButtons()}),view.bind("remove",function(){widget._refreshButtons()})},_refreshButtons:function(){var widget=this;window.setTimeout(function(){widget.disable(),widget.enable()},1)},prepareButton:function(index){var widget=this,addButton=jQuery(_.template(this.options.templates.button,{icon:"plus",label:""})).button();return addButton.addClass("midgard-create-add"),addButton.click(function(){widget.addItem(addButton,{at:index})}),addButton},enable:function(){var widget=this,firstAddButton=widget.prepareButton(0);jQuery(widget.options.view.el).prepend(firstAddButton),widget.addButtons.push(firstAddButton),jQuery.each(widget.options.view.entityViews,function(cid,view){var index=widget.options.collection.indexOf(view.model),addButton=widget.prepareButton(index+1);jQuery(view.el).append(addButton),widget.addButtons.push(addButton)}),this.checkCollectionConstraints()},disable:function(){var widget=this;jQuery.each(widget.addButtons,function(idx,button){button.remove()}),widget.addButtons=[]}})}(jQuery),function(jQuery,undefined){jQuery.widget("Midgard.midgardEditable",{options:{editables:[],collections:[],model:null,editors:{hallo:{widget:"halloWidget",options:{}}},widgets:{"default":"hallo"},collectionWidgets:{"default":"midgardCollectionAdd"},toolbarState:"full",vie:null,disabled:!1,localize:function(id,language){return window.midgardCreate.localize(id,language)},language:null},_create:function(){this.vie=this.options.vie;if(!this.options.model){var widget=this;this.vie.load({element:this.element}).from("rdfa").execute().done(function(entities){widget.options.model=entities[0]})}},_init:function(){if(this.options.disabled){this.disable();return}this.enable()},findEditableElements:function(callback){this.vie.service("rdfa").findPredicateElements(this.options.model.id,jQuery("[property]",this.element),!1).each(callback)},enable:function(){var widget=this;if(!this.options.model)return;this.findEditableElements(function(){return widget._enableProperty(jQuery(this))}),this._trigger("enable",null,{instance:this.options.model,entityElement:this.element});if(!this.vie.services.rdfa)return;_.each(this.vie.service("rdfa").views,function(view){if(view instanceof widget.vie.view.Collection&&widget.options.model===view.owner){var property=view.collection.predicate,collection=widget.enableCollection({model:widget.options.model,collection:view.collection,property:property,definition:widget.getAttributeDefinition(property),view:view,element:view.el,vie:widget.vie,editableOptions:widget.options});widget.options.collections.push(collection)}})},disable:function(){var widget=this;jQuery.each(this.options.editables,function(index,editable){widget.disableEditor({widget:widget,editable:editable,entity:widget.options.model,element:jQuery(this)})}),this.options.editables=[],jQuery.each(this.options.collections,function(index,collectionWidget){widget.disableCollection({widget:widget,model:widget.options.model,element:collectionWidget,vie:widget.vie,editableOptions:widget.options})}),this.options.collections=[],this._trigger("disable",null,{instance:this.options.model,entityElement:this.element})},getElementPredicate:function(element){return this.vie.service("rdfa").getElementPredicate(element)},_enableProperty:function(element){var widget=this,propertyName=this.getElementPredicate(element);if(!propertyName)return!0;if(this.options.model.get(propertyName)instanceof Array)return!0;var editable=this.enableEditor({widget:this,element:element,entity:this.options.model,property:propertyName,vie:this.vie,modified:function(content){var changedProperties={};changedProperties[propertyName]=content,widget.options.model.set(changedProperties,{silent:!0}),widget._trigger("changed",null,{property:propertyName,instance:widget.options.model,element:element,entityElement:widget.element})},activated:function(){widget._trigger("activated",null,{property:propertyName,instance:widget.options.model,element:element,entityElement:widget.element})},deactivated:function(){widget._trigger("deactivated",null,{property:propertyName,instance:widget.options.model,element:element,entityElement:widget.element})}});editable&&this._trigger("enableproperty",null,{editable:editable,property:propertyName,instance:this.options.model,element:element,entityElement:this.element}),this.options.editables.push(editable)},_editorName:function(data){if(this.options.widgets[data.property]!==undefined)return this.options.widgets[data.property];var propertyType="default",attributeDefinition=this.getAttributeDefinition(data.property);return attributeDefinition&&(propertyType=attributeDefinition.range[0]),this.options.widgets[propertyType]!==undefined?this.options.widgets[propertyType]:this.options.widgets["default"]},_editorWidget:function(editor){return this.options.editors[editor].widget},_editorOptions:function(editor){return this.options.editors[editor].options},getAttributeDefinition:function(property){var type=this.options.model.get("@type");if(!type)return;if(!type.attributes)return;return type.attributes.get(property)},enableEditor:function(data){var editorName=this._editorName(data);if(editorName===null)return;var editorWidget=this._editorWidget(editorName);data.editorOptions=this._editorOptions(editorName),data.toolbarState=this.options.toolbarState,data.disabled=!1;if(typeof jQuery(data.element)[editorWidget]!="function")throw new Error(editorWidget+" widget is not available");return jQuery(data.element)[editorWidget](data),jQuery(data.element).data("createWidgetName",editorWidget),jQuery(data.element)},disableEditor:function(data){var widgetName=jQuery(data.element).data("createWidgetName");data.disabled=!0,widgetName&&(jQuery(data.element)[widgetName](data),jQuery(data.element).removeClass("ui-state-disabled"))},collectionWidgetName:function(data){if(this.options.collectionWidgets[data.property]!==undefined)return this.options.collectionWidgets[data.property];var propertyType="default",attributeDefinition=this.getAttributeDefinition(data.property);return attributeDefinition&&(propertyType=attributeDefinition.range[0]),this.options.collectionWidgets[propertyType]!==undefined?this.options.collectionWidgets[propertyType]:this.options.collectionWidgets["default"]},enableCollection:function(data){var widgetName=this.collectionWidgetName(data);if(widgetName===null)return;data.disabled=!1;if(typeof jQuery(data.element)[widgetName]!="function")throw new Error(widgetName+" widget is not available");return jQuery(data.element)[widgetName](data),jQuery(data.element).data("createCollectionWidgetName",widgetName),jQuery(data.element)},disableCollection:function(data){var widgetName=jQuery(data.element).data("createCollectionWidgetName");if(widgetName===null)return;data.disabled=!0,widgetName&&(jQuery(data.element)[widgetName](data),jQuery(data.element).removeClass("ui-state-disabled"))}})}(jQuery),function(jQuery,undefined){jQuery.widget("Create.editWidget",{options:{disabled:!1,vie:null},enable:function(){this.element.attr("contenteditable","true")},disable:function(disable){this.element.attr("contenteditable","false")},_create:function(){this._registerWidget(),this._initialize()},_init:function(){if(this.options.disabled){this.disable();return}this.enable()},_initialize:function(){var self=this,before=this.element.html();this.element.bind("blur keyup paste",function(event){if(self.options.disabled)return;var current=jQuery(this).html();before!==current&&(before=current,self.options.modified(current))})},_registerWidget:function(){this.element.data("createWidgetName",this.widgetName)}})}(jQuery),function(jQuery,undefined){jQuery.widget("Create.alohaWidget",jQuery.Create.editWidget,{enable:function(){this._initialize(),this.options.disabled=!1},disable:function(){Aloha.jQuery(this.options.element.get(0)).mahalo(),this.options.disabled=!0},_initialize:function(){var options=this.options,editable,currentElement=Aloha.jQuery(options.element.get(0)).aloha();_.each(Aloha.editables,function(aloha){aloha.obj.get(0)===currentElement.get(0)&&(editable=aloha)});if(!editable)return;editable.vieEntity=options.entity,Aloha.bind("aloha-editable-activated",function(event,data){if(data.editable!==editable)return;options.activated()}),Aloha.bind("aloha-editable-deactivated",function(event,data){if(data.editable!==editable)return;options.deactivated()}),Aloha.bind("aloha-smart-content-changed",function(event,data){if(data.editable!==editable)return;if(!data.editable.isModified())return!0;options.modified(data.editable.getContents()),data.editable.setUnmodified()})}})}(jQuery),function(jQuery,undefined){jQuery.widget("Create.halloWidget",jQuery.Create.editWidget,{options:{editorOptions:{},disabled:!0,toolbarState:"full",vie:null,entity:null},enable:function(){jQuery(this.element).hallo({editable:!0}),this.options.disabled=!1},disable:function(){jQuery(this.element).hallo({editable:!1}),this.options.disabled=!0},_initialize:function(){jQuery(this.element).hallo(this.getHalloOptions());var self=this;jQuery(this.element).bind("halloactivated",function(event,data){self.options.activated()}),jQuery(this.element).bind("hallodeactivated",function(event,data){self.options.deactivated()}),jQuery(this.element).bind("hallomodified",function(event,data){self.options.modified(data.content),data.editable.setUnmodified()}),jQuery(document).bind("midgardtoolbarstatechange",function(event,data){if(data.display===self.options.toolbarState)return;self.options.toolbarState=data.display;var newOptions=self.getHalloOptions();self.element.hallo("changeToolbar",newOptions.parentElement,newOptions.toolbar,!0)})},getHalloOptions:function(){var defaults={plugins:{halloformat:{},halloblock:{},hallolists:{},hallolink:{},halloimage:{entity:this.options.entity}},buttonCssClass:"create-ui-btn-small",placeholder:"["+this.options.property+"]"};return typeof this.element.annotate=="function"&&this.options.vie.services.stanbol&&(defaults.plugins.halloannotate={vie:this.options.vie}),this.options.toolbarState==="full"?(defaults.parentElement=jQuery(".create-ui-toolbar-dynamictoolarea .create-ui-tool-freearea"),defaults.toolbar="halloToolbarFixed"):(defaults.parentElement="body",defaults.toolbar="halloToolbarContextual"),_.extend(defaults,this.options.editorOptions)}})}(jQuery),function(jQuery,undefined){var _midgardnotifications_active=[],MidgardNotification=function(parent,options){var _defaults={class_prefix:"midgardNotifications",timeout:3e3,auto_show:!0,body:"",bindTo:null,gravity:"T",effects:{onShow:function(item,cb){item.animate({opacity:"show"},600,cb)},onHide:function(item,cb){item.animate({opacity:"hide"},600,cb)}},actions:[],callbacks:{}},_config={},_classes={},_item=null,_id=null,_bind_target=null,_parent=parent,_story=null,base={constructor:function(options){_config=_.extend(_defaults,options||{}),_classes={container:_config.class_prefix+"-container",item:{wrapper:_config.class_prefix+"-item",arrow:_config.class_prefix+"-arrow",disregard:_config.class_prefix+"-disregard",content:_config.class_prefix+"-content",actions:_config.class_prefix+"-actions",action:_config.class_prefix+"-action"}},this._generate()},getId:function(){return _id},getElement:function(){return _item},_generate:function(){var _self=this,outer,inner,content=null;_item=outer=jQuery('<div class="'+_classes.item.wrapper+'-outer"/>'),outer.css({display:"none"}),inner=jQuery('<div class="'+_classes.item.wrapper+'-inner"/>'),inner.appendTo(outer);if(_config.bindTo){outer.addClass(_classes.item.wrapper+"-binded");var arrow=jQuery('<div class="'+_classes.item.arrow+'"/>');arrow.appendTo(outer)}else outer.addClass(_classes.item.wrapper+"-normal");content=jQuery('<div class="'+_classes.item.content+'"/>'),content.html(_config.body),content.appendTo(inner);if(_config.actions.length){var actions_holder=jQuery('<div class="'+_classes.item.actions+'"/>');actions_holder.appendTo(inner),jQuery.each(_config.actions,function(i,opts){var action=jQuery('<button name="'+opts.name+'" class="button-'+opts.name+'">'+opts.label+"</button>").button();action.bind("click",function(e){_story?opts.cb(e,_story,_self):opts.cb(e,_self)}),opts.className&&action.addClass(opts.className),actions_holder.append(action)})}_item.bind("click",function(e){_config.callbacks.onClick?_config.callbacks.onClick(e,_self):_story||_self.close()}),_config.auto_show&&this.show(),this._setPosition(),_id=_midgardnotifications_active.push(this),_parent.append(_item)},_calculatePositionForGravity:function(item,gravity,target,itemDimensions){item.find("."+_classes.item.arrow).addClass(_classes.item.arrow+"_"+gravity);switch(gravity){case"TL":return{left:target.left,top:target.top+target.height+"px"};case"TR":return{left:target.left+target.width-itemDimensions.width+"px",top:target.top+target.height+"px"};case"BL":return{left:target.left+"px",top:target.top-itemDimensions.height+"px"};case"BR":return{left:target.left+target.width-itemDimensions.width+"px",top:target.top-itemDimensions.height+"px"};case"LT":return{left:target.left+target.width+"px",top:target.top+"px"};case"LB":return{left:target.left+target.width+"px",top:target.top+target.height-itemDimensions.height+"px"};case"RT":return{left:target.left-itemDimensions.width+"px",top:target.top+"px"};case"RB":return{left:target.left-itemDimensions.width+"px",top:target.top+target.height-itemDimensions.height+"px"};case"T":return{left:target.left+target.width/2-itemDimensions.width/2+"px",top:target.top+target.height+"px"};case"R":return{left:target.left-itemDimensions.width+"px",top:target.top+target.height/2-itemDimensions.height/2+"px"};case"B":return{left:target.left+target.width/2-itemDimensions.width/2+"px",top:target.top-itemDimensions.height+"px"};case"L":return{left:target.left+target.width+"px",top:target.top+target.height/2-itemDimensions.height/2+"px"}}},_isFixed:function(element){if(element===document)return!1;if(element.css("position")==="fixed")return!0;var parentElement=element.offsetParent();return parentElement.get(0)===element.get(0)?!1:this._isFixed(parentElement)},_setPosition:function(){var pos;if(_config.bindTo){var itemDimensions={width:_item.width()?_item.width():280,height:_item.height()?_item.height():109};_bind_target=jQuery(_config.bindTo);var properties={},targetDimensions={width:_bind_target.outerWidth(),height:_bind_target.outerHeight()};this._isFixed(_bind_target)?(properties.position="fixed",targetDimensions.left=_bind_target.offset().left,targetDimensions.top=_bind_target.position().top):(properties.position="absolute",targetDimensions.left=_bind_target.offset().left,targetDimensions.top=_bind_target.offset().top),pos=this._calculatePositionForGravity(_item,_config.gravity,targetDimensions,itemDimensions),properties.top=pos.top,properties.left=pos.left,_item.css(properties);return}_config.position||(_config.position="top right");var marginTop=jQuery(".create-ui-toolbar-wrapper").outerHeight(!0)+6;pos={position:"fixed"};var item,activeHeight=function(items){var total_height=0;return jQuery.each(items,function(i,item){if(!item)return;total_height+=item.getElement().height()}),total_height};_config.position.match(/top/)&&(pos.top=marginTop+activeHeight(_midgardnotifications_active)+"px"),_config.position.match(/bottom/)&&(pos.bottom=_midgardnotifications_active.length-1*item.height()+item.height()+10+"px"),_config.position.match(/right/)&&(pos.right="20px"),_config.position.match(/left/)&&(pos.left="20px"),_item.css(pos)},show:function(){var self=this,w_t,w_b,b_b,b_t,e_t,e_h;_config.callbacks.beforeShow&&_config.callbacks.beforeShow(self);if(_config.bindTo){var _bind_target=jQuery(_config.bindTo);w_t=jQuery(window).scrollTop(),w_b=jQuery(window).scrollTop()+jQuery(window).height(),b_t=parseFloat(_item.offset().top,10),e_t=_bind_target.offset().top,e_h=_bind_target.outerHeight(),e_t<b_t&&(b_t=e_t),b_b=parseFloat(_item.offset().top,10)+_item.height(),e_t+e_h>b_b&&(b_b=e_t+e_h)}_config.timeout>0&&!_config.actions.length&&window.setTimeout(function(){self.close()},_config.timeout),_config.bindTo&&(b_t<w_t||b_t>w_b)||b_b<w_t||b_b>w_b?jQuery("html, body").stop().animate({scrollTop:b_t},500,"easeInOutExpo",function(){_config.effects.onShow(_item,function(){_config.callbacks.afterShow&&_config.callbacks.afterShow(self)})}):_config.effects.onShow(_item,function(){_config.callbacks.afterShow&&_config.callbacks.afterShow(self)})},close:function(){var self=this;_config.callbacks.beforeClose&&_config.callbacks.beforeClose(self),_config.effects.onHide(_item,function(){_config.callbacks.afterClose&&_config.callbacks.afterClose(self),self.destroy()})},destroy:function(){var self=this;jQuery.each(_midgardnotifications_active,function(i,item){item&&item.getId()==self.getId()&&delete _midgardnotifications_active[i]}),jQuery(_item).remove()},setStory:function(story){_story=story},setName:function(name){_item.addClass(_classes.item.wrapper+"-custom-"+name),this.name=name}};return base.constructor(options),delete base.constructor,base},MidgardNotificationStoryline=function(options,items){var _defaults={},_config={},_storyline={},_current_notification={},_previous_item_name=null,_first_item_name=null,_last_item_name=null,_current_item=null,base={constructor:function(options){_config=_.extend(_defaults,options||{})},setStoryline:function(items){var default_structure={content:"",actions:[],show_actions:!0,notification:{},back:null,back_label:null,forward:null,forward_label:null,beforeShow:null,afterShow:null,beforeClose:null,afterClose:null};_storyline={},_current_item=null,_previous_item_name=null,_first_item_name=null,_last_item_name=null;var self=this;return jQuery.each(items,function(name,it){var item=jQuery.extend({},default_structure,it);item.name=name;var notification=jQuery.extend({},default_structure.notification,it.notification||{});notification.body=item.content,notification.auto_show=!1,item.actions.length&&(notification.delay=0),notification.callbacks={beforeShow:function(notif){item.beforeShow&&item.beforeShow(notif,self)},afterShow:function(notif){item.afterShow&&item.afterShow(notif,self)},beforeClose:function(notif){item.beforeClose&&item.beforeClose(notif,self)},afterClose:function(notif){item.afterClose&&item.afterClose(notif,self),_previous_item_name=notif.name}},notification.actions=[];if(item.show_actions){if(item.back){var back_label=item.back_label;back_label||(back_label="Back"),notification.actions.push({name:"back",label:back_label,cb:function(e,story,notif){story.previous()}})}if(item.forward){var forward_label=item.forward_label;forward_label||(forward_label="Back"),notification.actions.push({name:"forward",label:forward_label,cb:function(e,story,notif){story.next()}})}item.actions.length&&jQuery.each(item.actions,function(i,act){notification.actions.push(item.actions[i])})}_first_item_name||(_first_item_name=name),_last_item_name=name,item.notification=notification,_storyline[name]=item}),_storyline},start:function(){this._showNotification(_storyline[_first_item_name])},stop:function(){_current_item.close(),_current_item=null,_previous_item_name=null},next:function(){_current_item.close();if(_storyline[_current_item.name].forward){var next_item=_storyline[_current_item.name].forward;this._showNotification(_storyline[next_item])}else this._showNotification(_storyline[_last_item_name])},previous:function(){if(_previous_item_name){_current_item.close();if(_storyline[_current_item.name].back){var prev_item=_storyline[_current_item.name].back;this._showNotification(_storyline[prev_item])}else this._showNotification(_storyline[_previous_item_name])}else this.stop()},_showNotification:function(item){return _current_item=new MidgardNotification(jQuery("body"),item.notification),_current_item.setStory(this),_current_item.setName(item.name),_current_item.show(),_current_item}};return base.constructor(options),delete base.constructor,items&&base.setStoryline(items),base},_createTutorialStoryline={start:{content:"Welcome to CreateJS tutorial!",forward:"toolbar_toggle",forward_label:"Start tutorial",actions:[{name:"quit",label:"Quit",cb:function(a,story,notif){story.stop()}}]},toolbar_toggle:{content:"This is the CreateJS toolbars toggle button.<br />You can hide and show the full toolbar by clicking here.<br />Try it now.",forward:"edit_button",show_actions:!1,afterShow:function(notification,story){jQuery("body").bind("midgardtoolbarstatechange",function(event,options){options.display=="full"&&(story.next(),jQuery("body").unbind("midgardtoolbarstatechange"))})},notification:{bindTo:"#midgard-bar-hidebutton",timeout:0,gravity:"TL"}},edit_button:{content:"This is the edit button.<br />Try it now.",show_actions:!1,afterShow:function(notification,story){jQuery("body").bind("midgardcreatestatechange",function(event,options){options.state=="edit"&&(story.next(),jQuery("body").unbind("midgardcreatestatechange"))})},notification:{bindTo:".ui-button[for=midgardcreate-edit]",timeout:0,gravity:"TL"}},end:{content:"Thank you for watching!<br />Happy content editing times await you!"}};jQuery.widget("Midgard.midgardNotifications",{options:{notification_defaults:{class_prefix:"midgardNotifications",position:"top right"}},_create:function(){this.classes={container:this.options.notification_defaults.class_prefix+"-container"},jQuery("."+this.classes.container,this.element).length?(this.container=jQuery("."+this.classes.container,this.element),this._parseFromDOM()):(this.container=jQuery('<div class="'+this.classes.container+'" />'),this.element.append(this.container))},destroy:function(){this.container.remove(),jQuery.Widget.prototype.destroy.call(this)},_init:function(){},_parseFromDOM:function(path){},showStory:function(options,items){var story=new MidgardNotificationStoryline(options,items);return story.start(),story},create:function(options){options=jQuery.extend({},this.options.notification_defaults,options||{});var item=new MidgardNotification(this.container,options);return item.show(),item},showTutorial:function(){this.showStory({},_createTutorialStoryline)}})}(jQuery),function(jQuery,undefined){jQuery.widget("Midgard.midgardStorage",{saveEnabled:!0,options:{localStorage:!1,removeLocalstorageOnIgnore:!0,vie:null,url:"",autoSave:!1,autoSaveInterval:5e3,saveReferencedNew:!1,saveReferencedChanged:!1,editableNs:"midgardeditable",editSelector:"#midgardcreate-edit a",saveSelector:"#midgardcreate-save",localize:function(id,language){return window.midgardCreate.localize(id,language)},language:null},_create:function(){var widget=this;this.changedModels=[],window.localStorage&&(this.options.localStorage=!0),this.vie=this.options.vie,this.vie.entities.bind("add",function(model){model.url=widget.options.url,model.toJSON=model.toJSONLD}),jQuery(widget.options.saveSelector).click(function(){widget.saveRemote({success:function(){jQuery(widget.options.saveSelector).button({disabled:!0})},error:function(){}})}),widget._bindEditables(),widget.options.autoSave&&widget._autoSave()},_autoSave:function(){var widget=this;widget.saveEnabled=!0;var doAutoSave=function(){if(!widget.saveEnabled)return;if(widget.changedModels.length===0)return;widget.saveRemote({success:function(){jQuery(widget.options.saveSelector).button({disabled:!0})},error:function(){},silent:!0})},timeout=window.setInterval(doAutoSave,widget.options.autoSaveInterval);this.element.bind("startPreventSave",function(){timeout&&(window.clearInterval(timeout),timeout=null),widget.disableSave()}),this.element.bind("stopPreventSave",function(){timeout||(timeout=window.setInterval(doAutoSave,widget.options.autoSaveInterval)),widget.enableSave()})},enableSave:function(){this.saveEnabled=!0},disableSave:function(){this.saveEnabled=!1},_bindEditables:function(){var widget=this;this.restorables=[];var restorer;widget.element.bind(widget.options.editableNs+"changed",function(event,options){_.indexOf(widget.changedModels,options.instance)===-1&&widget.changedModels.push(options.instance),widget._saveLocal(options.instance),jQuery(widget.options.saveSelector).button({disabled:!1})}),widget.element.bind(widget.options.editableNs+"disable",function(event,options){widget._restoreLocal(options.instance),jQuery(widget.options.saveSelector).hide()}),widget.element.bind(widget.options.editableNs+"enable",function(event,options){jQuery(widget.options.saveSelector).button({disabled:!0}),jQuery(widget.options.saveSelector).show(),options.instance._originalAttributes||(options.instance._originalAttributes=_.clone(options.instance.attributes)),!options.instance.isNew()&&widget._checkLocal(options.instance)&&widget.restorables.push(options.instance)}),widget.element.bind("midgardcreatestatechange",function(event,options){if(options.state==="browse"||widget.restorables.length===0){widget.restorables=[],restorer&&restorer.close();return}restorer=widget.checkRestore()}),widget.element.bind("midgardstorageloaded",function(event,options){_.indexOf(widget.changedModels,options.instance)===-1&&widget.changedModels.push(options.instance),jQuery(widget.options.saveSelector).button({disabled:!1})})},checkRestore:function(){var widget=this;if(widget.restorables.length===0)return;var message;widget.restorables.length===1?message=_.template(widget.options.localize("localModification",widget.options.language),{label:widget.restorables[0].getSubjectUri()}):message=_.template(widget.options.localize("localModifications",widget.options.language),{number:widget.restorables.length});var restorer=jQuery("body").midgardNotifications("create",{bindTo:widget.options.editSelector,gravity:"TR",body:message,timeout:0,actions:[{name:"restore",label:widget.options.localize("Restore",widget.options.language),cb:function(){_.each(widget.restorables,function(instance){widget._readLocal(instance)}),widget.restorables=[]},className:"create-ui-btn"},{name:"ignore",label:widget.options.localize("Ignore",widget.options.language),cb:function(event,notification){widget.options.removeLocalstorageOnIgnore&&_.each(widget.restorables,function(instance){widget._removeLocal(instance)}),notification.close(),widget.restorables=[]},className:"create-ui-btn"}]});return restorer},saveRemote:function(options){var widget=this;if(widget.changedModels.length===0)return;widget._trigger("save",null,{models:widget.changedModels});var notification_msg,needed=widget.changedModels.length;needed>1?notification_msg=_.template(widget.options.localize("saveSuccessMultiple",widget.options.language),{number:needed}):notification_msg=_.template(widget.options.localize("saveSuccess",widget.options.language),{label:widget.changedModels[0].getSubjectUri()}),widget.disableSave(),_.each(widget.changedModels,function(model){_.each(model.attributes,function(value,property){if(!value||!value.isCollection)return;value.each(function(referencedModel){if(widget.changedModels.indexOf(referencedModel)!==-1)return;if(referencedModel.isNew()&&widget.options.saveReferencedNew)return referencedModel.save();if(referencedModel.hasChanged()&&widget.options.saveReferencedChanged)return referencedModel.save()})}),model.save(null,_.extend({},options,{success:function(){model._originalAttributes=_.clone(model.attributes),widget._removeLocal(model),window.setTimeout(function(){widget.changedModels.splice(widget.changedModels.indexOf(model),1)},0),needed--,needed<=0&&(widget._trigger("saved",null,{}),options.success(),jQuery("body").midgardNotifications("create",{body:notification_msg}),widget.enableSave())},error:function(m,err){options.error(),jQuery("body").midgardNotifications("create",{body:_.template(widget.options.localize("saveError",widget.options.language),{error:err.responseText||""}),timeout:0}),widget._trigger("error",null,{instance:model})}}))})},_saveLocal:function(model){if(!this.options.localStorage)return;if(model.isNew()){if(!model.primaryCollection)return;return this._saveLocalReferences(model.primaryCollection.subject,model.primaryCollection.predicate,model)}window.localStorage.setItem(model.getSubjectUri(),JSON.stringify(model.toJSONLD()))},_getReferenceId:function(model,property){return model.id+":"+property},_saveLocalReferences:function(subject,predicate,model){if(!this.options.localStorage)return;if(!subject||!predicate)return;var widget=this,identifier=subject+":"+predicate,json=model.toJSONLD();if(window.localStorage.getItem(identifier)){var referenceList=JSON.parse(window.localStorage.getItem(identifier)),index=_.pluck(referenceList,"@").indexOf(json["@"]);index!==-1?referenceList[index]=json:referenceList.push(json),window.localStorage.setItem(identifier,JSON.stringify(referenceList));return}window.localStorage.setItem(identifier,JSON.stringify([json]))},_checkLocal:function(model){if(!this.options.localStorage)return!1;var local=window.localStorage.getItem(model.getSubjectUri());return local?!0:!1},_readLocal:function(model){if(!this.options.localStorage)return;var local=window.localStorage.getItem(model.getSubjectUri());if(!local)return;model._originalAttributes||(model._originalAttributes=_.clone(model.attributes));var parsed=JSON.parse(local),entity=this.vie.entities.addOrUpdate(parsed,{overrideAttributes:!0});this._trigger("loaded",null,{instance:entity})},_readLocalReferences:function(model,property,collection){if(!this.options.localStorage)return;var identifier=this._getReferenceId(model,property),local=window.localStorage.getItem(identifier);if(!local)return;collection.add(JSON.parse(local))},_restoreLocal:function(model){var widget=this;if(!model)return;_.each(model.attributes,function(attributeValue,property){if(attributeValue instanceof widget.vie.Collection){var removables=[];attributeValue.forEach(function(model){model.isNew()&&removables.push(model)}),attributeValue.remove(removables)}});if(!model.changedAttributes()){model._originalAttributes&&model.set(model._originalAttributes);return}model.set(model.previousAttributes())},_removeLocal:function(model){if(!this.options.localStorage)return;window.localStorage.removeItem(model.getSubjectUri())}})}(jQuery),function(jQuery,undefined){jQuery.widget("Midgard.midgardWorkflows",{options:{url:function(model){},templates:{button:'<button class="create-ui-btn" id="<%= id %>"><%= label %></button>'},renderers:{button:function(model,workflow,action_cb,final_cb){var button_id="midgardcreate-workflow_"+workflow.get("name"),html=jQuery(_.template(this.options.templates.button,{id:button_id,label:workflow.get("label")})).button();return html.bind("click",function(evt){action_cb(model,workflow,final_cb)}),html}},action_types:{backbone_save:function(model,workflow,callback){var copy_of_url=model.url,original_model=model.clone();original_model.url=copy_of_url;var action=workflow.get("action");action.url&&(model.url=action.url),original_model.save(null,{success:function(m){model.url=copy_of_url,model.change(),callback(null,model)},error:function(m,err){model.url=copy_of_url,model.change(),callback(err,model)}})},backbone_destroy:function(model,workflow,callback){var copy_of_url=model.url,original_model=model.clone();original_model.url=copy_of_url;var action=workflow.get("action");action.url&&(model.url=action.url),model.destroy({success:function(m){model.url=copy_of_url,model.change(),callback(null,m)},error:function(m,err){model.url=copy_of_url,model.change(),callback(err,model)}})},http:function(model,workflow,callback){var action=workflow.get("action");if(!action.url)return callback("No action url defined!");var wf_opts={};action.http&&(wf_opts=action.http);var ajax_options=jQuery.extend({url:action.url,type:"POST",data:model.toJSON(),success:function(){model.fetch({success:function(model){callback(null,model)},error:function(model,err){callback(err,model)}})}},wf_opts);jQuery.ajax(ajax_options)}}},_init:function(){this._renderers={},this._action_types={},this._parseRenderersAndTypes(),this._last_instance=null,this.ModelWorkflowModel=Backbone.Model.extend({defaults:{name:"",label:"",type:"button",action:{type:"backbone_save"}}}),this.workflows={};var widget=this;jQuery(this.element).bind("midgardeditableactivated",function(event,options){widget._fetchWorkflows(options.instance)})},_fetchWorkflows:function(model){var widget=this;if(model.isNew()){widget._trigger("changed",null,{instance:model,workflows:[]});return}if(widget._last_instance==model){widget.workflows[model.cid]&&widget._trigger("changed",null,{instance:model,workflows:widget.workflows[model.cid]});return}widget._last_instance=model;if(widget.workflows[model.cid]){widget._trigger("changed",null,{instance:model,workflows:widget.workflows[model.cid]});return}if(widget.options.url)widget._fetchModelWorkflows(model);else{var flows=new(widget._generateCollectionFor(model))([],{});widget._trigger("changed",null,{instance:model,workflows:flows})}},_parseRenderersAndTypes:function(){var widget=this;jQuery.each(this.options.renderers,function(k,v){widget.setRenderer(k,v)}),jQuery.each(this.options.action_types,function(k,v){widget.setActionType(k,v)})},setRenderer:function(name,callbacks){this._renderers[name]=callbacks},getRenderer:function(name){return this._renderers[name]?this._renderers[name]:!1},setActionType:function(name,callback){this._action_types[name]=callback},getActionType:function(name){return this._action_types[name]},prepareItem:function(model,workflow,final_cb){var widget=this,renderer=this.getRenderer(workflow.get("type")),action_type_cb=this.getActionType(workflow.get("action").type);return renderer.call(this,model,workflow,action_type_cb,function(err,m){delete widget.workflows[model.cid],widget._last_instance=null,workflow.get("action").type!=="backbone_destroy"&&widget._fetchModelWorkflows(model),final_cb(err,m)})},_generateCollectionFor:function(model){var collectionSettings={model:this.ModelWorkflowModel};return this.options.url&&(collectionSettings.url=this.options.url(model)),Backbone.Collection.extend(collectionSettings)},_fetchModelWorkflows:function(model){if(model.isNew())return;var widget=this;widget.workflows[model.cid]=new(this._generateCollectionFor(model))([],{}),widget.workflows[model.cid].fetch({success:function(collection){widget.workflows[model.cid].reset(collection.models),widget._trigger("changed",null,{instance:model,workflows:widget.workflows[model.cid]})},error:function(model,err){}})}})}(jQuery),window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.cs={Save:"Uložit",Saving:"Probíhá ukládání",Cancel:"Zrušit",Edit:"Upravit",localModification:'Blok "<%= label %>" obsahuje lokální změny',localModifications:"<%= number %> bloků na této stránce má lokální změny",Restore:"Aplikovat lokální změny",Ignore:"Zahodit lokální změny",saveSuccess:'Blok "<%= label %>" byl úspěšně uložen',saveSuccessMultiple:"<%= number %> bloků bylo úspěšně uloženo",saveError:"Při ukládání došlo k chybě<br /><%= error %>","Item tags":"Štítky bloku","Suggested tags":"Navrhované štítky",Tags:"Štítky","add a tag":"Přidat štítek",Add:"Přidat","Choose type to add":"Vyberte typ k přidání"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.da={Save:"Gem",Saving:"Gemmer",Cancel:"Annullér",Edit:"Rediger",localModification:'Element "<%= label %>" har lokale ændringer',localModifications:"<%= number %> elementer på denne side har lokale ændringer",Restore:"Gendan",Ignore:"Ignorer",saveSuccess:'Element "<%= label %>" er gemt',saveSuccessMultiple:"<%= number %> elementer er gemt",saveError:"Der opstod en fejl under lagring<br /><%= error %>","Item tags":"Element tags","Suggested tags":"Foreslåede tags",Tags:"Tags","add a tag":"tilføj et tag",Add:"Tilføj","Choose type to add":"Vælg type der skal tilføjes"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.de={Save:"Speichern",Saving:"Speichert",Cancel:"Abbrechen",Edit:"Bearbeiten",localModification:'Das Dokument "<%= label %>" auf dieser Seite hat lokale Änderungen',localModifications:"<%= number %> Dokumente auf dieser Seite haben lokale Änderungen",Restore:"Wiederherstellen",Ignore:"Ignorieren",saveSuccess:'Dokument "<%= label %>" erfolgreich gespeichert',saveSuccessMultiple:"<%= number %> Dokumente erfolgreich gespeichert",saveError:"Fehler beim Speichern<br /><%= error %>","Item tags":"Schlagwörter des Dokuments","Suggested tags":"Schlagwortvorschläge",Tags:"Schlagwörter","add a tag":"Neues Schlagwort",Add:"Hinzufügen","Choose type to add":"Typ zum Hinzufügen wählen"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.en={Save:"Save",Saving:"Saving",Cancel:"Cancel",Edit:"Edit",localModification:'Item "<%= label %>" has local modifications',localModifications:"<%= number %> items on this page have local modifications",Restore:"Restore",Ignore:"Ignore",saveSuccess:'Item "<%= label %>" saved successfully',saveSuccessMultiple:"<%= number %> items saved successfully",saveError:"Error occurred while saving<br /><%= error %>","Item tags":"Item tags","Suggested tags":"Suggested tags",Tags:"Tags","add a tag":"add a tag",Add:"Add","Choose type to add":"Choose type to add"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.es={Save:"Guardar",Saving:"Guardando",Cancel:"Cancelar",Edit:"Editar",localModification:'El elemento "<%= label %>" tiene modificaciones locales',localModifications:"<%= number %> elementos en la página tienen modificaciones locales",Restore:"Restaurar",Ignore:"Ignorar",saveSuccess:'El elemento "<%= label %>" se guardó exitosamente',saveSuccessMultiple:"<%= number %> elementos se guardaron exitosamente",saveError:"Ha ocurrido un error cuando se guardaban los datos<br /><%= error %>","Item tags":"Etiquetas de los elementos","Suggested tags":"Etiquetas sugeridas",Tags:"Etiquetas","add a tag":"añadir una etiqueta",Add:"Añadir","Choose type to add":"Escoge el tipo a añadir"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.fi={Save:"Tallenna",Saving:"Tallennetaan",Cancel:"Peruuta",Edit:"Muokkaa",localModification:'Dokumentilla "<%= label %>" on paikallisia muutoksia',localModifications:"<%= number %> dokumenttia sivulla omaa paikallisia muutoksia",Restore:"Palauta",Ignore:"Poista",saveSuccess:'Dokumentti "<%= label %>" tallennettu',saveSuccessMultiple:"<%= number %> dokumenttia tallennettu",saveError:"Virhe tallennettaessa<br /><%= error %>","Item tags":"Avainsanat","Suggested tags":"Ehdotukset",Tags:"Avainsanat","add a tag":"lisää avainsana",Add:"Lisää","Choose type to add":"Mitä haluat lisätä?"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.fr={Save:"Sauver",Saving:"En cours",Cancel:"Annuler",Edit:"Editer",localModification:'Objet "<%= label %>" sur cette page ont des modifications locales',localModifications:"<%= number %> élements sur cette page ont des modifications locales",Restore:"Récupérer",Ignore:"Ignorer",saveSuccess:'"<%= label %>" est sauvegardé avec succès',saveSuccessMultiple:"<%= number %> éléments ont été sauvegardé avec succès",saveError:"Une erreur est survenue durant la sauvegarde:<br /><%= error %>","Item tags":"Tags des objets","Suggested tags":"Tags suggérés",Tags:"Tags","add a tag":"ajouter un tag",Add:"Ajouter","Choose type to add":"Choisir le type à ajouter"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.it={Save:"Salva",Saving:"Salvataggio",Cancel:"Cancella",Edit:"Modifica",localModification:'Articolo "<%= label %>" in questa pagina hanno modifiche locali',localModifications:"<%= number %> articoli in questa pagina hanno modifiche locali",Restore:"Ripristina",Ignore:"Ignora",saveSuccess:'Articolo "<%= label %>" salvato con successo',saveSuccessMultiple:"<%= number %> articoli salvati con successo",saveError:"Errore durante il salvataggio<br /><%= error %>","Item tags":"Tags articolo","Suggested tags":"Tags suggerite",Tags:"Tags","add a tag":"Aggiungi una parola chiave",Add:"Aggiungi","Choose type to add":"Scegli il tipo da aggiungere"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.nl={Save:"Opslaan",Saving:"Bezig met opslaan",Cancel:"Annuleren",Edit:"Bewerken",localModification:'Items "<%= label %>" op de pagina heeft lokale wijzigingen',localModifications:"<%= number %> items op de pagina hebben lokale wijzigingen",Restore:"Herstellen",Ignore:"Negeren",saveSuccess:'Item "<%= label %>" succesvol opgeslagen',saveSuccessMultiple:"<%= number %> items succesvol opgeslagen",saveError:"Fout opgetreden bij het opslaan<br /><%= error %>","Item tags":"Item tags","Suggested tags":"Tag suggesties",Tags:"Tags","add a tag":"tag toevoegen",Add:"Toevoegen","Choose type to add":"Kies type om toe te voegen"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.no={Save:"Lagre",Saving:"Lagrer",Cancel:"Avbryt",Edit:"Rediger",localModification:'Element "<%= label %>" på denne siden er modifisert lokalt',localModifications:"<%= number %> elementer på denne siden er modifisert lokalt",Restore:"Gjenopprett",Ignore:"Ignorer",saveSuccess:'Element "<%= label %>" ble lagret',saveSuccessMultiple:"<%= number %> elementer ble lagret",saveError:"En feil oppstod under lagring<br /><%= error %>","Item tags":"Element-tagger","Suggested tags":"Anbefalte tagger",Tags:"Tagger","add a tag":"legg til tagg",Add:"Legg til","Choose type to add":"Velg type å legge til"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.pl={Save:"Zapisz",Saving:"Zapisuję",Cancel:"Anuluj",Edit:"Edytuj",localModification:'Artykuł "<%= label %>" posiada lokalne modyfikacje',localModifications:"<%= number %> artykułów na tej stronie posiada lokalne modyfikacje",Restore:"Przywróć",Ignore:"Ignoruj",saveSuccess:'Artykuł "<%= label %>" został poprawnie zapisany',saveSuccessMultiple:"<%= number %> artykułów zostało poprawnie zapisanych",saveError:"Wystąpił błąd podczas zapisywania<br /><%= error %>","Item tags":"Tagi artykułów","Suggested tags":"Sugerowane tagi",Tags:"Tagi","add a tag":"dodaj tag",Add:"Dodaj","Choose type to add":"Wybierz typ do dodania"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.pt_BR={Save:"Salvar",Saving:"Salvando",Cancel:"Cancelar",Edit:"Editar",localModification:'Item "<%= label %>" nesta página possuem modificações locais',localModifications:"<%= number %> itens nesta página possuem modificações locais",Restore:"Restaurar",Ignore:"Ignorar",saveSuccess:'Item "<%= label %>" salvo com sucesso',saveSuccessMultiple:"<%= number %> itens salvos com sucesso",saveError:"Erro ocorrido ao salvar<br /><%= error %>","Item tags":"Tags de item","Suggested tags":"Tags sugeridas",Tags:"Tags","add a tag":"adicionar uma tag",Add:"Adicionar","Choose type to add":"Selecione o tipo para adicionar"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.locale===undefined&&(window.midgardCreate.locale={}),window.midgardCreate.locale.ru={Save:"Сохранить",Saving:"Сохраняю",Cancel:"Отмена",Edit:"Редактировать",localModification:'В запись "<%= label %>" внесены несохранённые изменения',localModifications:"В записи на этой странице (<%= number %> шт.) внесены несохранённые изменения",Restore:"Восстановить",Ignore:"Игнорировать",saveSuccess:'Запись "<%= label %>" была успешно сохранена',saveSuccessMultiple:" Записи (<%= number %> шт.) были успешно сохранены",saveError:"Во время сохранения произошла ошибка<br /><%= error %>","Item tags":"Теги записей","Suggested tags":"Предлагаемые теги",Tags:"Теги","add a tag":"добавить тег",Add:"Добавить","Choose type to add":"Выбрать тип для добавления"},window.midgardCreate===undefined&&(window.midgardCreate={}),window.midgardCreate.localize=function(id,language){return window.midgardCreate.locale?window.midgardCreate.locale[language]&&window.midgardCreate.locale[language][id]?window.midgardCreate.locale[language][id]:window.midgardCreate.locale.en[id]?window.midgardCreate.locale.en[id]:id:id},define("createjs",function(){}),define("create/collectionWidgets/jquery.typo3.collectionWidget",["jquery","jquery-ui","createjs"],function($){(function($,undefined){$.widget("typo3.typo3CollectionWidget",$.Midgard.midgardCollectionAddBetween,{_create:function(){this.options.model.url=function(){},this._super()},enable:function(){this.addHandles()},addHandles:function(){T3.Content.UI.Util.AddContentElementHandleBars($(this.options.view.el),0,this,!0),_.each(this.options.collection.models,function(entity,iterator){var id=entity.id.substring(1,entity.id.length-1);T3.Content.UI.Util.AddContentElementHandleBars($('[about="'+id+'"]').first(),iterator+1,this,!1),T3.Content.UI.Util.AddNotInlineEditableOverlay($('[about="'+id+'"]').first(),entity)},this)}})})($)}),define("create/typo3MidgardEditable",["jquery","jquery-ui","createjs"],function($){$.widget("typo3.midgardEditable",$.Midgard.midgardEditable,{findEditableElements:function(callback){this.vie.service("rdfa").findPredicateElements(this.options.model.id,$(".t3-inline-editable[property]:not(script)",this.element),!1).each(callback)}})}),define("emberjs/dictionary-object",["emberjs"],function(Ember){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("emberjs/dictionary-object");var DictionaryObject=Ember.Object.extend({setUnknownProperty:function(key,value){this[key]=value,this.addObserver(key,this,"anyPropertyChanged"),this.anyPropertyChanged(this,key)},anyPropertyChanged:function(object,propertyName){this.propertyWillChange("@any"),this.propertyDidChange("@any")}});return DictionaryObject.reopenClass({create:function(properties){var instance=Ember.Object.create.apply(DictionaryObject,arguments),key;for(key in properties)instance.addObserver(key,instance,"anyPropertyChanged");return instance}}),DictionaryObject}),define("vie/entity",["jquery","vie/instance","emberjs","emberjs/dictionary-object"],function($,vieInstance,Ember,DictionaryObject){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("vie/entity");var Entity=Ember.Object.extend({$element:null,modified:!1,publishable:!1,status:"",_vieEntity:null,_onStateChange:function(){this.get("modified")?this.set("status","modified"):this.get("publishable")?this.set("status","publishable"):this.set("status","")}.observes("publishable","modified"),_applyHiddenClass:function(){this.getPath("attributes._hidden")?this.get("$element").addClass("t3-contentelement-hidden"):this.get("$element").removeClass("t3-contentelement-hidden")}.observes("typo3:_hidden"),contentType:function(){return Entity.extractContentTypeFromVieEntity(this.get("_vieEntity"))}.property("_vieEntity"),init:function(){var that=this;this.set("modified",!$.isEmptyObject(that.get("_vieEntity").changed)),that.set("publishable",that.get("_vieEntity").get(T3.ContentModule.TYPO3_NAMESPACE+"__workspacename")!=="live");var $entityElement=vieInstance.service("rdfa").getElementBySubject(this.get("_vieEntity").getSubject(),jQuery(document));$entityElement.bind("midgardeditablechanged",function(event,data){that.set("modified",!$.isEmptyObject(that.get("_vieEntity").changed))}),this.get("_vieEntity").on("change",function(){that.set("modified",!$.isEmptyObject(that.get("_vieEntity").changed)),that.set("publishable",that.get("_vieEntity").get(T3.ContentModule.TYPO3_NAMESPACE+"__workspacename")!=="live")}),this.set("$element",$entityElement)},attributes:function(k,v){if(arguments.length==1)return Entity.extractAttributesFromVieEntity(this.get("_vieEntity"))}.property("_vieEntity"),setAttribute:function(key,value){var attributeName="typo3:"+key;this.propertyWillChange(attributeName),this.get("_vieEntity").set(attributeName,value),this.propertyDidChange(attributeName)},nodePath:function(){var subject=this.get("_vieEntity").getSubject();return subject.substring(1,subject.length-1)}.property("_vieEntity").cacheable(),contentTypeSchema:function(){return T3.Configuration.Schema[this.get("contentType")]}.property().cacheable()});return Entity.reopenClass({extractAttributesFromVieEntity:function(vieEntity,filterFn){var cleanAttributes={};return _.each(vieEntity.attributes,function(value,subject){var property=vieEntity.fromReference(subject);if(property.indexOf(T3.ContentModule.TYPO3_NAMESPACE)===0){property=property.replace(T3.ContentModule.TYPO3_NAMESPACE,"");if(!filterFn||filterFn(property,value))cleanAttributes[property]=value}}),cleanAttributes},extractContentTypeFromVieEntity:function(vieEntity){var types=vieEntity.get("@type"),type;return _.isArray(types)||(types=[types]),type=_.find(_.map(types,function(type){return type.toString()}),function(type){return type.indexOf("<"+T3.ContentModule.TYPO3_NAMESPACE)===0}),type&&(type=type.substr(T3.ContentModule.TYPO3_NAMESPACE.length+1),type=type.substr(0,type.length-1)),type}}),Entity}),define("phoenix/content/model",["jquery","vie/instance","vie/entity"],function($,vie,EntityWrapper){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/model");var T3=window.T3||{};typeof T3.Content=="undefined"&&(T3.Content={}),T3.Content.Model={};var NodeSelection=Ember.Object.create({nodes:[],initialize:function(){vie.entities.reset(),vie.load({element:$("body")}).from("rdfa").execute(),this.updateSelection()},updateSelection:function($element){if($element&&$element.hasClass("t3-contentelement-active"))return;var nodes=[],that=this;$(".t3-contentelement-active").removeClass("t3-contentelement-active");if(this._updating)return;this._updating=!0,$element!==undefined?($element.is(".t3-contentsection")?$element.parent().addClass("t3-contentelement-active"):$element.addClass("t3-contentelement-active"),this.addNodeByElement(nodes,$element),$element.parents(".t3-contentelement[about], .t3-contentsection[about]").each(function(){that.addNodeByElement(nodes,this)}),$("body").addClass("t3-contentelement-selected")):$("body").removeClass("t3-contentelement-selected"),(!$element||!$element.is("#t3-page-metainformation"))&&this.addNodeByElement(nodes,$("#t3-page-metainformation")),nodes=nodes.reverse(),this.set("nodes",nodes),this._updating=!1},addNodeByElement:function(nodes,$element){if($element!==undefined){var nodeProxy=this._createEntityWrapper($element);nodeProxy&&nodes.push(nodeProxy)}},_entitiesBySubject:{},_createEntityWrapper:function($element){var subject=vie.service("rdfa").getElementSubject($element);if(!this._entitiesBySubject[subject]){var entity=vie.entities.get(subject);if(entity===undefined)return;this._entitiesBySubject[subject]=EntityWrapper.create({_vieEntity:entity})}return this._entitiesBySubject[subject]},selectedNode:function(){var nodes=this.get("nodes");return nodes.length>0?_.last(nodes):null}.property("nodes").cacheable(),selectedNodeSchema:function(){var selectedNode=this.get("selectedNode");if(!selectedNode)return;return selectedNode.get("contentTypeSchema")}.property("selectedNode").cacheable(),selectNode:function(node){this.updateSelection(node.get("$element"))}}),PublishableNodes=Ember.Object.create({publishableEntitySubjects:[],noChanges:function(){return this.getPath("publishableEntitySubjects.length")==0}.property("publishableEntitySubjects").cacheable(),initialize:function(){vie.entities.on("change",this._updatePublishableEntities,this),this._updatePublishableEntities()},_updatePublishableEntities:function(){var publishableEntitySubjects=[];vie.entities.forEach(function(entity){this._isEntityPublishable(entity)&&publishableEntitySubjects.push(entity.id)},this),this.set("publishableEntitySubjects",publishableEntitySubjects)},_isEntityPublishable:function(entity){var attributes=EntityWrapper.extractAttributesFromVieEntity(entity);return attributes.__workspacename!=="live"},publishAll:function(){T3.Content.Controller.ServerConnection.sendAllToServer(this.get("publishableEntitySubjects"),function(subject){var entity=vie.entities.get(subject);return[entity.fromReference(subject),"live"]},TYPO3_TYPO3_Service_ExtDirect_V1_Controller_WorkspaceController.publishNode,null,function(subject){var entity=vie.entities.get(subject);entity.set("typo3:__workspacename","live")})}});T3.Content.Model={PublishableNodes:PublishableNodes,NodeSelection:NodeSelection},window.T3=T3}),define("create",["jquery","vie/instance","emberjs","jquery-ui","aloha","backbone","underscorejs","hallo","halloplugins/linkplugin","Library/createjs/deps/jquery.tagsinput.min","Library/createjs/deps/rangy-core-1.2.3","createjs","create/collectionWidgets/jquery.typo3.collectionWidget","create/typo3MidgardEditable","phoenix/content/model"],function($,vieInstance,Ember){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("create"),Ember.Object.create({_state:null,initialize:function(){var that=this;T3.Content.Controller.Preview.get("previewMode")||(Aloha.ready?Aloha.ready(function(){that.enableEdit()}):this.enableEdit()),this.initializeEntitySelection()},enableEdit:function(){var editableOptions={disabled:!1,vie:vieInstance,widgets:{"default":"hallo","typo3:title":"hallo-blockonly"},collectionWidgets:{"default":"typo3CollectionWidget"},editors:{aloha:{widget:"alohaWidget"},hallo:{widget:"halloWidget",options:{toolbar:"halloToolbarFixed",parentElement:"body",toolbarCssClass:"t3-ui",buttonCssClass:"btn btn-mini t3-button",plugins:{halloformat:{},halloblock:{},hallolists:{},"hallo-linkplugin":{}}}},"hallo-blockonly":{widget:"halloWidget",options:{toolbar:"halloToolbarFixed",parentElement:"body",toolbarCssClass:"t3-ui",buttonCssClass:"btn btn-mini t3-button",plugins:{halloblock:{elements:["h1","h2","h3"]},halloblacklist:{tags:["br"]}}}},"inline-only":{widget:"editWidget"}}};$("[about]").each(function(){$(this).midgardEditable(editableOptions)}),this.set("_state","edit")},disableEdit:function(){var editableOptions={disabled:!0,vie:vieInstance};$(".t3-contentelement[about]").each(function(){$(this).midgardEditable(editableOptions),$(this).removeClass("ui-state-disabled")}),this.set("_state","browse")},initializeEntitySelection:function(){var that=this;$(document).on("mouseover",".t3-contentelement",function(e){return e.result!=="hovered"&&$(this).addClass("t3-contentelement-hover"),"hovered"}).on("mouseout",".t3-contentelement",function(){$(this).removeClass("t3-contentelement-hover")}).on("click",".t3-ui, .ui-widget-overlay",function(e){e.stopPropagation()}).on("click",".t3-contentelement",function(e){return e.result!=="activated"&&that.selectContentElement($(this)),"activated"}).on("click",function(e){if(e.result==="activated")return;if($(e.target).parents().length===0)return;if(T3.Content.Model.NodeSelection.get("selectedNode")!==null){var node=T3.Content.Model.NodeSelection.get("selectedNode");that.unselectContentElement(node.get("$element"))}})},selectContentElement:function(element){var selectedNode=T3.Content.Model.NodeSelection.get("selectedNode");selectedNode!==null&&selectedNode.get("$element").attr("about")!==element.attr("about")&&this.unselectContentElement(selectedNode.get("$element")),T3.Content.Model.NodeSelection.updateSelection(element)},unselectContentElement:function(element){T3.Content.Model.NodeSelection.updateSelection()}})}),define("text!phoenix/templates/common/launcher.html",[],function(){return'<div class="t3-launcher-container">\n	{{view T3.Common.Launcher.TextField openBinding="open" valueBinding="value" placeholder="Search & Navigate ›" }}\n	<div class="t3-launcher-loading"></div>\n	<div class="t3-launcher-clear"></div>\n</div>\n{{view T3.Common.Launcher.Panel openBinding="open" searchItemsBinding="searchItems"}}'}),define("text!phoenix/templates/common/launcherpanel.html",[],function(){return'<div class="three-columns tc-1-1-1">\n	{{#boundIf T3.ContentModule.showDevelopmentFeatures}}\n	<div class="c-1">\n		<div class="scroll-content">\n			<div class="t3-launcher-alternating-row t3-odd">\n				<h2>My tools</h2>\n				<ul class="t3-launcher-horizontal">\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/document_icon-24.png" alt="" /></div>\n						<div class="text">New article</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/layers_1_icon-24.png" alt="" /></div>\n						<div class="text">Workspaces</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/mail_2_icon-24.png" alt="" /></div>\n						<div class="text">Newsletter</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/cogs_icon-24.png" alt="" /></div>\n						<div class="text">Configuration</div>\n					</li>\n				</ul>\n				<div class="t3-clear"></div>\n			</div>\n			<div class="t3-launcher-split"></div>\n			<div class="t3-launcher-alternating-row t3-even">\n				<h2>Basics</h2>\n				<ul class="t3-launcher-horizontal">\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/dashboard_icon-24.png" alt="" /></div>\n						<div class="text">Dashboard</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/bookmark_1_icon-24.png" alt="" /></div>\n						<div class="text">Bookmarks</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/wrench_plus_2_icon-24.png" alt="" /></div>\n						<div class="text">My settings</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/lightbulb_icon-24.png" alt="" /></div>\n						<div class="text">Help</div>\n					</li>\n				</ul>\n				<div class="t3-clear"></div>\n			</div>\n			<div class="t3-launcher-split"></div>\n			<div class="t3-launcher-alternating-row t3-odd">\n				<h2>Web</h2>\n				<ul class="t3-launcher-horizontal">\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/dashboard_icon-24.png" alt="" /></div>\n						<div class="text">Dashboard</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/bookmark_1_icon-24.png" alt="" /></div>\n						<div class="text">Bookmarks</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/wrench_plus_2_icon-24.png" alt="" /></div>\n						<div class="text">My settings</div>\n					</li>\n					<li>\n						<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/lightbulb_icon-24.png" alt="" /></div>\n						<div class="text">Help</div>\n					</li>\n				</ul>\n				<div class="t3-clear"></div>\n			</div>\n		</div>\n		<div class="t3-clear"></div>\n	</div>\n	<div class="c-2">\n		<h2>Recently used</h2>\n		<ul class="vertical t3-launcher-panel-lastactions">\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/doc_empty_icon-16.png" alt="" /></div>\n				<div class="text">Community</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/twitter_2_icon-16.png" alt="" /></div>\n				<div class="text">@aplusk</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/users_icon-16.png" alt="" /></div>\n				<div class="text">Editors</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/youtube_icon-16.png" alt="" /></div>\n				<div class="text">Latest YouTube video</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/user_icon-16.png" alt="" /></div>\n				<div class="text">Admin</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/doc_empty_icon-16.png" alt="" /></div>\n				<div class="text">About</div>\n			</li>\n		</ul>\n		<div class="t3-clear"></div>\n		<h2>Most used</h2>\n		<ul class="vertical t3-launcher-panel-mostused">\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/lighting_icon-16.png" alt="" /></div>\n				<div class="text">Clear cache</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/trash_icon-16.png" alt="" /></div>\n				<div class="text">Recycler</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/clock_icon-16.png" alt="" /></div>\n				<div class="text">Scheduler</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/notepad_2_icon-16.png" alt="" /></div>\n				<div class="text">Log</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/db_icon-16.png" alt="" /></div>\n				<div class="text">Database</div>\n			</li>\n			<li>\n				<div class="image"><img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/Black/list_bullets_icon-16.png" alt="" /></div>\n				<div class="text">Management</div>\n			</li>\n		</ul>\n		<div class="t3-clear"></div>\n	</div>\n	{{/boundIf}}\n	<div class="c-3">\n		<h2>Search</h2>\n		{{#collection contentBinding="searchItems" tagName="ul" classNames="t3-launcher-panel-search"}}\n			<div class="t3-launcher-search-group-label"><span>{{content.label}}</span></div>\n			{{#collection contentBinding="content.items" tagName="ul" classNames="t3-launcher-search-group-results"}}\n				<a {{bindAttr href="content.action"}} {{bindAttr title="content.path"}} class="t3-link-ajax">\n					<img {{bindAttr src="content.icon"}} alt="" />\n					{{content.label}}\n				</a>\n			{{/collection}}\n			<div class="t3-clear"></div>\n		{{/collection}}\n	</div>\n</div>'}),define("text!phoenix/templates/common/confirmationDialog.html",[],function(){return'{{#content}}\n<div class="text">\n	{{content}}\n</div>\n{{/content}}\n<div class="actions">\n	{{view T3.Content.UI.Button labelBinding="cancelLabel" target="parentView" action="cancel" classNameBindings="parentView.cancelClass"}}\n	{{view T3.Content.UI.Button labelBinding="confirmLabel" target="parentView" action="confirm" classNameBindings="parentView.confirmClass"}}\n</div>'}),define("phoenix/common",["jquery","text!phoenix/templates/common/launcher.html","text!phoenix/templates/common/launcherpanel.html","text!phoenix/templates/common/confirmationDialog.html"],function($,launcherTemplate,launcherPanelTemplate,confirmationdialogTemplate){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/common");var T3=window.T3||{};T3.Common={},T3.Common.Launcher=Ember.View.extend({tagName:"div",classNames:["t3-launcher"],value:"",open:!1,template:Ember.Handlebars.compile(launcherTemplate),activate:function(){this.$().find(".t3-launcher-container input").focus()}}),T3.Common.Launcher.SearchController=Ember.Object.create({_launcherTextField:null,_requestIndex:0,_value:"",_searching:null,_delay:300,_minLength:1,isLoading:!1,searchItems:[],keyHandler:function(event){suppressKeyPress=!1;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:suppressKeyPress=!0,this._move("previous",event),event.preventDefault();break;case keyCode.DOWN:suppressKeyPress=!0,this._move("next",event),event.preventDefault();break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:suppressKeyPress=!0,event.preventDefault();break;case keyCode.TAB:this._nextGroup();break;case keyCode.ESCAPE:this.get("_launcherTextField").cancel();break;default:this._searchTimeout(event)}},_searchTimeout:function(event){var that=this;this._searching=setTimeout(function(){var value=that.get("_launcherTextField").get("value");that._value!==value&&(that.set("_value",value),that._search(event,value))},this._delay)},_search:function(event,value){var that=this;if(value.length<this._minLength){this._clear();return}var requestIndex=++this._requestIndex;this.set("isLoading",!0),TYPO3_TYPO3_Service_ExtDirect_V1_Controller_LauncherController.search(value,requestIndex,function(result){var data=result.data;that._requestIndex===data.requestIndex&&(result.success?that._response(data):that._clear(),that.set("isLoading",!1))})},_response:function(data){var results=[];$.each(data.results,function(key,group){group=Ember.Object.create(group);var wrappedSearchItems=group.get("items").map(function(searchItem){return Ember.Object.create(searchItem)});group.set("items",wrappedSearchItems),results.push(group)}),this.set("searchItems",results)},_clear:function(){this.set("searchItems",[])}}),T3.Common.Launcher.TextField=Ember.TextField.extend({_notEmpty:function(){var parent=this.$().parent(),notEmptyClass="not-empty";this.get("value")!==null&&this.get("value")!==""?parent.addClass(notEmptyClass):parent.removeClass(notEmptyClass)}.observes("value"),_loadingDidChange:function(object,observing,value){var loadingIndicator=this.$().parent().find(".t3-launcher-loading");value===!0?loadingIndicator.show():loadingIndicator.hide()}.observes("T3.Common.Launcher.SearchController.isLoading"),init:function(){T3.Common.Launcher.SearchController.set("_launcherTextField",this),this._super()},cancel:function(){this.set("value",""),this.$().blur()},focusIn:function(){this.set("open",!0)},focusOut:function(){this.set("open",!1),this._super()},keyDown:function(event){T3.Common.Launcher.SearchController.keyHandler(event)},didInsertElement:function(){var that=this;this.$().parent().find(".t3-launcher-clear").click(function(){that.cancel()})}}),T3.Common.Launcher.Panel=Ember.View.extend({tagName:"div",classNames:["t3-launcher-panel"],open:!1,focussed:!1,scrollingInitialized:!1,template:Ember.Handlebars.compile(launcherPanelTemplate),_openDidChange:function(){var that=this;setTimeout(function(){var open=that.get("open");if(open)$(document).trigger("hidePopover"),$("body").addClass("t3-launcher-open"),that.scrollingInitialized||($(".c-1 .scroll-content").lionbars("dark",!1,!0,!1),that.scrollingInitialized=!0);else{if(that.get("focussed"))return;$("body").removeClass("t3-launcher-open")}},50)}.observes("open"),focusIn:function(){this.set("focussed",!0)},focusOut:function(){this.set("focussed",!1)}}),T3.Common.Dialog=Ember.Object.create({_options:{preventLeft:!1,preventRight:!1,preventTop:!1,preventBottom:!1,zIndex:10090,openEvent:function(){}},_handle:null,openFromUrl:function(url,data,commands,$handle,overrideOptions){var that=this;that._handle=$handle,that._overrideOptions(overrideOptions),this._fetchUrlForDialog(url,data,commands,function(){that._showDialog()})},openConfirmPopover:function(options,$handle){var that=this;that._handle=$handle;var handlerEvents=$handle.data("events");if(!handlerEvents||!handlerEvents.showPopover){that._options.header=options.title?"<div>"+options.title+"</div>":null,that._options.content=$("<div />");var view=Ember.View.create({classNames:["typo3-confirmationdialog","aloha-block-do-not-deactivate"],template:Ember.Handlebars.compile(confirmationdialogTemplate),content:options.content,confirmLabel:options.confirmLabel?options.confirmLabel:"Confirm",confirmClass:options.confirmClass?options.confirmClass:"",cancelLabel:options.cancelLabel?options.cancelLabel:"Cancel",cancelClass:options.cancelClass?options.cancelClass:"",confirm:function(){$handle.trigger("hidePopover"),options.onOk&&options.onOk.call(that)},cancel:function(){options.onCancel&&options.onCancel.call(that),$handle.trigger("hidePopover")},didInsertElement:function(){that._showDialog(),options.onDialogOpen&&options.onDialogOpen.call(that)}});options.positioning&&(that._options.positioning=options.positioning),view.appendTo(that._options.content)}options.onDialogOpen&&options.onDialogOpen.call(this)},_showDialog:function(){this._handle.popover(this._options).trigger("showPopover").addClass("t3-ui").removeClass("t3-handle-loading")},_fetchUrlForDialog:function(url,data,commands,callback){var that=this;$.get(url,data,function(data){var dialog=$("<div />");dialog.html(data);var commandsExecuted=!1;dialog.find('a[rel|="typo3"]').each(function(){var commandName=$(this).attr("rel").substr(6);commands[commandName]&&(commands[commandName]($(this)),commandsExecuted=!0)});if(commandsExecuted)return that._handle.trigger("hidePopover"),!1;dialog.find("a.t3-ajax-link").click(function(){return that._fetchUrlForDialog($(this).attr("href"),{},commands,dialog),!1}),that._options.header=dialog.find("h1").first(),dialog.find("h1").first().remove(),that._options.content=dialog,callback&&callback.call(this)})},_overrideOptions:function(overrideOptions){this._options=$.extend(this._options,overrideOptions||{})}}),T3.Common.Notification=Ember.Object.create({_timeout:5e3,_show:function(msg,stay,className){$("body").midgardNotifications("create",{body:$("<p />",{"class":className,text:msg}),class_prefix:"typo3-notification",timeout:stay?0:this.get("_timeout"),gravity:"RT"})},ok:function(msg,stay){this._show(msg,stay,"typo3-notification-ok")},info:function(msg,stay){this._show(msg,stay,"typo3-notification-info")},notice:function(msg,stay){this._show(msg,stay,"typo3-notification-notice")},warning:function(msg,stay){this._show(msg,stay,"typo3-notification-warning")},error:function(msg,stay){this._show(msg,stay,"typo3-notification-error")}}),T3.Common.Util=Ember.Object.create({isValidJsonString:function(jsonString){return!/[^,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]/.test(jsonString.replace(/"(\\.|[^"\\])*"/g,""))}}),T3.Common.LocalStorage=Ember.Object.create({getItem:function(key){if(!this._supportsLocalStorage())return undefined;try{return JSON.parse(window.localStorage.getItem(key))}catch(e){return undefined}},setItem:function(key,value){if(!this._supportsLocalStorage())return;window.localStorage.setItem(key,JSON.stringify(value))},removeItem:function(key){if(!this._supportsLocalStorage())return;window.localStorage.removeItem(key)},_supportsLocalStorage:function(){try{return"localStorage"in window&&window.localStorage!==null}catch(e){return!1}}}),window.T3=T3}),define("text!phoenix/templates/content/ui/breadcrumb.html",[],function(){return'<div class="t3-inspect">{{view T3.Content.UI.InspectButton pressedBinding="T3.Content.Controller.Inspect.inspectMode" label="Inspect"}}</div>\n\n{{#collection contentBinding="content" tagName="ul"}}\n	{{view T3.Content.UI.BreadcrumbItem itemBinding="content"}}\n{{/collection}}'}),define("text!phoenix/templates/content/ui/inspector.html",[],function(){return'<form class="t3-inspector-form" action="#">\n	<div class="header">{{view T3.Content.UI.Button label="Apply" disabledBinding="T3.Content.Controller.Inspector._unmodified" target="T3.Content.Controller.Inspector" action="onApplyButtonToggle"}}</div>\n\n	{{#collection tagName="fieldset" classNames="t3-inspector-section" contentBinding="T3.Content.Controller.Inspector.sectionsAndViews"}}\n		<h2>{{content.label}}</h2>\n		{{#collection tagName="div" classNames="t3-inspector-field" contentBinding="content.properties"}}\n			<label {{bindAttr for="content.elementId"}}>{{content.label}}</label>\n			{{view T3.Content.UI.Inspector.PropertyEditor propertyDefinitionBinding="content"}}\n		{{/collection}}\n	{{/collection}}\n</form>\n'}),define("text!phoenix/templates/content/ui/inspectorDialog.html",[],function(){return'<div class="modal" id="inspectorDialog">\n	<div class="modal-header">\n		{{view T3.Content.UI.ButtonDialog label="x" target="parentView" data-dismiss="modal" action="cancel" class="close t3-button" title="x"}}\n		<h3>You are currently changing properties. Do you want to apply your changes?</h3>\n		<p></p>\n	</div>\n		<div class="modal-footer">\n			{{view T3.Content.UI.ButtonDialog label="Don\'t apply" class="btn t3-button" target="parentView" action="dontApply"}}\n			{{view T3.Content.UI.ButtonDialog label="Cancel" class="btn t3-button" target="parentView" action="cancel"}}\n			{{view T3.Content.UI.ButtonDialog label="Apply" class="btn t3-button" target="parentView" action="apply"}}\n		</div>\n</div>\n<div class="modal-backdrop in"></div>'}),define("text!phoenix/templates/content/ui/pageTree.html",[],function(){return'<div class="dynatree-container" id="t3-pagetree-container">\n	<div class="t3-pagetree-action-toolbar-con">\n		<div id="t3-action-newpage" class="t3-action-newpage page-action-toolbar"></div>\n		<div id="t3-action-deletepage" href="#pagetreeDeleteDialog" data-toggle="modal" class="t3-action-deletepage page-action-toolbar"></div>\n	</div>\n	<div id="t3-dd-pagetree-con">\n		<div id="t3-dd-pagetree"></div>\n	</div>\n\n\n</div>'}),define("text!phoenix/templates/content/ui/deletePageDialog.html",[],function(){return'<div class="modal" id="pagetreeDeleteDialog">\n	<div class="modal-header">\n		{{view T3.Content.UI.ButtonDialog label="x" target="parentView" data-dismiss="modal" action="cancel" class="close t3-button" title="x"}}\n		<h3>Are you sure you want to delete the page "{{pagetitle}}"?</h3>\n		<p>This will delete the page {{page}} {{children}}.\n			This operation can be undone in the workspace management.</p>\n	</div>\n	<div class="modal-footer">\n			{{view T3.Content.UI.ButtonDialog label="Cancel" target="parentView" action="cancel"   class="btn t3-button" title="Cancel"}}\n			{{view T3.Content.UI.ButtonDialog label="Delete" target="parentView" action="delete"   class="btn btn-danger t3-button icon-trash icon-white" title="Delete"}}\n		</div>\n</div>\n<div class="modal-backdrop in"></div>'}),define("text!phoenix/templates/content/ui/inspectTree.html",[],function(){return'<div class="dynatree-container" id="t3-inspecttree-container">\n	<div id="t3-dd-inspecttree"></div>\n</div>'}),define("text!phoenix/templates/content/ui/toolbar.html",[],function(){return'{{#collection contentBinding="left" tagName="ul" classNames="t3-toolbar-left"}}\n	{{view content}}\n{{/collection}}\n\n{{#collection contentBinding="right" tagName="ul" classNames="t3-toolbar-right"}}\n	{{view content}}\n{{/collection}}\n'}),define("phoenix/content/ui/elements/toolbar",["emberjs","text!phoenix/templates/content/ui/toolbar.html"],function(Ember,toolbarTemplate){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/elements/toolbar"),Ember.View.extend({tagName:"div",classNames:["t3-toolbar","t3-ui"],template:Ember.Handlebars.compile(toolbarTemplate)})}),define("phoenix/content/ui/elements/button",["emberjs"],function(Ember){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/elements/button"),Ember.Button.extend({classNames:["t3-button","btn","btn-mini"],attributeBindings:["disabled"],classNameBindings:["iconClass"],label:"",disabled:!1,visible:!0,icon:"",template:Ember.Handlebars.compile("{{label}}"),iconClass:function(){var icon=this.get("icon");return icon!==""?"t3-icon-"+icon:""}.property("icon").cacheable()})}),define("phoenix/content/ui/elements/toggle-button",["emberjs","phoenix/content/ui/elements/button"],function(Ember,Button){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/elements/toggle-button"),Button.extend({classNames:["t3-button"],classNameBindings:["pressed"],pressed:!1,toggle:function(){this.set("pressed",!this.get("pressed"))},mouseUp:function(event){if(this.get("isActive")){var action=this.get("action"),target=this.get("targetObject");this.toggle(),target&&action&&(typeof action=="string"&&(action=target[action]),action.call(target,this.get("pressed"),this)),this.set("isActive",!1)}this._mouseDown=!1,this._mouseEntered=!1}})}),define("phoenix/content/ui/elements/popover-button",["jquery","phoenix/content/ui/elements/toggle-button"],function($,ToggleButton){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/elements/popover-button"),ToggleButton.extend({popoverTitle:"",$popoverContent:$("<div></div>"),popoverPosition:"bottom",didInsertElement:function(){var that=this;this.$().popover({header:$("<div>"+that.get("popoverTitle")+"</div>"),content:this.$popoverContent,preventLeft:this.get("popoverPosition")==="left"?!1:!0,preventRight:this.get("popoverPosition")==="right"?!1:!0,preventTop:this.get("popoverPosition")==="top"?!1:!0,preventBottom:this.get("popoverPosition")==="bottom"?!1:!0,zindex:10090,closeEvent:function(){that.set("pressed",!1)},openEvent:function(){that.onPopoverOpen.call(that)}})},onPopoverOpen:function(){}})}),define("text!phoenix/templates/content/ui/contentelementHandles.html",[],function(){return'<div class="btn-toolbar">\n	<div class="btn-group">\n		{{#if _showRemove}}<button class="btn btn-mini action-remove" title="Remove"><i class="icon-trash" {{action "remove" }}></i></button>{{/if}}\n		{{#if _showCut}}<button class="btn btn-mini action-cut" {{bindAttr class="_thisElementStartedCut:active"}} title="Cut"><i class="icon-cut" {{action "cut" }}></i></button>{{/if}}\n		{{#if _showCopy}}<button class="btn btn-mini action-copy" {{bindAttr class="_thisElementStartedCopy:active"}} title="Copy"><i class="icon-copy" {{action "copy" }}></i></button>{{/if}}\n		{{#if T3.Content.Controller.NodeActions.clipboardContainsContent}}<button class="btn btn-mini action-paste" {{bindAttr class="_pasteInProgress:t3-handle-loading"}} title="Paste after" {{action "pasteAfter"}}><i class="icon-paste" {{action "pasteAfter" }}></i></button>{{/if}}\n		<button class="btn btn-mini action-new" title="Create after"><i class="icon-plus" {{action "newAfter" }}></i></button>\n	</div>\n</div>'}),define("text!phoenix/templates/content/ui/newContentelementPopoverContent.html",[],function(){return'<div class="contentTypeSelectorTabs notInitialized">\n	<ul>\n		{{#each data}}<li><a href="#{{unbound Ember.GUID_KEY}}{{unbound name}}">{{unbound name}}</a></li>{{/each}}\n	</ul>\n	{{#each data}}\n		<div id="{{unbound Ember.GUID_KEY}}{{unbound name}}" class="t3-content-new">\n			{{#each children}}\n				<div class="t3-content-new-selecttype-button">\n					<a clickBinding="click" rel="typo3:{{unbound contentType}}" class="t3-content-new t3-ajax-link t3-content-new-icon" href="#">\n						{{#if icon}}\n							<img src="/_Resources/Static/Packages/TYPO3.TYPO3/{{unbound icon}}" />\n						{{else}}\n							<img src="/_Resources/Static/Packages/TYPO3.TYPO3/Images/Icons/White/text_letter_t_icon-16.png" />\n						{{/if}}\n					</a>\n					<a clickBinding="click" rel="typo3:{{unbound contentType}}" class="t3-content-new">{{unbound label}}</a><br/>\n				</div>\n			{{/each}}\n		</div>\n	{{/each}}\n</div>'}),define("phoenix/content/ui/elements/new-contentelement-popover-content",["jquery","emberjs","text!phoenix/templates/content/ui/newContentelementPopoverContent.html"],function($,Ember,template){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/elements/new-contentelement-popover-content"),Ember.View.extend({template:Ember.Handlebars.compile(template),_options:null,_index:null,didInsertElement:function(){var tabs=this.$(".contentTypeSelectorTabs").tabs();setTimeout(function(){tabs.tabs("select",0)},100)},click:function(event){if(!event.target.rel)return;this.get("_options").collection.add({"@type":event.target.rel},{at:this.get("_index")}),this.$().parents(".popover").trigger("hidePopover")}})}),define("phoenix/content/ui/elements/contentelement-handles",["jquery","vie/instance","text!phoenix/templates/content/ui/contentelementHandles.html","phoenix/content/ui/elements/new-contentelement-popover-content"],function($,vieInstance,template,ContentElementPopoverContent){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/contentelement-handles"),Ember.View.extend({template:Ember.Handlebars.compile(template),_element:null,$newAfterPopoverContent:null,_entityCollectionIndex:null,_collection:null,popoverPosition:"right",_nodePath:null,_pasteInProgress:!1,_thisElementStartedCut:function(){var clipboard=T3.Content.Controller.NodeActions.get("_clipboard");return clipboard?clipboard.type==="cut"&&clipboard.nodePath===this.get("_nodePath"):!1}.property("T3.Content.Controller.NodeActions._clipboard","_nodePath").cacheable(),_thisElementStartedCopy:function(){var clipboard=T3.Content.Controller.NodeActions.get("_clipboard");return clipboard?clipboard.type==="copy"&&clipboard.nodePath===this.get("_nodePath"):!1}.property("T3.Content.Controller.NodeActions._clipboard","_nodePath").cacheable(),didInsertElement:function(){var that=this,subject=vieInstance.service("rdfa").getElementSubject(this.get("_element"));this.set("_nodePath",vieInstance.entities.get(subject).getSubjectUri()),this.$newAfterPopoverContent=$("<div />",{id:this.get(Ember.GUID_KEY)}),this.$().find(".action-new").popover({content:this.$newAfterPopoverContent,preventLeft:this.get("popoverPosition")==="left"?!1:!0,preventRight:this.get("popoverPosition")==="right"?!1:!0,preventTop:this.get("popoverPosition")==="top"?!1:!0,preventBottom:this.get("popoverPosition")==="bottom"?!1:!0,zindex:10090,closeEvent:function(){that.set("pressed",!1)},openEvent:function(){that.onPopoverOpen.call(that)}})},remove:function(){T3.Content.Controller.NodeActions.remove(vieInstance.entities.get(this.get("_nodePath")),this.get("_element"),this.$(".action-remove").first())},cut:function(){T3.Content.Controller.NodeActions.cut(this.get("_nodePath"))},copy:function(){T3.Content.Controller.NodeActions.copy(this.get("_nodePath"))},pasteAfter:function(){T3.Content.Controller.NodeActions.pasteAfter(this.get("_nodePath")),this.set("_pasteInProgress",!0)},newAfter:function(){var that=this;this.$().find(".action-new").trigger("showPopover")},onPopoverOpen:function(){var groups={};_.each(this.get("_collection").options.definition.range,function(contentType){var type=this.get("_collection").options.vie.types.get(contentType);type.metadata.contentType=type.id.substring(1,type.id.length-1).replace(T3.ContentModule.TYPO3_NAMESPACE,""),type.metadata.group&&(groups[type.metadata.group]||(groups[type.metadata.group]={name:type.metadata.group,children:[]}),groups[type.metadata.group].children.push(type.metadata))},this);var data=[];T3.Configuration.contentTypeGroups.forEach(function(groupName){groups[groupName]&&data.push(groups[groupName])}),ContentElementPopoverContent.create({_options:this.get("_collection").options,_index:this.get("_entityCollectionIndex"),data:data}).replaceIn(this.$newAfterPopoverContent)},willDestroyElement:function(){this.$().find(".action-new").trigger("hidePopover")},_showRemove:!0,_showCut:!0,_showCopy:!0})}),define("phoenix/content/ui/elements/section-handles",["jquery","phoenix/content/ui/elements/contentelement-handles"],function($,ContentElementHandle){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/section-handles"),ContentElementHandle.extend({_showRemove:!1,_showCut:!1,_showCopy:!1,_nestedContentElementsAvailable:!1,didInsertElement:function(){this._super(),this.get("_element").find(".t3-contentelement").length>0&&this.set("_nestedContentElementsAvailable",!0)},_isShown:function(){return this.get("_nestedContentElementsAvailable")?this.get("_nodePath")===T3.Content.Model.NodeSelection.getPath("selectedNode.nodePath"):!0}.property("T3.Content.Model.NodeSelection.selectedNode","_nodePath","_nestedContentElementsAvailable"),_toggleVisibilityOnShownChange:function(){this.get("_isShown")?this.$().css("visibility","visible"):this.$().css("visibility","hidden")}.observes("_isShown")})}),function($){$.fn.popover=function(options){function keyDown(event){if(!event.altKey&&!event.ctrlKey&&!event.shiftKey)switch(event.keyCode){case KEY_ESC:$.fn.popover.openedPopup==null}}function calcPopoverDirPossible(button,coord){var possibleDir={left:!1,right:!1,top:!1,bottom:!1};return coord.buttonOffset.top+coord.buttonHeight+coord.triangleSize+coord.popoverHeight<=coord.docHeight-settings.padding&&(possibleDir.bottom=!0),coord.buttonOffset.top-coord.triangleSize-coord.popoverHeight>=settings.padding&&(possibleDir.top=!0),coord.buttonOffset.left+coord.buttonWidth+coord.triangleSize+coord.popoverWidth<=coord.docWidth-settings.padding&&(possibleDir.right=!0),coord.buttonOffset.left-coord.triangleSize-coord.popoverWidth>=settings.padding&&(possibleDir.left=!0),possibleDir}function chooseDir(possibleDir){settings.preventBottom&&(possibleDir.bottom=!1),settings.preventTop&&(possibleDir.top=!1),settings.preventLeft&&(possibleDir.left=!1),settings.preventRight&&(possibleDir.right=!1);var possibleDirections={right:!0,bottom:!0,top:!0,left:!0};return settings.preventRight&&delete possibleDirections.right,settings.preventBottom&&delete possibleDirections.bottom,settings.preventTop&&delete possibleDirections.top,settings.preventTop&&delete possibleDirections.left,dir=Object.keys(possibleDirections)[0],possibleDir.right?dir="right":possibleDir.bottom?dir="bottom":possibleDir.left?dir="left":possibleDir.top&&(dir="top"),dir}function calcPopoverPos(button){settings.popover$.css("display","block");var coord={popoverDir:"bottom",popoverX:0,popoverY:0,deltaX:0,deltaY:0,triangleX:0,triangleY:0,triangleSize:20,docWidth:$("body").width(),docHeight:$("body").height(),popoverWidth:settings.popover$.outerWidth(),popoverHeight:settings.popover$.outerHeight(),buttonWidth:button.outerWidth(),buttonHeight:button.outerHeight(),buttonOffset:button.offset()};settings.positioning==="fixed"&&(coord.buttonOffset.top-=$(document).scrollTop());var possibleDir=calcPopoverDirPossible(button,coord);return coord.popoverDir=chooseDir(possibleDir),coord.popoverDir=="bottom"?coord.popoverY=coord.buttonOffset.top+coord.buttonHeight+coord.triangleSize:coord.popoverDir=="top"?coord.popoverY=coord.buttonOffset.top-coord.triangleSize-coord.popoverHeight:coord.popoverY=coord.buttonOffset.top+(coord.buttonHeight-coord.popoverHeight)/2,coord.popoverDir=="bottom"||coord.popoverDir=="top"?(coord.popoverX=coord.buttonOffset.left+(coord.buttonWidth-coord.popoverWidth)/2,coord.popoverX<settings.padding?coord.deltaX=coord.popoverX-settings.padding:coord.popoverX+coord.popoverWidth>coord.docWidth-settings.padding&&(coord.deltaX=coord.popoverX+coord.popoverWidth-coord.docWidth+settings.padding),coord.triangleX=coord.popoverWidth/2-coord.triangleSize+coord.deltaX,coord.triangleY=0):(coord.popoverDir=="right"?coord.popoverX=coord.buttonOffset.left+coord.buttonWidth+coord.triangleSize:coord.popoverX=coord.buttonOffset.left-coord.triangleSize-coord.popoverWidth,coord.popoverY<settings.padding?coord.deltaY=coord.popoverY-settings.padding:coord.popoverY+coord.popoverHeight>coord.docHeight-settings.padding&&(coord.deltaY=coord.popoverY+coord.popoverHeight-coord.docHeight+settings.padding-36),coord.triangleX=0,coord.triangleY=coord.popoverHeight/2-coord.triangleSize+coord.deltaY),settings.popover$.css("display",""),coord}function positionPopover(coord){settings.triangle$.removeClass("left top right bottom"),settings.triangle$.addClass(coord.popoverDir);if(coord.popoverDir==="top"||coord.popoverDir==="bottom")coord.triangleX>0?settings.triangle$.css("left",coord.triangleX>coord.popoverWidth-34?coord.popoverWidth-34:coord.triangleX):settings.triangle$.css("left",-8);if(coord.popoverDir==="left"||coord.popoverDir==="right")coord.triangleY>2?settings.triangle$.css("top",coord.triangleY>coord.popoverHeight-34?coord.popoverHeight-34:coord.triangleY):settings.triangle$.css("top",2);settings.popover$.css({top:coord.popoverY-coord.deltaY+settings.offsetY,left:coord.popoverX-coord.deltaX+settings.offsetX}),settings.popover$.css("position",settings.positioning),settings.positioning==="absolute"&&(settings.zindex=10001),settings.popover$.addClass("t3-popover-"+settings.positioning),settings.popover$.css("z-index",settings.zindex).show()}function showPopover(button){return $.fn.popover.openedPopup===button?($.fn.popover.openedPopup.trigger("hidePopover"),!1):($.fn.popover.openedPopup!=null&&$.fn.popover.openedPopup.trigger("hidePopover"),settings.triangle$.click(function(){button.trigger("hidePopover")}),settings.triangle$.attr("style",""),positionPopover(calcPopoverPos(button)),setTimeout(function(){settings.popover$.addClass("active")},0),$.isFunction(settings.openEvent)&&settings.openEvent(),$.fn.popover.openedPopup=button,button.addClass("popover-on"),$(document).trigger("popoverOpened"),!1)}var KEY_ESC=27,settings=$.extend({id:"",openEvent:null,closeEvent:null,offsetX:0,offsetY:0,zindex:1e5,padding:18,closeOnEsc:!0,preventLeft:!1,preventRight:!1,preventTop:!1,preventBottom:!1,positioning:"fixed"},options||{});return settings.popover$=$('<div class="popover"'+(settings.id!==""?id="' + settings.id + '":"")+">"+'<div class="triangle"></div>'+'<div class="header"></div>'+'<div class="content"></div>'+"</div>").appendTo("body"),$(".header",settings.popover$).append($(settings.header).detach()),settings.popover$.addClass("t3-ui"),$(".header",settings.popover$).html()===""&&$(".header",settings.popover$).detach(),$(".content",settings.popover$).append($(settings.content).detach()),settings.triangle$=$(".triangle",settings.popover$),$.fn.popover.openedPopup=null,$(document).unbind("click.popover").bind("click.popover",function(event){var $target=$(event.target);$.fn.popover.openedPopup!=null&&$target.parents(".popover").length===0&&!$target.hasClass("popover")&&!$target.hasClass("popover-button")&&$target.parents(".popover-button").length===0&&!$target.hasClass("dynatree-expander")&&$.fn.popover.openedPopup.trigger("hidePopover")}),$(document).unbind("hidePopover").bind("hidePopover",function(event){$.fn.popover.openedPopup!=null&&$.fn.popover.openedPopup.trigger("hidePopover")}),this.each(function(){var button=$(this);button.addClass("popover-button"),settings.closeOnEsc&&$(document).bind("keydown",keyDown),button.bind("click",function(){return showPopover(button),!1}),button.bind("showPopover",function(){return showPopover(button),!1}),button.bind("hidePopover",function(){return button.removeClass("popover-on"),settings.popover$.removeClass("active"),settings.popover$.attr("style",""),$.fn.popover.openedPopup=null,$(document).trigger("popoverClosed"),$.isFunction(settings.closeEvent)&&settings.closeEvent(),!1})})}}(jQuery),define("jquery.popover",function(){}),define("phoenix/content/ui/elements",["jquery","phoenix/content/ui/elements/toolbar","phoenix/content/ui/elements/button","phoenix/content/ui/elements/toggle-button","phoenix/content/ui/elements/popover-button","phoenix/content/ui/elements/contentelement-handles","phoenix/content/ui/elements/section-handles","jquery.popover"],function($,Toolbar,Button,ToggleButton,PopoverButton,ContentElementHandle,SectionHandle){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/elements");var T3=window.T3||{};typeof T3.Content=="undefined"&&(T3.Content={}),T3.Content.UI=T3.Content.UI||{},T3.Content.UI.Toolbar=Toolbar,T3.Content.UI.Button=Button,T3.Content.UI.Image=Ember.View.extend({tagName:"img",attributeBindings:["src"]}),T3.Content.UI.ToggleButton=ToggleButton,T3.Content.UI.PopoverButton=PopoverButton,T3.Content.UI.ContentElementHandle=ContentElementHandle,T3.Content.UI.SectionHandle=SectionHandle}),define("text!phoenix/templates/content/ui/fileUpload.html",[],function(){return'<div class="typo3-fileupload" id="{{unbound _containerId}}">\n	<button id="{{unbound _browseButtonId}}" class="t3-button typo3-fileupload-pickfiles" type="button">\n		{{fileChooserLabel}}\n	</button>\n\n	{{view T3.Content.UI.Button isVisibleBinding="_uploadButtonShown" target="parentView" action="upload" labelBinding="uploaderLabel" allowedFileTypesBinding="allowedFileTypes"}}\n</div>\n'}),define("text!phoenix/templates/content/ui/imageUpload.html",[],function(){return'<div class="typo3-imagethumbnailcontainer">\n	<div class="typo3-imagethumbnail">\n		<div class="typo3-imagethumbnail-inner">\n			{{view T3.Content.UI.Image srcBinding="_previewImageUri" isVisibleBinding="_uploadPreviewNotShown"}}\n		</div>\n\n		<div {{bindAttr class="_imageBadgeClass"}}>\n			Click to Crop\n		</div>\n\n	</div>\n\n	<div class="typo3-uploadthumbnail">\n		{{view T3.Content.UI.Image isVisibleBinding="_uploadPreviewShown" srcBinding="_uploadPreviewImageSource"}}\n	</div>\n</div>\n\n<div class="typo3-fileupload" id="{{unbound _containerId}}">\n	<button id="{{unbound _browseButtonId}}" class="t3-button btn btn-mini typo3-fileupload-pickfiles" type="button">\n		{{fileChooserLabel}}\n	</button>\n\n	{{view T3.Content.UI.Button isVisibleBinding="_uploadButtonShown" target="parentView" action="upload" labelBinding="uploaderLabel" allowedFileTypesBinding="allowedFileTypes"}}\n</div>\n\n<div class="typo3-fileupload-image-size">\n	<div>\n		<label>Width:</label>\n		{{view Ember.TextField class="typo3-fileupload-image-size-width" valueBinding="_finalImageScale.w" }}\n		<span>px</span>\n	</div>\n	<div>\n		<label>Height:</label>\n		{{view Ember.TextField class="typo3-fileupload-image-size-height" valueBinding="_finalImageScale.computedHeight" }}\n		<span>px</span>\n	</div>\n</div>'}),CanvasIndicator.prototype.makeRGBA=function(){return"rgba("+[].slice.call(arguments,0).join(",")+")"},CanvasIndicator.prototype.drawBlock=function(barNo){this.ctx.fillStyle=this.makeRGBA(this.opt.rgb[0],this.opt.rgb[1],this.opt.rgb[2],(this.opt.bars+1-barNo)/(this.opt.bars+1)),this.ctx.fillRect(-this.opt.size[0]/2,0,this.opt.size[0],this.opt.size[1])},CanvasIndicator.prototype.calculatePosition=function(barNo){return angle=2*barNo*Math.PI/this.opt.bars,{y:this.opt.innerRadius*Math.cos(-angle),x:this.opt.innerRadius*Math.sin(-angle),angle:angle}},CanvasIndicator.prototype.draw=function(offset){this.clearFrame(),this.ctx.save(),this.ctx.translate(this.w,this.w);for(var i=0;i<this.opt.bars;i++){var curbar=(offset+i)%this.opt.bars,pos=this.calculatePosition(curbar);this.ctx.save(),this.ctx.translate(pos.x,pos.y),this.ctx.rotate(pos.angle),this.drawBlock(i),this.ctx.restore()}this.ctx.restore()},CanvasIndicator.prototype.clearFrame=function(){this.ctx.clearRect(0,0,this.ctx.canvas.clientWidth,this.ctx.canvas.clientHeight)},define("canvas.indicator",function(){}),define("phoenix/content/ui/editors",["jquery","text!phoenix/templates/content/ui/fileUpload.html","text!phoenix/templates/content/ui/imageUpload.html","phoenix/content/ui/elements","canvas.indicator"],function($,fileUploadTemplate,imageUploadTemplate){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui/editors");var T3=window.T3||{};typeof T3.Content=="undefined"&&(T3.Content={}),T3.Content.UI=T3.Content.UI||{},T3.Content.UI.Editor=T3.Content.UI.Editor||{},T3.Content.UI.Editor.TextField=Ember.TextField.extend({classNames:["input-small"]}),T3.Content.UI.Editor.Checkbox=Ember.Checkbox.extend({value:function(key,value){return arguments.length===2?(this.set("checked",value),value):this.get("checked")}.property("checked").cacheable()}),T3.Content.UI.Editor.DateField=Ember.TextField.extend({classNames:["input-small"],didInsertElement:function(){this.$().attr("placeholder","No date set"),this.$().datepicker({dateFormat:$.datepicker.W3C,beforeShow:function(field,datePicker){$(datePicker.dpDiv).addClass("t3-ui")}})}}),T3.Content.UI.Editor.SelectboxOption=Ember.View.extend({tagName:"option",attributeBindings:["value","selected"],valueBinding:"content.value",selectedBinding:"content.selected",template:Ember.Handlebars.compile("{{content.label}}")}),T3.Content.UI.Editor.Selectbox=Ember.CollectionView.extend({classNames:["typo3-form-selectbox"],tagName:"select",contentBinding:"options",itemViewClass:T3.Content.UI.Editor.SelectboxOption,value:"",allowEmpty:!1,placeholder:"",attributeBindings:["size","disabled"],values:[],options:function(){var options=[],currentValue=this.get("value");return this.get("allowEmpty")&&options.push(Ember.Object.create({value:"",label:this.get("placeholder")})),$.each(this.get("values"),function(value){options.push(Ember.Object.create($.extend({selected:value===currentValue,value:value},this)))}),options}.property("values","value","placeholder","allowEmpty").cacheable(),onItemsChange:function(){this.$().trigger("liszt:updated")}.observes("values"),didInsertElement:function(){var that=this;this.get("placeholder")&&this.$().attr("data-placeholder",this.get("placeholder")),require(["chosen"],function(){that.$().addClass("chzn-select").chosen().change(function(){that.set("value",that.$().val())})})}}),T3.Content.UI.Editor.HtmlEditor=T3.Content.UI.PopoverButton.extend({_editorInitialized:!1,_editor:null,$popoverContent:$("<div />").attr("class","t3-ui t3-htmleditor-window"),label:"HTML Editor",popoverTitle:"HTML Editor",popoverPosition:"left",classNames:["t3-primary-editor-action"],onPopoverOpen:function(){var that=this,id=this.get(Ember.GUID_KEY);if(!this._editorInitialized){var $editorContent=$("<textarea />",{id:"typo3-htmleditor-"+id}).html(that.get("value"));this.$popoverContent.append($editorContent),require(["codemirror","codemirror.xml","codemirror.css","codemirror.javascript","codemirror.htmlmixed"],function(){var editorFullyPopulated=!1;that._editor=CodeMirror.fromTextArea($editorContent.get(0),{mode:"text/html",tabMode:"indent",lineNumbers:!0,onChange:function(){that._editor&&editorFullyPopulated&&that.set("value",that._editor.getValue())}});var lineCount=that._editor.lineCount();for(var i=0;i<lineCount;i++)that._editor.indentLine(i);editorFullyPopulated=!0}),this._editorInitialized=!0}},willDestroyElement:function(){this._editorInitialized&&(this.$().trigger("hidePopover"),this._editor.toTextArea(),$("#typo3-htmleditor-"+this.get(Ember.GUID_KEY)).remove(),this._editorInitialized=!1)}}),T3.Content.UI.Editor.FileUpload=Ember.View.extend({value:"",fileChooserLabel:"Choose file",uploaderLabel:"Upload!",allowedFileTypes:null,_uploader:null,_containerId:null,_browseButtonId:null,_uploadButtonShown:!1,template:Ember.Handlebars.compile(fileUploadTemplate),init:function(){var id=this.get(Ember.GUID_KEY);return this._containerId="typo3-fileupload"+id,this._browseButtonId="typo3-fileupload-browsebutton"+id,this._super()},didInsertElement:function(){this._initializeUploader()},_initializeUploader:function(){var that=this;this._uploader=new plupload.Uploader({runtimes:"html5",browse_button:this._browseButtonId,container:this._containerId,max_file_size:"10mb",url:"/neos/content/uploadImage",multipart_params:{}}),this.allowedFileTypes&&(this._uploader.settings.filters=[{title:"Allowed files",extensions:this.allowedFileTypes}]),this._uploader.bind("FilesAdded",function(uploader,files){files.length>0?that.set("_uploadButtonShown",!0):that.set("_uploadButtonShown",!1)}),this._uploader.bind("BeforeUpload",function(uploader,file){uploader.settings.multipart_params["image[type]"]="plupload",uploader.settings.multipart_params["image[fileName]"]=file.name}),this._uploader.bind("FileUploaded",function(uploader,file,response){T3.Common.Notification.ok('Uploaded file "'+file.name+'".'),that.fileUploaded(response.response)}),this._uploader.init(),this._uploaderInitialized()},_uploaderInitialized:function(){var that=this;this.$().find('input[type=file][id^="'+this._uploader.id+'"]').change(function(event){that.filesScheduledForUpload(event.target.files)})},filesScheduledForUpload:function(files){},fileUploaded:function(response){this.set("_uploadButtonShown",!1)},upload:function(){this._uploader.start()}}),T3.Content.UI.Editor.Image=T3.Content.UI.Editor.FileUpload.extend({fileChooserLabel:"Choose Image",uploaderLabel:"Upload!",imagePreviewMaximumDimensions:{w:160,h:160},allowedFileTypes:"jpg,png",template:Ember.Handlebars.compile(imageUploadTemplate),_uploadPreviewShown:!0,_uploadPreviewNotShown:function(){return!this.get("_uploadPreviewShown")}.property("_uploadPreviewShown").cacheable(),_uploadPreviewImageSource:"/_Resources/Static/Packages/TYPO3.TYPO3/Images/dummy-image.png",_imageBadgeVisible:!1,_imageBadgeClass:function(){return this.get("_imageBadgeVisible")?"typo3-imagebadge typo3-imagebadge-visible":"typo3-imagebadge"}.property("_imageBadgeVisible").cacheable(),_imageFullyLoaded:!1,_originalImageUuid:null,_originalImageSize:null,_previewImageUri:null,_previewImageSize:null,_cropProperties:null,_finalImageScale:null,init:function(){var that=this;this._super(),this.set("_finalImageScale",Ember.Object.create({w:null,h:null,_updateValueIfWidthAndHeightChange:function(){that._updateValue()}.observes("w","h"),computedHeight:function(key,value){return arguments.length===1?this.get("h"):(this.set("w",Math.ceil(that.getPath("_cropProperties.aspectRatio")*value)),value)}.property("h").cacheable()})),this.set("_cropProperties",Ember.Object.create({x:null,y:null,w:null,h:null,full:function(){return{x:this.get("x"),y:this.get("y"),w:this.get("w"),h:this.get("h")}}.property("w","h","x","y").cacheable(),initialized:function(){return this.get("w")!==null&&this.get("h")!==null&&this.get("x")!==null&&this.get("y")!==null}.property("w","h","x","y").cacheable(),aspectRatio:function(){return isNaN(this.get("w"))||isNaN(this.get("h"))||this.get("w")===0||this.get("h")===0?1:parseFloat(this.get("w"))/parseFloat(this.get("h"))}.property("w","h").cacheable()}))},_aspectRatioChanged:function(){this.setPath("_finalImageScale.h",parseInt(this.getPath("_finalImageScale.w")/this.getPath("_cropProperties.aspectRatio")))}.observes("_finalImageScale.w","_cropProperties.aspectRatio"),didInsertElement:function(){this._super(),this.$().find(".typo3-imagethumbnail-inner").css({width:this.imagePreviewMaximumDimensions.w+"px",height:this.imagePreviewMaximumDimensions.h+"px"}),this.$().find(".typo3-imagethumbnailcontainer").css({width:this.imagePreviewMaximumDimensions.w+"px",height:this.imagePreviewMaximumDimensions.h+"px"}),this._readAndDeserializeValue()},willDestroyElement:function(){this.$().find(".typo3-imagethumbnail").trigger("hidePopover")},filesScheduledForUpload:function(files){var that=this;if(files.length>0){var image=files[0];if(window.FileReader){var reader=new FileReader;reader.onload=function(event){var binaryData=event.target.result;that.set("_uploadPreviewImageSource",binaryData);var imageObjForFindingSize=new window.Image;imageObjForFindingSize.onload=function(){var scaleFactor,offset;imageObjForFindingSize.width>imageObjForFindingSize.height?(that.$().find(".typo3-uploadthumbnail img").addClass("typo3-fileupload-thumbnail-landscape"),that.$().find(".typo3-uploadthumbnail img").removeClass("typo3-fileupload-thumbnail-portrait"),scaleFactor=that.getPath("imagePreviewMaximumDimensions.w")/imageObjForFindingSize.width,offset=(that.getPath("imagePreviewMaximumDimensions.h")-imageObjForFindingSize.height*scaleFactor)/2,that.$().find(".typo3-uploadthumbnail img").css("margin-top",parseInt(offset)+"px"),that.$().find(".typo3-uploadthumbnail img").css("margin-left","0px")):(that.$().find(".typo3-uploadthumbnail img").removeClass("typo3-fileupload-thumbnail-landscape"),that.$().find(".typo3-uploadthumbnail img").addClass("typo3-fileupload-thumbnail-portrait"),scaleFactor=that.getPath("imagePreviewMaximumDimensions.h")/imageObjForFindingSize.height,offset=(that.getPath("imagePreviewMaximumDimensions.w")-imageObjForFindingSize.width*scaleFactor)/2,that.$().find(".typo3-uploadthumbnail img").css("margin-left",parseInt(offset)+"px"),that.$().find(".typo3-uploadthumbnail img").css("margin-top","0px")),that.set("_uploadPreviewShown",!0),that.set("_imageBadgeVisible",!1)},imageObjForFindingSize.src=binaryData},reader.readAsDataURL(image)}}},fileUploaded:function(response){if(!T3.Common.Util.isValidJsonString(response)){T3.Common.Notification.error("Tried to fetch image metadata: Unexpected result format.");return}this._super();var responseJson=JSON.parse(response);this.set("_originalImageUuid",responseJson.imageUuid),this._setPreviewImage(responseJson),this.setPath("_finalImageScale.w",responseJson.originalSize.w),this._resetCropPropertiesToCurrentPreviewImageSize(),this.set("_imageFullyLoaded",!0),this._updateValue()},_setPreviewImage:function(responseJson){Ember.beginPropertyChanges(),this.set("_originalImageSize",responseJson.originalSize),this.set("_previewImageSize",responseJson.previewSize),this.set("_previewImageUri",responseJson.previewImageResourceUri),this.set("_uploadPreviewShown",!1),this.set("_imageBadgeVisible",!0),Ember.endPropertyChanges()},_resetCropPropertiesToCurrentPreviewImageSize:function(){this.setPath("_cropProperties.x",0),this.setPath("_cropProperties.y",0),this.setPath("_cropProperties.w",this.getPath("_previewImageSize.w")),this.setPath("_cropProperties.h",this.getPath("_previewImageSize.h"))},_initializePopover:function(){var that=this,$popoverContent=$("<div />"),$imageInThumbnail=$("<img />"),previewImageSize=that.get("_previewImageSize");$popoverContent.append($imageInThumbnail),$popoverContent.css({width:previewImageSize.w+10+"px",height:previewImageSize.h+10+"px","padding-left":"5px","padding-top":"5px",background:"black"}),this.$().find(".typo3-imagethumbnail").popover({content:$popoverContent,header:"<span>Crop Image</span>",preventTop:!0,preventBottom:!0,preventRight:!0,openEvent:function(){$imageInThumbnail.attr("src",that.get("_previewImageUri")),this.popover$.addClass("t3-ui");var settings={onSelect:function(previewImageCoordinates){Ember.beginPropertyChanges(),that.setPath("_cropProperties.x",previewImageCoordinates.x),that.setPath("_cropProperties.y",previewImageCoordinates.y),that.setPath("_cropProperties.w",previewImageCoordinates.w),that.setPath("_cropProperties.h",previewImageCoordinates.h),Ember.endPropertyChanges(),that._updateValue()}};if(that.getPath("_cropProperties.initialized")){var cropOptions=that.getPath("_cropProperties.full");settings.setSelect=[cropOptions.x,cropOptions.y,cropOptions.x+cropOptions.w,cropOptions.y+cropOptions.h]}$imageInThumbnail.Jcrop(settings)}})}.observes("_previewImageUri"),_updateCropPreviewImage:function(){if(!this.get("_previewImageUri"))return;var cropProperties=this.getPath("_cropProperties.full"),scalingFactorX=this.imagePreviewMaximumDimensions.w/cropProperties.w,scalingFactorY=this.imagePreviewMaximumDimensions.h/cropProperties.h,overallScalingFactor=Math.min(scalingFactorX,scalingFactorY),previewBoundingBoxSize={w:Math.floor(cropProperties.w*overallScalingFactor),h:Math.floor(cropProperties.h*overallScalingFactor)};this.$().find(".typo3-imagethumbnail-inner").css({width:previewBoundingBoxSize.w+"px",height:previewBoundingBoxSize.h+"px",position:"absolute",left:(this.imagePreviewMaximumDimensions.w-previewBoundingBoxSize.w)/2+"px",top:(this.imagePreviewMaximumDimensions.h-previewBoundingBoxSize.h)/2+"px"}),this.$().find(".typo3-imagethumbnail-inner img").css({width:Math.floor(this.get("_previewImageSize").w*overallScalingFactor)+"px",height:Math.floor(this.get("_previewImageSize").h*overallScalingFactor)+"px",marginLeft:"-"+cropProperties.x*overallScalingFactor+"px",marginTop:"-"+cropProperties.y*overallScalingFactor+"px"})}.observes("_cropProperties.x","_cropProperties.y","_cropProperties.w","_cropProperties.h","_previewImageUri"),_updateValue:function(){if(!this.getPath("_cropProperties.initialized"))return;if(!this.get("_imageFullyLoaded"))return;var originalImageCropDimensions=this._convertCropOptionsFromPreviewImageCoordinates(this.getPath("_cropProperties.full"));this.set("value",JSON.stringify({originalImage:this.get("_originalImageUuid"),processingInstructions:[{command:"crop",options:{start:{x:originalImageCropDimensions.x,y:originalImageCropDimensions.y},size:{width:originalImageCropDimensions.w,height:originalImageCropDimensions.h}}},{command:"resize",options:{size:{width:this.getPath("_finalImageScale.w"),height:this.getPath("_finalImageScale.h")}}}]}))},_readAndDeserializeValue:function(){var that=this,imageVariant=this.get("value");if(!imageVariant||!T3.Common.Util.isValidJsonString(imageVariant))return;try{imageVariant=JSON.parse(imageVariant)}catch(e){return}imageVariant&&(this._displayImageLoader(),this.set("_uploadPreviewShown",!1),$.get("/neos/content/imageWithMetadata/"+imageVariant.originalImage,function(result){that._hideImageLoader();var metadata=JSON.parse(result);that.beginPropertyChanges(),that._setPreviewImage(metadata),that.set("_originalImageUuid",imageVariant.originalImage),$.each(imageVariant.processingInstructions,function(index,instruction){if(instruction.command==="crop"){var finalSizeCropProperties={x:Ember.getPath(instruction,"options.start.x"),y:Ember.getPath(instruction,"options.start.y"),w:Ember.getPath(instruction,"options.size.width"),h:Ember.getPath(instruction,"options.size.height")},previewImageCropProperties=that._convertCropOptionsToPreviewImageCoordinates(finalSizeCropProperties);that.setPath("_cropProperties.x",previewImageCropProperties.x),that.setPath("_cropProperties.y",previewImageCropProperties.y),that.setPath("_cropProperties.w",previewImageCropProperties.w),that.setPath("_cropProperties.h",previewImageCropProperties.h)}else instruction.command==="resize"&&that.setPath("_finalImageScale.w",Ember.getPath(instruction,"options.size.width"))}),that.endPropertyChanges(),that.set("_imageFullyLoaded",!0)}))},_displayImageLoader:function(){var $canvas=$('<canvas class="t3-image-loadingindicator" />');this.$().find(".typo3-imagethumbnailcontainer").append($canvas),new CanvasIndicator($canvas.get(0),{bars:12,innerRadius:8,size:[3,15],rgb:[255,255,255],fps:15})},_hideImageLoader:function(){this.$().find(".t3-image-loadingindicator").remove()},_convertCropOptionsFromPreviewImageCoordinates:function(previewImageCoordinates){var previewImageSize=this.get("_previewImageSize"),originalImageSize=this.get("_originalImageSize");return{x:previewImageCoordinates.x*(originalImageSize.w/previewImageSize.w),y:previewImageCoordinates.y*(originalImageSize.h/previewImageSize.h),w:previewImageCoordinates.w*(originalImageSize.w/previewImageSize.w),h:previewImageCoordinates.h*(originalImageSize.h/previewImageSize.h)}},_convertCropOptionsToPreviewImageCoordinates:function(coordinates){var previewImageSize=this.get("_previewImageSize"),originalImageSize=this.get("_originalImageSize");return{x:parseInt(coordinates.x/(originalImageSize.w/previewImageSize.w)),y:parseInt(coordinates.y/(originalImageSize.h/previewImageSize.h)),w:parseInt(coordinates.w/(originalImageSize.w/previewImageSize.w)),h:parseInt(coordinates.h/(originalImageSize.h/previewImageSize.h))}}})}),function(a){a.Jcrop=function(b,c){function h(a){return a+"px"}function i(a){return d.baseClass+"-"+a}function j(){return a.fx.step.hasOwnProperty("backgroundColor")}function k(b){var c=a(b).offset();return[c.left,c.top]}function l(a){return[a.pageX-e[0],a.pageY-e[1]]}function m(b){typeof b!="object"&&(b={}),d=a.extend(d,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){typeof d[b]!="function"&&(d[b]=function(){})})}function n(a,b){e=k(E),bd.setCursor(a==="move"?a:a+"-resize");if(a==="move")return bd.activateHandlers(p(b),u);var c=ba.getFixed(),d=q(a),f=ba.getCorner(q(d));ba.setPressed(ba.getCorner(d)),ba.setCurrent(f),bd.activateHandlers(o(a,c),u)}function o(a,b){return function(c){if(!d.aspectRatio)switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}else switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}ba.setCurrent(c),bc.update()}}function p(a){var b=a;return be.watchKeys(),function(a){ba.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,bc.update()}}function q(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function r(a){return function(b){return d.disabled?!1:a==="move"&&!d.allowMove?!1:(e=k(E),X=!0,n(a,l(b)),b.stopPropagation(),b.preventDefault(),!1)}}function s(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),U=a.width()/d,V=a.height()/e,a.width(d).height(e)}function t(a){return{x:a.x*U,y:a.y*V,x2:a.x2*U,y2:a.y2*V,w:a.w*U,h:a.h*V}}function u(a){var b=ba.getFixed();b.w>d.minSelect[0]&&b.h>d.minSelect[1]?(bc.enableHandles(),bc.done()):bc.release(),bd.setCursor(d.allowSelect?"crosshair":"default")}function v(a){if(d.disabled)return!1;if(!d.allowSelect)return!1;X=!0,e=k(E),bc.disableHandles(),bd.setCursor("crosshair");var b=l(a);return ba.setPressed(b),bc.update(),bd.activateHandlers(w,u),be.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}function w(a){ba.setCurrent(a),bc.update()}function z(){var b=a("<div></div>").addClass(i("tracker"));return a.browser.msie&&b.css({opacity:0,backgroundColor:"white"}),b}function bf(a){H.removeClass().addClass(i("holder")).addClass(a)}function bg(a,b){function t(){window.setTimeout(u,l)}var c=a[0]/U,e=a[1]/V,f=a[2]/U,g=a[3]/V;if(Y)return;var h=ba.flipCoords(c,e,f,g),i=ba.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=d.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=d.swingSpeed;x=k[0],y=k[1],f=k[2],g=k[3],bc.animMode(!0);var s,u=function(){return function(){q+=(100-q)/r,k[0]=x+q/100*m,k[1]=y+q/100*n,k[2]=f+q/100*o,k[3]=g+q/100*p,q>=99.8&&(q=100),q<100?(bi(k),t()):(bc.done(),typeof b=="function"&&b.call(bt))}}();t()}function bh(a){bi([a[0]/U,a[1]/V,a[2]/U,a[3]/V]),d.onSelect.call(bt,t(ba.getFixed())),bc.enableHandles()}function bi(a){ba.setPressed([a[0],a[1]]),ba.setCurrent([a[2],a[3]]),bc.update()}function bj(){return t(ba.getFixed())}function bk(){return ba.getFixed()}function bl(a){m(a),bs()}function bm(){d.disabled=!0,bc.disableHandles(),bc.setCursor("default"),bd.setCursor("default")}function bn(){d.disabled=!1,bs()}function bo(){bc.done(),bd.activateHandlers(null,null)}function bp(){H.remove(),B.show(),a(b).removeData("Jcrop")}function bq(a,b){bc.release(),bm();var c=new Image;c.onload=function(){var e=c.width,f=c.height,g=d.boxWidth,h=d.boxHeight;E.width(e).height(f),E.attr("src",a),I.attr("src",a),s(E,g,h),F=E.width(),G=E.height(),I.width(F).height(G),N.width(F+M*2).height(G+M*2),H.width(F).height(G),bb.resize(F,G),bn(),typeof b=="function"&&b.call(bt)},c.src=a}function br(a,b,c){var e=b||d.bgColor;d.bgFade&&j()&&d.fadeTime&&!c?a.animate({backgroundColor:e},{queue:!1,duration:d.fadeTime}):a.css("backgroundColor",e)}function bs(a){d.allowResize?a?bc.enableOnly():bc.enableHandles():bc.disableHandles(),bd.setCursor(d.allowSelect?"crosshair":"default"),bc.setCursor(d.allowMove?"move":"default"),d.hasOwnProperty("trueSize")&&(U=d.trueSize[0]/F,V=d.trueSize[1]/G),d.hasOwnProperty("setSelect")&&(bh(d.setSelect),bc.done(),delete d.setSelect),bb.refresh(),d.bgColor!=O&&(br(d.shade?bb.getShades():H,d.shade?d.shadeColor||d.bgColor:d.bgColor),O=d.bgColor),P!=d.bgOpacity&&(P=d.bgOpacity,d.shade?bb.refresh():bc.setBgOpacity(P)),Q=d.maxSize[0]||0,R=d.maxSize[1]||0,S=d.minSize[0]||0,T=d.minSize[1]||0,d.hasOwnProperty("outerImage")&&(E.attr("src",d.outerImage),delete d.outerImage),bc.refresh()}var d=a.extend({},a.Jcrop.defaults),e,f,g=!1;a.browser.msie&&a.browser.version.split(".")[0]==="6"&&(g=!0),typeof b!="object"&&(b=a(b)[0]),typeof c!="object"&&(c={}),m(c);var A={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},B=a(b),C=!0;if(b.tagName=="IMG"){if(B[0].width!=0&&B[0].height!=0)B.width(B[0].width),B.height(B[0].height);else{var D=new Image;D.src=B[0].src,B.width(D.width),B.height(D.height)}var E=B.clone().removeAttr("id").css(A).show();E.width(B.width()),E.height(B.height()),B.after(E).hide()}else E=B.css(A).show(),C=!1,d.shade===null&&(d.shade=!0);s(E,d.boxWidth,d.boxHeight);var F=E.width(),G=E.height(),H=a("<div />").width(F).height(G).addClass(i("holder")).css({position:"relative",backgroundColor:d.bgColor}).insertAfter(B).append(E);d.addClass&&H.addClass(d.addClass);var I=a("<div />"),J=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),K=a("<div />").width("100%").height("100%").css("zIndex",320),L=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=ba.getFixed();d.onDblClick.call(bt,a)}).insertBefore(E).append(J,K);C&&(I=a("<img />").attr("src",E.attr("src")).css(A).width(F).height(G),J.append(I)),g&&L.css({overflowY:"hidden"});var M=d.boundary,N=z().width(F+M*2).height(G+M*2).css({position:"absolute",top:h(-M),left:h(-M),zIndex:290}).mousedown(v),O=d.bgColor,P=d.bgOpacity,Q,R,S,T,U,V,W=!0,X,Y,Z;e=k(E);var _=function(){function a(){var a={},b=["touchstart","touchmove","touchend"],c=document.createElement("div"),d;try{for(d=0;d<b.length;d++){var e=b[d];e="on"+e;var f=e in c;f||(c.setAttribute(e,"return;"),f=typeof c[e]=="function"),a[b[d]]=f}return a.touchstart&&a.touchend&&a.touchmove}catch(g){return!1}}function b(){return d.touchSupport===!0||d.touchSupport===!1?d.touchSupport:a()}return{createDragger:function(a){return function(b){return b.pageX=b.originalEvent.changedTouches[0].pageX,b.pageY=b.originalEvent.changedTouches[0].pageY,d.disabled?!1:a==="move"&&!d.allowMove?!1:(X=!0,n(a,l(b)),b.stopPropagation(),b.preventDefault(),!1)}},newSelection:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,v(a)},isSupported:a,support:b()}}(),ba=function(){function h(d){d=n(d),c=a=d[0],e=b=d[1]}function i(a){a=n(a),f=a[0]-c,g=a[1]-e,c=a[0],e=a[1]}function j(){return[f,g]}function k(d){var f=d[0],g=d[1];0>a+f&&(f-=f+a),0>b+g&&(g-=g+b),G<e+g&&(g+=G-(e+g)),F<c+f&&(f+=F-(c+f)),a+=f,c+=f,b+=g,e+=g}function l(a){var b=m();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function m(){if(!d.aspectRatio)return p();var f=d.aspectRatio,g=d.minSize[0]/U,h=d.maxSize[0]/U,i=d.maxSize[1]/V,j=c-a,k=e-b,l=Math.abs(j),m=Math.abs(k),n=l/m,r,s,t,u;return h===0&&(h=F*10),i===0&&(i=G*10),n<f?(s=e,t=m*f,r=j<0?a-t:t+a,r<0?(r=0,u=Math.abs((r-a)/f),s=k<0?b-u:u+b):r>F&&(r=F,u=Math.abs((r-a)/f),s=k<0?b-u:u+b)):(r=c,u=l/f,s=k<0?b-u:b+u,s<0?(s=0,t=Math.abs((s-b)*f),r=j<0?a-t:t+a):s>G&&(s=G,t=Math.abs(s-b)*f,r=j<0?a-t:t+a)),r>a?(r-a<g?r=a+g:r-a>h&&(r=a+h),s>b?s=b+(r-a)/f:s=b-(r-a)/f):r<a&&(a-r<g?r=a-g:a-r>h&&(r=a-h),s>b?s=b+(a-r)/f:s=b-(a-r)/f),r<0?(a-=r,r=0):r>F&&(a-=r-F,r=F),s<0?(b-=s,s=0):s>G&&(b-=s-G,s=G),q(o(a,b,r,s))}function n(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>F&&(a[0]=F),a[1]>G&&(a[1]=G),[a[0],a[1]]}function o(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[e,g,f,h]}function p(){var d=c-a,f=e-b,g;return Q&&Math.abs(d)>Q&&(c=d>0?a+Q:a-Q),R&&Math.abs(f)>R&&(e=f>0?b+R:b-R),T/V&&Math.abs(f)<T/V&&(e=f>0?b+T/V:b-T/V),S/U&&Math.abs(d)<S/U&&(c=d>0?a+S/U:a-S/U),a<0&&(c-=a,a-=a),b<0&&(e-=b,b-=b),c<0&&(a-=c,c-=c),e<0&&(b-=e,e-=e),c>F&&(g=c-F,a-=g,c-=g),e>G&&(g=e-G,b-=g,e-=g),a>F&&(g=a-G,e-=g,b-=g),b>G&&(g=b-G,e-=g,b-=g),q(o(a,b,c,e))}function q(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var a=0,b=0,c=0,e=0,f,g;return{flipCoords:o,setPressed:h,setCurrent:i,getOffset:j,moveOffset:k,getCorner:l,getFixed:m}}(),bb=function(){function f(a,b){e.left.css({height:h(b)}),e.right.css({height:h(b)})}function g(){return i(ba.getFixed())}function i(a){e.top.css({left:h(a.x),width:h(a.w),height:h(a.y)}),e.bottom.css({top:h(a.y2),left:h(a.x),width:h(a.w),height:h(G-a.y2)}),e.right.css({left:h(a.x2),width:h(F-a.x2)}),e.left.css({width:h(a.x)})}function j(){return a("<div />").css({position:"absolute",backgroundColor:d.shadeColor||d.bgColor}).appendTo(c)}function k(){b||(b=!0,c.insertBefore(E),g(),bc.setBgOpacity(1,0,1),I.hide(),l(d.shadeColor||d.bgColor,1),bc.isAwake()?n(d.bgOpacity,1):n(1,1))}function l(a,b){br(p(),a,b)}function m(){b&&(c.remove(),I.show(),b=!1,bc.isAwake()?bc.setBgOpacity(d.bgOpacity,1,1):(bc.setBgOpacity(1,1,1),bc.disableHandles()),br(H,0,1))}function n(a,e){b&&(d.bgFade&&!e?c.animate({opacity:1-a},{queue:!1,duration:d.fadeTime}):c.css({opacity:1-a}))}function o(){d.shade?k():m(),bc.isAwake()&&n(d.bgOpacity)}function p(){return c.children()}var b=!1,c=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),e={top:j(),left:j().height(G),right:j().height(G),bottom:j()};return{update:g,updateRaw:i,getShades:p,setBgColor:l,enable:k,disable:m,resize:f,refresh:o,opacity:n}}(),bc=function(){function k(b){var c=a("<div />").css({position:"absolute",opacity:d.borderOpacity}).addClass(i(b));return J.append(c),c}function l(b,c){var d=a("<div />").mousedown(r(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return _.support&&d.bind("touchstart.jcrop",_.createDragger(b)),K.append(d),d}function m(a){var b=d.handleSize;return l(a,c++).css({opacity:d.handleOpacity}).width(b).height(b).addClass(i("handle"))}function n(a){return l(a,c++).addClass("jcrop-dragbar")}function o(a){var b;for(b=0;b<a.length;b++)g[a[b]]=n(a[b])}function p(a){var b,c;for(c=0;c<a.length;c++){switch(a[c]){case"n":b="hline";break;case"s":b="hline bottom";break;case"e":b="vline right";break;case"w":b="vline"}e[a[c]]=k(b)}}function q(a){var b;for(b=0;b<a.length;b++)f[a[b]]=m(a[b])}function s(a,b){d.shade||I.css({top:h(-b),left:h(-a)}),L.css({top:h(b),left:h(a)})}function u(a,b){L.width(a).height(b)}function v(){var a=ba.getFixed();ba.setPressed([a.x,a.y]),ba.setCurrent([a.x2,a.y2]),w()}function w(a){if(b)return x(a)}function x(a){var c=ba.getFixed();u(c.w,c.h),s(c.x,c.y),d.shade&&bb.updateRaw(c),b||A(),a?d.onSelect.call(bt,t(c)):d.onChange.call(bt,t(c))}function y(a,c,e){if(!b&&!c)return;d.bgFade&&!e?E.animate({opacity:a},{queue:!1,duration:d.fadeTime}):E.css("opacity",a)}function A(){L.show(),d.shade?bb.opacity(P):y(P,!0),b=!0}function B(){F(),L.hide(),d.shade?bb.opacity(1):y(1),b=!1,d.onRelease.call(bt)}function C(){j&&K.show()}function D(){j=!0;if(d.allowResize)return K.show(),!0}function F(){j=!1,K.hide()}function G(a){Y===a?F():D()}function H(){G(!1),v()}var b,c=370,e={},f={},g={},j=!1;d.dragEdges&&a.isArray(d.createDragbars)&&o(d.createDragbars),a.isArray(d.createHandles)&&q(d.createHandles),d.drawBorders&&a.isArray(d.createBorders)&&p(d.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var M=z().mousedown(r("move")).css({cursor:"move",position:"absolute",zIndex:360});return _.support&&M.bind("touchstart.jcrop",_.createDragger("move")),J.append(M),F(),{updateVisible:w,update:x,release:B,refresh:v,isAwake:function(){return b},setCursor:function(a){M.css("cursor",a)},enableHandles:D,enableOnly:function(){j=!0},showHandles:C,disableHandles:F,animMode:G,setBgOpacity:y,done:H}}(),bd=function(){function f(){N.css({zIndex:450}),_.support&&a(document).bind("touchmove.jcrop",k).bind("touchend.jcrop",m),e&&a(document).bind("mousemove.jcrop",h).bind("mouseup.jcrop",i)}function g(){N.css({zIndex:290}),a(document).unbind(".jcrop")}function h(a){return b(l(a)),!1}function i(a){return a.preventDefault(),a.stopPropagation(),X&&(X=!1,c(l(a)),bc.isAwake()&&d.onSelect.call(bt,t(ba.getFixed())),g(),b=function(){},c=function(){}),!1}function j(a,d){return X=!0,b=a,c=d,f(),!1}function k(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,h(a)}function m(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,i(a)}function n(a){N.css("cursor",a)}var b=function(){},c=function(){},e=d.trackDocument;return e||N.mousemove(h).mouseup(i).mouseout(i),E.before(N),{activateHandlers:j,setCursor:n}}(),be=function(){function e(){d.keySupport&&(b.show(),b.focus())}function f(a){b.hide()}function h(a,b,c){d.allowMove&&(ba.moveOffset([b,c]),bc.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function i(a){if(a.ctrlKey||a.metaKey)return!0;Z=a.shiftKey?!0:!1;var b=Z?10:1;switch(a.keyCode){case 37:h(a,-b,0);break;case 39:h(a,b,0);break;case 38:h(a,0,-b);break;case 40:h(a,0,b);break;case 27:d.allowSelect&&bc.release();break;case 9:return!0}return!1}var b=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}),c=a("<div />").css({position:"absolute",overflow:"hidden"}).append(b);return d.keySupport&&(b.keydown(i).blur(f),g||!d.fixedSupport?(b.css({position:"absolute",left:"-20px"}),c.append(b).insertBefore(E)):b.insertBefore(E)),{watchKeys:e}}();_.support&&N.bind("touchstart.jcrop",_.newSelection),K.hide(),bs(!0);var bt={setImage:bq,animateTo:bg,setSelect:bh,setOptions:bl,tellSelect:bj,tellScaled:bk,setClass:bf,disable:bm,enable:bn,cancel:bo,release:bc.release,destroy:bp,focus:be.watchKeys,getBounds:function(){return[F*U,G*V]},getWidgetSize:function(){return[F,G]},getScaleFactor:function(){return[U,V]},getOptions:function(){return d},ui:{holder:H,selection:L}};return a.browser.msie&&H.bind("selectstart",function(){return!1}),B.data("Jcrop",bt),bt},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if(b==="api")return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else this.tagName=="IMG"?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function g(){f.complete?(e.unbind(".jcloader"),a.isFunction(c)&&c.call(f)):window.setTimeout(g,50)}var e=a(b),f=e[0];e.bind("load.jcloader",g).bind("error.jcloader",function(b){e.unbind(".jcloader"),a.isFunction(d)&&d.call(f)}),f.complete&&a.isFunction(c)&&(e.unbind(".jcloader"),c.call(f))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:7,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),define("jquery.jcrop",function(){}),function(){function h(){this.returnValue=!1}function j(){this.cancelBubble=!0}var f=0,k=[],m={},i={},a={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},l=/[<>&\"\']/g,b,c=window.setTimeout,d={},e;(function(n){var o=n.split(/,/),p,r,q;for(p=0;p<o.length;p+=2){q=o[p+1].split(/ /);for(r=0;r<q.length;r++)i[q[r]]=o[p]}})("application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats,docx pptx xlsx,audio/mpeg,mpga mpega mp2 mp3,audio/x-wav,wav,audio/mp4,m4a,image/bmp,bmp,image/gif,gif,image/jpeg,jpeg jpg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/html,htm html xhtml,text/rtf,rtf,video/mpeg,mpeg mpg mpe,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/vnd.rn-realvideo,rv,text/csv,csv,text/plain,asc txt text diff log,application/octet-stream,exe");var g={VERSION:"1.5b",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:i,extend:function(n){return g.each(arguments,function(o,p){p>0&&g.each(o,function(r,q){n[q]=r})}),n},cleanName:function(n){var o,p;p=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(o=0;o<p.length;o+=2)n=n.replace(p[o],p[o+1]);return n=n.replace(/\s+/g,"_"),n=n.replace(/[^a-z0-9_\-\.]+/gi,""),n},addRuntime:function(n,o){return o.name=n,k[n]=o,k.push(o),o},guid:function(){var n=(new Date).getTime().toString(32),o;for(o=0;o<5;o++)n+=Math.floor(Math.random()*65535).toString(32);return(g.guidPrefix||"p")+n+(f++).toString(32)},buildUrl:function(o,n){var p="";return g.each(n,function(r,q){p+=(p?"&":"")+encodeURIComponent(q)+"="+encodeURIComponent(r)}),p&&(o+=(o.indexOf("?")>0?"&":"?")+p),o},each:function(q,r){var p,o,n;if(q){p=q.length;if(p===b){for(o in q)if(q.hasOwnProperty(o)&&r(q[o],o)===!1)return}else for(n=0;n<p;n++)if(r(q[n],n)===!1)return}},formatSize:function(n){return n===b||/\D/.test(n)?g.translate("N/A"):n>1073741824?Math.round(n/1073741824,1)+" GB":n>1048576?Math.round(n/1048576,1)+" MB":n>1024?Math.round(n/1024,1)+" KB":n+" b"},getPos:function(o,s){function n(B){var z,A,w=0,C=0;return B&&(A=B.getBoundingClientRect(),z=u.compatMode==="CSS1Compat"?u.documentElement:u.body,w=A.left+z.scrollLeft,C=A.top+z.scrollTop),{x:w,y:C}}var t=0,r=0,v,u=document,p,q;o=o,s=s||u.body;if(o&&o.getBoundingClientRect&&navigator.userAgent.indexOf("MSIE")>0&&u.documentMode!==8)return p=n(o),q=n(s),{x:p.x-q.x,y:p.y-q.y};v=o;while(v&&v!=s&&v.nodeType)t+=v.offsetLeft||0,r+=v.offsetTop||0,v=v.offsetParent;v=o.parentNode;while(v&&v!=s&&v.nodeType)t-=v.scrollLeft||0,r-=v.scrollTop||0,v=v.parentNode;return{x:t,y:r}},getSize:function(n){return{w:n.offsetWidth||n.clientWidth,h:n.offsetHeight||n.clientHeight}},parseSize:function(n){var o;return typeof n=="string"&&(n=/^([0-9]+)([mgk]?)$/.exec(n.toLowerCase().replace(/[^0-9mkg]/g,"")),o=n[2],n=+n[1],o=="g"&&(n*=1073741824),o=="m"&&(n*=1048576),o=="k"&&(n*=1024)),n},xmlEncode:function(n){return n?(""+n).replace(l,function(o){return a[o]?"&"+a[o]+";":o}):n},toArray:function(p){var o,n=[];for(o=0;o<p.length;o++)n[o]=p[o];return n},addI18n:function(n){return g.extend(m,n)},translate:function(n){return m[n]||n},isEmptyObj:function(n){if(n===b)return!0;for(var o in n)return!1;return!0},hasClass:function(p,o){var n;return p.className==""?!1:(n=new RegExp("(^|\\s+)"+o+"(\\s+|$)"),n.test(p.className))},addClass:function(o,n){g.hasClass(o,n)||(o.className=o.className==""?n:o.className.replace(/\s+$/,"")+" "+n)},removeClass:function(p,o){var n=new RegExp("(^|\\s+)"+o+"(\\s+|$)");p.className=p.className.replace(n,function(r,q,s){return q===" "&&s===" "?" ":""})},getStyle:function(o,n){if(o.currentStyle)return o.currentStyle[n];if(window.getComputedStyle)return window.getComputedStyle(o,null)[n]},addEvent:function(s,n,t){var r,q,p,o;o=arguments[3],n=n.toLowerCase(),e===b&&(e="Plupload_"+g.guid()),s.addEventListener?(r=t,s.addEventListener(n,r,!1)):s.attachEvent&&(r=function(){var u=window.event;u.target||(u.target=u.srcElement),u.preventDefault=h,u.stopPropagation=j,t(u)},s.attachEvent("on"+n,r)),s[e]===b&&(s[e]=g.guid()),d.hasOwnProperty(s[e])||(d[s[e]]={}),q=d[s[e]],q.hasOwnProperty(n)||(q[n]=[]),q[n].push({func:r,orig:t,key:o})},removeEvent:function(s,n){var q,t,p;typeof arguments[2]=="function"?t=arguments[2]:p=arguments[2],n=n.toLowerCase();if(!(s[e]&&d[s[e]]&&d[s[e]][n]))return;q=d[s[e]][n];for(var o=q.length-1;o>=0;o--)if(q[o].key===p||q[o].orig===t){s.detachEvent?s.detachEvent("on"+n,q[o].func):s.removeEventListener&&s.removeEventListener(n,q[o].func,!1),q[o].orig=null,q[o].func=null,q.splice(o,1);if(t!==b)break}q.length||delete d[s[e]][n];if(g.isEmptyObj(d[s[e]])){delete d[s[e]];try{delete s[e]}catch(r){s[e]=b}}},removeAllEvents:function(o){var n=arguments[1];if(o[e]===b||!o[e])return;g.each(d[o[e]],function(q,p){g.removeEvent(o,p,n)})}};g.Uploader=function(q){function r(){var v,w=0,u;if(this.state==g.STARTED){for(u=0;u<s.length;u++)!v&&s[u].status==g.QUEUED?(v=s[u],v.status=g.UPLOADING,this.trigger("BeforeUpload",v)&&this.trigger("UploadFile",v)):w++;w==s.length&&(this.trigger("UploadComplete",s),this.stop())}}function n(){var v,u;t.reset();for(v=0;v<s.length;v++)u=s[v],u.size!==b?(t.size+=u.size,t.loaded+=u.loaded):t.size=b,u.status==g.DONE?t.uploaded++:u.status==g.FAILED?t.failed++:t.queued++;t.size===b?t.percent=s.length>0?Math.ceil(t.uploaded/s.length*100):0:(t.bytesPerSec=Math.ceil(t.loaded/((+(new Date)-p||1)/1e3)),t.percent=t.size>0?Math.ceil(t.loaded/t.size*100):0)}var o={},t,s=[],p;t=new g.QueueProgress,q=g.extend({chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",filters:[]},q),g.extend(this,{state:g.STOPPED,runtime:"",features:{},files:s,settings:q,total:t,id:g.guid(),init:function(){function u(){var E=w[y++],D,B,C;if(E){D=E.getFeatures(),B=z.settings.required_features;if(B){B=B.split(",");for(C=0;C<B.length;C++)if(!D[B[C]]){u();return}}E.init(z,function(F){F&&F.success?(z.features=D,z.runtime=E.name,z.trigger("Init",{runtime:E.name}),z.trigger("PostInit"),z.refresh()):u()})}else z.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})}var z=this,A,w,v,y=0,x;typeof q.preinit=="function"?q.preinit(z):g.each(q.preinit,function(C,B){z.bind(B,C)}),q.page_url=q.page_url||document.location.pathname.replace(/\/[^\/]+$/g,"/"),/^(\w+:\/\/|\/)/.test(q.url)||(q.url=q.page_url+q.url),q.chunk_size=g.parseSize(q.chunk_size),q.max_file_size=g.parseSize(q.max_file_size),z.bind("FilesAdded",function(B,E){var D,C,G=0,H,F=q.filters;F&&F.length&&(H=[],g.each(F,function(I){g.each(I.extensions.split(/,/),function(J){/^\s*\*\s*$/.test(J)?H.push("\\.*"):H.push("\\."+J.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),H=new RegExp(H.join("|")+"$","i"));for(D=0;D<E.length;D++){C=E[D],C.loaded=0,C.percent=0,C.status=g.QUEUED;if(H&&!H.test(C.name)){B.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:C});continue}if(C.size!==b&&C.size>q.max_file_size){B.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:C});continue}s.push(C),G++}if(!G)return!1;c(function(){z.trigger("QueueChanged"),z.refresh()},1)}),q.unique_names&&z.bind("UploadFile",function(B,C){var E=C.name.match(/\.([^.]+)$/),D="tmp";E&&(D=E[1]),C.target_name=C.id+"."+D}),z.bind("UploadProgress",function(B,C){C.percent=C.size>0?Math.ceil(C.loaded/C.size*100):100,n()}),z.bind("StateChanged",function(B){if(B.state==g.STARTED)p=+(new Date);else if(B.state==g.STOPPED)for(A=B.files.length-1;A>=0;A--)B.files[A].status==g.UPLOADING&&(B.files[A].status=g.QUEUED,n())}),z.bind("QueueChanged",n),z.bind("Error",function(B,C){C.file&&(C.file.status=g.FAILED,n(),B.state==g.STARTED&&c(function(){r.call(z)},1))}),z.bind("FileUploaded",function(B,C){C.status=g.DONE,C.loaded=C.size,B.trigger("UploadProgress",C),c(function(){r.call(z)},1)});if(q.runtimes){w=[],x=q.runtimes.split(/\s?,\s?/);for(A=0;A<x.length;A++)k[x[A]]&&w.push(k[x[A]])}else w=k;u(),typeof q.init=="function"?q.init(z):g.each(q.init,function(C,B){z.bind(B,C)})},refresh:function(){this.trigger("Refresh")},start:function(){this.state!=g.STARTED&&(this.state=g.STARTED,this.trigger("StateChanged"),r.call(this))},stop:function(){this.state!=g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged"))},getFile:function(v){var u;for(u=s.length-1;u>=0;u--)if(s[u].id===v)return s[u]},removeFile:function(v){var u;for(u=s.length-1;u>=0;u--)if(s[u].id===v.id)return this.splice(u,1)[0]},splice:function(w,u){var v;return v=s.splice(w===b?0:w,u===b?s.length:u),this.trigger("FilesRemoved",v),this.trigger("QueueChanged"),v},trigger:function(v){var x=o[v.toLowerCase()],w,u;if(x){u=Array.prototype.slice.call(arguments),u[0]=this;for(w=0;w<x.length;w++)if(x[w].func.apply(x[w].scope,u)===!1)return!1}return!0},hasEventListener:function(u){return!!o[u.toLowerCase()]},bind:function(u,w,v){var x;u=u.toLowerCase(),x=o[u]||[],x.push({func:w,scope:v||this}),o[u]=x},unbind:function(u){u=u.toLowerCase();var x=o[u],v,w=arguments[1];if(x){if(w!==b){for(v=x.length-1;v>=0;v--)if(x[v].func===w){x.splice(v,1);break}}else x=[];x.length||delete o[u]}},unbindAll:function(){var u=this;g.each(o,function(w,v){u.unbind(v)})},destroy:function(){this.trigger("Destroy"),this.unbindAll()}})},g.File=function(q,o,p){var n=this;n.id=q,n.name=o,n.size=p,n.loaded=0,n.percent=0,n.status=0},g.Runtime=function(){this.getFeatures=function(){},this.init=function(n,o){}},g.QueueProgress=function(){var n=this;n.size=0,n.loaded=0,n.uploaded=0,n.failed=0,n.queued=0,n.percent=0,n.bytesPerSec=0,n.reset=function(){n.size=n.loaded=n.uploaded=n.failed=n.queued=n.percent=n.bytesPerSec=0}},g.runtimes={},window.plupload=g}(),define("jquery.plupload",function(){}),function(window,document,plupload,undef){function readFileAsDataURL(file,callback){var reader;if(!("FileReader"in window))return callback(file.getAsDataURL());reader=new FileReader,reader.readAsDataURL(file),reader.onload=function(){callback(reader.result)}}function readFileAsBinary(file,callback){var reader;if(!("FileReader"in window))return callback(file.getAsBinary());reader=new FileReader,reader.readAsBinaryString(file),reader.onload=function(){callback(reader.result)}}function scaleImage(file,resize,mime,callback){var canvas,context,img,scale,up=this;readFileAsDataURL(html5files[file.id],function(data){canvas=document.createElement("canvas"),canvas.style.display="none",document.body.appendChild(canvas),context=canvas.getContext("2d"),img=new Image,img.onerror=img.onabort=function(){callback({success:!1})},img.onload=function(){var width,height,percentage,jpegHeaders,exifParser;resize.width||(resize.width=img.width),resize.height||(resize.height=img.height),scale=Math.min(resize.width/img.width,resize.height/img.height);if(scale<1||scale===1&&mime==="image/jpeg"){width=Math.round(img.width*scale),height=Math.round(img.height*scale),canvas.width=width,canvas.height=height,context.drawImage(img,0,0,width,height);if(mime==="image/jpeg"){jpegHeaders=new JPEG_Headers(atob(data.substring(data.indexOf("base64,")+7))),jpegHeaders.headers&&jpegHeaders.headers.length&&(exifParser=new ExifParser,exifParser.init(jpegHeaders.get("exif")[0])&&(exifParser.setExif("PixelXDimension",width),exifParser.setExif("PixelYDimension",height),jpegHeaders.set("exif",exifParser.getBinary()),up.hasEventListener("ExifData")&&up.trigger("ExifData",file,exifParser.EXIF()),up.hasEventListener("GpsData")&&up.trigger("GpsData",file,exifParser.GPS())));if(resize.quality)try{data=canvas.toDataURL(mime,resize.quality/100)}catch(e){data=canvas.toDataURL(mime)}}else data=canvas.toDataURL(mime);data=data.substring(data.indexOf("base64,")+7),data=atob(data),jpegHeaders&&jpegHeaders.headers&&jpegHeaders.headers.length&&(data=jpegHeaders.restore(data),jpegHeaders.purge()),canvas.parentNode.removeChild(canvas),callback({success:!0,data:data})}else callback({success:!1})},img.src=data})}function BinaryReader(){function read(idx,size){var mv=II?0:-8*(size-1),sum=0,i;for(i=0;i<size;i++)sum|=bin.charCodeAt(idx+i)<<Math.abs(mv+i*8);return sum}function putstr(segment,idx,length){var length=arguments.length===3?length:bin.length-idx-1;bin=bin.substr(0,idx)+segment+bin.substr(length+idx)}function write(idx,num,size){var str="",mv=II?0:-8*(size-1),i;for(i=0;i<size;i++)str+=String.fromCharCode(num>>Math.abs(mv+i*8)&255);putstr(str,idx,size)}var II=!1,bin;return{II:function(order){if(order===undef)return II;II=order},init:function(binData){II=!1,bin=binData},SEGMENT:function(idx,length,segment){switch(arguments.length){case 1:return bin.substr(idx,bin.length-idx-1);case 2:return bin.substr(idx,length);case 3:putstr(segment,idx,length);break;default:return bin}},BYTE:function(idx){return read(idx,1)},SHORT:function(idx){return read(idx,2)},LONG:function(idx,num){if(num===undef)return read(idx,4);write(idx,num,4)},SLONG:function(idx){var num=read(idx,4);return num>2147483647?num-4294967296:num},STRING:function(idx,size){var str="";for(size+=idx;idx<size;idx++)str+=String.fromCharCode(read(idx,1));return str}}}function JPEG_Headers(data){var markers={65505:{app:"EXIF",name:"APP1",signature:"Exif\0"},65506:{app:"ICC",name:"APP2",signature:"ICC_PROFILE\0"},65517:{app:"IPTC",name:"APP13",signature:"Photoshop 3.0\0"}},headers=[],read,idx,marker=undef,length=0,limit;read=new BinaryReader,read.init(data);if(read.SHORT(0)!==65496)return;idx=2,limit=Math.min(1048576,data.length);while(idx<=limit){marker=read.SHORT(idx);if(marker>=65488&&marker<=65495){idx+=2;continue}if(marker===65498||marker===65497)break;length=read.SHORT(idx+2)+2,markers[marker]&&read.STRING(idx+4,markers[marker].signature.length)===markers[marker].signature&&headers.push({hex:marker,app:markers[marker].app.toUpperCase(),name:markers[marker].name.toUpperCase(),start:idx,length:length,segment:read.SEGMENT(idx,length)}),idx+=length}return read.init(null),{headers:headers,restore:function(data){read.init(data);var jpegHeaders=new JPEG_Headers(data);if(!jpegHeaders.headers)return!1;for(var i=jpegHeaders.headers.length;i>0;i--){var hdr=jpegHeaders.headers[i-1];read.SEGMENT(hdr.start,hdr.length,"")}jpegHeaders.purge(),idx=read.SHORT(2)==65504?4+read.SHORT(4):2;for(var i=0,max=headers.length;i<max;i++)read.SEGMENT(idx,0,headers[i].segment),idx+=headers[i].length;return read.SEGMENT()},get:function(app){var array=[];for(var i=0,max=headers.length;i<max;i++)headers[i].app===app.toUpperCase()&&array.push(headers[i].segment);return array},set:function(app,segment){var array=[];typeof segment=="string"?array.push(segment):array=segment;for(var i=ii=0,max=headers.length;i<max;i++){headers[i].app===app.toUpperCase()&&(headers[i].segment=array[ii],headers[i].length=array[ii].length,ii++);if(ii>=array.length)break}},purge:function(){headers=[],read.init(null)}}}function ExifParser(){function extractTags(IFD_offset,tags2extract){var length=data.SHORT(IFD_offset),i,ii,tag,type,count,tagOffset,offset,value,values=[],hash={};for(i=0;i<length;i++){offset=tagOffset=IFD_offset+12*i+2,tag=tags2extract[data.SHORT(offset)];if(tag===undef)continue;type=data.SHORT(offset+=2),count=data.LONG(offset+=2),offset+=4,values=[];switch(type){case 1:case 7:count>4&&(offset=data.LONG(offset)+offsets.tiffHeader);for(ii=0;ii<count;ii++)values[ii]=data.BYTE(offset+ii);break;case 2:count>4&&(offset=data.LONG(offset)+offsets.tiffHeader),hash[tag]=data.STRING(offset,count-1);continue;case 3:count>2&&(offset=data.LONG(offset)+offsets.tiffHeader);for(ii=0;ii<count;ii++)values[ii]=data.SHORT(offset+ii*2);break;case 4:count>1&&(offset=data.LONG(offset)+offsets.tiffHeader);for(ii=0;ii<count;ii++)values[ii]=data.LONG(offset+ii*4);break;case 5:offset=data.LONG(offset)+offsets.tiffHeader;for(ii=0;ii<count;ii++)values[ii]=data.LONG(offset+ii*4)/data.LONG(offset+ii*4+4);break;case 9:offset=data.LONG(offset)+offsets.tiffHeader;for(ii=0;ii<count;ii++)values[ii]=data.SLONG(offset+ii*4);break;case 10:offset=data.LONG(offset)+offsets.tiffHeader;for(ii=0;ii<count;ii++)values[ii]=data.SLONG(offset+ii*4)/data.SLONG(offset+ii*4+4);break;default:continue}value=count==1?values[0]:values,tagDescs.hasOwnProperty(tag)&&typeof value!="object"?hash[tag]=tagDescs[tag][value]:hash[tag]=value}return hash}function getIFDOffsets(){var Tiff=undef,idx=offsets.tiffHeader;return data.II(data.SHORT(idx)==18761),data.SHORT(idx+=2)!==42?!1:(offsets.IFD0=offsets.tiffHeader+data.LONG(idx+=2),Tiff=extractTags(offsets.IFD0,tags.tiff),offsets.exifIFD="ExifIFDPointer"in Tiff?offsets.tiffHeader+Tiff.ExifIFDPointer:undef,offsets.gpsIFD="GPSInfoIFDPointer"in Tiff?offsets.tiffHeader+Tiff.GPSInfoIFDPointer:undef,!0)}function setTag(ifd,tag,value){var offset,length,tagOffset,valueOffset=0;if(typeof tag=="string"){var tmpTags=tags[ifd.toLowerCase()];for(hex in tmpTags)if(tmpTags[hex]===tag){tag=hex;break}}offset=offsets[ifd.toLowerCase()+"IFD"],length=data.SHORT(offset);for(i=0;i<length;i++){tagOffset=offset+12*i+2;if(data.SHORT(tagOffset)==tag){valueOffset=tagOffset+8;break}}return valueOffset?(data.LONG(valueOffset,value),!0):!1}var data,tags,offsets={},tagDescs;return data=new BinaryReader,tags={tiff:{274:"Orientation",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}},tagDescs={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},{init:function(segment){return offsets={tiffHeader:10},segment===undef||!segment.length?!1:(data.init(segment),data.SHORT(0)===65505&&data.STRING(4,5).toUpperCase()==="EXIF\0"?getIFDOffsets():!1)},EXIF:function(){var Exif;return Exif=extractTags(offsets.exifIFD,tags.exif),Exif.ExifVersion&&(Exif.ExifVersion=String.fromCharCode(Exif.ExifVersion[0],Exif.ExifVersion[1],Exif.ExifVersion[2],Exif.ExifVersion[3])),Exif},GPS:function(){var GPS;return GPS=extractTags(offsets.gpsIFD,tags.gps),GPS.GPSVersionID&&(GPS.GPSVersionID=GPS.GPSVersionID.join(".")),GPS},setExif:function(tag,value){return tag!=="PixelXDimension"&&tag!=="PixelYDimension"?!1:setTag("exif",tag,value)},getBinary:function(){return data.SEGMENT()}}}var html5files={},fakeSafariDragDrop;plupload.runtimes.Html5=plupload.addRuntime("html5",{getFeatures:function(){var xhr,hasXhrSupport,hasProgress,canSendBinary,dataAccessSupport,sliceSupport,ua;return ua=function(){var nav=navigator,userAgent=nav.userAgent,vendor=nav.vendor,webkit,opera,safari;return webkit=/WebKit/.test(userAgent),safari=webkit&&vendor.indexOf("Apple")!==-1,opera=window.opera&&window.opera.buildNumber,{ie:!webkit&&!opera&&/MSIE/gi.test(userAgent)&&/Explorer/gi.test(nav.appName),webkit:webkit,gecko:!webkit&&/Gecko/.test(userAgent),safari:safari,safariwin:safari&&navigator.platform.indexOf("Win")!==-1,opera:!!opera}}(),hasXhrSupport=hasProgress=dataAccessSupport=sliceSupport=!1,window.XMLHttpRequest&&(xhr=new XMLHttpRequest,hasProgress=!!xhr.upload,hasXhrSupport=!!xhr.sendAsBinary||!!xhr.upload),hasXhrSupport&&(canSendBinary=!!(xhr.sendAsBinary||window.Uint8Array&&window.ArrayBuffer),dataAccessSupport=!(!File||!File.prototype.getAsDataURL&&!window.FileReader||!canSendBinary),sliceSupport=!!File&&!!(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),fakeSafariDragDrop=ua.safariwin,{html5:hasXhrSupport,dragdrop:function(){var div=document.createElement("div");return"draggable"in div||"ondragstart"in div&&"ondrop"in div}(),jpgresize:dataAccessSupport,pngresize:dataAccessSupport,multipart:dataAccessSupport||!!window.FileReader||!!window.FormData,canSendBinary:canSendBinary,cantSendBlobInFormData:!!(ua.gecko&&window.FormData&&window.FileReader&&!FileReader.prototype.readAsArrayBuffer),progress:hasProgress,chunks:sliceSupport,multi_selection:!ua.safariwin,triggerDialog:ua.gecko&&window.FormData||ua.webkit}},init:function(uploader,callback){function addSelectedFiles(native_files){var file,i,files=[],id,fileNames={};for(i=0;i<native_files.length;i++){file=native_files[i];if(fileNames[file.name])continue;fileNames[file.name]=!0,id=plupload.guid(),html5files[id]=file,files.push(new plupload.File(id,file.fileName||file.name,file.fileSize||file.size))}files.length&&uploader.trigger("FilesAdded",files)}var features;features=this.getFeatures();if(!features.html5){callback({success:!1});return}uploader.bind("Init",function(up){var inputContainer,browseButton,mimes=[],i,y,filters=up.settings.filters,ext,type,container=document.body,inputFile;inputContainer=document.createElement("div"),inputContainer.id=up.id+"_html5_container",plupload.extend(inputContainer.style,{position:"absolute",background:uploader.settings.shim_bgcolor||"transparent",width:"100px",height:"100px",overflow:"hidden",zIndex:99999,opacity:uploader.settings.shim_bgcolor?"":0}),inputContainer.className="plupload html5",uploader.settings.container&&(container=document.getElementById(uploader.settings.container),plupload.getStyle(container,"position")==="static"&&(container.style.position="relative")),container.appendChild(inputContainer);e:for(i=0;i<filters.length;i++){ext=filters[i].extensions.split(/,/);for(y=0;y<ext.length;y++){if(ext[y]==="*"){mimes=[];break e}type=plupload.mimeTypes[ext[y]],type&&mimes.push(type)}}inputContainer.innerHTML='<input id="'+uploader.id+'_html5" '+' style="font-size:999px"'+' type="file" accept="'+mimes.join(",")+'" '+(uploader.settings.multi_selection&&uploader.features.multi_selection?'multiple="multiple"':"")+" />",inputContainer.scrollTop=100,inputFile=document.getElementById(uploader.id+"_html5"),up.features.triggerDialog?plupload.extend(inputFile.style,{position:"absolute",width:"100%",height:"100%"}):plupload.extend(inputFile.style,{cssFloat:"right",styleFloat:"right"}),inputFile.onchange=function(){addSelectedFiles(this.files)},browseButton=document.getElementById(up.settings.browse_button);if(browseButton){var hoverClass=up.settings.browse_button_hover,activeClass=up.settings.browse_button_active,topElement=up.features.triggerDialog?browseButton:inputContainer;hoverClass&&(plupload.addEvent(topElement,"mouseover",function(){plupload.addClass(browseButton,hoverClass)},up.id),plupload.addEvent(topElement,"mouseout",function(){plupload.removeClass(browseButton,hoverClass)},up.id)),activeClass&&(plupload.addEvent(topElement,"mousedown",function(){plupload.addClass(browseButton,activeClass)},up.id),plupload.addEvent(document.body,"mouseup",function(){plupload.removeClass(browseButton,activeClass)},up.id)),up.features.triggerDialog&&plupload.addEvent(browseButton,"click",function(e){document.getElementById(up.id+"_html5").click(),e.preventDefault()},up.id)}}),uploader.bind("PostInit",function(){var dropElm=document.getElementById(uploader.settings.drop_element);if(dropElm){if(fakeSafariDragDrop){plupload.addEvent(dropElm,"dragenter",function(e){var dropInputElm,dropPos,dropSize;dropInputElm=document.getElementById(uploader.id+"_drop"),dropInputElm||(dropInputElm=document.createElement("input"),dropInputElm.setAttribute("type","file"),dropInputElm.setAttribute("id",uploader.id+"_drop"),dropInputElm.setAttribute("multiple","multiple"),plupload.addEvent(dropInputElm,"change",function(){addSelectedFiles(this.files),plupload.removeEvent(dropInputElm,"change",uploader.id),dropInputElm.parentNode.removeChild(dropInputElm)},uploader.id),dropElm.appendChild(dropInputElm)),dropPos=plupload.getPos(dropElm,document.getElementById(uploader.settings.container)),dropSize=plupload.getSize(dropElm),plupload.getStyle(dropElm,"position")==="static"&&plupload.extend(dropElm.style,{position:"relative"}),plupload.extend(dropInputElm.style,{position:"absolute",display:"block",top:0,left:0,width:dropSize.w+"px",height:dropSize.h+"px",opacity:0})},uploader.id);return}plupload.addEvent(dropElm,"dragover",function(e){e.preventDefault()},uploader.id),plupload.addEvent(dropElm,"drop",function(e){var dataTransfer=e.dataTransfer;dataTransfer&&dataTransfer.files&&addSelectedFiles(dataTransfer.files),e.preventDefault()},uploader.id)}}),uploader.bind("Refresh",function(up){var browseButton,browsePos,browseSize,inputContainer,zIndex;browseButton=document.getElementById(uploader.settings.browse_button),browseButton&&(browsePos=plupload.getPos(browseButton,document.getElementById(up.settings.container)),browseSize=plupload.getSize(browseButton),inputContainer=document.getElementById(uploader.id+"_html5_container"),plupload.extend(inputContainer.style,{top:browsePos.y+"px",left:browsePos.x+"px",width:browseSize.w+"px",height:browseSize.h+"px"}),uploader.features.triggerDialog&&(plupload.getStyle(browseButton,"position")==="static"&&plupload.extend(browseButton.style,{position:"relative"}),zIndex=parseInt(plupload.getStyle(browseButton,"z-index"),10),isNaN(zIndex)&&(zIndex=0),plupload.extend(browseButton.style,{zIndex:zIndex}),plupload.extend(inputContainer.style,{zIndex:zIndex-1})))}),uploader.bind("UploadFile",function(up,file){function w3cBlobSlice(blob,start,end){var blobSlice;if(!File.prototype.slice)return(blobSlice=File.prototype.webkitSlice||File.prototype.mozSlice)?blobSlice.call(blob,start,end):null;try{return blob.slice(),blob.slice(start,end)}catch(e){return blob.slice(start,end-start)}}function sendBinaryBlob(blob){function uploadNextChunk(){function prepareAndSend(bin){var multipartDeltaSize=0,xhr=new XMLHttpRequest,upload=xhr.upload,boundary="----pluploadboundary"+plupload.guid(),formData,dashdash="--",crlf="\r\n",multipartBlob="";upload&&(upload.onprogress=function(e){file.loaded=Math.min(file.size,loaded+e.loaded-multipartDeltaSize),up.trigger("UploadProgress",file)}),xhr.onreadystatechange=function(){var httpStatus,chunkArgs;if(xhr.readyState==4){try{httpStatus=xhr.status}catch(ex){httpStatus=0}if(httpStatus>=400)up.trigger("Error",{code:plupload.HTTP_ERROR,message:plupload.translate("HTTP Error."),file:file,status:httpStatus});else{if(chunks){chunkArgs={chunk:chunk,chunks:chunks,response:xhr.responseText,status:httpStatus},up.trigger("ChunkUploaded",file,chunkArgs),loaded+=curChunkSize;if(chunkArgs.cancelled){file.status=plupload.FAILED;return}file.loaded=Math.min(file.size,(chunk+1)*chunkSize)}else file.loaded=file.size;up.trigger("UploadProgress",file),bin=chunkBlob=formData=multipartBlob=null,!chunks||++chunk>=chunks?(file.status=plupload.DONE,up.trigger("FileUploaded",file,{response:xhr.responseText,status:httpStatus})):uploadNextChunk()}xhr=null}};if(up.settings.multipart&&features.multipart){args.name=file.target_name||file.name,xhr.open("post",url,!0),plupload.each(up.settings.headers,function(value,name){xhr.setRequestHeader(name,value)});if(!shouldSendBinary&&!!window.FormData){formData=new FormData,plupload.each(plupload.extend(args,up.settings.multipart_params),function(value,name){formData.append(name,value)}),formData.append(up.settings.file_data_name,bin),xhr.send(formData);return}if(shouldSendBinary){xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+boundary),plupload.each(plupload.extend(args,up.settings.multipart_params),function(value,name){multipartBlob+=dashdash+boundary+crlf+'Content-Disposition: form-data; name="'+name+'"'+crlf+crlf,multipartBlob+=unescape(encodeURIComponent(value))+crlf}),mimeType=plupload.mimeTypes[file.name.replace(/^.+\.([^.]+)/,"$1").toLowerCase()]||"application/octet-stream",multipartBlob+=dashdash+boundary+crlf+'Content-Disposition: form-data; name="'+up.settings.file_data_name+'"; filename="'+unescape(encodeURIComponent(file.name))+'"'+crlf+"Content-Type: "+mimeType+crlf+crlf+bin+crlf+dashdash+boundary+dashdash+crlf,multipartDeltaSize=multipartBlob.length-bin.length,bin=multipartBlob;if(xhr.sendAsBinary)xhr.sendAsBinary(bin);else if(features.canSendBinary){var ui8a=new Uint8Array(bin.length);for(var i=0;i<bin.length;i++)ui8a[i]=bin.charCodeAt(i)&255;xhr.send(ui8a.buffer)}return}}url=plupload.buildUrl(up.settings.url,plupload.extend(args,up.settings.multipart_params)),xhr.open("post",url,!0),xhr.setRequestHeader("Content-Type","application/octet-stream"),plupload.each(up.settings.headers,function(value,name){xhr.setRequestHeader(name,value)}),xhr.send(bin)}var chunkBlob,br,chunks,args,chunkSize,curChunkSize,mimeType,url=up.settings.url;if(file.status==plupload.DONE||file.status==plupload.FAILED||up.state==plupload.STOPPED)return;args={name:file.target_name||file.name},settings.chunk_size&&file.size>settings.chunk_size&&(features.chunks||typeof blob=="string")?(chunkSize=settings.chunk_size,chunks=Math.ceil(file.size/chunkSize),curChunkSize=Math.min(chunkSize,file.size-chunk*chunkSize),typeof blob=="string"?chunkBlob=blob.substring(chunk*chunkSize,chunk*chunkSize+curChunkSize):chunkBlob=w3cBlobSlice(blob,chunk*chunkSize,chunk*chunkSize+curChunkSize),args.chunk=chunk,args.chunks=chunks):(curChunkSize=file.size,chunkBlob=blob),fr&&features.cantSendBlobInFormData&&features.chunks&&up.settings.chunk_size?(fr.onload=function(){shouldSendBinary=!0,prepareAndSend(fr.result)},fr.readAsBinaryString(chunkBlob)):prepareAndSend(chunkBlob)}var chunk=0,loaded=0,fr="FileReader"in window?new FileReader:null,shouldSendBinary=typeof blob=="string";uploadNextChunk()}var settings=up.settings,nativeFile,resize;nativeFile=html5files[file.id],features.jpgresize&&up.settings.resize&&/\.(png|jpg|jpeg)$/i.test(file.name)?scaleImage.call(up,file,up.settings.resize,/\.png$/i.test(file.name)?"image/png":"image/jpeg",function(res){res.success?(file.size=res.data.length,sendBinaryBlob(res.data)):sendBinaryBlob(nativeFile)}):!features.chunks&&features.jpgresize?readFileAsBinary(nativeFile,sendBinaryBlob):sendBinaryBlob(nativeFile)}),uploader.bind("Destroy",function(up){var name,element,container=document.body,elements={inputContainer:up.id+"_html5_container",inputFile:up.id+"_html5",browseButton:up.settings.browse_button,dropElm:up.settings.drop_element};for(name in elements)element=document.getElementById(elements[name]),element&&plupload.removeAllEvents(element,up.id);plupload.removeAllEvents(document.body,up.id),up.settings.container&&(container=document.getElementById(up.settings.container)),container.removeChild(document.getElementById(elements.inputContainer))}),callback({success:!0})}})}(window,document,plupload),define("jquery.plupload.html5",function(){}),jQuery.cookie=function(name,value,options){if(typeof value=="undefined"){var cookieValue=null;if(document.cookie&&document.cookie!=""){var cookies=document.cookie.split(";");for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}}return cookieValue}options=options||{},value===null&&(value="",options=$.extend({},options),options.expires=-1);var expires="";if(options.expires&&(typeof options.expires=="number"||options.expires.toUTCString)){var date;typeof options.expires=="number"?(date=new Date,date.setTime(date.getTime()+options.expires*24*60*60*1e3)):date=options.expires,expires="; expires="+date.toUTCString()}var path=options.path?"; path="+options.path:"",domain=options.domain?"; domain="+options.domain:"",secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")},define("jquery.cookie",function(){});var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;(function($){function getDtNodeFromElement(el){return alert("getDtNodeFromElement is deprecated"),$.ui.dynatree.getNode(el)}function noop(){}function _initDragAndDrop(tree){var dnd=tree.options.dnd||null;dnd&&(dnd.onDragStart||dnd.onDrop)&&_registerDnd(),dnd&&dnd.onDragStart&&tree.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToDynatree:!0,helper:function(event){var sourceNode=$.ui.dynatree.getNode(event.target);return sourceNode?sourceNode.tree._onDragEvent("helper",sourceNode,null,event,null,null):"<div></div>"},start:function(event,ui){var sourceNode=ui.helper.data("dtSourceNode");return!!sourceNode},_last:null}),dnd&&dnd.onDrop&&tree.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(parent,tree,data){this.parent=parent,this.tree=tree,typeof data=="string"&&(data={title:data}),data.key===undefined&&(data.key="_"+tree._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,data),this.li=null,this.span=null,this.ul=null,this.childList=null,this._isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(recursive,callback){var dict=$.extend({},this.data);dict.activate=this.tree.activeNode===this,dict.focus=this.tree.focusNode===this,dict.expand=this.bExpanded,dict.select=this.bSelected,callback&&callback(dict);if(recursive&&this.childList){dict.children=[];for(var i=0,l=this.childList.length;i<l;i++)dict.children.push(this.childList[i].toDict(!0,callback))}else delete dict.children;return dict},fromDict:function(dict){var children=dict.children;if(children===undefined){this.data=$.extend(this.data,dict),this.render();return}dict=$.extend({},dict),dict.children=undefined,this.data=$.extend(this.data,dict),this.removeChildren(),this.addChild(children)},_getInnerHtml:function(){var tree=this.tree,opts=tree.options,cache=tree.cache,level=this.getLevel(),data=this.data,res="";level<opts.minExpandLevel?level>1&&(res+=cache.tagConnector):this.hasChildren()!==!1?res+=cache.tagExpander:res+=cache.tagConnector,opts.checkbox&&data.hideCheckbox!==!0&&!data.isStatusNode&&(res+=cache.tagCheckbox),data.icon?res+="<img src='"+opts.imagePath+data.icon+"' alt='' />":data.icon===!1?noop():res+=cache.tagNodeIcon;var nodeTitle="";opts.onCustomRender&&(nodeTitle=opts.onCustomRender.call(tree,this)||"");if(!nodeTitle){var tooltip=data.tooltip?' title="'+data.tooltip.replace(/\"/g,"&quot;")+'"':"",href=data.href||"#";opts.noLink||data.noLink?nodeTitle='<span style="display:inline-block;" class="'+opts.classNames.title+'"'+tooltip+">"+data.title+"</span>":nodeTitle='<a href="'+href+'" class="'+opts.classNames.title+'"'+tooltip+">"+data.title+"</a>"}return res+=nodeTitle,res},_fixOrder:function(){var cl=this.childList;if(!cl||!this.ul)return;var childLI=this.ul.firstChild;for(var i=0,l=cl.length-1;i<l;i++){var childNode1=cl[i],childNode2=childLI.dtnode;childNode1!==childNode2?(this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+childNode1+" != "+childNode2),this.ul.insertBefore(childNode1.li,childNode2.li)):childLI=childLI.nextSibling}},render:function(useEffects,includeInvisible){var tree=this.tree,parent=this.parent,data=this.data,opts=tree.options,cn=opts.classNames,isLastSib=this.isLastSibling(),firstTime=!1;if(!parent&&!this.ul)this.li=this.span=null,this.ul=document.createElement("ul"),opts.minExpandLevel>1?this.ul.className=cn.container+" "+cn.noConnector:this.ul.className=cn.container;else if(parent){this.li||(firstTime=!0,this.li=document.createElement("li"),this.li.dtnode=this,data.key&&opts.generateIds&&(this.li.id=opts.idPrefix+data.key),this.span=document.createElement("span"),this.span.className=cn.title,this.li.appendChild(this.span),parent.ul||(parent.ul=document.createElement("ul"),parent.ul.style.display="none",parent.li.appendChild(parent.ul)),parent.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var cnList=[];cnList.push(cn.node),data.isFolder&&cnList.push(cn.folder),this.bExpanded&&cnList.push(cn.expanded),this.hasChildren()!==!1&&cnList.push(cn.hasChildren),data.isLazy&&this.childList===null&&cnList.push(cn.lazy),isLastSib&&cnList.push(cn.lastsib),this.bSelected&&cnList.push(cn.selected),this.hasSubSel&&cnList.push(cn.partsel),tree.activeNode===this&&cnList.push(cn.active),data.addClass&&cnList.push(data.addClass),cnList.push(cn.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(data.isLazy&&this.childList===null?"d":"")+(isLastSib?"l":"")),cnList.push(cn.combinedIconPrefix+(this.bExpanded?"e":"c")+(data.isFolder?"f":"")),this.span.className=cnList.join(" "),this.li.className=isLastSib?cn.lastsib:"",firstTime&&opts.onCreate&&opts.onCreate.call(tree,this,this.span),opts.onRender&&opts.onRender.call(tree,this,this.span)}if((this.bExpanded||includeInvisible===!0)&&this.childList){for(var i=0,l=this.childList.length;i<l;i++)this.childList[i].render(!1,includeInvisible);this._fixOrder()}if(this.ul){var isHidden=this.ul.style.display==="none",isExpanded=!!this.bExpanded;if(useEffects&&opts.fx&&isHidden===isExpanded){var duration=opts.fx.duration||200;$(this.ul).animate(opts.fx,duration)}else this.ul.style.display=this.bExpanded||!parent?"":"none"}},getKeyPath:function(excludeSelf){var path=[];return this.visitParents(function(node){node.parent&&path.unshift(node.data.key)},!excludeSelf),"/"+path.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.hasChildren()===undefined?undefined:this.childList},hasChildren:function(){if(this.data.isLazy)return this.childList===null||this.childList===undefined?undefined:this.childList.length===0?!1:this.childList.length===1&&this.childList[0].isStatusNode()?undefined:!0;return!!this.childList},isFirstSibling:function(){var p=this.parent;return!p||p.childList[0]===this},isLastSibling:function(){var p=this.parent;return!p||p.childList[p.childList.length-1]===this},isLoading:function(){return!!this._isLoading},getPrevSibling:function(){if(!this.parent)return null;var ac=this.parent.childList;for(var i=1,l=ac.length;i<l;i++)if(ac[i]===this)return ac[i-1];return null},getNextSibling:function(){if(!this.parent)return null;var ac=this.parent.childList;for(var i=0,l=ac.length-1;i<l;i++)if(ac[i]===this)return ac[i+1];return null},isStatusNode:function(){return this.data.isStatusNode===!0},isChildOf:function(otherNode){return this.parent&&this.parent===otherNode},isDescendantOf:function(otherNode){if(!otherNode)return!1;var p=this.parent;while(p){if(p===otherNode)return!0;p=p.parent}return!1},countChildren:function(){var cl=this.childList;if(!cl)return 0;var n=cl.length;for(var i=0,l=n;i<l;i++){var child=cl[i];n+=child.countChildren()}return n},sortChildren:function(cmp,deep){var cl=this.childList;if(!cl)return;cmp=cmp||function(a,b){var x=a.data.title.toLowerCase(),y=b.data.title.toLowerCase();return x===y?0:x>y?1:-1},cl.sort(cmp);if(deep)for(var i=0,l=cl.length;i<l;i++)cl[i].childList&&cl[i].sortChildren(cmp,"$norender$");deep!=="$norender$"&&this.render()},_setStatusNode:function(data){var firstChild=this.childList?this.childList[0]:null;if(!data){if(firstChild&&firstChild.isStatusNode()){try{this.ul&&(this.ul.removeChild(firstChild.li),firstChild.li=null)}catch(e){}this.childList.length===1?this.childList=[]:this.childList.shift()}}else firstChild?(data.isStatusNode=!0,data.key="_statusNode",firstChild.data=data,firstChild.render()):(data.isStatusNode=!0,data.key="_statusNode",firstChild=this.addChild(data))},setLazyNodeStatus:function(lts,opts){var tooltip=opts&&opts.tooltip?opts.tooltip:null,info=opts&&opts.info?" ("+opts.info+")":"";switch(lts){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this._isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this._isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this._isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+info,tooltip:tooltip,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+lts+"'."}},_parentList:function(includeRoot,includeSelf){var l=[],dtn=includeSelf?this:this.parent;while(dtn)(includeRoot||dtn.parent)&&l.unshift(dtn),dtn=dtn.parent;return l},getLevel:function(){var level=0,dtn=this.parent;while(dtn)level++,dtn=dtn.parent;return level},_getTypeForOuterNodeEvent:function(event){var cns=this.tree.options.classNames,target=event.target;if(target.className.indexOf(cns.node)<0)return null;var eventX=event.pageX-target.offsetLeft,eventY=event.pageY-target.offsetTop;for(var i=0,l=target.childNodes.length;i<l;i++){var cn=target.childNodes[i],x=cn.offsetLeft-target.offsetLeft,y=cn.offsetTop-target.offsetTop,nx=cn.clientWidth,ny=cn.clientHeight;if(eventX>=x&&eventX<=x+nx&&eventY>=y&&eventY<=y+ny){if(cn.className==cns.title)return"title";if(cn.className==cns.expander)return"expander";if(cn.className==cns.checkbox)return"checkbox";if(cn.className==cns.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(event){var tcn=event&&event.target?event.target.className:"",cns=this.tree.options.classNames;return tcn===cns.title?"title":tcn===cns.expander?"expander":tcn===cns.checkbox?"checkbox":tcn===cns.nodeIcon?"icon":tcn===cns.empty||tcn===cns.vline||tcn===cns.connector?"prefix":tcn.indexOf(cns.node)>=0?this._getTypeForOuterNodeEvent(event):null},isVisible:function(){var parents=this._parentList(!0,!1);for(var i=0,l=parents.length;i<l;i++)if(!parents[i].bExpanded)return!1;return!0},makeVisible:function(){var parents=this._parentList(!0,!1);for(var i=0,l=parents.length;i<l;i++)parents[i]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(flag,fireEvents){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",flag,fireEvents,this);var opts=this.tree.options;if(this.data.isStatusNode)return;if(fireEvents&&opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,flag,this)===!1)return;if(flag){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}opts.activeVisible&&this.makeVisible(),this.tree.activeNode=this,opts.persist&&$.cookie(opts.cookieId+"-active",this.data.key,opts.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(opts.classNames.active),fireEvents&&opts.onActivate&&opts.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(opts.onQueryActivate&&opts.onQueryActivate.call(this.tree,!1,this)===!1)return;$(this.span).removeClass(opts.classNames.active),opts.persist&&$.cookie(opts.cookieId+"-active","",opts.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,fireEvents&&opts.onDeactivate&&opts.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var activate=!0,expand=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:activate=!1,expand=!0;break;case 3:activate=expand=!0}this.parent===null&&(expand=!1),expand&&(this.toggleExpand(),this.focus()),activate&&this.activate()},_setSubSel:function(hasSubSel){hasSubSel?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_updatePartSelectionState:function(){var sel;if(!this.hasChildren())return sel=this.bSelected&&!this.data.unselectable&&!this.data.isStatusNode,this._setSubSel(!1),sel;var i,l,cl=this.childList,allSelected=!0,allDeselected=!0;for(i=0,l=cl.length;i<l;i++){var n=cl[i],s=n._updatePartSelectionState();s!==!1&&(allDeselected=!1),s!==!0&&(allSelected=!1)}return allSelected?sel=!0:allDeselected?sel=!1:sel=undefined,this._setSubSel(sel===undefined),this.bSelected=sel===!0,sel},_fixSelectionState:function(){var p,i,l;if(this.bSelected){this.visit(function(node){node.parent._setSubSel(!0),node.data.unselectable||node._select(!0,!1,!1)}),p=this.parent;while(p){p._setSubSel(!0);var allChildsSelected=!0;for(i=0,l=p.childList.length;i<l;i++){var n=p.childList[i];if(!n.bSelected&&!n.data.isStatusNode&&!n.data.unselectable){allChildsSelected=!1;break}}allChildsSelected&&p._select(!0,!1,!1),p=p.parent}}else{this._setSubSel(!1),this.visit(function(node){node._setSubSel(!1),node._select(!1,!1,!1)}),p=this.parent;while(p){p._select(!1,!1,!1);var isPartSel=!1;for(i=0,l=p.childList.length;i<l;i++)if(p.childList[i].bSelected||p.childList[i].hasSubSel){isPartSel=!0;break}p._setSubSel(isPartSel),p=p.parent}}},_select:function(sel,fireEvents,deep){var opts=this.tree.options;if(this.data.isStatusNode)return;if(this.bSelected===sel)return;if(fireEvents&&opts.onQuerySelect&&opts.onQuerySelect.call(this.tree,sel,this)===!1)return;opts.selectMode==1&&sel&&this.tree.visit(function(node){if(node.bSelected)return node._select(!1,!1,!1),!1}),this.bSelected=sel,sel?(opts.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(opts.classNames.selected),deep&&opts.selectMode===3&&this._fixSelectionState(),fireEvents&&opts.onSelect&&opts.onSelect.call(this.tree,!0,this)):(opts.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(opts.classNames.selected),deep&&opts.selectMode===3&&this._fixSelectionState(),fireEvents&&opts.onSelect&&opts.onSelect.call(this.tree,!1,this))},select:function(sel){return this.data.unselectable?this.bSelected:this._select(sel!==!1,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},isLazy:function(){return!!this.data.isLazy},_loadContent:function(){try{var opts=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===opts.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(e){this.tree.logWarning("_loadContent: failed - %o",e),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(bExpand,forceSync){if(this.bExpanded===bExpand){this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",bExpand,this);return}this.tree.logDebug("dtnode._expand(%o) - %o",bExpand,this);var opts=this.tree.options;if(!bExpand&&this.getLevel()<opts.minExpandLevel){this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",bExpand,this);return}if(opts.onQueryExpand&&opts.onQueryExpand.call(this.tree,bExpand,this)===!1)return;this.bExpanded=bExpand,opts.persist&&(bExpand?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var allowEffects=(!this.data.isLazy||this.childList!==null)&&!this._isLoading&&!forceSync;this.render(allowEffects);if(this.bExpanded&&this.parent&&opts.autoCollapse){var parents=this._parentList(!1,!0);for(var i=0,l=parents.length;i<l;i++)parents[i].collapseSiblings()}opts.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate();if(bExpand&&this.data.isLazy&&this.childList===null&&!this._isLoading){this._loadContent();return}opts.onExpand&&opts.onExpand.call(this.tree,bExpand,this)},isExpanded:function(){return this.bExpanded},expand:function(flag){flag=flag!==!1;if(!this.childList&&!this.data.isLazy&&flag)return;if(this.parent===null&&!flag)return;this._expand(flag)},scheduleAction:function(mode,ms){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var self=this;switch(mode){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger expand"),self.expand(!0)},ms);break;case"activate":this.tree.timer=setTimeout(function(){self.tree.logDebug("setTimeout: trigger activate"),self.activate()},ms);break;default:throw"Invalid mode "+mode}this.tree.logDebug("setTimeout(%s, %s): %s",mode,ms,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent===null)return;var ac=this.parent.childList;for(var i=0,l=ac.length;i<l;i++)ac[i]!==this&&ac[i].bExpanded&&ac[i]._expand(!1)},_onClick:function(event){var targetType=this.getEventTargetType(event);if(targetType==="expander")this.toggleExpand(),this.focus();else if(targetType==="checkbox")this.toggleSelect(),this.focus();else{this._userActivate();var aTag=this.span.getElementsByTagName("a");if(!aTag[0])return!0;$.browser.msie&&parseInt($.browser.version,10)<9||aTag[0].focus()}event.preventDefault()},_onDblClick:function(event){},_onKeydown:function(event){var handled=!0,sib;switch(event.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:!this.bExpanded&&(this.childList||this.data.isLazy)?(this.toggleExpand(),this.focus()):this.childList&&this.childList[0].focus();break;case 38:sib=this.getPrevSibling();while(sib&&sib.bExpanded&&sib.childList)sib=sib.childList[sib.childList.length-1];!sib&&this.parent&&this.parent.parent&&(sib=this.parent),sib&&sib.focus();break;case 40:if(this.bExpanded&&this.childList)sib=this.childList[0];else{var parents=this._parentList(!1,!0);for(var i=parents.length-1;i>=0;i--){sib=parents[i].getNextSibling();if(sib)break}}sib&&sib.focus();break;default:handled=!1}handled&&event.preventDefault()},_onKeypress:function(event){},_onFocus:function(event){var opts=this.tree.options;if(event.type=="blur"||event.type=="focusout")opts.onBlur&&opts.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(opts.classNames.focused),this.tree.tnFocused=null,opts.persist&&$.cookie(opts.cookieId+"-focus","",opts.cookie);else if(event.type=="focus"||event.type=="focusin")this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(opts.classNames.focused)),this.tree.tnFocused=this,opts.onFocus&&opts.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(opts.classNames.focused),opts.persist&&$.cookie(opts.cookieId+"-focus",this.data.key,opts.cookie)},visit:function(fn,includeSelf){var res=!0;if(includeSelf===!0){res=fn(this);if(res===!1||res=="skip")return res}if(this.childList)for(var i=0,l=this.childList.length;i<l;i++){res=this.childList[i].visit(fn,!0);if(res===!1)break}return res},visitParents:function(fn,includeSelf){if(includeSelf&&fn(this)===!1)return!1;var p=this.parent;while(p){if(fn(p)===!1)return!1;p=p.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(tn){var ac=this.childList;if(ac.length==1){if(tn!==ac[0])throw"removeChild: invalid child";return this.removeChildren()}tn===this.tree.activeNode&&tn.deactivate(),this.tree.options.persist&&(tn.bSelected&&this.tree.persistence.clearSelect(tn.data.key),tn.bExpanded&&this.tree.persistence.clearExpand(tn.data.key)),tn.removeChildren(!0),this.ul.removeChild(tn.li);for(var i=0,l=ac.length;i<l;i++)if(ac[i]===tn){this.childList.splice(i,1);break}},removeChildren:function(isRecursiveCall,retainPersistence){this.tree.logDebug("%s.removeChildren(%o)",this,isRecursiveCall);var tree=this.tree,ac=this.childList;if(ac){for(var i=0,l=ac.length;i<l;i++){var tn=ac[i];tn===tree.activeNode&&!retainPersistence&&tn.deactivate(),this.tree.options.persist&&!retainPersistence&&(tn.bSelected&&this.tree.persistence.clearSelect(tn.data.key),tn.bExpanded&&this.tree.persistence.clearExpand(tn.data.key)),tn.removeChildren(!0,retainPersistence),this.ul&&$("li",$(this.ul)).remove()}this.childList=null}isRecursiveCall||(this._isLoading=!1,this.render())},setTitle:function(title){this.fromDict({title:title})},reload:function(force){throw"Use reloadChildren() instead"},reloadChildren:function(callback){if(this.parent===null)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(callback){var self=this,eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(eventType,function(e,node,isOk){self.tree.$tree.unbind(eventType),self.tree.logDebug("loaded %o, %o, %o",e,node,isOk);if(node!==self)throw"got invalid load event";callback.call(self.tree,node,isOk)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(keyPath,callback){var tree=this.tree;tree.logDebug("%s._loadKeyPath(%s)",this,keyPath);if(keyPath==="")throw"Key path must not be empty";var segList=keyPath.split(tree.options.keyPathSeparator);if(segList[0]==="")throw"Key path must be relative (don't start with '/')";var seg=segList.shift();if(this.childList)for(var i=0,l=this.childList.length;i<l;i++){var child=this.childList[i];if(child.data.key===seg){if(segList.length===0)callback.call(tree,child,"ok");else if(!child.data.isLazy||child.childList!==null&&child.childList!==undefined)callback.call(tree,child,"loaded"),child._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback);else{tree.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,keyPath,child);var self=this;child.reloadChildren(function(node,isOk){isOk?(tree.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",node,keyPath,node),callback.call(tree,child,"loaded"),node._loadKeyPath(segList.join(tree.options.keyPathSeparator),callback)):(tree.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",self,keyPath),callback.call(tree,child,"error"))})}return}}callback.call(tree,undefined,"notfound",seg,segList.length===0),tree.logWarning("Node not found: "+seg);return},resetLazy:function(){if(this.parent===null)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(dtnode,beforeNode){var tree=this.tree,opts=tree.options,pers=tree.persistence;dtnode.parent=this,this.childList===null?this.childList=[]:beforeNode||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(opts.classNames.lastsib);if(beforeNode){var iBefore=$.inArray(beforeNode,this.childList);if(iBefore<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(iBefore,0,dtnode)}else this.childList.push(dtnode);var isInitializing=tree.isInitializing();opts.persist&&pers.cookiesFound&&isInitializing?(pers.activeKey===dtnode.data.key&&(tree.activeNode=dtnode),pers.focusedKey===dtnode.data.key&&(tree.focusNode=dtnode),dtnode.bExpanded=$.inArray(dtnode.data.key,pers.expandedKeyList)>=0,dtnode.bSelected=$.inArray(dtnode.data.key,pers.selectedKeyList)>=0):(dtnode.data.activate&&(tree.activeNode=dtnode,opts.persist&&(pers.activeKey=dtnode.data.key)),dtnode.data.focus&&(tree.focusNode=dtnode,opts.persist&&(pers.focusedKey=dtnode.data.key)),dtnode.bExpanded=dtnode.data.expand===!0,dtnode.bExpanded&&opts.persist&&pers.addExpand(dtnode.data.key),dtnode.bSelected=dtnode.data.select===!0,dtnode.bSelected&&opts.persist&&pers.addSelect(dtnode.data.key)),opts.minExpandLevel>=dtnode.getLevel()&&(this.bExpanded=!0);if(dtnode.bSelected&&opts.selectMode==3){var p=this;while(p)p.hasSubSel||p._setSubSel(!0),p=p.parent}return tree.bEnableUpdate&&this.render(),dtnode},addChild:function(obj,beforeNode){if(typeof obj=="string")throw"Invalid data type for "+obj;if(!obj||obj.length===0)return;if(obj instanceof DynaTreeNode)return this._addChildNode(obj,beforeNode);obj.length||(obj=[obj]);var prevFlag=this.tree.enableUpdate(!1),tnFirst=null;for(var i=0,l=obj.length;i<l;i++){var data=obj[i],dtnode=this._addChildNode(new DynaTreeNode(this,this.tree,data),beforeNode);tnFirst||(tnFirst=dtnode),data.children&&dtnode.addChild(data.children,null)}return this.tree.enableUpdate(prevFlag),tnFirst},append:function(obj){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(obj,null)},appendAjax:function(ajaxOptions){var self=this;this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading);if(ajaxOptions.debugLazyDelay){var ms=ajaxOptions.debugLazyDelay;ajaxOptions.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+ms),setTimeout(function(){self.appendAjax(ajaxOptions)},ms);return}var orgSuccess=ajaxOptions.success,orgError=ajaxOptions.error,eventType="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,options=$.extend({},this.tree.options.ajaxDefaults,ajaxOptions,{success:function(data,textStatus,jqXHR){var prevPhase=self.tree.phase;self.tree.phase="init",options.postProcess?data=options.postProcess.call(this,data,this.dataType):data&&data.hasOwnProperty("d")&&(data=typeof data.d=="string"?$.parseJSON(data.d):data.d),(!$.isArray(data)||data.length!==0)&&self.addChild(data,null),self.tree.phase="postInit",orgSuccess&&orgSuccess.call(options,self,data,textStatus),self.tree.logDebug("trigger "+eventType),self.tree.$tree.trigger(eventType,[self,!0]),self.tree.phase=prevPhase,self.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(data)&&data.length===0&&(self.childList=[],self.render())},error:function(jqXHR,textStatus,errorThrown){self.tree.logWarning("appendAjax failed:",textStatus,":\n",jqXHR,"\n",errorThrown),orgError&&orgError.call(options,self,jqXHR,textStatus,errorThrown),self.tree.$tree.trigger(eventType,[self,!1]),self.setLazyNodeStatus(DTNodeStatus_Error,{info:textStatus,tooltip:""+errorThrown})}});$.ajax(options)},move:function(targetNode,mode){var pos;if(this===targetNode)return;if(!this.parent)throw"Cannot move system root";if(mode===undefined||mode=="over")mode="child";var prevParent=this.parent,targetParent=mode==="child"?targetNode:targetNode.parent;if(targetParent.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(this.parent.childList.length==1)this.parent.childList=this.parent.data.isLazy?[]:null,this.parent.bExpanded=!1;else{pos=$.inArray(this,this.parent.childList);if(pos<0)throw"Internal error";this.parent.childList.splice(pos,1)}this.parent.ul&&this.parent.ul.removeChild(this.li),this.parent=targetParent;if(targetParent.hasChildren())switch(mode){case"child":targetParent.childList.push(this);break;case"before":pos=$.inArray(targetNode,targetParent.childList);if(pos<0)throw"Internal error";targetParent.childList.splice(pos,0,this);break;case"after":pos=$.inArray(targetNode,targetParent.childList);if(pos<0)throw"Internal error";targetParent.childList.splice(pos+1,0,this);break;default:throw"Invalid mode "+mode}else targetParent.childList=[this];targetParent.ul||(targetParent.ul=document.createElement("ul"),targetParent.ul.style.display="none",targetParent.li.appendChild(targetParent.ul)),this.li&&targetParent.ul.appendChild(this.li);if(this.tree!==targetNode.tree)throw this.visit(function(node){node.tree=targetNode.tree},null,!0),"Not yet implemented.";prevParent.isDescendantOf(targetParent)||prevParent.render(),targetParent.isDescendantOf(prevParent)||targetParent.render()},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(cookieId,cookieOpts){var ts=new DynaTreeStatus(cookieId,cookieOpts);return ts.read(),ts.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(cookieId,cookieOpts){cookieId===undefined&&(cookieId=$.ui.dynatree.prototype.options.cookieId),cookieOpts=$.extend({},$.ui.dynatree.prototype.options.cookie,cookieOpts),this.cookieId=cookieId,this.cookieOpts=cookieOpts,this.cookiesFound=undefined,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(msg){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this.cookiesFound=!1;var cookie=$.cookie(this.cookieId+"-active");this.activeKey=cookie===null?"":cookie,cookie!==null&&(this.cookiesFound=!0),cookie=$.cookie(this.cookieId+"-focus"),this.focusedKey=cookie===null?"":cookie,cookie!==null&&(this.cookiesFound=!0),cookie=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=cookie===null?[]:cookie.split(","),cookie!==null&&(this.cookiesFound=!0),cookie=$.cookie(this.cookieId+"-select"),this.selectedKeyList=cookie===null?[]:cookie.split(","),cookie!==null&&(this.cookiesFound=!0)},write:function(){$.cookie(this.cookieId+"-active",this.activeKey===null?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",this.focusedKey===null?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",this.expandedKeyList===null?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",this.selectedKeyList===null?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(key){$.inArray(key,this.expandedKeyList)<0&&(this.expandedKeyList.push(key),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(key){var idx=$.inArray(key,this.expandedKeyList);idx>=0&&(this.expandedKeyList.splice(idx,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(key){$.inArray(key,this.selectedKeyList)<0&&(this.selectedKeyList.push(key),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(key){var idx=$.inArray(key,this.selectedKeyList);idx>=0&&(this.selectedKeyList.splice(idx,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return this.cookiesFound===!0},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version: 1.2.1$",DynaTree.prototype={initialize:function($widget){this.phase="init",this.$widget=$widget,this.options=$widget.options,this.$tree=$widget.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(callback){var $widget=this.$widget,opts=this.options,self=this;this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,opts.rootVisible!==undefined&&this.logWarning("Option 'rootVisible' is no longer supported."),opts.minExpandLevel<1&&(this.logWarning("Option 'minExpandLevel' must be >= 1."),opts.minExpandLevel=1),opts.classNames!==$.ui.dynatree.prototype.options.classNames&&(opts.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,opts.classNames)),opts.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(opts.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,opts.ajaxDefaults)),opts.dnd!==$.ui.dynatree.prototype.options.dnd&&(opts.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,opts.dnd)),opts.imagePath||$("script").each(function(){var _rexDtLibName=/.*dynatree[^\/]*\.js$/i;if(this.src.search(_rexDtLibName)>=0)return this.src.indexOf("/")>=0?opts.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":opts.imagePath="skin/",self.logDebug("Guessing imagePath from '%s': '%s'",this.src,opts.imagePath),!1}),this.persistence=new DynaTreeStatus(opts.cookieId,opts.cookie),opts.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+opts.classNames.empty+"'></span>",tagVline:"<span class='"+opts.classNames.vline+"'></span>",tagExpander:"<span class='"+opts.classNames.expander+"'></span>",tagConnector:"<span class='"+opts.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+opts.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+opts.classNames.checkbox+"'></span>",lastentry:undefined},(opts.children||opts.initAjax&&opts.initAjax.url||opts.initId)&&$(this.divTree).empty();var $ulInitialize=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var root=this.tnRoot,isReloading=opts.persist&&this.persistence.isReloading(),isLazy=!1,prevFlag=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),opts.children?root.addChild(opts.children):opts.initAjax&&opts.initAjax.url?(isLazy=!0,root.data.isLazy=!0,this._reloadAjax(callback)):opts.initId?this._createFromTag(root,$("#"+opts.initId)):(this._createFromTag(root,$ulInitialize),$ulInitialize.remove()),this._checkConsistency(),!isLazy&&opts.selectMode==3&&root._updatePartSelectionState(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(prevFlag),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",opts.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),isLazy||(opts.onPostInit&&opts.onPostInit.call(this,isReloading,!1),callback&&callback.call(this,"ok")),this.phase="idle"},_reloadAjax:function(callback){var opts=this.options;if(!opts.initAjax||!opts.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var pers=this.persistence,ajaxOpts=$.extend({},opts.initAjax);ajaxOpts.addActiveKey&&(ajaxOpts.data.activeKey=pers.activeKey),ajaxOpts.addFocusedKey&&(ajaxOpts.data.focusedKey=pers.focusedKey),ajaxOpts.addExpandedKeyList&&(ajaxOpts.data.expandedKeyList=pers.expandedKeyList.join(",")),ajaxOpts.addSelectedKeyList&&(ajaxOpts.data.selectedKeyList=pers.selectedKeyList.join(",")),ajaxOpts.success&&this.logWarning("initAjax: success callback is ignored; use onPostInit instead."),ajaxOpts.error&&this.logWarning("initAjax: error callback is ignored; use onPostInit instead.");var isReloading=pers.isReloading();ajaxOpts.success=function(dtnode,data,textStatus){opts.selectMode==3&&dtnode.tree.tnRoot._updatePartSelectionState(),opts.onPostInit&&opts.onPostInit.call(dtnode.tree,isReloading,!1),callback&&callback.call(dtnode.tree,"ok")},ajaxOpts.error=function(dtnode,XMLHttpRequest,textStatus,errorThrown){opts.onPostInit&&opts.onPostInit.call(dtnode.tree,isReloading,!0,XMLHttpRequest,textStatus,errorThrown),callback&&callback.call(dtnode.tree,"error",XMLHttpRequest,textStatus,errorThrown)},this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(ajaxOpts)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(stopOnParents){var nodeList=this.getSelectedNodes(stopOnParents),name=this.$tree.attr("name")||this.$tree.attr("id"),arr=[];for(var i=0,l=nodeList.length;i<l;i++)arr.push({name:name,value:nodeList[i].data.key});return arr},getPersistData:function(){return this.persistence.toDict()},logDebug:function(msg){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(msg){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(msg){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return this.phase=="init"||this.phase=="postInit"},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return this.phase=="userEvent"},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(callback){this._load(callback)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(key){var el=document.getElementById(this.options.idPrefix+key);if(el)return el.dtnode?el.dtnode:null;var match=null;return this.visit(function(node){if(node.data.key==key)return match=node,!1},!0),match},getActiveNode:function(){return this.activeNode},reactivate:function(setFocus){var node=this.activeNode;node&&(this.activeNode=null,node.activate(),setFocus&&node.focus())},getSelectedNodes:function(stopOnParents){var nodeList=[];return this.tnRoot.visit(function(node){if(node.bSelected){nodeList.push(node);if(stopOnParents===!0)return"skip"}}),nodeList},activateKey:function(key){var dtnode=key===null?null:this.getNodeByKey(key);return dtnode?(dtnode.focus(),dtnode.activate(),dtnode):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(keyPath,callback){var segList=keyPath.split(this.options.keyPathSeparator);return segList[0]===""&&segList.shift(),segList[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),segList.shift()),keyPath=segList.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(keyPath,callback)},selectKey:function(key,select){var dtnode=this.getNodeByKey(key);return dtnode?(dtnode.select(select),dtnode):null},enableUpdate:function(bEnable){return this.bEnableUpdate==bEnable?bEnable:(this.bEnableUpdate=bEnable,bEnable&&this.redraw(),!bEnable)},count:function(){return this.tnRoot.countChildren()},visit:function(fn,includeRoot){return this.tnRoot.visit(fn,includeRoot)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),$liA=$li.find(">a:first"),title,href=null,target=null,tooltip;if($liSpan.length)title=$liSpan.html();else if($liA.length)title=$liA.html(),href=$liA.attr("href"),target=$liA.attr("target"),tooltip=$liA.attr("title");else{title=$li.html();var iPos=title.search(/<ul/i);iPos>=0?title=$.trim(title.substring(0,iPos)):title=$.trim(title)}var data={title:title,tooltip:tooltip,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};href&&(data.href=href,data.target=target),$li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id"));if($li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){dataAttr.charAt(0)!="{"&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(sourceNode,targetNode,helper,hitMode,accept){var $source=sourceNode?$(sourceNode.span):null,$target=$(targetNode.span);this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().prependTo($(this.divTree).parent()));if(hitMode==="after"||hitMode==="before"||hitMode==="over"){var pos=$target.position();switch(hitMode){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),pos.top-=8;break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),pos.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),$target.addClass("dynatree-drop-target"),pos.left+=8}this.$dndMarker.css({left:pos.left,top:pos.top,"z-index":1e3}).show()}else $target.removeClass("dynatree-drop-target"),this.$dndMarker.hide();hitMode==="after"?$target.addClass("dynatree-drop-after"):$target.removeClass("dynatree-drop-after"),hitMode==="before"?$target.addClass("dynatree-drop-before"):$target.removeClass("dynatree-drop-before"),accept===!0?($source&&$source.addClass("dynatree-drop-accept"),$target.addClass("dynatree-drop-accept"),helper.addClass("dynatree-drop-accept")):($source&&$source.removeClass("dynatree-drop-accept"),$target.removeClass("dynatree-drop-accept"),helper.removeClass("dynatree-drop-accept")),accept===!1?($source&&$source.addClass("dynatree-drop-reject"),$target.addClass("dynatree-drop-reject"),helper.addClass("dynatree-drop-reject")):($source&&$source.removeClass("dynatree-drop-reject"),$target.removeClass("dynatree-drop-reject"),helper.removeClass("dynatree-drop-reject"))},_onDragEvent:function(eventName,node,otherNode,event,ui,draggable){var opts=this.options,dnd=this.options.dnd,res=null,nodeTag=$(node.span),hitMode,enterResponse;switch(eventName){case"helper":var $helper=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(event.target).closest("a").clone());$("ul.dynatree-container",node.tree.divTree).append($helper),$helper.data("dtSourceNode",node),res=$helper;break;case"start":node.isStatusNode()?res=!1:dnd.onDragStart&&(res=dnd.onDragStart(node)),res===!1?(this.logDebug("tree.onDragStart() cancelled"),ui.helper.trigger("mouseup"),ui.helper.hide()):nodeTag.addClass("dynatree-drag-source");break;case"enter":res=dnd.onDragEnter?dnd.onDragEnter(node,otherNode):null,res={over:res!==!1&&(res===!0||res==="over"||$.inArray("over",res)>=0),before:res!==!1&&(res===!0||res==="before"||$.inArray("before",res)>=0),after:res!==!1&&(res===!0||res==="after"||$.inArray("after",res)>=0)},ui.helper.data("enterResponse",res);break;case"over":enterResponse=ui.helper.data("enterResponse"),hitMode=null;if(enterResponse===!1)break;if(typeof enterResponse=="string")hitMode=enterResponse;else{var nodeOfs=nodeTag.offset(),relPos={x:event.pageX-nodeOfs.left,y:event.pageY-nodeOfs.top},relPos2={x:relPos.x/nodeTag.width(),y:relPos.y/nodeTag.height()};enterResponse.after&&relPos2.y>.75?hitMode="after":!enterResponse.over&&enterResponse.after&&relPos2.y>.5?hitMode="after":enterResponse.before&&relPos2.y<=.25?hitMode="before":!enterResponse.over&&enterResponse.before&&relPos2.y<=.5?hitMode="before":enterResponse.over&&(hitMode="over"),dnd.preventVoidMoves&&(node===otherNode?hitMode=null:hitMode==="before"&&otherNode&&node===otherNode.getNextSibling()?hitMode=null:hitMode==="after"&&otherNode&&node===otherNode.getPrevSibling()?hitMode=null:hitMode==="over"&&otherNode&&otherNode.parent===node&&otherNode.isLastSibling()&&(hitMode=null)),ui.helper.data("hitMode",hitMode)}hitMode==="over"&&dnd.autoExpandMS&&node.hasChildren()!==!1&&!node.bExpanded&&node.scheduleAction("expand",dnd.autoExpandMS),hitMode&&dnd.onDragOver&&(res=dnd.onDragOver(node,otherNode,hitMode)),this._setDndStatus(otherNode,node,ui.helper,hitMode,res!==!1);break;case"drop":var isForbidden=ui.helper.hasClass("dynatree-drop-reject");hitMode=ui.helper.data("hitMode"),hitMode&&dnd.onDrop&&!isForbidden&&dnd.onDrop(node,otherNode,hitMode,ui,draggable);break;case"leave":node.scheduleAction("cancel"),ui.helper.data("enterResponse",null),ui.helper.data("hitMode",null),this._setDndStatus(otherNode,node,ui.helper,"out",undefined),dnd.onDragLeave&&dnd.onDragLeave(node,otherNode);break;case"stop":nodeTag.removeClass("dynatree-drag-source"),dnd.onDragStop&&dnd.onDragStop(node);break;default:throw"Unsupported drag event: "+eventName}return res},cancelDrag:function(){var dd=$.ui.ddmanager.current;dd&&dd.cancel()},lastentry:undefined},$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8)return this.options.debugLevel>=0&&_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create();this.options.debugLevel>=2&&_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){var opts=this.options;opts.debugLevel>=1&&logMsg("Dynatree._create(): version='%s', debugLevel=%o.",$.ui.dynatree.version,this.options.debugLevel),this.options.event+=".dynatree";var divTree=this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function __focusHandler(event){event=$.event.fix(event||window.event);var dtnode=$.ui.dynatree.getNode(event.target);return dtnode?dtnode._onFocus(event):!1}this.unbind();var eventNames="click.dynatree dblclick.dynatree";this.options.keyboard&&(eventNames+=" keypress.dynatree keydown.dynatree"),this.element.bind(eventNames,function(event){var dtnode=$.ui.dynatree.getNode(event.target);if(!dtnode)return!0;var tree=dtnode.tree,o=tree.options;tree.logDebug("event(%s): dtnode: %s",event.type,dtnode);var prevPhase=tree.phase;tree.phase="userEvent";try{switch(event.type){case"click":return o.onClick&&o.onClick.call(tree,dtnode,event)===!1?!1:dtnode._onClick(event);case"dblclick":return o.onDblClick&&o.onDblClick.call(tree,dtnode,event)===!1?!1:dtnode._onDblClick(event);case"keydown":return o.onKeydown&&o.onKeydown.call(tree,dtnode,event)===!1?!1:dtnode._onKeydown(event);case"keypress":return o.onKeypress&&o.onKeypress.call(tree,dtnode,event)===!1?!1:dtnode._onKeypress(event)}}catch(e){var _=null;tree.logWarning("bind(%o): dtnode: %o, error: %o",event,dtnode,e)}finally{tree.phase=prevPhase}});var div=this.tree.divTree;div.addEventListener?(div.addEventListener("focus",__focusHandler,!0),div.addEventListener("blur",__focusHandler,!0)):div.onfocusin=div.onfocusout=__focusHandler},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.version="$Version: 1.2.1$",$.ui.dynatree.getNode=function(el){if(el instanceof DynaTreeNode)return el;el.selector!==undefined&&(el=el[0]);while(el){if(el.dtnode)return el.dtnode;el=el.parentNode}return null},$.ui.dynatree.getPersistData=DynaTreeStatus._getTreePersistData,$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onCreate:null,onRender:null,postProcess:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,timeout:0,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:undefined},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,href:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:undefined};var didRegisterDnd=!1,_registerDnd=function(){if(didRegisterDnd)return;$.ui.plugin.add("draggable","connectToDynatree",{start:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null;if(sourceNode)return draggable.offset.click.top=-2,draggable.offset.click.left=16,sourceNode.tree._onDragEvent("start",sourceNode,null,event,ui,draggable)},drag:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null,prevTargetNode=ui.helper.data("dtTargetNode")||null,targetNode=$.ui.dynatree.getNode(event.target);if(event.target&&!targetNode){var isHelper=$(event.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0;if(isHelper)return}ui.helper.data("dtTargetNode",targetNode),prevTargetNode&&prevTargetNode!==targetNode&&prevTargetNode.tree._onDragEvent("leave",prevTargetNode,sourceNode,event,ui,draggable),targetNode&&(targetNode.tree.options.dnd.onDrop?targetNode===prevTargetNode?targetNode.tree._onDragEvent("over",targetNode,sourceNode,event,ui,draggable):targetNode.tree._onDragEvent("enter",targetNode,sourceNode,event,ui,draggable):noop())},stop:function(event,ui){var draggable=$(this).data("draggable"),sourceNode=ui.helper.data("dtSourceNode")||null,targetNode=ui.helper.data("dtTargetNode")||null,mouseDownEvent=draggable._mouseDownEvent,eventType=event.type,dropped=eventType=="mouseup"&&event.which==1;dropped||logMsg("Drag was cancelled"),targetNode&&(dropped&&targetNode.tree._onDragEvent("drop",targetNode,sourceNode,event,ui,draggable),targetNode.tree._onDragEvent("leave",targetNode,sourceNode,event,ui,draggable)),sourceNode&&sourceNode.tree._onDragEvent("stop",sourceNode,null,event,ui,draggable)}}),didRegisterDnd=!0}})(jQuery),define("jquery.dynatree",function(){}),define("phoenix/content/ui",["jquery","emberjs","vie/instance","text!phoenix/templates/content/ui/breadcrumb.html","text!phoenix/templates/content/ui/inspector.html","text!phoenix/templates/content/ui/inspectorDialog.html","text!phoenix/templates/content/ui/pageTree.html","text!phoenix/templates/content/ui/deletePageDialog.html","text!phoenix/templates/content/ui/inspectTree.html","phoenix/content/ui/elements","phoenix/content/ui/editors","jquery.popover","jquery.jcrop","jquery.plupload","jquery.plupload.html5","jquery.cookie","jquery.dynatree"],function($,Ember,vie,breadcrumbTemplate,inspectorTemplate,inspectorDialogTemplate,pageTreeTemplate,deletePageDialogTemplate,inspectTreeTemplate){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/ui");var T3=window.T3||{};typeof T3.Content=="undefined"&&(T3.Content={}),T3.Content.UI=T3.Content.UI||{},T3.Content.UI.Breadcrumb=Ember.View.extend({tagName:"div",classNames:["t3-breadcrumb"],template:Ember.Handlebars.compile(breadcrumbTemplate)}),T3.Content.UI.BreadcrumbItem=Ember.View.extend({tagName:"a",href:"#",attributeBindings:["href"],template:Ember.Handlebars.compile('{{item.contentTypeSchema.label}} {{#if item.status}}<span class="t3-breadcrumbitem-status">({{item.status}})</span>{{/if}}'),click:function(event){event.preventDefault();var item=this.get("item");return T3.Content.Model.NodeSelection.selectNode(item),!1}}),T3.Content.UI.Inspector=Ember.View.extend({template:Ember.Handlebars.compile(inspectorTemplate),$clickProtectionLayer:null,keyDown:function(event){if(event.keyCode===13)return T3.Content.Controller.Inspector.apply(),!1},_onModifiedChange:function(){var zIndex;T3.Content.Controller.Inspector.get("_modified")?(zIndex=this.$().css("z-index")-1,this.$clickProtectionLayer=$("<div />").addClass("t3-inspector-clickprotection").addClass("t3-ui").css({"z-index":zIndex}),this.$clickProtectionLayer.click(this._showUnappliedDialog),$("body").append(this.$clickProtectionLayer)):this.$clickProtectionLayer.remove()}.observes("T3.Content.Controller.Inspector._modified"),_showUnappliedDialog:function(){var view=Ember.View.create({template:Ember.Handlebars.compile(inspectorDialogTemplate),didInsertElement:function(){},cancel:function(){view.destroy()},apply:function(){T3.Content.Controller.Inspector.apply(),view.destroy()},dontApply:function(){T3.Content.Controller.Inspector.revert(),view.destroy()}});view.appendTo("#t3-inspector")}}),T3.Content.UI.Inspector.PropertyEditor=Ember.ContainerView.extend({propertyDefinition:null,render:function(){var typeDefinition=T3.Configuration.UserInterface[this.propertyDefinition.type];ember_assert('Type defaults for "'+this.propertyDefinition.type+'" not found!',!!typeDefinition);var editorConfigurationDefinition=typeDefinition;this.propertyDefinition.userInterface&&this.propertyDefinition.userInterface&&(editorConfigurationDefinition=$.extend({},editorConfigurationDefinition,this.propertyDefinition.userInterface));var editorClass=Ember.getPath(editorConfigurationDefinition["class"]);ember_assert('Editor class "'+typeDefinition["class"]+'" not found',!!editorClass);var classOptions=$.extend({valueBinding:"T3.Content.Controller.Inspector.nodeProperties."+this.propertyDefinition.key,elementId:this.propertyDefinition.elementId},this.propertyDefinition.options||{});classOptions=$.extend(classOptions,typeDefinition.options||{});var editor=editorClass.create(classOptions);this.appendChild(editor),this._super()}}),T3.Content.UI.ButtonDialog=Ember.Button.extend({classNames:["btn, btn-danger, t3-button"],attributeBindings:["disabled"],classNameBindings:["iconClass"],label:"",disabled:!1,visible:!0,icon:"",template:Ember.Handlebars.compile("{{label}}"),iconClass:function(){var icon=this.get("icon");return icon!==""?"t3-icon-"+icon:""}.property("icon").cacheable()}),T3.Content.UI.PageTreeButton=T3.Content.UI.PopoverButton.extend({popoverTitle:"Page Tree",$popoverContent:pageTreeTemplate,tree:null,editNodeTitleMode:!1,isDblClick:!1,showDeletePageDialog:function(activeNode){var that=this,view=Ember.View.create({template:Ember.Handlebars.compile(deletePageDialogTemplate),pageTitle:activeNode.data.title,didInsertElement:function(){},cancel:function(){view.destroy()},"delete":function(){that.deleteNode(activeNode),view.destroy()}});view.appendTo("#t3-pagetree-container")},editNode:function(node){var prevTitle=node.data.title,tree=node.tree,that=this;that.editNodeTitleMode=!0,tree.$widget.unbind(),$(".dynatree-title",node.span).html($("<input />").attr({id:"editNode",value:prevTitle})),$("input#editNode").focus().keydown(function(event){switch(event.which){case 27:$("input#editNode").val(prevTitle),$(this).blur();break;case 13:$(this).blur()}}).blur(function(event){var newTitle=$("input#editNode").val(),title;tree.$widget.bind(),node.focus(),prevTitle===newTitle||newTitle===""?(title=prevTitle,that.editNodeTitleMode=!1):title=newTitle,that.editNodeTitleMode===!0&&(that.editNodeTitleMode=!1,TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.update({__contextNodePath:node.data.key,title:title},function(result){result!==null&&result.success===!0?(that.editNodeTitleMode=!1,node.focus(),tree.$widget.bind(),T3.ContentModule.loadPage(node.data.href)):T3.Common.notification.error("Unexpected error while updating node: "+JSON.stringify(result))})),that.editNodeTitleMode=!1,node.setTitle(title),node.focus()})},createAndEditNode:function(activeNode){var that=this,position="into",node=activeNode.addChild({title:"[New Page]",contentType:"TYPO3.Phoenix.ContentTypes:Page",addClass:"typo3_phoenix_contenttypes-page"}),prevTitle=node.data.title,tree=node.tree;that.editNodeTitleMode=!0,tree.$widget.unbind(),$(".dynatree-title",node.span).html($("<input />").attr({id:"editCreatedNode",value:prevTitle})),$("input#editCreatedNode").focus().keydown(function(event){switch(event.which){case 27:$("input#editNode").val(prevTitle),$(this).blur();break;case 13:$(this).blur()}}).blur(function(event){var newTitle=$("input#editCreatedNode").val(),title;tree.$widget.bind(),activeNode.focus(),prevTitle===newTitle||newTitle===""?title=prevTitle:title=newTitle,that.editNodeTitleMode&&(that.editNodeTitleMode=!1,TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.createNodeForTheTree(activeNode.data.key,{contentType:"TYPO3.Phoenix.ContentTypes:Page",properties:{title:title}},position,function(result){result!==null&&result.success===!0?(node.data.key=result.data.key,node.data.title=result.data.title,node.data.href=result.data.href,node.data.isFolder=result.data.isFolder,node.data.isLazy=result.data.isLazy,node.data.contentType=result.data.contenType,node.data.expand=result.data.expand,node.data.addClass=result.data.addClass,that.editNodeTitleMode=!1,activeNode.focus(),T3.ContentModule.loadPage(activeNode.data.href),tree.$widget.bind()):T3.Common.notification.error("Unexpected error while creating node: "+JSON.stringify(result))})),node.setTitle(title),that.editNodeTitleMode=!1,activeNode.focus()})},deleteNode:function(node){TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController["delete"](node.data.key,function(result){if(result!==null&&result.success===!0){var parentNode=node.getParent();parentNode.focus(),parentNode.activate(),node.remove(),T3.ContentModule.loadPage(parentNode.data.href)}else T3.Common.notification.error("Unexpected error while deleting node: "+JSON.stringify(result))})},onPopoverOpen:function(){if(this.tree)return;var that=this,pageMetaInformation=$("#t3-page-metainformation"),siteRootNodePath=pageMetaInformation.data("__siteroot"),pageNodePath=$("#t3-page-metainformation").attr("about");that.tree=$("#t3-dd-pagetree").dynatree({keyboard:!0,minExpandLevel:1,classNames:{title:"dynatree-title"},clickFolderMode:1,debugLevel:0,strings:{loading:"Loading…",loadError:"Load error!"},children:[{title:pageMetaInformation.data("__sitename"),key:pageMetaInformation.data("__siteroot"),isFolder:!0,expand:!1,isLazy:!0,select:!1,active:!1,unselectable:!0,addClass:"typo3_phoenix_contenttypes-root"}],dnd:{autoExpandMS:1e3,preventVoidMoves:!0,onDragStart:function(node){return node.data.key!==siteRootNodePath?($("#t3-drop-deletionzone").show(),!0):!1},onDragEnter:function(node,sourceNode){return!0},onDragOver:function(node,sourceNode,hitMode){if(node.isDescendantOf(sourceNode))return!1},onDrop:function(node,sourceNode,hitMode,ui,draggable){var position=hitMode==="over"?"into":hitMode;sourceNode.move(node,hitMode),TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.move(sourceNode.data.key,node.data.key,position,function(result){result!==null&&result.success===!0?T3.ContentModule.loadPage(node.data.href):T3.Common.notification.error("Unexpected error while moving node: "+JSON.stringify(result))})}},onLazyRead:function(node){if(node._currentlySendingExtDirectAjaxRequest)return;node._currentlySendingExtDirectAjaxRequest=!0,TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.getChildNodesForTree(node.data.key,"TYPO3.TYPO3CR:Folder",0,function(result){node._currentlySendingExtDirectAjaxRequest=!1,result!==null&&result.success===!0?(node.setLazyNodeStatus(DTNodeStatus_Ok),node.addChild(result.data)):(node.setLazyNodeStatus(DTNodeStatus_Error),T3.Common.Notification.error("Page Tree loading error.")),node.getLevel()===1&&that.tree.dynatree("getTree").activateKey(pageNodePath)})},onClick:function(node,event){if(that.editNodeTitleMode===!0)return!1;node.data.key!==siteRootNodePath&&(node.getEventTargetType(event)==="title"||node.getEventTargetType(event)==="icon")&&setTimeout(function(){that.isDblClick||T3.ContentModule.loadPage(node.data.href)},300)},onDblClick:function(node,event){node.getEventTargetType(event)==="title"&&node.getLevel()!==1&&(that.isDblClick=!0,setTimeout(function(){that.isDblClick=!1,that.editNode(node)},300))},onKeydown:function(node,event){switch(event.which){case 113:return that.editNode(node),!1;case 13:return that.editNode(node),!1}}}),that.tree.dynatree("getRoot").getChildren()[0].expand(!0),$("#t3-dd-pagetree").click(function(){if(that.editNodeTitleMode===!0)return!1}),$("#t3-action-newpage").click(function(){var activeNode=$("#t3-dd-pagetree").dynatree("getActiveNode");return activeNode!==null?that.createAndEditNode(activeNode):T3.Common.Notification.notice("You have to select a page"),!1}),$("#t3-action-deletepage").click(function(){var activeNode=$("#t3-dd-pagetree").dynatree("getActiveNode");activeNode!==null?activeNode.data.key!==siteRootNodePath?that.showDeletePageDialog(activeNode):T3.Common.Notification.notice("The Root page cannot be deleted."):T3.Common.Notification.notice("You have to select a page")})}}),T3.Content.UI.InspectButton=T3.Content.UI.PopoverButton.extend({popoverTitle:"Content Structure",$popoverContent:inspectTreeTemplate,popoverPosition:"top",_ignoreCloseOnPageLoad:!1,inspectTree:null,isLoadingLayerActive:function(){if(T3.ContentModule.get("_isLoadingPage")){if(this.get("_ignoreCloseOnPageLoad")){this.set("_ignoreCloseOnPageLoad",!1);return}$(".t3-inspect > button.pressed").click(),this.inspectTree!==null&&($("#t3-dd-inspecttree").dynatree("destroy"),this.inspectTree=null)}}.observes("T3.ContentModule.currentUri"),onPopoverOpen:function(){var page=vie.entities.get(vie.service("rdfa").getElementSubject($("#t3-page-metainformation"))),pageTitle=page.get(T3.ContentModule.TYPO3_NAMESPACE+"title"),pageNodePath=$("#t3-page-metainformation").attr("about");this.inspectTree&&pageNodePath!==$("#t3-dd-inspecttree").dynatree("getTree").getRoot().getChildren()[0].data.key&&$("#t3-dd-inspecttree").dynatree("destroy"),this.inspectTree=$("#t3-dd-inspecttree").dynatree({debugLevel:0,cookieId:null,persist:!1,children:[{title:pageTitle,key:pageNodePath,isFolder:!0,expand:!1,isLazy:!0,autoFocus:!0,select:!1,active:!1,unselectable:!0}],dnd:{autoExpandMS:1e3,preventVoidMoves:!0,onDragStart:function(node){},onDragEnter:function(node,sourceNode){return node.data.contentType==="TYPO3.Phoenix.ContentTypes:Section"?["before","after","over"]:["before","after"]},onDragOver:function(node,sourceNode,hitMode){if(node.isDescendantOf(sourceNode))return!1},onDrop:function(node,sourceNode,hitMode,ui,draggable){var position=hitMode==="over"?"into":hitMode;sourceNode.move(node,hitMode),T3.ContentModule.showPageLoader(),TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.move(sourceNode.data.key,node.data.key,position,function(result){result!==null&&result.success===!0?(sourceNode.data.key=result.data.newNodePath,T3.ContentModule.reloadPage()):T3.Common.notification.error("Unexpected error while moving node: "+JSON.stringify(result))})},onDragStop:function(){}},onLazyRead:function(node){if(node._currentlySendingExtDirectAjaxRequest)return;node._currentlySendingExtDirectAjaxRequest=!0,TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.getChildNodesForTree(node.data.key,"!TYPO3.TYPO3CR:Folder",0,function(result){node._currentlySendingExtDirectAjaxRequest=!1,result!==null&&result.success===!0?(node.setLazyNodeStatus(DTNodeStatus_Ok),node.addChild(result.data)):(node.setLazyNodeStatus(DTNodeStatus_Error),T3.Common.Notification.error("Page Tree loading error."))})},onClick:function(node,event){var nodePath=node.data.key,offsetFromTop=150,$element=$('[about="'+nodePath+'"]');T3.Content.Model.NodeSelection.updateSelection($element),$("html, body").animate({scrollTop:$element.offset().top-offsetFromTop},500)}}),this.inspectTree.dynatree("getRoot").getChildren()[0].expand(!0)}}),T3.Content.UI.Util=T3.Content.UI.Util||{},T3.Content.UI.Util.AddContentElementHandleBars=function($contentElement,contentElementIndex,collection,isSection){var handleContainerClassName,handleContainer;if(isSection){handleContainerClassName="t3-section-handle-container";if($contentElement.prev()&&$contentElement.prev().hasClass(handleContainerClassName))return;handleContainer=$("<div />",{"class":"t3-ui "+handleContainerClassName}).insertBefore($contentElement),T3.Content.UI.SectionHandle.create({_element:$contentElement,_collection:collection,_entityCollectionIndex:contentElementIndex}).appendTo(handleContainer)}else{handleContainerClassName="t3-contentelement-handle-container";if(!$contentElement||$contentElement.find("> ."+handleContainerClassName).length>0)return;handleContainer=$("<div />",{"class":"t3-ui "+handleContainerClassName}).prependTo($contentElement),$contentElement.height()<25&&$contentElement.css("min-height","25px"),T3.Content.UI.ContentElementHandle.create({_element:$contentElement,_collection:collection,_entityCollectionIndex:contentElementIndex}).appendTo(handleContainer)}},T3.Content.UI.Util.AddNotInlineEditableOverlay=function($element,entity){var setOverlaySizeFn=function(){window.setTimeout(function(){$element.find("> .t3-contentelement-overlay").css({width:$element.width(),height:$element.height()})},10)};if($element.find("> .t3-inline-editable").length===0&&$element.find(".t3-contentsection, .t3-contentelement").length===0){var overlay=$("<div />",{"class":"t3-contentelement-overlay",click:function(event){$(".t3-primary-editor-action").length>0&&setTimeout(function(){$(".t3-primary-editor-action").click(),Ember.View.views[jQuery(".t3-primary-editor-action").attr("id")]&&Ember.View.views[jQuery(".t3-primary-editor-action").attr("id")].toggle&&Ember.View.views[jQuery(".t3-primary-editor-action").attr("id")].toggle()},1),event.preventDefault()}}).insertBefore($element.find("> .t3-contentelement-handle-container"));$("<span />",{"class":"t3-contentelement-overlay-icon"}).appendTo(overlay),setOverlaySizeFn(),entity.on("change",function(){setOverlaySizeFn()})}}}),define("phoenix/content/controller",["jquery","create","vie/entity","phoenix/common","phoenix/content/model"],function($,CreateJS,Entity){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/content/controller");var T3=window.T3||{};T3.Content=T3.Content||{};var Preview=Ember.Object.create({previewMode:!1,init:function(){T3.Common.LocalStorage.getItem("previewMode")===!0&&this.togglePreview()},togglePreview:function(){this.set("previewMode",!this.get("previewMode"))},onTogglePreviewMode:function(){var isPreviewEnabled=this.get("previewMode");isPreviewEnabled?CreateJS.disableEdit():CreateJS.enableEdit(),$("body").toggleClass("t3-ui-previewmode t3-ui-controls")}.observes("previewMode"),onPreviewModeChange:function(){T3.Common.LocalStorage.setItem("previewMode",this.get("previewMode"))}.observes("previewMode")}),Wireframe=Ember.Object.create({wireframeMode:!1,init:function(){T3.Common.LocalStorage.getItem("wireframeMode")===!0&&(this.toggleWireframeMode(),$("#t3-ui-createsection-input").keypress(function(e){(e.keyCode||e.which)===13&&$("#t3-ui-createsection-button").click()}),$("#t3-ui-createsection-button").click(function(){var newSectionName=$("#t3-ui-createsection-input").val();newSectionName===""?T3.Common.Notification.error("You need to give a name for the new content section."):T3.Content.Controller.Wireframe.createSection(newSectionName)}))},toggleWireframeMode:function(){this.set("wireframeMode",!this.get("wireframeMode"))},onWireframeModeChange:function(){var wireframeMode;wireframeMode=this.get("wireframeMode"),typeof TYPO3_TYPO3_Service_ExtDirect_V1_Controller_UserController=="object"&&(T3.ContentModule.showPageLoader(),TYPO3_TYPO3_Service_ExtDirect_V1_Controller_UserController.updatePreferences({"contentEditing.wireframeMode":wireframeMode},function(){T3.Common.LocalStorage.setItem("wireframeMode",wireframeMode),window.location.reload(!1)}))}.observes("wireframeMode"),createSection:function(sectionName){var pageNodePath=$("#t3-page-metainformation").attr("about");T3.ContentModule.showPageLoader(),TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.create(pageNodePath,{contentType:"TYPO3.Phoenix.ContentTypes:Section",nodeName:sectionName},"into",function(result){result.success==1&&($("#t3-ui-createsection-input").val(""),T3.ContentModule.reloadPage())})}}),Inspect=Ember.Object.create({inspectMode:!1,onInspectModeChange:function(){var isInspectEnabled=this.get("inspectMode");isInspectEnabled?jQuery("body").addClass("t3-inspect-active"):jQuery("body").removeClass("t3-inspect-active")}.observes("inspectMode")}),Inspector=Ember.Object.create({_modified:!1,_unmodified:function(){return!this.get("_modified")}.property("_modified").cacheable(),nodeProperties:null,selectedNode:null,cleanProperties:null,init:function(){this.set("nodeProperties",Ember.Object.create())},sectionsAndViews:function(){var selectedNodeSchema=T3.Content.Model.NodeSelection.get("selectedNodeSchema");if(!selectedNodeSchema||!selectedNodeSchema.groups||!selectedNodeSchema.properties)return[];var sectionsAndViews=[];return jQuery.each(selectedNodeSchema.groups,function(groupIdentifier,propertyGroupConfiguration){var properties=[];jQuery.each(selectedNodeSchema.properties,function(propertyName,propertyConfiguration){propertyConfiguration.group===groupIdentifier&&properties.push(jQuery.extend({key:propertyName,elementId:Ember.generateGuid()},propertyConfiguration))}),properties.sort(function(a,b){return(b.priority||0)-(a.priority||0)}),sectionsAndViews.push(jQuery.extend({},propertyGroupConfiguration,{properties:properties}))}),sectionsAndViews.sort(function(a,b){return(b.priority||0)-(a.priority||0)}),sectionsAndViews}.property("T3.Content.Model.NodeSelection.selectedNodeSchema").cacheable(),onSelectedNodeChange:function(){var selectedNode=T3.Content.Model.NodeSelection.get("selectedNode"),cleanProperties={};this.set("selectedNode",selectedNode),selectedNode&&(cleanProperties=selectedNode.get("attributes")),this.set("cleanProperties",cleanProperties),this.set("nodeProperties",Ember.Object.create(cleanProperties))}.observes("T3.Content.Model.NodeSelection.selectedNode"),onNodePropertiesChange:function(){var that=this,selectedNode=this.get("selectedNode"),selectedNodeSchema,editableProperties=[],nodeProperties;selectedNode&&(selectedNodeSchema=selectedNode.get("contentTypeSchema"),nodeProperties=this.get("nodeProperties"),selectedNodeSchema.properties&&jQuery.each(selectedNodeSchema.properties,function(propertyName,propertyConfiguration){selectedNodeSchema.inlineEditableProperties?jQuery.inArray(propertyName,selectedNodeSchema.inlineEditableProperties)===-1&&editableProperties.push(propertyName):editableProperties.push(propertyName)}),editableProperties.length>0&&jQuery.each(editableProperties,function(key,propertyName){nodeProperties.addObserver(propertyName,null,function(){that._somePropertyChanged()})}))}.observes("nodeProperties"),_somePropertyChanged:function(){var that=this,hasChanges=!1;_.each(this.get("cleanProperties"),function(cleanPropertyValue,key){that.get("nodeProperties").get(key)!==cleanPropertyValue&&(hasChanges=!0)}),this.set("_modified",hasChanges)},onApplyButtonToggle:function(isModified){isModified&&this.apply()},apply:function(){var that=this,cleanProperties,contentTypeSchema=T3.Configuration.Schema[Entity.extractContentTypeFromVieEntity(this.getPath("selectedNode._vieEntity"))],reloadPage=!1;_.each(this.get("cleanProperties"),function(cleanPropertyValue,key){that.get("nodeProperties").get(key)!==cleanPropertyValue&&(that.get("selectedNode").setAttribute(key,that.get("nodeProperties").get(key)),contentTypeSchema&&contentTypeSchema.properties&&contentTypeSchema.properties[key]&&contentTypeSchema.properties[key].reloadOnChange&&(reloadPage=!0))}),reloadPage&&T3.ContentModule.showPageLoader(),Backbone.sync("update",this.getPath("selectedNode._vieEntity"),{success:function(model,result){reloadPage&&(result&&result.data&&result.data.nextUri?T3.ContentModule.loadPage(result.data.nextUri):T3.ContentModule.reloadPage())}}),this.set("_modified",!1),cleanProperties=this.getPath("selectedNode.attributes"),this.set("cleanProperties",cleanProperties),this.set("nodeProperties",Ember.Object.create(cleanProperties))},revert:function(){this.set("nodeProperties",Ember.Object.create(this.get("cleanProperties"))),this.set("_modified",!1)}}),NodeActions=Ember.Object.create({_clipboard:null,clipboardContainsContent:function(){return this.get("_clipboard")!==null}.property("_clipboard").cacheable(),init:function(){T3.Common.LocalStorage.getItem("clipboard")&&this.set("_clipboard",T3.Common.LocalStorage.getItem("clipboard"))},cut:function(nodePath){this.getPath("_clipboard.type")==="cut"&&this.getPath("_clipboard.nodePath")===nodePath?this.set("_clipboard",null):this.set("_clipboard",{type:"cut",nodePath:nodePath})},copy:function(nodePath){this.getPath("_clipboard.type")==="copy"&&this.getPath("_clipboard.nodePath")===nodePath?this.set("_clipboard",null):this.set("_clipboard",{type:"copy",nodePath:nodePath})},pasteAfter:function(nodePath){this._paste(nodePath,"after")},_paste:function(nodePath,position){var that=this,clipboard=this.get("_clipboard");if(!clipboard.nodePath){T3.Common.Notification.notice("No node found on the clipboard");return}if(clipboard.nodePath===nodePath&&clipboard.type==="cut"){T3.Common.Notification.notice("It is not possible to paste a node "+position+" itself.");return}var action=clipboard.type==="cut"?"move":"copy";TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController[action].call(that,clipboard.nodePath,nodePath,position,function(result){result.success&&(T3.Common.LocalStorage.removeItem("clipboard"),that.set("_clipboard",null),T3.ContentModule.reloadPage())})},remove:function(model,$element,$handle){T3.Common.Dialog.openConfirmPopover({title:"Delete this element?",confirmLabel:"Delete",confirmClass:"btn-danger",positioning:"absolute",onOk:function(){$element.fadeOut(function(){$element.addClass("t3-contentelement-removed")}),model.set("typo3:_removed",!0),model.save(null)}},$handle)},addAbove:function(contentType,referenceEntity,callBack){this._add(contentType,referenceEntity,"before",callBack)},addBelow:function(contentType,referenceEntity,callBack){this._add(contentType,referenceEntity,"after",callBack)},addInside:function(contentType,referenceEntity,callBack){this._add(contentType,referenceEntity,"into",callBack)},_add:function(contentType,referenceEntity,position,callBack){TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.createAndRender(referenceEntity.getSubject().substring(1,referenceEntity.getSubject().length-1),referenceEntity.get("typo3:_typoscriptPath"),{contentType:contentType,properties:{}},position,function(result){var template=$(result.collectionContent).find('[about="'+result.nodePath+'"]').first();callBack(result.nodePath,template)})},pasteBefore:function(nodePath,$handle){this._paste(nodePath,$handle,"before")},removeFromClipboard:function(nodePath,$handle){var block=T3.Content.Model.BlockManager.getBlockByNodePath(nodePath),clipboard=this.get("_clipboard");clipboard.nodePath===nodePath&&this.set("_clipboard",{}),block.hideHandle("remove-from-cut"),block.hideHandle("remove-from-copy"),jQuery(".t3-paste-before-handle, .t3-paste-after-handle").addClass("t3-handle-hidden"),jQuery(".t3-add-above-handle, .t3-add-below-handle").removeClass("t3-handle-hidden"),block.showHandle("cut"),block.showHandle("copy")},onClipboardChange:function(){var clipboard=this.get("_clipboard");T3.Common.LocalStorage.setItem("clipboard",clipboard)}.observes("_clipboard")}),ServerConnection=Ember.Object.create({_lastSuccessfulTransfer:null,_failedRequest:!1,_pendingSave:!1,_saveRunning:!1,sendAllToServer:function(collection,transformFn,extDirectFn,callback,elementCallback){var that=this,numberOfUnsavedRecords=collection.get("length"),responseCallback=function(element){return function(provider,response){if(response.result===null||response.result.success!==!0){T3.Common.Notification.error("Server communication error, reload the page to return to a safe state if another publish does not work"),that.set("_failedRequest",!0);return}that.set("_failedRequest",!1),that.set("_lastSuccessfulTransfer",new Date),elementCallback&&elementCallback(element,response),numberOfUnsavedRecords--,numberOfUnsavedRecords<=0&&(that.set("_saveRunning",!1),callback())}};collection.forEach(function(element){var args=transformFn(element).slice();args.push(responseCallback(element)),that.set("_saveRunning",!0),extDirectFn.apply(window,args)})},statusClass:function(){return this.set("_saveRunning",!1),"t3-connection-status-"+this.get("_failedRequest")?"down":"up"}.observes("_failedRequest")});T3.Content.Controller={Preview:Preview,Wireframe:Wireframe,Inspect:Inspect,NodeActions:NodeActions,Inspector:Inspector,ServerConnection:ServerConnection},window.T3=T3}),define("jquery.hotkeys",["jquery"],function(jQuery){function keyHandler(handleObj){if(typeof handleObj.data!="string")return;var origHandler=handleObj.handler,keys=handleObj.data.toLowerCase().split(" ");handleObj.handler=function(event){if(!(this===event.target||!/textarea|select/i.test(event.target.nodeName)&&event.target.type!=="text"))return;var special=event.type!=="keypress"&&jQuery.hotkeys.specialKeys[event.which],character=String.fromCharCode(event.which).toLowerCase(),key,modif="",possible={};event.altKey&&special!=="alt"&&(modif+="alt+"),event.ctrlKey&&special!=="ctrl"&&(modif+="ctrl+"),event.metaKey&&!event.ctrlKey&&special!=="meta"&&(modif+="meta+"),event.shiftKey&&special!=="shift"&&(modif+="shift+"),special?possible[modif+special]=!0:(possible[modif+character]=!0,possible[modif+jQuery.hotkeys.shiftNums[character]]=!0,modif==="shift+"&&(possible[jQuery.hotkeys.shiftNums[character]]=!0));for(var i=0,l=keys.length;i<l;i++)if(possible[keys[i]])return origHandler.apply(this,arguments)}}var T3=window.T3||{},$=jQuery;jQuery.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},jQuery.each(["keydown","keyup","keypress"],function(){jQuery.event.special[this]={add:keyHandler}})}),define("phoenix/contentmodule",["jquery","vie/instance","emberjs","create","phoenix/common","phoenix/content/model","phoenix/content/ui","phoenix/content/controller","jquery.hotkeys"],function($,vie,Ember,CreateJS){return window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("phoenix/contentmodule"),Ember.Application.create({TYPO3_NAMESPACE:"http://www.typo3.org/ns/2012/Flow/Packages/TYPO3/Content/",showDevelopmentFeatures:!1,currentUri:window.location.href,_isLoadingPage:null,_launcher:null,vie:null,_activeEntity:null,_vieOptions:{stanbolUrl:null,dbPediaUrl:null},bootstrap:function(){this.set("vie",vie),this._initializeInspector(),this._initializeToolbar(),this._initializeFooter(),this._initializeLauncher(),this._initializeAjaxPageReload(),this._initializeVie(),this._initializeDevelopmentFeatures(),this._initializeNotifications(),$("body").toggleClass("t3-ui-controls t3-backend"),this._setPagePosition(),this._initializeShortcuts(),this._initializeHistoryManagement(),$(".aloha-sidebar-bar").remove()},_initializeNotifications:function(){$("body").midgardNotifications()},_initializeDevelopmentFeatures:function(){var that=this;window.addEventListener("hashchange",function(){that._enableDevelopmentFeaturesIfNeeded()},!1),this._enableDevelopmentFeaturesIfNeeded()},_initializeDoubleClickEdit:function(){$(".t3-contentelement").live("dblclick",function(event){$(".t3-primary-editor-action").length>0&&$(".t3-primary-editor-action").click(),event.preventDefault()})},_initializeVie:function(){var that=this;this.get("_vieOptions").stanbolUrl&&vie.use(new vie.StanbolService({proxyDisabled:!0,url:this.get("_vieOptions").stanbolUrl})),this.get("_vieOptions").dbPediaUrl&&vie.use(new vie.DBPediaService({proxyDisabled:!0,url:this.get("_vieOptions").dbPediaUrl}));var schema=window.sessionStorage?window.sessionStorage.getItem("vie-schema"):null;T3.Configuration.phoenixShouldCacheSchema&&schema?(VIE.Util.loadSchemaOrg(vie,JSON.parse(schema),null),that._initializeVieAfterSchemaIsLoaded(vie)):$.getJSON(phoenixContentTypeSchema).success(function(data,textStatus,jqXHR){VIE.Util.loadSchemaOrg(vie,data,null),window.sessionStorage&&window.sessionStorage.setItem("vie-schema",JSON.stringify(data)),that._initializeVieAfterSchemaIsLoaded(vie)}).error(function(data,textStatus,jqXHR){console.warn("Error loading the VIE schema",data,textStatus,jqXHR)})},_initializeVieAfterSchemaIsLoaded:function(){T3.Content.Model.NodeSelection.initialize(),T3.Content.Model.PublishableNodes.initialize(),this._registerVieContentTypeTemplateCallbacks(),this._initializeCreateJs()},_registerVieContentTypeTemplateCallbacks:function(){_.each(vie.types.toArray(),function(type){var contentType=type.id.substring(1,type.id.length-1).replace(T3.ContentModule.TYPO3_NAMESPACE,""),prefix=vie.namespaces.getPrefix(type.id);prefix==="typo3"&&vie.service("rdfa").setTemplate("typo3:"+contentType,"typo3:content-collection",function(entity,callBack,collectionView){var type=entity.get("@type"),contentType=type.id.substring(1,type.id.length-1).replace(T3.ContentModule.TYPO3_NAMESPACE,""),referenceEntity=null,lastMatchedEntity=null,afterCreationCallback=function(nodePath,template){entity.set("@subject",nodePath),vie.load({element:template}).from("rdfa").execute(),callBack(template),CreateJS.enableEdit()};_.each(collectionView.collection.models,function(matchEntity){entity===matchEntity&&lastMatchedEntity?(referenceEntity=lastMatchedEntity,T3.Content.Controller.NodeActions.addBelow(contentType,referenceEntity,afterCreationCallback)):lastMatchedEntity=matchEntity}),referenceEntity===null&&(collectionView.collection.models.length===1?T3.Content.Controller.NodeActions.addInside(contentType,vie.entities.get($(collectionView.el).attr("about")),afterCreationCallback):T3.Content.Controller.NodeActions.addAbove(contentType,collectionView.collection.models[1],afterCreationCallback))})})},_initializeCreateJs:function(){$("body").midgardStorage({vie:vie,url:function(){},localStorage:!0,autoSave:!0}),CreateJS.initialize()},_initializeShortcuts:function(){var that=this;$(document).bind("keydown","alt+p",function(){return T3.Content.Controller.Preview.togglePreview(),!1}).bind("keydown","alt+l",function(){return that._launcher.activate(),!1})},_initializeHistoryManagement:function(){var that=this;window.history&&window.history.replaceState({uri:window.location.href},document.title,window.location.href),window.addEventListener("popstate",function(event){event.state&&that.loadPage(event.state.uri,!0)})},_enableDevelopmentFeaturesIfNeeded:function(){window.location.hash==="#dev"?(this.set("showDevelopmentFeatures",!0),T3.Common.LocalStorage.setItem("showDevelopmentFeatures",!0)):window.location.hash==="#nodev"?(this.set("showDevelopmentFeatures",!1),T3.Common.LocalStorage.removeItem("showDevelopmentFeatures")):T3.Common.LocalStorage.getItem("showDevelopmentFeatures")&&this.set("showDevelopmentFeatures",!0)},_initializeInspector:function(){var inspector=T3.Content.UI.Inspector.create({elementId:"t3-inspector",classNames:["t3-ui","t3-inspector"]});inspector.appendTo($("body"))},_initializeToolbar:function(){var toolbar=T3.Content.UI.Toolbar.create({elementId:"t3-toolbar",classNames:["t3-ui"],left:[T3.Content.UI.ToggleButton.extend({pressedBinding:"T3.Content.Controller.Preview.previewMode",template:Ember.Handlebars.compile('<i class="icon-fullscreen"></i>'),attributeBindings:["disabled","title"],icon:"preview",title:"Preview",elementAttributes:["title"]}),T3.Content.UI.PageTreeButton.extend({label:"Pages"}),T3.Content.UI.ToggleButton.extend({pressedBinding:"T3.Content.Controller.Wireframe.wireframeMode",label:"Wireframe",icon:"wireframe"})],right:[Ember.View.extend({template:Ember.Handlebars.compile('<span style="color:white">!!! Development mode !!!</span>'),isVisibleBinding:"T3.ContentModule.showDevelopmentFeatures"}),T3.Content.UI.Button.extend({label:"Publish Page",disabledBinding:Ember.Binding.or("_noChanges","_saveRunning"),target:"T3.Content.Model.PublishableNodes",action:"publishAll",_connectionFailedBinding:"T3.Content.Controller.ServerConnection._failedRequest",_saveRunningBinding:"T3.Content.Controller.ServerConnection._saveRunning",_noChangesBinding:"T3.Content.Model.PublishableNodes.noChanges",classNameBindings:["connectionStatusClass"],classNames:["btn-publish"],connectionStatusClass:function(){var className="t3-connection-status-";return className+=this.get("_connectionFailed")?"down":"up",className}.property("_connectionFailed")})]});toolbar.appendTo($("body"))},_initializeLauncher:function(){this._launcher=T3.Common.Launcher.create({searchItemsBinding:"T3.Common.Launcher.SearchController.searchItems"}),this._launcher.appendTo($("#t3-launcher"))},_initializeFooter:function(){var breadcrumb=T3.Content.UI.Breadcrumb.extend({contentBinding:"T3.Content.Model.NodeSelection.nodes"}),footer=T3.Content.UI.Toolbar.create({elementId:"t3-footer",classNames:["t3-ui"],left:[breadcrumb]});footer.appendTo($("body"))},_initializeAjaxPageReload:function(){this._linkInterceptionHandler($("a:not(.t3-ui a, .aloha-floatingmenu a)")),this._linkInterceptionHandler("a.t3-link-ajax",!0)},_setPagePosition:function(){var hash=location.hash;if(hash.length>0){var contentElement=$("#"+hash.substring(1));contentElement.length>0&&window.scroll(0,contentElement.position().top-$("body").offset().top)}},reloadPage:function(){this.loadPage(T3.ContentModule.currentUri)},_linkInterceptionHandler:function(selector,constant){function clickHandler(e,link){e.preventDefault();var $this=$(link);!$this.attr("href").match(/[a-z]*:\/\//)&&$this.parents(".t3-contentelement-active").length===0&&that.loadPage($this.attr("href"))}var that=this;constant===!0?$(document).delegate(selector,"click",function(e){clickHandler(e,this)}):$(selector).click(function(e){clickHandler(e,this)})},loadPage:function(uri,ignorePushToHistory){var that=this;if(uri==="#"){var siteRoot=$("#t3-page-metainformation").attr("data-__siteroot"),workspaceName=siteRoot.substr(siteRoot.lastIndexOf("@")+1);uri="@"+workspaceName}var selectorsToReplace=[];$(".t3-reloadable-content").each(function(){var id=$(this).attr("id");if(!id)throw"You have marked a DOM element with the CSS class t3-reloadable-content; but this element has no ID.";selectorsToReplace.push("#"+id)});if(selectorsToReplace.length===0){window.location.href=uri;return}this.showPageLoader(),this.set("_isLoadingPage",!0),window.history&&!ignorePushToHistory&&window.history.pushState({uri:uri},document.title,uri);var currentlyActiveContentElementNodePath=$(".t3-contentelement-active").attr("about");$.get(uri,function(htmlString,status){if(status==="success"){var $htmlDom=$(htmlString);$.each(selectorsToReplace,function(index,selector){if($htmlDom.find(selector).length>0)$(selector).replaceWith($htmlDom.find(selector));else{if(!($htmlDom.filter(selector).length>0))throw"Target HTML selector not found. Something has gone really wrong";$(selector).replaceWith($htmlDom.filter(selector))}that._linkInterceptionHandler($(selector).find("a"))});var $newMetaInformation=$htmlDom.filter("#t3-page-metainformation");$newMetaInformation.length===0?window.location.href=uri:T3.ContentModule.set("currentUri",uri),$("#t3-page-metainformation").replaceWith($newMetaInformation),$("title").html($htmlDom.filter("title").html()),that._setPagePosition(),T3.Content.Model.NodeSelection.initialize(),T3.Content.Model.PublishableNodes.initialize(),CreateJS.enableEdit();var $currentlyActiveContentElement=$('[about="'+currentlyActiveContentElementNodePath+'"]');$currentlyActiveContentElement.length===1&&T3.Content.Model.NodeSelection.updateSelection($currentlyActiveContentElement)}else window.location.href=uri;that.set("_isLoadingPage",!1),$(".t3-pageloader-wrapper").fadeOut("fast",function(){$(this).remove()})})},showPageLoader:function(){if($(".t3-pageloader-wrapper").length>0)return;require(["canvas.indicator"],function(){var body=$("body"),loader=$('<canvas class="t3-pageloader" />'),indicator;body.append($("<div />").addClass("t3-pageloader-wrapper").append(loader).fadeTo("fast",.8)),indicator=new CanvasIndicator(loader.get(0),{bars:12,innerRadius:8,size:[3,15],rgb:[0,0,0],fps:15})})}})}),define("storage",["vie/entity","backbone"],function(Entity){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("storage"),Backbone.sync=function(method,model,options){var methods={create:function(model,options){console.log("CREATE",arguments)},read:function(model,options){console.log("READ",arguments)},update:function(model,options){var nodeJson=this._convertModelToJson(model);window.TYPO3_TYPO3_Service_ExtDirect_V1_Controller_NodeController.update(nodeJson,function(result){model.set("typo3:__workspacename",result.data.workspaceNameOfNode,{silent:!0}),options&&options.success&&options.success(model,result)})},"delete":function(model,options){console.log("DELETE",arguments)},_convertModelToJson:function(model){var contextPath=model.fromReference(model.id),attributes=Entity.extractAttributesFromVieEntity(model,function(k,v){return k[0]==="_"&&k[1]==="_"?!1:!0});return attributes.__contextNodePath=contextPath,attributes}};methods[method].call(methods,model,options)}}),function($){$.fn.lionbars=function(color,showOnMouseOver,visibleBar,visibleBg){function dragScrollbar(targetScrollbar,nWrapTarget,e,factorV,factorH,initScrollX,initScrollY,initX,initY,mouseX,mouseY){var offsetX,offsetY,realOffsetX,realOffsetY;targetScrollbar.hasClass("vertical")?(realOffsetY=initScrollY+mouseY-initY,offsetY=realOffsetY,offsetY=offsetY<2?2:offsetY,offsetY=offsetY>targetScrollbar.siblings(".scrollbar_bg.vertical").height()-(targetScrollbar.height()+2)?targetScrollbar.siblings(".scrollbar_bg.vertical").height()-(targetScrollbar.height()+2):offsetY,targetScrollbar.css({top:offsetY}),nWrapTarget.scrollTop(realOffsetY/factorV)):(realOffsetX=initScrollX+mouseX-initX,offsetX=realOffsetX,offsetX=offsetX<2?2:offsetX,offsetX=offsetX>targetScrollbar.siblings(".scrollbar_bg.horizontal").width()-(targetScrollbar.width()+2)?targetScrollbar.siblings(".scrollbar_bg.horizontal").width()-(targetScrollbar.width()+2):offsetX,targetScrollbar.css({left:offsetX}),nWrapTarget.scrollLeft(realOffsetX/factorH))}function setScrollFactor(target){target=$(target);var nWrap=target.find(".nWrap"),scrollbarV,scrollfactorV,scrollbarH,scrollfactorH;nWrap.hasClass("hscroll")?(scrollbarV=nWrap.siblings(".scrollbar.vertical"),scrollfactorV=(target.height()-9-(scrollbarV.height()-2))/(nWrap[0].scrollHeight-target.height())):(scrollbarV=nWrap.siblings(".scrollbar.vertical"),scrollfactorV=(target.height()-(scrollbarV.height()-2))/(nWrap[0].scrollHeight-target.height())),nWrap.attr("scrollfactorV",scrollfactorV),nWrap.hasClass("vscroll")?(scrollbarH=nWrap.siblings(".scrollbar.horizontal"),scrollfactorH=(target.width()-9-(scrollbarH.width()-2))/(nWrap[0].scrollWidth-target.width())):(scrollbarH=nWrap.siblings(".scrollbar.horizontal"),scrollfactorH=(target.width()-(scrollbarH.width()-2))/(nWrap[0].scrollWidth-target.width())),nWrap.attr("scrollfactorH",scrollfactorH)}function applyScrollbars(target,scrollbars,width,height){target=$(target);var scrollbarV='<div class="scrollbar vertical nbar"></div><div class="scrollbar_bg vertical nbar"></div>',scrollbarH='<div class="scrollbar horizontal nbar"></div><div class="scrollbar_bg horizontal nbar"></div>',nWrap=target.find(".nWrap");scrollbars===1&&(target.prepend(scrollbarV),nWrap.css({width:nWrap.width()+width}).addClass("vscroll")),scrollbars===2&&(target.prepend(scrollbarH),nWrap.css({height:nWrap.height()+height}).addClass("hscroll")),scrollbars===3&&(target.prepend(scrollbarV,scrollbarH),nWrap.css({width:nWrap.width()+width,height:nWrap.height()+height}).addClass("vscroll hscroll"));var minLength=25,fullHeight=target.find(".nWrap")[0].scrollHeight,fullWidth=target.find(".nWrap")[0].scrollWidth,realHeight=target.height(),realWidth=target.width();nWrap.hasClass("vscroll")&&(fullWidth+=15),nWrap.hasClass("hscroll")&&(fullHeight+=15),height=realHeight*(realHeight/fullHeight),width=realWidth*(realWidth/fullWidth),height=height<minLength?minLength:height,width=width<minLength?minLength:width,target.find(".scrollbar.vertical").css({height:height}),target.find(".scrollbar.horizontal").css({width:width}),nWrap.hasClass("hscroll")?target.find(".scrollbar_bg.vertical").css({height:target.find(".scrollbar_bg.vertical").height()-13}):target.find(".scrollbar_bg.vertical").css({height:target.find(".scrollbar_bg.vertical").height()-4}),nWrap.hasClass("vscroll")?target.find(".scrollbar_bg.horizontal").css({width:target.find(".scrollbar_bg.horizontal").width()-13}):target.find(".scrollbar_bg.horizontal").css({width:target.find(".scrollbar_bg.horizontal").width()-4}),color==="light"?(target.find(".scrollbar").addClass("light"),target.find(".scrollbar_bg").addClass("light")):(target.find(".scrollbar").addClass("dark"),target.find(".scrollbar_bg").addClass("dark")),visibleBar&&target.find(".scrollbar").css({opacity:1}),visibleBg&&target.find(".scrollbar_bg").css({opacity:1})}function needScrollbars(target){target=$(target);var info=[],val=0,width,height;return target.css({overflow:"auto"}).prepend('<div class="nCheck"></div>'),target.find(".nCheck").css({width:"100%",height:1,opacity:1,background:"red"}),target.width()>target.find(".nCheck").width()&&(val+=1,width=target.width()-target.find(".nCheck").width()),target.find(".nCheck").css({width:1,height:"100%"}),target.height()>target.find(".nCheck").height()&&(val+=2,height=target.height()-target.find(".nCheck").height()),target.find(".nCheck").remove(),[val,width,height]}function wrapContent(target,id){target=$(target),content=target.html(),target.html(""),target.append('<div class="nWrap" id="'+id+'"></div>'),nWrap=target.find(".nWrap"),$(nWrap).html(content);var paddingTop=target.css("padding-top"),paddingRight=target.css("padding-right"),paddingBottom=target.css("padding-bottom"),paddingLeft=target.css("padding-left");paddingTop=parseInt(paddingTop.replace("px",""),10),paddingRight=parseInt(paddingRight.replace("px",""),10),paddingBottom=parseInt(paddingBottom.replace("px",""),10),paddingLeft=parseInt(paddingLeft.replace("px",""),10),target.css({padding:0,width:target.width()+paddingLeft+paddingRight,height:target.height()+paddingTop+paddingBottom,overflow:"hidden",position:"relative"}),nWrap.css({"padding-top":paddingTop,"padding-left":paddingLeft,"padding-bottom":paddingBottom,"padding-right":paddingRight,width:target.width()-paddingLeft-paddingRight,height:target.height()-paddingTop-paddingBottom})}var targets=$(this),counter=0;targets.each(function(){var target=$(this),scrollbars=needScrollbars(target);counter+=1,scrollbars!==0&&(wrapContent(target,counter),applyScrollbars(target,scrollbars[0],scrollbars[1],scrollbars[2]),setScrollFactor(target))});var scrollbarV,scrollbarH,offsetV,offsetH,timeout=!1,currentTarget=0,factorV,factorH,drag=!1,initDrag=!1,dragTarget,nWrapTarget,initScrollX,initScrollY,initX,initY,mouseX,mouseY,over=!1,nWrapOver=!0;return $(".nWrap").mouseover(function(){showOnMouseOver&&$(this).siblings(".scrollbar").stop().animate({opacity:1},200)}),$(".nWrap").mouseout(function(){var target=$(this);!timeout&&!drag&&(timeout=!0,setTimeout(function(){currentTarget=0,timeout=!1,showOnMouseOver&&$(".nbar").stop().animate({opacity:0},400),!showOnMouseOver&&visibleBar&&target.siblings(".scrollbar_bg").stop().animate({opacity:0},400)},1e3))}),$(".nWrap").scroll(function(e){drag||($(currentTarget).attr("id")!==$(this).attr("id")&&(currentTarget=$(this),visibleBar||currentTarget.siblings(".scrollbar").stop().animate({opacity:1},200),factorV=currentTarget.attr("scrollfactorV"),factorH=currentTarget.attr("scrollfactorH"),scrollbarV=currentTarget.siblings(".scrollbar.vertical"),scrollbarH=currentTarget.siblings(".scrollbar.horizontal")),offsetV=currentTarget.scrollTop()*factorV,offsetV=offsetV<2?2:offsetV,scrollbarV.css({top:offsetV}),offsetH=currentTarget.scrollLeft()*factorH,offsetH=offsetH<2?2:offsetH,scrollbarH.css({left:offsetH}),!timeout&&!visibleBar&&(timeout=!0,setTimeout(function(){currentTarget=0,timeout=!1,$(".nbar").stop().animate({opacity:0},400)},1e3)))}),$(".scrollbar").mouseover(function(e){var target=$(this);visibleBg||target.siblings(".scrollbar_bg").stop().animate({opacity:1},400),visibleBar||target.add(target.siblings(".scrollbar")).stop().animate({opacity:1},400),over=!0}),$(".scrollbar").mouseout(function(e){over=!1,!timeout&&!drag&&(timeout=!0,setTimeout(function(){timeout=!1,!over&&!visibleBar?$(".nbar").stop().animate({opacity:0},400):!over&&!visibleBg&&$(".scrollbar_bg").stop().animate({opacity:0},400)},1e3))}),$(".scrollbar").mousedown(function(e){e.preventDefault(),drag=!0,dragTarget=$(this),initX=e.pageX,initY=e.pageY,initScrollX=$(this).position().left,initScrollY=$(this).position().top}),$(document).mousemove(function(e){drag&&!initDrag&&(initDrag=!0,nWrapTarget=dragTarget.siblings(".nWrap"),factorH=nWrapTarget.attr("scrollfactorh"),factorV=nWrapTarget.attr("scrollfactorv")),drag&&(mouseX=e.pageX,mouseY=e.pageY,dragScrollbar(dragTarget,nWrapTarget,e,factorV,factorH,initScrollX,initScrollY,initX,initY,mouseX,mouseY))}),$(document).mouseup(function(e){drag&&(drag=!1,initDrag=!1,!timeout&&!drag&&(timeout=!0,setTimeout(function(){timeout=!1,!over&&!visibleBar?$(".nbar").stop().animate({opacity:0},400):!over&&!visibleBg&&$(".scrollbar_bg").stop().animate({opacity:0},400)},1e3)))}),this.each(function(){var $this=$(this)})}}(jQuery),define("jquery.lionbars",function(){}),window._requirejsLoadingTrace=[],window.renderLoadingTrace=function(){return JSON.stringify(window._requirejsLoadingTrace)},require({baseUrl:window.phoenixJavascriptBasePath,urlArgs:window.localStorage.showDevelopmentFeatures?"bust="+(new Date).getTime():"",paths:{Library:"../Library/","canvas.indicator":"../Library/canvas-indicator/canvas.indicator",chosen:"../Library/chosen/chosen/chosen.jquery.min","jquery.lionbars":"../Library/jquery-lionbars/jQuery.lionbars.0.2.1","jquery.hotkeys":"../Library/jquery-hotkeys/jquery.hotkeys","jquery.popover":"../Library/jquery-popover/jquery.popover","jquery.jcrop":"../Library/jcrop/js/jquery.Jcrop.min","jquery.plupload":"../Library/plupload/js/plupload","jquery.plupload.html5":"../Library/plupload/js/plupload.html5",codemirror:"../Library/codemirror2/lib/codemirror","codemirror.xml":"../Library/codemirror2/mode/xml/xml","codemirror.css":"../Library/codemirror2/mode/css/css","codemirror.javascript":"../Library/codemirror2/mode/javascript/javascript","codemirror.htmlmixed":"../Library/codemirror2/mode/htmlmixed/htmlmixed","jquery.cookie":"../Library/jquery-cookie/jquery.cookie","jquery.dynatree":"../Library/jquery-dynatree/js/jquery.dynatree",hallo:"../Library/hallo/hallo",createjs:"../Library/createjs/create",backbone:"../Library/vie/lib/backboneJS/backbone.min",underscorejs:"../Library/vie/lib/underscoreJS/underscore.min"},shim:{emberjs:{deps:["jquery"],exports:"Ember"},"phoenix/contentmodule":["emberjs"],"jquery.lionbars":["jquery"],"jquery-ui":["jquery"],"jquery.cookie":["jquery"],"jquery.dynatree":["jquery-ui"],"jquery.plupload.html5":["jquery.plupload"],"jquery.plupload":["jquery"],"jquery.popover":["jquery"],"jquery.jcrop":["jquery"],"jquery.hotkeys":["jquery"],underscorejs:{exports:"_"},hallo:["jquery-ui"],backbone:["underscorejs"],"Library/vie/lib/rdfquery/latest/jquery.rdfquery.min":["jquery"],"halloplugins/linkplugin":["hallo"]},locale:"en"},["jquery","phoenix/contentmodule","emberjs","storage","jquery-ui","jquery.lionbars"],function($,ContentModule){window._requirejsLoadingTrace&&window._requirejsLoadingTrace.push("contentmodule-main");var T3=window.T3;T3.Configuration=window.T3Configuration,T3.ContentModule=ContentModule,delete window.T3Configuration,Ember.$(document).ready(function(){T3.ContentModule.bootstrap(),Ext.Direct.on("exception",function(error){T3.Content.Controller.ServerConnection.set("_failedRequest",!0),T3.Common.Notification.error("ExtDirect error: "+error.message)}),ExtDirectInitialization()})}),define("contentmodule-main",function(){})